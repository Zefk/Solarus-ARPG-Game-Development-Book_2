<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Solarus-ARPG-Game-Development-Book_2.html</title>
  <meta name="generator" content="Haroopad 0.13.1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>div.oembedall-githubrepos{border:1px solid #DDD;border-radius:4px;list-style-type:none;margin:0 0 10px;padding:8px 10px 0;font:13.34px/1.4 helvetica,arial,freesans,clean,sans-serif;width:452px;background-color:#fff}div.oembedall-githubrepos .oembedall-body{background:-moz-linear-gradient(center top,#FAFAFA,#EFEFEF);background:-webkit-gradient(linear,left top,left bottom,from(#FAFAFA),to(#EFEFEF));border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-top:1px solid #EEE;margin-left:-10px;margin-top:8px;padding:5px 10px;width:100%}div.oembedall-githubrepos h3{font-size:14px;margin:0;padding-left:18px;white-space:nowrap}div.oembedall-githubrepos p.oembedall-description{color:#444;font-size:12px;margin:0 0 3px}div.oembedall-githubrepos p.oembedall-updated-at{color:#888;font-size:11px;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats{border:none;float:right;font-size:11px;font-weight:700;padding-left:15px;position:relative;z-index:5;margin:0}div.oembedall-githubrepos ul.oembedall-repo-stats li{border:none;color:#666;display:inline-block;list-style-type:none;margin:0!important}div.oembedall-githubrepos ul.oembedall-repo-stats li a{background-color:transparent;border:none;color:#666!important;background-position:5px -2px;background-repeat:no-repeat;border-left:1px solid #DDD;display:inline-block;height:21px;line-height:21px;padding:0 5px 0 23px}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a{border-left:medium none;margin-right:-3px}div.oembedall-githubrepos ul.oembedall-repo-stats li a:hover{background:5px -27px no-repeat #4183C4;color:#FFF!important;text-decoration:none}div.oembedall-githubrepos ul.oembedall-repo-stats li:first-child a:hover{border-bottom-left-radius:3px;border-top-left-radius:3px}ul.oembedall-repo-stats li:last-child a:hover{border-bottom-right-radius:3px;border-top-right-radius:3px}span.oembedall-closehide{background-color:#aaa;border-radius:2px;cursor:pointer;margin-right:3px}div.oembedall-container{margin-top:5px;text-align:left}.oembedall-ljuser{font-weight:700}.oembedall-ljuser img{vertical-align:bottom;border:0;padding-right:1px}.oembedall-stoqembed{border-bottom:1px dotted #999;float:left;overflow:hidden;width:730px;line-height:1;background:#FFF;color:#000;font-family:Arial,Liberation Sans,DejaVu Sans,sans-serif;font-size:80%;text-align:left;margin:0;padding:0}.oembedall-stoqembed a{color:#07C;text-decoration:none;margin:0;padding:0}.oembedall-stoqembed a:hover{text-decoration:underline}.oembedall-stoqembed a:visited{color:#4A6B82}.oembedall-stoqembed h3{font-family:Trebuchet MS,Liberation Sans,DejaVu Sans,sans-serif;font-size:130%;font-weight:700;margin:0;padding:0}.oembedall-stoqembed .oembedall-reputation-score{color:#444;font-size:120%;font-weight:700;margin-right:2px}.oembedall-stoqembed .oembedall-user-info{height:35px;width:185px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-gravatar32{float:left;height:32px;width:32px}.oembedall-stoqembed .oembedall-user-info .oembedall-user-details{float:left;margin-left:5px;overflow:hidden;white-space:nowrap;width:145px}.oembedall-stoqembed .oembedall-question-hyperlink{font-weight:700}.oembedall-stoqembed .oembedall-stats{background:#EEE;margin:0 0 0 7px;padding:4px 7px 6px;width:58px}.oembedall-stoqembed .oembedall-statscontainer{float:left;margin-right:8px;width:86px}.oembedall-stoqembed .oembedall-votes{color:#555;padding:0 0 7px;text-align:center}.oembedall-stoqembed .oembedall-vote-count-post{font-size:240%;color:#808185;display:block;font-weight:700}.oembedall-stoqembed .oembedall-views{color:#999;padding-top:4px;text-align:center}.oembedall-stoqembed .oembedall-status{margin-top:-3px;padding:4px 0;text-align:center;background:#75845C;color:#FFF}.oembedall-stoqembed .oembedall-status strong{color:#FFF;display:block;font-size:140%}.oembedall-stoqembed .oembedall-summary{float:left;width:635px}.oembedall-stoqembed .oembedall-excerpt{line-height:1.2;margin:0;padding:0 0 5px}.oembedall-stoqembed .oembedall-tags{float:left;line-height:18px}.oembedall-stoqembed .oembedall-tags a:hover{text-decoration:none}.oembedall-stoqembed .oembedall-post-tag{background-color:#E0EAF1;border-bottom:1px solid #3E6D8E;border-right:1px solid #7F9FB6;color:#3E6D8E;font-size:90%;line-height:2.4;margin:2px 2px 2px 0;padding:3px 4px;text-decoration:none;white-space:nowrap}.oembedall-stoqembed .oembedall-post-tag:hover{background-color:#3E6D8E;border-bottom:1px solid #37607D;border-right:1px solid #37607D;color:#E0EAF1}.oembedall-stoqembed .oembedall-fr{float:right}.oembedall-stoqembed .oembedall-statsarrow{background-image:url(http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=3);background-repeat:no-repeat;overflow:hidden;background-position:0 -435px;float:right;height:13px;margin-top:12px;width:7px}.oembedall-facebook1{border:1px solid #1A3C6C;padding:0;font:13.34px/1.4 verdana;width:500px}.oembedall-facebook2{background-color:#627add}.oembedall-facebook2 a{color:#e8e8e8;text-decoration:none}.oembedall-facebookBody{background-color:#fff;vertical-align:top;padding:5px}.oembedall-facebookBody .contents{display:inline-block;width:100%}.oembedall-facebookBody div img{float:left;margin-right:5px}div.oembedall-lanyard{-webkit-box-shadow:none;-webkit-transition-delay:0s;-webkit-transition-duration:.4000000059604645s;-webkit-transition-property:width;-webkit-transition-timing-function:cubic-bezier(0.42,0,.58,1);background-attachment:scroll;background-clip:border-box;background-color:transparent;background-image:none;background-origin:padding-box;border-width:0;box-shadow:none;color:#112644;display:block;float:left;font-family:'Trebuchet MS',Trebuchet,sans-serif;font-size:16px;height:253px;line-height:19px;margin:0;max-width:none;min-height:0;outline:#112644 0;overflow-x:visible;overflow-y:visible;padding:0;position:relative;text-align:left;vertical-align:baseline;width:804px}div.oembedall-lanyard .tagline{font-size:1.5em}div.oembedall-lanyard .wrapper{overflow:hidden;clear:both}div.oembedall-lanyard .split{float:left;display:inline}div.oembedall-lanyard .prominent-place .flag:active,div.oembedall-lanyard .prominent-place .flag:focus,div.oembedall-lanyard .prominent-place .flag:hover,div.oembedall-lanyard .prominent-place .flag:link,div.oembedall-lanyard .prominent-place .flag:visited{float:left;display:block;width:48px;height:48px;position:relative;top:-5px;margin-right:10px}div.oembedall-lanyard .place-context{font-size:.889em}div.oembedall-lanyard .prominent-place .sub-place{display:block}div.oembedall-lanyard .prominent-place{font-size:1.125em;line-height:1.1em;font-weight:400}div.oembedall-lanyard .main-date{color:#8CB4E0;font-weight:700;line-height:1.1}div.oembedall-lanyard .first{width:48.57%;margin:0 0 0 2.857%}.mermaid .label{color:#333}.node circle,.node polygon,.node rect{fill:#cde498;stroke:#13540c;stroke-width:1px}.edgePath .path{stroke:green;stroke-width:1.5px}.cluster rect{fill:#cdffb2;rx:40;stroke:#6eaa49;stroke-width:1px}.cluster text{fill:#333}.actor{stroke:#13540c;fill:#cde498}text.actor{fill:#000;stroke:none}.actor-line{stroke:grey}.messageLine0{stroke-width:1.5;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#333}.messageLine1{stroke-width:1.5;stroke-dasharray:"2 2";stroke:#333}#arrowhead{fill:#333}#crosshead path{fill:#333!important;stroke:#333!important}.messageText{fill:#333;stroke:none}.labelBox{stroke:#326932;fill:#cde498}.labelText,.loopText{fill:#000;stroke:none}.loopLine{stroke-width:2;stroke-dasharray:"2 2";marker-end:"url(#arrowhead)";stroke:#326932}.note{stroke:#6eaa49;fill:#fff5ad}.noteText{fill:#000;stroke:none;font-family:'trebuchet ms',verdana,arial;font-size:14px}.section{stroke:none;opacity:.2}.section0,.section2{fill:#6eaa49}.section1,.section3{fill:#fff;opacity:.2}.sectionTitle0,.sectionTitle1,.sectionTitle2,.sectionTitle3{fill:#333}.sectionTitle{text-anchor:start;font-size:11px;text-height:14px}.grid .tick{stroke:lightgrey;opacity:.3;shape-rendering:crispEdges}.grid path{stroke-width:0}.today{fill:none;stroke:red;stroke-width:2px}.task{stroke-width:2}.taskText{text-anchor:middle;font-size:11px}.taskTextOutsideRight{fill:#000;text-anchor:start;font-size:11px}.taskTextOutsideLeft{fill:#000;text-anchor:end;font-size:11px}.taskText0,.taskText1,.taskText2,.taskText3{fill:#fff}.task0,.task1,.task2,.task3{fill:#487e3a;stroke:#13540c}.taskTextOutside0,.taskTextOutside1,.taskTextOutside2,.taskTextOutside3{fill:#000}.active0,.active1,.active2,.active3{fill:#cde498;stroke:#13540c}.activeText0,.activeText1,.activeText2,.activeText3{fill:#000!important}.done0,.done1,.done2,.done3{stroke:grey;fill:lightgrey;stroke-width:2}.doneText0,.doneText1,.doneText2,.doneText3{fill:#000!important}.crit0,.crit1,.crit2,.crit3{stroke:#f88;fill:red;stroke-width:2}.activeCrit0,.activeCrit1,.activeCrit2,.activeCrit3{stroke:#f88;fill:#cde498;stroke-width:2}.doneCrit0,.doneCrit1,.doneCrit2,.doneCrit3{stroke:#f88;fill:lightgrey;stroke-width:2;cursor:pointer;shape-rendering:crispEdges}.activeCritText0,.activeCritText1,.activeCritText2,.activeCritText3,.doneCritText0,.doneCritText1,.doneCritText2,.doneCritText3{fill:#000!important}.titleText{text-anchor:middle;font-size:18px;fill:#000}text{font-family:'trebuchet ms',verdana,arial;font-size:14px}html{height:100%}body{margin:0!important;padding:5px 20px 26px!important;background-color:#fff;font-family:"Lucida Grande","Segoe UI","Apple SD Gothic Neo","Malgun Gothic","Lucida Sans Unicode",Helvetica,Arial,sans-serif;font-size:.9em;overflow-x:hidden;overflow-y:auto}br,h1,h2,h3,h4,h5,h6{clear:both}hr.page{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x;border:0;height:3px;padding:0}hr.underscore{border-top-style:dashed!important}body >:first-child{margin-top:0!important}img.plugin{box-shadow:0 1px 3px rgba(0,0,0,.1);border-radius:3px}iframe{border:0}figure{-webkit-margin-before:0;-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0}kbd{border:1px solid #aaa;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:1px 2px 2px #ddd;-webkit-box-shadow:1px 2px 2px #ddd;box-shadow:1px 2px 2px #ddd;background-color:#f9f9f9;background-image:-moz-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-o-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:-webkit-linear-gradient(top,#eee,#f9f9f9,#eee);background-image:linear-gradient(top,#eee,#f9f9f9,#eee);padding:1px 3px;font-family:inherit;font-size:.85em}.oembeded .oembed_photo{display:inline-block}img[data-echo]{margin:25px 0;width:100px;height:100px;background:url(../img/ajax.gif) center center no-repeat #fff}.spinner{display:inline-block;width:10px;height:10px;margin-bottom:-.1em;border:2px solid rgba(0,0,0,.5);border-top-color:transparent;border-radius:100%;-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}.spinner:after{content:'';display:block;width:0;height:0;position:absolute;top:-6px;left:0;border:4px solid transparent;border-bottom-color:rgba(0,0,0,.5);-webkit-transform:rotate(45deg);transform:rotate(45deg)}@-webkit-keyframes spin{to{-webkit-transform:rotate(360deg)}}@keyframes spin{to{transform:rotate(360deg)}}p.toc{margin:0!important}p.toc ul{padding-left:10px}p.toc>ul{padding:10px;margin:0 10px;display:inline-block;border:1px solid #ededed;border-radius:5px}p.toc li,p.toc ul{list-style-type:none}p.toc li{width:100%;padding:0;overflow:hidden}p.toc li a::after{content:"."}p.toc li a:before{content:"â€¢ "}p.toc h5{text-transform:uppercase}p.toc .title{float:left;padding-right:3px}p.toc .number{margin:0;float:right;padding-left:3px;background:#fff;display:none}input.task-list-item{margin-left:-1.62em}.markdown{font-family:"Hiragino Sans GB","Microsoft YaHei",STHeiti,SimSun,"Lucida Grande","Lucida Sans Unicode","Lucida Sans",'Segoe UI',AppleSDGothicNeo-Medium,'Malgun Gothic',Verdana,Tahoma,sans-serif;padding:20px}.markdown a{text-decoration:none;vertical-align:baseline}.markdown a:hover{text-decoration:underline}.markdown h1{font-size:2.2em;font-weight:700;margin:1.5em 0 1em}.markdown h2{font-size:1.8em;font-weight:700;margin:1.275em 0 .85em}.markdown h3{font-size:1.6em;font-weight:700;margin:1.125em 0 .75em}.markdown h4{font-size:1.4em;font-weight:700;margin:.99em 0 .66em}.markdown h5{font-size:1.2em;font-weight:700;margin:.855em 0 .57em}.markdown h6{font-size:1em;font-weight:700;margin:.75em 0 .5em}.markdown h1+p,.markdown h1:first-child,.markdown h2+p,.markdown h2:first-child,.markdown h3+p,.markdown h3:first-child,.markdown h4+p,.markdown h4:first-child,.markdown h5+p,.markdown h5:first-child,.markdown h6+p,.markdown h6:first-child{margin-top:0}.markdown hr{border:1px solid #ccc}.markdown p{margin:1em 0;word-wrap:break-word}.markdown ol{list-style-type:decimal}.markdown li{display:list-item;line-height:1.4em}.markdown blockquote{margin:1em 20px}.markdown blockquote>:first-child{margin-top:0}.markdown blockquote>:last-child{margin-bottom:0}.markdown blockquote cite:before{content:'\2014 \00A0'}.markdown .code{border-radius:3px;word-wrap:break-word}.markdown pre{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;overflow:auto;padding:.5em}.markdown pre code{border:0;display:block}.markdown pre>code{font-family:Consolas,Inconsolata,Courier,monospace;font-weight:700;white-space:pre;margin:0}.markdown code{border-radius:3px;word-wrap:break-word;border:1px solid #ccc;padding:0 5px;margin:0 2px}.markdown img{max-width:100%}.markdown mark{color:#000;background-color:#fcf8e3}.markdown table{padding:0;border-collapse:collapse;border-spacing:0;margin-bottom:16px}.markdown table tr td,.markdown table tr th{border:1px solid #ccc;margin:0;padding:6px 13px}.markdown table tr th{font-weight:700}.markdown table tr th>:first-child{margin-top:0}.markdown table tr th>:last-child{margin-bottom:0}.markdown table tr td>:first-child{margin-top:0}.markdown table tr td>:last-child{margin-bottom:0}.metro-vibes-dark{padding:20px;color:#fff;font-size:15px;background:#5c5146;-webkit-font-smoothing:antialiased}.metro-vibes-dark a{color:#e5b931}.metro-vibes-dark a:hover{color:#ebc85e}.metro-vibes-dark h1,.metro-vibes-dark h2,.metro-vibes-dark h3,.metro-vibes-dark h4,.metro-vibes-dark h5{font-weight:400;letter-spacing:-1px}.metro-vibes-dark h2{border-bottom:1px solid #796a5c;line-height:1.7em}.metro-vibes-dark h6{color:#777}.metro-vibes-dark hr{border:1px solid #3f3730}.metro-vibes-dark p{line-height:19px}.metro-vibes-dark p>code{color:#e86741;font-size:.9em}.metro-vibes-dark pre>code{font-size:1em;letter-spacing:-1px;font-weight:400}.metro-vibes-dark blockquote{border-left:4px solid #4e443b;padding:0 15px;font-style:italic;color:#e86741}.metro-vibes-dark table{background-color:#564c42}.metro-vibes-dark table tr td,.metro-vibes-dark table tr th{border:1px solid #3f3730}.metro-vibes-dark table tr:nth-child(2n){background-color:#4e443b}.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.diff .hljs-header,.hljs-comment,.hljs-doctype,.hljs-javadoc,.hljs-pi,.lisp .hljs-string{color:#93a1a1}.css .hljs-tag,.hljs-addition,.hljs-keyword,.hljs-request,.hljs-status,.hljs-winutils,.method,.nginx .hljs-title{color:#859900}.hljs-command,.hljs-dartdoc,.hljs-hexcolor,.hljs-link_url,.hljs-number,.hljs-phpdoc,.hljs-regexp,.hljs-rules .hljs-value,.hljs-string,.hljs-tag .hljs-value,.tex .hljs-formula{color:#2aa198}.css .hljs-function,.hljs-built_in,.hljs-chunk,.hljs-decorator,.hljs-id,.hljs-identifier,.hljs-localvars,.hljs-title,.vhdl .hljs-literal{color:#268bd2}.hljs-attribute,.hljs-class .hljs-title,.hljs-constant,.hljs-link_reference,.hljs-parent,.hljs-type,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number{color:#b58900}.css .hljs-pseudo,.diff .hljs-change,.hljs-attr_selector,.hljs-cdata,.hljs-header,.hljs-pragma,.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-shebang,.hljs-special,.hljs-subst,.hljs-symbol,.hljs-symbol .hljs-string{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}.MathJax_Hover_Frame{border-radius:.25em;-webkit-border-radius:.25em;-moz-border-radius:.25em;-khtml-border-radius:.25em;box-shadow:0 0 15px #83A;-webkit-box-shadow:0 0 15px #83A;-moz-box-shadow:0 0 15px #83A;-khtml-box-shadow:0 0 15px #83A;border:1px solid #A6D!important;display:inline-block;position:absolute}.MathJax_Hover_Arrow{position:absolute;width:15px;height:11px;cursor:pointer}#MathJax_About{position:fixed;left:50%;width:auto;text-align:center;border:3px outset;padding:1em 2em;background-color:#DDD;color:#000;cursor:default;font-family:message-box;font-size:120%;font-style:normal;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:15px;-webkit-border-radius:15px;-moz-border-radius:15px;-khtml-border-radius:15px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_Menu{position:absolute;background-color:#fff;color:#000;width:auto;padding:5px 0;border:1px solid #CCC;margin:0;cursor:default;font:menu;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;z-index:201;border-radius:5px;-webkit-border-radius:5px;-moz-border-radius:5px;-khtml-border-radius:5px;box-shadow:0 10px 20px gray;-webkit-box-shadow:0 10px 20px gray;-moz-box-shadow:0 10px 20px gray;-khtml-box-shadow:0 10px 20px gray;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}.MathJax_MenuItem{padding:1px 2em;background:0 0}.MathJax_MenuArrow{position:absolute;right:.5em;color:#666}.MathJax_MenuActive .MathJax_MenuArrow{color:#fff}.MathJax_MenuArrow.RTL{left:.5em;right:auto}.MathJax_MenuCheck{position:absolute;left:.7em}.MathJax_MenuCheck.RTL{right:.7em;left:auto}.MathJax_MenuRadioCheck{position:absolute;left:.7em}.MathJax_MenuRadioCheck.RTL{right:.7em;left:auto}.MathJax_MenuLabel{padding:1px 2em 3px 1.33em;font-style:italic}.MathJax_MenuRule{border-top:1px solid #DDD;margin:4px 3px}.MathJax_MenuDisabled{color:GrayText}.MathJax_MenuActive{background-color:#606872;color:#fff}.MathJax_Menu_Close{position:absolute;width:31px;height:31px;top:-15px;left:-15px}#MathJax_Zoom{position:absolute;background-color:#F0F0F0;overflow:auto;display:block;z-index:301;padding:.5em;border:1px solid #000;margin:0;font-weight:400;font-style:normal;text-align:left;text-indent:0;text-transform:none;line-height:normal;letter-spacing:normal;word-spacing:normal;word-wrap:normal;white-space:nowrap;float:none;box-shadow:5px 5px 15px #AAA;-webkit-box-shadow:5px 5px 15px #AAA;-moz-box-shadow:5px 5px 15px #AAA;-khtml-box-shadow:5px 5px 15px #AAA;filter:progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}#MathJax_ZoomOverlay{position:absolute;left:0;top:0;z-index:300;display:inline-block;width:100%;height:100%;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}#MathJax_ZoomFrame{position:relative;display:inline-block;height:0;width:0}#MathJax_ZoomEventTrap{position:absolute;left:0;top:0;z-index:302;display:inline-block;border:0;padding:0;margin:0;background-color:#fff;opacity:0;filter:alpha(opacity=0)}.MathJax_Preview{color:#888}#MathJax_Message{position:fixed;left:1px;bottom:2px;background-color:#E6E6E6;border:1px solid #959595;margin:0;padding:2px 8px;z-index:102;color:#000;font-size:80%;width:auto;white-space:nowrap}#MathJax_MSIE_Frame{position:absolute;top:0;left:0;width:0;z-index:101;border:0;margin:0;padding:0}.MathJax_Error{color:#C00;font-style:italic}footer{position:fixed;font-size:.8em;text-align:right;bottom:0;margin-left:-25px;height:20px;width:100%}</style>
</head>
<body class="markdown metro-vibes-dark">
<p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Book%20Covers/Book_Cover.png" alt="Book%20Covers/Book_Cover.png"></p><h2 id="table-of-contents"><a name="table-of-contents" href="#table-of-contents"></a>Table of Contents</h2><p class="toc" style="undefined"></p><ul>
<li><ul>
<li><span class="title">
<a href="#table-of-contents" title="Table of Contents">Table of Contents</a>
</span>
<!--span class="number">
0
</span-->
</li>
<li><span class="title">
<a href="#reference-i:-rgb-color-reference" title="Reference I: RGB Color Reference">Reference I: RGB Color Reference</a>
</span>
<!--span class="number">
1
</span-->
</li>
<li><span class="title">
<a href="#glossary:-game-terms" title="Glossary: Game Terms">Glossary: Game Terms</a>
</span>
<!--span class="number">
2
</span-->
</li>
<li><span class="title">
<a href="#chapter-1:-about-solarus,-basic-history,-download-instructions,-shortcuts,-and-documentation" title="Chapter 1: About Solarus, Basic History, Download Instructions, Shortcuts, and Documentation">Chapter 1: About Solarus, Basic History, Download Instructions, Shortcuts, and Documentation</a>
</span>
<!--span class="number">
3
</span-->
<ul>
<li><span class="title">
<a href="#about" title="About">About</a>
</span>
<!--span class="number">
4
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#basic-solarus-history" title="Basic Solarus History">Basic Solarus History</a>
</span>
<!--span class="number">
5
</span-->
</li>
<li><span class="title">
<a href="#download-the-solarus-arpg-engine" title="Download the Solarus ARPG Engine">Download the Solarus ARPG Engine</a>
</span>
<!--span class="number">
6
</span-->
</li>
<li><span class="title">
<a href="#shortcuts" title="Shortcuts">Shortcuts</a>
</span>
<!--span class="number">
7
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#documentation-reading" title="Documentation Reading">Documentation Reading</a>
</span>
<!--span class="number">
8
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#normal-functions" title="Normal Functions">Normal Functions</a>
</span>
<!--span class="number">
9
</span-->
</li>
<li><span class="title">
<a href="#method-functions" title="Method Functions">Method Functions</a>
</span>
<!--span class="number">
10
</span-->
</li>
<li><span class="title">
<a href="#event-functions" title="Event Functions">Event Functions</a>
</span>
<!--span class="number">
11
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-2:-free-graphics,-audio,-scripts,-and-basic-free-license-information" title="Chapter 2: Free Graphics, Audio, Scripts, and Basic Free License Information">Chapter 2: Free Graphics, Audio, Scripts, and Basic Free License Information</a>
</span>
<!--span class="number">
12
</span-->
<ul>
<li><span class="title">
<a href="#free-graphics-&amp;-audio" title="Free Graphics &amp; Audio">Free Graphics &amp; Audio</a>
</span>
<!--span class="number">
13
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#sample-quest" title="Sample Quest">Sample Quest</a>
</span>
<!--span class="number">
14
</span-->
</li>
<li><span class="title">
<a href="#children-of-solarus" title="Children of Solarus">Children of Solarus</a>
</span>
<!--span class="number">
15
</span-->
</li>
<li><span class="title">
<a href="#faryolica-world" title="Faryolica World">Faryolica World</a>
</span>
<!--span class="number">
16
</span-->
</li>
<li><span class="title">
<a href="#opengameart" title="OpenGameArt">OpenGameArt</a>
</span>
<!--span class="number">
17
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#scripts" title="Scripts">Scripts</a>
</span>
<!--span class="number">
18
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#solarus-fan-games" title="Solarus Fan Games">Solarus Fan Games</a>
</span>
<!--span class="number">
19
</span-->
</li>
<li><span class="title">
<a href="#solarus-forum-scripts" title="Solarus Forum Scripts">Solarus Forum Scripts</a>
</span>
<!--span class="number">
20
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#solarus-help-guide" title="Solarus Help Guide">Solarus Help Guide</a>
</span>
<!--span class="number">
21
</span-->
</li>
<li><span class="title">
<a href="#basic-free-license-information" title="Basic Free License Information">Basic Free License Information</a>
</span>
<!--span class="number">
22
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-3:-moving-around-the-solarus-editor" title="Chapter 3: Moving Around The Solarus Editor">Chapter 3: Moving Around The Solarus Editor</a>
</span>
<!--span class="number">
23
</span-->
<ul>
<li><span class="title">
<a href="#first-appearance" title="First Appearance">First Appearance</a>
</span>
<!--span class="number">
24
</span-->
</li>
<li><span class="title">
<a href="#file" title="File">File</a>
</span>
<!--span class="number">
25
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#file-&gt;-quest-properties" title="File > Quest Properties">File &gt; Quest Properties</a>
</span>
<!--span class="number">
26
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#edit-menu" title="Edit Menu">Edit Menu</a>
</span>
<!--span class="number">
27
</span-->
</li>
<li><span class="title">
<a href="#view-menu" title="View Menu">View Menu</a>
</span>
<!--span class="number">
28
</span-->
</li>
<li><span class="title">
<a href="#run-menu" title="Run Menu">Run Menu</a>
</span>
<!--span class="number">
29
</span-->
</li>
<li><span class="title">
<a href="#audio-menu" title="Audio Menu">Audio Menu</a>
</span>
<!--span class="number">
30
</span-->
</li>
<li><span class="title">
<a href="#tools-menu" title="Tools Menu">Tools Menu</a>
</span>
<!--span class="number">
31
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#tools-&gt;-options" title="Tools > Options">Tools &gt; Options</a>
</span>
<!--span class="number">
32
</span-->
</li>
<li><span class="title">
<a href="#tools-&gt;-options-&gt;-general-tab" title="Tools > Options > General Tab">Tools &gt; Options &gt; General Tab</a>
</span>
<!--span class="number">
33
</span-->
</li>
<li><span class="title">
<a href="#tools-&gt;-options-&gt;-text-editor-tab" title="Tools > Options > Text Editor Tab">Tools &gt; Options &gt; Text Editor Tab</a>
</span>
<!--span class="number">
34
</span-->
</li>
<li><span class="title">
<a href="#tools-&gt;-options-&gt;-map-editor-tab" title="Tools > Options > Map Editor Tab">Tools &gt; Options &gt; Map Editor Tab</a>
</span>
<!--span class="number">
35
</span-->
</li>
<li><span class="title">
<a href="#tools-&gt;-options-&gt;-sprite-editor-tab" title="Tools > Options > Sprite Editor Tab">Tools &gt; Options &gt; Sprite Editor Tab</a>
</span>
<!--span class="number">
36
</span-->
</li>
<li><span class="title">
<a href="#tools-&gt;-options-&gt;-tileset-editor-tab" title="Tools > Options > Tileset Editor Tab">Tools &gt; Options &gt; Tileset Editor Tab</a>
</span>
<!--span class="number">
37
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#help-menu" title="Help Menu">Help Menu</a>
</span>
<!--span class="number">
38
</span-->
</li>
<li><span class="title">
<a href="#icon-shortcut-bar" title="Icon Shortcut Bar">Icon Shortcut Bar</a>
</span>
<!--span class="number">
39
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list" title="Resource Manager List">Resource Manager List</a>
</span>
<!--span class="number">
40
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#resource-manager-list-&gt;-tileset-editor" title="Resource Manager List > Tileset Editor">Resource Manager List &gt; Tileset Editor</a>
</span>
<!--span class="number">
41
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-sprite-editor" title="Resource Manager List > Sprite Editor">Resource Manager List &gt; Sprite Editor</a>
</span>
<!--span class="number">
42
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-sound-player" title="Resource Manager List > Sound Player">Resource Manager List &gt; Sound Player</a>
</span>
<!--span class="number">
43
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-text-editor" title="Resource Manager List > Text Editor">Resource Manager List &gt; Text Editor</a>
</span>
<!--span class="number">
44
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-music-player" title="Resource Manager List > Music Player">Resource Manager List &gt; Music Player</a>
</span>
<!--span class="number">
45
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-map-editor" title="Resource Manager List > Map Editor">Resource Manager List &gt; Map Editor</a>
</span>
<!--span class="number">
46
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-map-editor-&gt;-entities" title="Resource Manager List > Map Editor > Entities">Resource Manager List &gt; Map Editor &gt; Entities</a>
</span>
<!--span class="number">
47
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-map-editor-&gt;-drag" title="Resource Manager List > Map Editor > Drag">Resource Manager List &gt; Map Editor &gt; Drag</a>
</span>
<!--span class="number">
48
</span-->
</li>
<li><span class="title">
<a href="#resource-manager-list-&gt;-language-&gt;-en-&gt;-dialog-editor" title="Resource Manager List > Language > en > Dialog Editor">Resource Manager List &gt; Language &gt; en &gt; Dialog Editor</a>
</span>
<!--span class="number">
49
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-4:-using-the-sprite-editor" title="Chapter 4: Using The Sprite Editor">Chapter 4: Using The Sprite Editor</a>
</span>
<!--span class="number">
50
</span-->
<ul>
<li><span class="title">
<a href="#resource-manager-&gt;-sprites-&gt;-sprite-editor" title="Resource Manager > Sprites > Sprite Editor">Resource Manager &gt; Sprites &gt; Sprite Editor</a>
</span>
<!--span class="number">
51
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#sprite-properties" title="Sprite Properties">Sprite Properties</a>
</span>
<!--span class="number">
52
</span-->
</li>
<li><span class="title">
<a href="#animation-properties" title="Animation Properties">Animation Properties</a>
</span>
<!--span class="number">
53
</span-->
</li>
<li><span class="title">
<a href="#direction-order" title="Direction Order">Direction Order</a>
</span>
<!--span class="number">
54
</span-->
</li>
<li><span class="title">
<a href="#direction-properties" title="Direction Properties">Direction Properties</a>
</span>
<!--span class="number">
55
</span-->
</li>
<li><span class="title">
<a href="#size" title="Size">Size</a>
</span>
<!--span class="number">
56
</span-->
</li>
<li><span class="title">
<a href="#position" title="Position">Position</a>
</span>
<!--span class="number">
57
</span-->
</li>
<li><span class="title">
<a href="#origin" title="Origin">Origin</a>
</span>
<!--span class="number">
58
</span-->
</li>
<li><span class="title">
<a href="#frames" title="Frames">Frames</a>
</span>
<!--span class="number">
59
</span-->
</li>
<li><span class="title">
<a href="#columns" title="Columns">Columns</a>
</span>
<!--span class="number">
60
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#setting-up-a-sprite" title="Setting up a Sprite">Setting up a Sprite</a>
</span>
<!--span class="number">
61
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#making-a-sprite" title="Making a Sprite">Making a Sprite</a>
</span>
<!--span class="number">
62
</span-->
</li>
<li><span class="title">
<a href="#name-sprite" title="Name Sprite">Name Sprite</a>
</span>
<!--span class="number">
63
</span-->
</li>
<li><span class="title">
<a href="#create-animation" title="Create Animation">Create Animation</a>
</span>
<!--span class="number">
64
</span-->
</li>
<li><span class="title">
<a href="#name-animation" title="Name Animation">Name Animation</a>
</span>
<!--span class="number">
65
</span-->
</li>
<li><span class="title">
<a href="#load-sprite-image" title="Load Sprite Image">Load Sprite Image</a>
</span>
<!--span class="number">
66
</span-->
</li>
<li><span class="title">
<a href="#making-directions---drag-click-release" title="Making Directions - Drag Click Release">Making Directions - Drag Click Release</a>
</span>
<!--span class="number">
67
</span-->
</li>
<li><span class="title">
<a href="#set-frame-delay-&amp;-loop" title="Set Frame Delay &amp; Loop">Set Frame Delay &amp; Loop</a>
</span>
<!--span class="number">
68
</span-->
</li>
<li><span class="title">
<a href="#set-columns,-rows,-&amp;-origin" title="Set Columns, Rows, &amp; Origin">Set Columns, Rows, &amp; Origin</a>
</span>
<!--span class="number">
69
</span-->
</li>
<li><span class="title">
<a href="#show-origin" title="Show Origin">Show Origin</a>
</span>
<!--span class="number">
70
</span-->
</li>
<li><span class="title">
<a href="#zoom-on-sprite-preview" title="Zoom On Sprite Preview">Zoom On Sprite Preview</a>
</span>
<!--span class="number">
71
</span-->
</li>
<li><span class="title">
<a href="#zoom-on-sprite-animation-direction-setup-area" title="Zoom On Sprite Animation Direction Setup Area">Zoom On Sprite Animation Direction Setup Area</a>
</span>
<!--span class="number">
72
</span-->
</li>
<li><span class="title">
<a href="#previous-&amp;-next-sprite-frame" title="Previous &amp; Next Sprite Frame">Previous &amp; Next Sprite Frame</a>
</span>
<!--span class="number">
73
</span-->
</li>
<li><span class="title">
<a href="#last-&amp;-first-frame-+-play-&amp;-stop" title="Last &amp; First Frame + Play &amp; Stop">Last &amp; First Frame + Play &amp; Stop</a>
</span>
<!--span class="number">
74
</span-->
</li>
<li><span class="title">
<a href="#dat-file-editing" title="Dat File Editing">Dat File Editing</a>
</span>
<!--span class="number">
75
</span-->
</li>
<li><span class="title">
<a href="#bounding-box-or-hitbox" title="Bounding box or Hitbox">Bounding box or Hitbox</a>
</span>
<!--span class="number">
76
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#basic-sprite-information" title="Basic Sprite Information">Basic Sprite Information</a>
</span>
<!--span class="number">
77
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#sword" title="Sword">Sword</a>
</span>
<!--span class="number">
78
</span-->
</li>
<li><span class="title">
<a href="#shield" title="Shield">Shield</a>
</span>
<!--span class="number">
79
</span-->
</li>
<li><span class="title">
<a href="#npc" title="NPC">NPC</a>
</span>
<!--span class="number">
80
</span-->
</li>
<li><span class="title">
<a href="#enemy" title="Enemy">Enemy</a>
</span>
<!--span class="number">
81
</span-->
</li>
<li><span class="title">
<a href="#hero" title="Hero">Hero</a>
</span>
<!--span class="number">
82
</span-->
</li>
<li><span class="title">
<a href="#destructible" title="Destructible">Destructible</a>
</span>
<!--span class="number">
83
</span-->
</li>
<li><span class="title">
<a href="#bomb" title="bomb">bomb</a>
</span>
<!--span class="number">
84
</span-->
</li>
<li><span class="title">
<a href="#block" title="block">block</a>
</span>
<!--span class="number">
85
</span-->
</li>
<li><span class="title">
<a href="#chest" title="chest">chest</a>
</span>
<!--span class="number">
86
</span-->
</li>
<li><span class="title">
<a href="#explosion" title="explosion">explosion</a>
</span>
<!--span class="number">
87
</span-->
</li>
<li><span class="title">
<a href="#shadow" title="shadow">shadow</a>
</span>
<!--span class="number">
88
</span-->
</li>
<li><span class="title">
<a href="#crystal_block" title="crystal_block">crystal_block</a>
</span>
<!--span class="number">
89
</span-->
</li>
<li><span class="title">
<a href="#crystal" title="crystal">crystal</a>
</span>
<!--span class="number">
90
</span-->
</li>
<li><span class="title">
<a href="#switch" title="switch">switch</a>
</span>
<!--span class="number">
91
</span-->
</li>
<li><span class="title">
<a href="#arrow" title="arrow">arrow</a>
</span>
<!--span class="number">
92
</span-->
</li>
<li><span class="title">
<a href="#star" title="star">star</a>
</span>
<!--span class="number">
93
</span-->
</li>
<li><span class="title">
<a href="#ground1" title="ground1">ground1</a>
</span>
<!--span class="number">
94
</span-->
</li>
<li><span class="title">
<a href="#ground2" title="ground2">ground2</a>
</span>
<!--span class="number">
95
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-5:-using-the-tileset-editor" title="Chapter 5: Using The Tileset Editor">Chapter 5: Using The Tileset Editor</a>
</span>
<!--span class="number">
96
</span-->
<ul>
<li><span class="title">
<a href="#resource-manager-&gt;-tileset-&gt;-tileset-editor" title="Resource Manager > Tileset > Tileset Editor">Resource Manager &gt; Tileset &gt; Tileset Editor</a>
</span>
<!--span class="number">
97
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#selection-properties" title="Selection Properties">Selection Properties</a>
</span>
<!--span class="number">
98
</span-->
</li>
<li><span class="title">
<a href="#rename-id" title="Rename ID">Rename ID</a>
</span>
<!--span class="number">
99
</span-->
</li>
<li><span class="title">
<a href="#ground" title="Ground">Ground</a>
</span>
<!--span class="number">
100
</span-->
</li>
<li><span class="title">
<a href="#repeatable" title="Repeatable">Repeatable</a>
</span>
<!--span class="number">
101
</span-->
</li>
<li><span class="title">
<a href="#animation" title="Animation">Animation</a>
</span>
<!--span class="number">
102
</span-->
</li>
<li><span class="title">
<a href="#making-tile-patterns" title="Making Tile Patterns">Making Tile Patterns</a>
</span>
<!--span class="number">
103
</span-->
</li>
<li><span class="title">
<a href="#8x8-formatting" title="8x8 Formatting">8x8 Formatting</a>
</span>
<!--span class="number">
104
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-6:-very-basic-lua-scripting,-tutorial-point-lua-pdf,-ways-to-load-script,-and-lua-console" title="Chapter 6: Very Basic Lua Scripting, Tutorial Point Lua PDF, ways to load script, and Lua console">Chapter 6: Very Basic Lua Scripting, Tutorial Point Lua PDF, ways to load script, and Lua console</a>
</span>
<!--span class="number">
105
</span-->
<ul>
<li><span class="title">
<a href="#very-basic-lua-scripting" title="Very Basic Lua Scripting">Very Basic Lua Scripting</a>
</span>
<!--span class="number">
106
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#zerobrane-ide" title="ZeroBrane IDE">ZeroBrane IDE</a>
</span>
<!--span class="number">
107
</span-->
</li>
<li><span class="title">
<a href="#using-zerobrane" title="Using ZeroBrane">Using ZeroBrane</a>
</span>
<!--span class="number">
108
</span-->
</li>
<li><span class="title">
<a href="#whitespace" title="Whitespace">Whitespace</a>
</span>
<!--span class="number">
109
</span-->
</li>
<li><span class="title">
<a href="#variables" title="Variables">Variables</a>
</span>
<!--span class="number">
110
</span-->
</li>
<li><span class="title">
<a href="#identifiers" title="Identifiers">Identifiers</a>
</span>
<!--span class="number">
111
</span-->
</li>
<li><span class="title">
<a href="#keywords" title="Keywords">Keywords</a>
</span>
<!--span class="number">
112
</span-->
</li>
<li><span class="title">
<a href="#data-types" title="Data Types">Data Types</a>
</span>
<!--span class="number">
113
</span-->
</li>
<li><span class="title">
<a href="#relational-operators" title="Relational Operators">Relational Operators</a>
</span>
<!--span class="number">
114
</span-->
</li>
<li><span class="title">
<a href="#logical-operators" title="Logical Operators">Logical Operators</a>
</span>
<!--span class="number">
115
</span-->
</li>
<li><span class="title">
<a href="#arithmetic-operators" title="Arithmetic Operators">Arithmetic Operators</a>
</span>
<!--span class="number">
116
</span-->
</li>
<li><span class="title">
<a href="#other-operators" title="Other Operators">Other Operators</a>
</span>
<!--span class="number">
117
</span-->
</li>
<li><span class="title">
<a href="#escape-sequences" title="Escape Sequences">Escape Sequences</a>
</span>
<!--span class="number">
118
</span-->
</li>
<li><span class="title">
<a href="#repetitions-pattern-modifiers" title="Repetitions Pattern Modifiers">Repetitions Pattern Modifiers</a>
</span>
<!--span class="number">
119
</span-->
</li>
<li><span class="title">
<a href="#character-pattern-classes" title="Character Pattern Classes">Character Pattern Classes</a>
</span>
<!--span class="number">
120
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#common-variable-naming-rules" title="Common Variable Naming Rules">Common Variable Naming Rules</a>
</span>
<!--span class="number">
121
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#clear-variable-name" title="Clear Variable Name">Clear Variable Name</a>
</span>
<!--span class="number">
122
</span-->
</li>
<li><span class="title">
<a href="#variable-length" title="Variable Length">Variable Length</a>
</span>
<!--span class="number">
123
</span-->
</li>
<li><span class="title">
<a href="#uppercase-vs-lowercase-variables" title="UPPERCASE vs lowercase Variables">UPPERCASE vs lowercase Variables</a>
</span>
<!--span class="number">
124
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#lua-programming" title="Lua Programming">Lua Programming</a>
</span>
<!--span class="number">
125
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#comments" title="Comments">Comments</a>
</span>
<!--span class="number">
126
</span-->
</li>
<li><span class="title">
<a href="#print-text" title="Print Text">Print Text</a>
</span>
<!--span class="number">
127
</span-->
</li>
<li><span class="title">
<a href="#declaring-variables" title="Declaring variables">Declaring variables</a>
</span>
<!--span class="number">
128
</span-->
</li>
<li><span class="title">
<a href="#tables" title="Tables">Tables</a>
</span>
<!--span class="number">
129
</span-->
</li>
<li><span class="title">
<a href="#arrays" title="Arrays">Arrays</a>
</span>
<!--span class="number">
130
</span-->
</li>
<li><span class="title">
<a href="#if-statement-&amp;-operators" title="If Statement &amp; Operators">If Statement &amp; Operators</a>
</span>
<!--span class="number">
131
</span-->
</li>
<li><span class="title">
<a href="#goto-statement" title="Goto Statement">Goto Statement</a>
</span>
<!--span class="number">
132
</span-->
</li>
<li><span class="title">
<a href="#loops-types" title="Loops Types">Loops Types</a>
</span>
<!--span class="number">
133
</span-->
</li>
<li><span class="title">
<a href="#math" title="Math">Math</a>
</span>
<!--span class="number">
134
</span-->
</li>
<li><span class="title">
<a href="#strings" title="Strings">Strings</a>
</span>
<!--span class="number">
135
</span-->
</li>
<li><span class="title">
<a href="#tonumber()" title="tonumber()">tonumber()</a>
</span>
<!--span class="number">
136
</span-->
</li>
<li><span class="title">
<a href="#string.format()" title="string.format()">string.format()</a>
</span>
<!--span class="number">
137
</span-->
</li>
<li><span class="title">
<a href="#string.len()-or-:len()" title="string.len() or :len()">string.len() or :len()</a>
</span>
<!--span class="number">
138
</span-->
</li>
<li><span class="title">
<a href="#string.reverse()-or-:reverse()" title="string.reverse() or :reverse()">string.reverse() or :reverse()</a>
</span>
<!--span class="number">
139
</span-->
</li>
<li><span class="title">
<a href="#string.sub()-or-:sub()" title="string.sub() or :sub()">string.sub() or :sub()</a>
</span>
<!--span class="number">
140
</span-->
</li>
<li><span class="title">
<a href="#string.gmatch(string,-pattern)-or-string:gmatch(pattern)" title="string.gmatch(string, pattern) or string:gmatch(pattern)">string.gmatch(string, pattern) or string:gmatch(pattern)</a>
</span>
<!--span class="number">
141
</span-->
</li>
<li><span class="title">
<a href="#clear-table" title="Clear Table">Clear Table</a>
</span>
<!--span class="number">
142
</span-->
</li>
<li><span class="title">
<a href="#math/arithmetic-in-an-if-statement" title="Math/Arithmetic in an if statement">Math/Arithmetic in an if statement</a>
</span>
<!--span class="number">
143
</span-->
</li>
<li><span class="title">
<a href="#simple-table.concat()" title="Simple table.concat()">Simple table.concat()</a>
</span>
<!--span class="number">
144
</span-->
</li>
<li><span class="title">
<a href="#table.concat()-and-table.insert()" title="table.concat() and table.insert()">table.concat() and table.insert()</a>
</span>
<!--span class="number">
145
</span-->
</li>
<li><span class="title">
<a href="#table.sort" title="table.sort">table.sort</a>
</span>
<!--span class="number">
146
</span-->
</li>
<li><span class="title">
<a href="#defining-a-function" title="Defining a function">Defining a function</a>
</span>
<!--span class="number">
147
</span-->
</li>
<li><span class="title">
<a href="#pairs()-and-ipairs()" title="pairs() and ipairs()">pairs() and ipairs()</a>
</span>
<!--span class="number">
148
</span-->
</li>
<li><span class="title">
<a href="#associative-table" title="Associative table">Associative table</a>
</span>
<!--span class="number">
149
</span-->
</li>
<li><span class="title">
<a href="#error-handling" title="Error Handling">Error Handling</a>
</span>
<!--span class="number">
150
</span-->
</li>
<li><span class="title">
<a href="#declaring-multiple-variables-on-one-line" title="Declaring Multiple Variables On One Line">Declaring Multiple Variables On One Line</a>
</span>
<!--span class="number">
151
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#coroutine" title="Coroutine">Coroutine</a>
</span>
<!--span class="number">
152
</span-->
<ul>
<li><span class="title">
<a href="#make-a-coroutine" title="Make a Coroutine">Make a Coroutine</a>
</span>
<!--span class="number">
153
</span-->
</li>
<li><span class="title">
<a href="#coroutine-yield" title="Coroutine Yield">Coroutine Yield</a>
</span>
<!--span class="number">
154
</span-->
</li>
<li><span class="title">
<a href="#coroutine-resume" title="Coroutine Resume">Coroutine Resume</a>
</span>
<!--span class="number">
155
</span-->
</li>
<li><span class="title">
<a href="#tasks-between-resume" title="Tasks Between Resume">Tasks Between Resume</a>
</span>
<!--span class="number">
156
</span-->
</li>
<li><span class="title">
<a href="#coroutine-status" title="Coroutine Status">Coroutine Status</a>
</span>
<!--span class="number">
157
</span-->
</li>
<li><span class="title">
<a href="#coroutine-callback" title="Coroutine Callback">Coroutine Callback</a>
</span>
<!--span class="number">
158
</span-->
</li>
<li><span class="title">
<a href="#coroutine-wrap-shortcut" title="Coroutine Wrap Shortcut">Coroutine Wrap Shortcut</a>
</span>
<!--span class="number">
159
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#module" title="Module">Module</a>
</span>
<!--span class="number">
160
</span-->
<ul>
<li><span class="title">
<a href="#make-a-table" title="Make a table">Make a table</a>
</span>
<!--span class="number">
161
</span-->
</li>
<li><span class="title">
<a href="#add-tasks" title="Add Tasks">Add Tasks</a>
</span>
<!--span class="number">
162
</span-->
</li>
<li><span class="title">
<a href="#require-module" title="Require Module">Require Module</a>
</span>
<!--span class="number">
163
</span-->
</li>
<li><span class="title">
<a href="#global-module-table-issue" title="Global Module Table Issue">Global Module Table Issue</a>
</span>
<!--span class="number">
164
</span-->
</li>
<li><span class="title">
<a href="#module-shortcut" title="Module Shortcut">Module Shortcut</a>
</span>
<!--span class="number">
165
</span-->
</li>
<li><span class="title">
<a href="#assign-new-variable" title="Assign New Variable">Assign New Variable</a>
</span>
<!--span class="number">
166
</span-->
</li>
<li><span class="title">
<a href="#dot-vs-colon" title="Dot vs Colon">Dot vs Colon</a>
</span>
<!--span class="number">
167
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#function-objects" title="Function Objects">Function Objects</a>
</span>
<!--span class="number">
168
</span-->
<ul>
<li><span class="title">
<a href="#almost-method" title="Almost Method">Almost Method</a>
</span>
<!--span class="number">
169
</span-->
</li>
<li><span class="title">
<a href="#method" title="Method">Method</a>
</span>
<!--span class="number">
170
</span-->
</li>
<li><span class="title">
<a href="#method-with-colon" title="Method With Colon">Method With Colon</a>
</span>
<!--span class="number">
171
</span-->
</li>
<li><span class="title">
<a href="#colon-hidden-parameter" title="Colon Hidden Parameter">Colon Hidden Parameter</a>
</span>
<!--span class="number">
172
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#tutorial-point-lua-pdf" title="Tutorial Point Lua PDF">Tutorial Point Lua PDF</a>
</span>
<!--span class="number">
173
</span-->
</li>
<li><span class="title">
<a href="#ways-to-load-script-in-solarus-part-1" title="Ways To Load Script In Solarus Part 1">Ways To Load Script In Solarus Part 1</a>
</span>
<!--span class="number">
174
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#require()" title="Require()">Require()</a>
</span>
<!--span class="number">
175
</span-->
</li>
<li><span class="title">
<a href="#sol-main-load" title="Sol Main Load">Sol Main Load</a>
</span>
<!--span class="number">
176
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#grab-numbers-&amp;-letters" title="Grab Numbers &amp; Letters">Grab Numbers &amp; Letters</a>
</span>
<!--span class="number">
177
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#grab-numbers" title="Grab Numbers">Grab Numbers</a>
</span>
<!--span class="number">
178
</span-->
</li>
<li><span class="title">
<a href="#grab-letter" title="Grab Letter">Grab Letter</a>
</span>
<!--span class="number">
179
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-7:-setting-up-dialog-and-pause" title="Chapter 7: Setting up Dialog and Pause">Chapter 7: Setting up Dialog and Pause</a>
</span>
<!--span class="number">
180
</span-->
<ul>
<li><ul>
<li><ul>
<li><span class="title">
<a href="#setting-up-the-dialog-script" title="Setting Up The Dialog Script">Setting Up The Dialog Script</a>
</span>
<!--span class="number">
181
</span-->
</li>
<li><span class="title">
<a href="#using-the-dialog-box" title="Using the Dialog box">Using the Dialog box</a>
</span>
<!--span class="number">
182
</span-->
</li>
<li><span class="title">
<a href="#mouse-control-fix" title="Mouse Control Fix">Mouse Control Fix</a>
</span>
<!--span class="number">
183
</span-->
</li>
<li><span class="title">
<a href="#passing-a-value-and-string-into-the-dialog" title="Passing a value and string into the dialog">Passing a value and string into the dialog</a>
</span>
<!--span class="number">
184
</span-->
</li>
<li><span class="title">
<a href="#setting-up-yes_no" title="Setting up yes_no">Setting up yes_no</a>
</span>
<!--span class="number">
185
</span-->
</li>
<li><span class="title">
<a href="#dialog-lines" title="Dialog lines">Dialog lines</a>
</span>
<!--span class="number">
186
</span-->
</li>
<li><span class="title">
<a href="#adding-on_paused" title="Adding on_paused">Adding on_paused</a>
</span>
<!--span class="number">
187
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-8:-displaying-an-image,-opacity,-color-fill,-blend-modes,-and-font-display" title="Chapter 8: Displaying an image, opacity, color fill, blend modes, and font display">Chapter 8: Displaying an image, opacity, color fill, blend modes, and font display</a>
</span>
<!--span class="number">
188
</span-->
<ul>
<li><span class="title">
<a href="#script-for-the-lesson" title="Script For The Lesson">Script For The Lesson</a>
</span>
<!--span class="number">
189
</span-->
</li>
<li><span class="title">
<a href="#breaking-down-the-script" title="Breaking Down The Script">Breaking Down The Script</a>
</span>
<!--span class="number">
190
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#explaining-surfaces" title="Explaining Surfaces">Explaining Surfaces</a>
</span>
<!--span class="number">
191
</span-->
</li>
<li><span class="title">
<a href="#explaining-draw-function" title="Explaining Draw Function">Explaining Draw Function</a>
</span>
<!--span class="number">
192
</span-->
</li>
<li><span class="title">
<a href="#drawing-an-image,-font,-and-a-fill_color" title="Drawing an image, font, and a fill_color">Drawing an image, font, and a fill_color</a>
</span>
<!--span class="number">
193
</span-->
</li>
<li><span class="title">
<a href="#filling-a-color" title="Filling a Color">Filling a Color</a>
</span>
<!--span class="number">
194
</span-->
</li>
<li><span class="title">
<a href="#opacity-or-semi-transparency" title="Opacity or Semi-transparency">Opacity or Semi-transparency</a>
</span>
<!--span class="number">
195
</span-->
</li>
<li><span class="title">
<a href="#on_unpaused-function-&amp;-clear-pixels" title="on_unpaused function &amp; clear pixels">on_unpaused function &amp; clear pixels</a>
</span>
<!--span class="number">
196
</span-->
</li>
<li><span class="title">
<a href="#blend-modes" title="Blend Modes">Blend Modes</a>
</span>
<!--span class="number">
197
</span-->
</li>
<li><span class="title">
<a href="#drawing-to-a-surface" title="Drawing to a Surface">Drawing to a Surface</a>
</span>
<!--span class="number">
198
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#drawing-a-sprite" title="Drawing a Sprite">Drawing a Sprite</a>
</span>
<!--span class="number">
199
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#sample" title="Sample">Sample</a>
</span>
<!--span class="number">
200
</span-->
</li>
<li><span class="title">
<a href="#script" title="Script">Script</a>
</span>
<!--span class="number">
201
</span-->
</li>
<li><span class="title">
<a href="#breaking-down-the-script-1" title="Breaking down the Script">Breaking down the Script</a>
</span>
<!--span class="number">
202
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-9:-key-press,-mouse-press,-image-fade,-and-playing-audio" title="Chapter 9: Key press, Mouse press, Image fade, and Playing Audio">Chapter 9: Key press, Mouse press, Image fade, and Playing Audio</a>
</span>
<!--span class="number">
203
</span-->
<ul>
<li><span class="title">
<a href="#lesson-script" title="Lesson Script">Lesson Script</a>
</span>
<!--span class="number">
204
</span-->
</li>
<li><span class="title">
<a href="#breaking-down-the-script-2" title="Breaking Down the Script">Breaking Down the Script</a>
</span>
<!--span class="number">
205
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#key-pressed" title="Key Pressed">Key Pressed</a>
</span>
<!--span class="number">
206
</span-->
</li>
<li><span class="title">
<a href="#set-pause" title="Set Pause">Set Pause</a>
</span>
<!--span class="number">
207
</span-->
</li>
<li><span class="title">
<a href="#changing-volume" title="Changing Volume">Changing Volume</a>
</span>
<!--span class="number">
208
</span-->
</li>
<li><span class="title">
<a href="#playing-music-&amp;-sound" title="Playing Music &amp; Sound">Playing Music &amp; Sound</a>
</span>
<!--span class="number">
209
</span-->
</li>
<li><span class="title">
<a href="#making-your-own-function" title="Making Your Own Function">Making Your Own Function</a>
</span>
<!--span class="number">
210
</span-->
</li>
<li><span class="title">
<a href="#fade-in-and-out" title="Fade In and Out">Fade In and Out</a>
</span>
<!--span class="number">
211
</span-->
</li>
<li><span class="title">
<a href="#mouse-pressed" title="Mouse Pressed">Mouse Pressed</a>
</span>
<!--span class="number">
212
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-10:-timers-and-getting-coordinates" title="Chapter 10: Timers and Getting Coordinates">Chapter 10: Timers and Getting Coordinates</a>
</span>
<!--span class="number">
213
</span-->
<ul>
<li><span class="title">
<a href="#basic-timer-map-script-example" title="Basic Timer Map Script Example">Basic Timer Map Script Example</a>
</span>
<!--span class="number">
214
</span-->
</li>
<li><span class="title">
<a href="#timer" title="Timer">Timer</a>
</span>
<!--span class="number">
215
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#timer-function-delay" title="Timer Function Delay">Timer Function Delay</a>
</span>
<!--span class="number">
216
</span-->
</li>
<li><span class="title">
<a href="#timer-anonymous-function-delay" title="Timer Anonymous Function Delay">Timer Anonymous Function Delay</a>
</span>
<!--span class="number">
217
</span-->
</li>
<li><span class="title">
<a href="#repeat-timer-with-true" title="Repeat Timer with True">Repeat Timer with True</a>
</span>
<!--span class="number">
218
</span-->
</li>
<li><span class="title">
<a href="#stop-repeating-timer-with-variable" title="Stop Repeating Timer With Variable">Stop Repeating Timer With Variable</a>
</span>
<!--span class="number">
219
</span-->
</li>
<li><span class="title">
<a href="#repeat-timer-a-number-of-times" title="Repeat Timer a Number of Times">Repeat Timer a Number of Times</a>
</span>
<!--span class="number">
220
</span-->
</li>
<li><span class="title">
<a href="#context-timer" title="Context Timer">Context Timer</a>
</span>
<!--span class="number">
221
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#timer-display-drag-click-script-example" title="Timer Display Drag Click Script Example">Timer Display Drag Click Script Example</a>
</span>
<!--span class="number">
222
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#stopping-a-timer" title="Stopping a Timer">Stopping a Timer</a>
</span>
<!--span class="number">
223
</span-->
</li>
<li><span class="title">
<a href="#stop-all-context-timers" title="Stop all Context Timers">Stop all Context Timers</a>
</span>
<!--span class="number">
224
</span-->
</li>
<li><span class="title">
<a href="#getting-remaining-time" title="Getting Remaining Time">Getting Remaining Time</a>
</span>
<!--span class="number">
225
</span-->
</li>
<li><span class="title">
<a href="#displaying-timer" title="Displaying Timer">Displaying Timer</a>
</span>
<!--span class="number">
226
</span-->
</li>
<li><span class="title">
<a href="#timer-sound" title="Timer Sound">Timer Sound</a>
</span>
<!--span class="number">
227
</span-->
</li>
<li><span class="title">
<a href="#change-remaining-timer" title="Change Remaining Timer">Change Remaining Timer</a>
</span>
<!--span class="number">
228
</span-->
</li>
<li><span class="title">
<a href="#suspend-timer" title="Suspend Timer">Suspend Timer</a>
</span>
<!--span class="number">
229
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#get-coordinates" title="Get Coordinates">Get Coordinates</a>
</span>
<!--span class="number">
230
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#getting-cursor-location" title="Getting Cursor Location">Getting Cursor Location</a>
</span>
<!--span class="number">
231
</span-->
</li>
<li><span class="title">
<a href="#applying-coordinates-to-images" title="Applying Coordinates To Images">Applying Coordinates To Images</a>
</span>
<!--span class="number">
232
</span-->
</li>
<li><span class="title">
<a href="#using-timer-to-drag-image" title="Using Timer To Drag Image">Using Timer To Drag Image</a>
</span>
<!--span class="number">
233
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-11:-map-editor" title="Chapter 11: Map editor">Chapter 11: Map editor</a>
</span>
<!--span class="number">
234
</span-->
<ul>
<li><ul>
<li><ul>
<li><span class="title">
<a href="#making-a-map" title="Making a Map">Making a Map</a>
</span>
<!--span class="number">
235
</span-->
</li>
<li><span class="title">
<a href="#map-properties" title="Map Properties">Map Properties</a>
</span>
<!--span class="number">
236
</span-->
</li>
<li><span class="title">
<a href="#map-script" title="Map Script">Map Script</a>
</span>
<!--span class="number">
237
</span-->
</li>
<li><span class="title">
<a href="#map-property-features" title="Map Property Features">Map Property Features</a>
</span>
<!--span class="number">
238
</span-->
</li>
<li><span class="title">
<a href="#map-drag" title="Map Drag">Map Drag</a>
</span>
<!--span class="number">
239
</span-->
</li>
<li><span class="title">
<a href="#map-zoom" title="Map Zoom">Map Zoom</a>
</span>
<!--span class="number">
240
</span-->
</li>
<li><span class="title">
<a href="#selecting-map-tiles" title="Selecting Map Tiles">Selecting Map Tiles</a>
</span>
<!--span class="number">
241
</span-->
</li>
<li><span class="title">
<a href="#dragging-map-tile" title="Dragging Map Tile">Dragging Map Tile</a>
</span>
<!--span class="number">
242
</span-->
</li>
<li><span class="title">
<a href="#bring-to-back-map-tile" title="Bring to Back Map Tile">Bring to Back Map Tile</a>
</span>
<!--span class="number">
243
</span-->
</li>
<li><span class="title">
<a href="#change-map-tile-layer" title="Change Map Tile Layer">Change Map Tile Layer</a>
</span>
<!--span class="number">
244
</span-->
</li>
<li><span class="title">
<a href="#selecting-multiple-tiles" title="Selecting Multiple Tiles">Selecting Multiple Tiles</a>
</span>
<!--span class="number">
245
</span-->
</li>
<li><span class="title">
<a href="#dynamic-tiles" title="Dynamic Tiles">Dynamic Tiles</a>
</span>
<!--span class="number">
246
</span-->
</li>
<li><span class="title">
<a href="#resizing-tiles" title="Resizing Tiles">Resizing Tiles</a>
</span>
<!--span class="number">
247
</span-->
</li>
<li><span class="title">
<a href="#making-obstacles-vanish" title="Making Obstacles Vanish">Making Obstacles Vanish</a>
</span>
<!--span class="number">
248
</span-->
</li>
<li><span class="title">
<a href="#making-traversable-vanish" title="Making Traversable Vanish">Making Traversable Vanish</a>
</span>
<!--span class="number">
249
</span-->
</li>
<li><span class="title">
<a href="#making-layer[num]-vanish" title="Making Layer[num] Vanish">Making Layer[num] Vanish</a>
</span>
<!--span class="number">
250
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-12-menus-and-window-options" title="Chapter 12 Menus and Window Options">Chapter 12 Menus and Window Options</a>
</span>
<!--span class="number">
251
</span-->
<ul>
<li><span class="title">
<a href="#window-options" title="Window Options">Window Options</a>
</span>
<!--span class="number">
252
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#video-mode" title="Video Mode">Video Mode</a>
</span>
<!--span class="number">
253
</span-->
</li>
<li><span class="title">
<a href="#fullscreen" title="Fullscreen">Fullscreen</a>
</span>
<!--span class="number">
254
</span-->
</li>
<li><span class="title">
<a href="#cursor-visibility" title="Cursor Visibility">Cursor Visibility</a>
</span>
<!--span class="number">
255
</span-->
</li>
<li><span class="title">
<a href="#window-size" title="Window Size">Window Size</a>
</span>
<!--span class="number">
256
</span-->
</li>
<li><span class="title">
<a href="#default-window" title="Default Window">Default Window</a>
</span>
<!--span class="number">
257
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#menu" title="Menu">Menu</a>
</span>
<!--span class="number">
258
</span-->
</li>
<li><span class="title">
<a href="#menu-function" title="Menu function">Menu function</a>
</span>
<!--span class="number">
259
</span-->
</li>
<li><span class="title">
<a href="#menu:-starting-and-stopping" title="Menu: Starting and Stopping">Menu: Starting and Stopping</a>
</span>
<!--span class="number">
260
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#starting-menu" title="Starting Menu">Starting Menu</a>
</span>
<!--span class="number">
261
</span-->
</li>
<li><span class="title">
<a href="#stopping-menu" title="Stopping Menu">Stopping Menu</a>
</span>
<!--span class="number">
262
</span-->
</li>
<li><span class="title">
<a href="#menu-script-example" title="Menu Script Example">Menu Script Example</a>
</span>
<!--span class="number">
263
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-13:-entities" title="Chapter 13: Entities">Chapter 13: Entities</a>
</span>
<!--span class="number">
264
</span-->
<ul>
<li><span class="title">
<a href="#get_()-&amp;-related" title="get_() &amp; related">get_() &amp; related</a>
</span>
<!--span class="number">
265
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#map:get_game()" title="map:get_game()">map:get_game()</a>
</span>
<!--span class="number">
266
</span-->
</li>
<li><span class="title">
<a href="#map:get_hero()" title="map:get_hero()">map:get_hero()</a>
</span>
<!--span class="number">
267
</span-->
</li>
<li><span class="title">
<a href="#entity:get_sprite()" title="entity:get_sprite()">entity:get_sprite()</a>
</span>
<!--span class="number">
268
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#entity-position-&amp;-name" title="Entity Position &amp; Name">Entity Position &amp; Name</a>
</span>
<!--span class="number">
269
</span-->
</li>
<li><span class="title">
<a href="#types-of-entities" title="Types of entities">Types of entities</a>
</span>
<!--span class="number">
270
</span-->
</li>
<li><span class="title">
<a href="#destination-entity" title="Destination Entity">Destination Entity</a>
</span>
<!--span class="number">
271
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#setting-up-maps-and-starting-location" title="Setting up Maps and Starting Location">Setting up Maps and Starting Location</a>
</span>
<!--span class="number">
272
</span-->
</li>
<li><span class="title">
<a href="#inside-store" title="Inside Store">Inside Store</a>
</span>
<!--span class="number">
273
</span-->
</li>
<li><span class="title">
<a href="#add-destination-entity" title="Add Destination Entity">Add Destination Entity</a>
</span>
<!--span class="number">
274
</span-->
</li>
<li><span class="title">
<a href="#edit-destination-entity-options" title="Edit Destination Entity Options">Edit Destination Entity Options</a>
</span>
<!--span class="number">
275
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#teletransporter-entity" title="Teletransporter Entity">Teletransporter Entity</a>
</span>
<!--span class="number">
276
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-teletransporter" title="Add Teletransporter">Add Teletransporter</a>
</span>
<!--span class="number">
277
</span-->
</li>
<li><span class="title">
<a href="#edit-teletransporter-entity-options" title="Edit Teletransporter Entity Options">Edit Teletransporter Entity Options</a>
</span>
<!--span class="number">
278
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#pickable-entity" title="Pickable Entity">Pickable Entity</a>
</span>
<!--span class="number">
279
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-pickable-entity" title="Add Pickable Entity">Add Pickable Entity</a>
</span>
<!--span class="number">
280
</span-->
</li>
<li><span class="title">
<a href="#edit-pickable-entity-options" title="Edit Pickable Entity Options">Edit Pickable Entity Options</a>
</span>
<!--span class="number">
281
</span-->
</li>
<li><span class="title">
<a href="#name-connection" title="Name Connection">Name Connection</a>
</span>
<!--span class="number">
282
</span-->
</li>
<li><span class="title">
<a href="#item-script" title="Item Script">Item Script</a>
</span>
<!--span class="number">
283
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#destructible-entity" title="Destructible Entity">Destructible Entity</a>
</span>
<!--span class="number">
284
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#inside-store-to-map" title="Inside Store to Map">Inside Store to Map</a>
</span>
<!--span class="number">
285
</span-->
</li>
<li><span class="title">
<a href="#add-destructible-entity" title="Add Destructible Entity">Add Destructible Entity</a>
</span>
<!--span class="number">
286
</span-->
</li>
<li><span class="title">
<a href="#edit-destructible-entity-options" title="Edit Destructible Entity Options">Edit Destructible Entity Options</a>
</span>
<!--span class="number">
287
</span-->
</li>
<li><span class="title">
<a href="#destructible-entity-sprite" title="Destructible Entity Sprite">Destructible Entity Sprite</a>
</span>
<!--span class="number">
288
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chest-entity" title="Chest Entity">Chest Entity</a>
</span>
<!--span class="number">
289
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-a-chest-entity" title="Add a Chest Entity">Add a Chest Entity</a>
</span>
<!--span class="number">
290
</span-->
</li>
<li><span class="title">
<a href="#edit-chest-entity-options" title="Edit Chest Entity Options">Edit Chest Entity Options</a>
</span>
<!--span class="number">
291
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#jumper-entity" title="Jumper Entity">Jumper Entity</a>
</span>
<!--span class="number">
292
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-jumper-entity" title="Add Jumper Entity">Add Jumper Entity</a>
</span>
<!--span class="number">
293
</span-->
</li>
<li><span class="title">
<a href="#resize-jumper" title="Resize Jumper">Resize Jumper</a>
</span>
<!--span class="number">
294
</span-->
</li>
<li><span class="title">
<a href="#edit-jumper-entity-options" title="Edit Jumper Entity Options">Edit Jumper Entity Options</a>
</span>
<!--span class="number">
295
</span-->
</li>
<li><span class="title">
<a href="#jump-walls" title="Jump Walls">Jump Walls</a>
</span>
<!--span class="number">
296
</span-->
</li>
<li><span class="title">
<a href="#jump-preview" title="Jump Preview">Jump Preview</a>
</span>
<!--span class="number">
297
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#enemy-entity" title="Enemy Entity">Enemy Entity</a>
</span>
<!--span class="number">
298
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#inside-store-1" title="Inside Store">Inside Store</a>
</span>
<!--span class="number">
299
</span-->
</li>
<li><span class="title">
<a href="#enemy-breed-script" title="Enemy Breed Script">Enemy Breed Script</a>
</span>
<!--span class="number">
300
</span-->
</li>
<li><span class="title">
<a href="#enemy-script-generated" title="Enemy Script Generated">Enemy Script Generated</a>
</span>
<!--span class="number">
301
</span-->
</li>
<li><span class="title">
<a href="#enemy-four-way-direction" title="Enemy Four Way Direction">Enemy Four Way Direction</a>
</span>
<!--span class="number">
302
</span-->
</li>
<li><span class="title">
<a href="#enemy-animation" title="Enemy Animation">Enemy Animation</a>
</span>
<!--span class="number">
303
</span-->
</li>
<li><span class="title">
<a href="#add-enemy" title="Add Enemy">Add Enemy</a>
</span>
<!--span class="number">
304
</span-->
</li>
<li><span class="title">
<a href="#edit-enemy" title="Edit Enemy">Edit Enemy</a>
</span>
<!--span class="number">
305
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#npc-entity" title="NPC Entity">NPC Entity</a>
</span>
<!--span class="number">
306
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-npc" title="Add NPC">Add NPC</a>
</span>
<!--span class="number">
307
</span-->
</li>
<li><span class="title">
<a href="#usual-npc" title="Usual NPC">Usual NPC</a>
</span>
<!--span class="number">
308
</span-->
</li>
<li><span class="title">
<a href="#set-up-dialog-box" title="Set Up Dialog Box">Set Up Dialog Box</a>
</span>
<!--span class="number">
309
</span-->
</li>
<li><span class="title">
<a href="#sample-1" title="Sample">Sample</a>
</span>
<!--span class="number">
310
</span-->
</li>
<li><span class="title">
<a href="#usual-npc-call-map-script" title="Usual NPC Call Map Script">Usual NPC Call Map Script</a>
</span>
<!--span class="number">
311
</span-->
</li>
<li><span class="title">
<a href="#showing-npc-script" title="Showing NPC Script">Showing NPC Script</a>
</span>
<!--span class="number">
312
</span-->
</li>
<li><span class="title">
<a href="#setting-up-a-simple-npc-dialog" title="Setting up a Simple NPC dialog">Setting up a Simple NPC dialog</a>
</span>
<!--span class="number">
313
</span-->
</li>
<li><span class="title">
<a href="#npc-dialog-yes_no" title="NPC Dialog Yes_No">NPC Dialog Yes_No</a>
</span>
<!--span class="number">
314
</span-->
</li>
<li><span class="title">
<a href="#npc-answer-no" title="NPC Answer No">NPC Answer No</a>
</span>
<!--span class="number">
315
</span-->
</li>
<li><span class="title">
<a href="#npc-answer-yes" title="NPC Answer Yes">NPC Answer Yes</a>
</span>
<!--span class="number">
316
</span-->
</li>
<li><span class="title">
<a href="#npc-treasure" title="NPC Treasure">NPC Treasure</a>
</span>
<!--span class="number">
317
</span-->
</li>
<li><span class="title">
<a href="#prevent-repeating-npc-dialog-with-boolean" title="Prevent Repeating NPC Dialog With Boolean">Prevent Repeating NPC Dialog With Boolean</a>
</span>
<!--span class="number">
318
</span-->
</li>
<li><span class="title">
<a href="#prevent-repeating-npc-dialog-with-get-value" title="Prevent Repeating NPC Dialog With Get Value">Prevent Repeating NPC Dialog With Get Value</a>
</span>
<!--span class="number">
319
</span-->
</li>
<li><span class="title">
<a href="#npc-shortening-the-script" title="NPC Shortening the Script">NPC Shortening the Script</a>
</span>
<!--span class="number">
320
</span-->
</li>
<li><span class="title">
<a href="#npc-wonderful-day" title="NPC Wonderful Day">NPC Wonderful Day</a>
</span>
<!--span class="number">
321
</span-->
</li>
<li><span class="title">
<a href="#npc-dialogs" title="NPC Dialogs">NPC Dialogs</a>
</span>
<!--span class="number">
322
</span-->
</li>
<li><span class="title">
<a href="#generalized-npc" title="Generalized NPC">Generalized NPC</a>
</span>
<!--span class="number">
323
</span-->
</li>
<li><span class="title">
<a href="#generalized-npc-desk-method" title="Generalized NPC Desk Method">Generalized NPC Desk Method</a>
</span>
<!--span class="number">
324
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#movable-block-entity" title="Movable Block Entity">Movable Block Entity</a>
</span>
<!--span class="number">
325
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-block" title="Add Block">Add Block</a>
</span>
<!--span class="number">
326
</span-->
</li>
<li><span class="title">
<a href="#block-properties" title="Block Properties">Block Properties</a>
</span>
<!--span class="number">
327
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#switch-entity" title="Switch Entity">Switch Entity</a>
</span>
<!--span class="number">
328
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-switch" title="Add Switch">Add Switch</a>
</span>
<!--span class="number">
329
</span-->
</li>
<li><span class="title">
<a href="#switch-properties" title="Switch Properties">Switch Properties</a>
</span>
<!--span class="number">
330
</span-->
</li>
<li><span class="title">
<a href="#walkable-switch-coding" title="Walkable Switch Coding">Walkable Switch Coding</a>
</span>
<!--span class="number">
331
</span-->
</li>
<li><span class="title">
<a href="#block-switch-coding" title="Block Switch Coding">Block Switch Coding</a>
</span>
<!--span class="number">
332
</span-->
</li>
<li><span class="title">
<a href="#solid-switch-coding" title="Solid Switch Coding">Solid Switch Coding</a>
</span>
<!--span class="number">
333
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#dynamic-tile" title="Dynamic Tile">Dynamic Tile</a>
</span>
<!--span class="number">
334
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#convert-to-dynamic" title="Convert to Dynamic">Convert to Dynamic</a>
</span>
<!--span class="number">
335
</span-->
</li>
<li><span class="title">
<a href="#convert-to-static" title="Convert to Static">Convert to Static</a>
</span>
<!--span class="number">
336
</span-->
</li>
<li><span class="title">
<a href="#dynamic-properties" title="Dynamic Properties">Dynamic Properties</a>
</span>
<!--span class="number">
337
</span-->
</li>
<li><span class="title">
<a href="#dynamic-scripting" title="Dynamic Scripting">Dynamic Scripting</a>
</span>
<!--span class="number">
338
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#wall-entity" title="Wall Entity">Wall Entity</a>
</span>
<!--span class="number">
339
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-wall-entity" title="Add Wall Entity">Add Wall Entity</a>
</span>
<!--span class="number">
340
</span-->
</li>
<li><span class="title">
<a href="#wall-entity-properties" title="Wall Entity Properties">Wall Entity Properties</a>
</span>
<!--span class="number">
341
</span-->
</li>
<li><span class="title">
<a href="#wall-entity-scripting" title="Wall Entity Scripting">Wall Entity Scripting</a>
</span>
<!--span class="number">
342
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#sensor-entity" title="Sensor Entity">Sensor Entity</a>
</span>
<!--span class="number">
343
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-sensor-entity" title="Add Sensor Entity">Add Sensor Entity</a>
</span>
<!--span class="number">
344
</span-->
</li>
<li><span class="title">
<a href="#sensor-properties" title="Sensor Properties">Sensor Properties</a>
</span>
<!--span class="number">
345
</span-->
</li>
<li><span class="title">
<a href="#sensor-scripting" title="Sensor Scripting">Sensor Scripting</a>
</span>
<!--span class="number">
346
</span-->
</li>
<li><span class="title">
<a href="#sensor-get-position" title="Sensor Get Position">Sensor Get Position</a>
</span>
<!--span class="number">
347
</span-->
</li>
<li><span class="title">
<a href="#sensor-multiple-dynamic-tiles" title="Sensor Multiple Dynamic Tiles">Sensor Multiple Dynamic Tiles</a>
</span>
<!--span class="number">
348
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#crystal-switch-entity" title="Crystal Switch Entity">Crystal Switch Entity</a>
</span>
<!--span class="number">
349
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-crystal-switch" title="Add Crystal Switch">Add Crystal Switch</a>
</span>
<!--span class="number">
350
</span-->
</li>
<li><span class="title">
<a href="#crystal-switch-properties" title="Crystal Switch Properties">Crystal Switch Properties</a>
</span>
<!--span class="number">
351
</span-->
</li>
<li><span class="title">
<a href="#default-crystal-switch-graphic-names" title="Default Crystal Switch Graphic Names">Default Crystal Switch Graphic Names</a>
</span>
<!--span class="number">
352
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#crystal-block-entities" title="Crystal Block Entities">Crystal Block Entities</a>
</span>
<!--span class="number">
353
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-crystal-block" title="Add Crystal Block">Add Crystal Block</a>
</span>
<!--span class="number">
354
</span-->
</li>
<li><span class="title">
<a href="#crystal-block-properties" title="Crystal Block Properties">Crystal Block Properties</a>
</span>
<!--span class="number">
355
</span-->
</li>
<li><span class="title">
<a href="#default-crystal-block-graphic-names" title="Default Crystal Block Graphic Names">Default Crystal Block Graphic Names</a>
</span>
<!--span class="number">
356
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#stream-entity" title="Stream Entity">Stream Entity</a>
</span>
<!--span class="number">
357
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-stream" title="Add Stream">Add Stream</a>
</span>
<!--span class="number">
358
</span-->
</li>
<li><span class="title">
<a href="#stream-properties" title="Stream Properties">Stream Properties</a>
</span>
<!--span class="number">
359
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#hud" title="HUD">HUD</a>
</span>
<!--span class="number">
360
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#setup-hud-scripts" title="Setup HUD Scripts">Setup HUD Scripts</a>
</span>
<!--span class="number">
361
</span-->
</li>
<li><span class="title">
<a href="#hud-configurations-`hud_config.lua`" title="Hud Configurations hud_config.lua">Hud Configurations hud_config.lua</a>
</span>
<!--span class="number">
362
</span-->
</li>
<li><span class="title">
<a href="#health-heart-display-`hearts.lua`" title="Health Heart Display hearts.lua">Health Heart Display hearts.lua</a>
</span>
<!--span class="number">
363
</span-->
</li>
<li><span class="title">
<a href="#money-system-rupee-style" title="Money System Rupee Style">Money System Rupee Style</a>
</span>
<!--span class="number">
364
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#money-(gem)-setup" title="Money (Gem) Setup">Money (Gem) Setup</a>
</span>
<!--span class="number">
365
</span-->
</li>
<li><span class="title">
<a href="#shop-entity" title="Shop Entity">Shop Entity</a>
</span>
<!--span class="number">
366
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-shop-entity" title="Add Shop Entity">Add Shop Entity</a>
</span>
<!--span class="number">
367
</span-->
</li>
<li><span class="title">
<a href="#shop-entity-properties" title="Shop Entity Properties">Shop Entity Properties</a>
</span>
<!--span class="number">
368
</span-->
</li>
<li><span class="title">
<a href="#shop-setup" title="Shop Setup">Shop Setup</a>
</span>
<!--span class="number">
369
</span-->
</li>
<li><span class="title">
<a href="#shop-entity-dialogs" title="Shop Entity Dialogs">Shop Entity Dialogs</a>
</span>
<!--span class="number">
370
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#door-entity" title="Door Entity">Door Entity</a>
</span>
<!--span class="number">
371
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-door" title="Add Door">Add Door</a>
</span>
<!--span class="number">
372
</span-->
</li>
<li><span class="title">
<a href="#door-properties" title="Door Properties">Door Properties</a>
</span>
<!--span class="number">
373
</span-->
</li>
<li><span class="title">
<a href="#door-graphic-setup" title="Door Graphic Setup">Door Graphic Setup</a>
</span>
<!--span class="number">
374
</span-->
</li>
<li><span class="title">
<a href="#door-script" title="Door Script">Door Script</a>
</span>
<!--span class="number">
375
</span-->
</li>
<li><span class="title">
<a href="#opening-door-with-key" title="Opening Door With Key">Opening Door With Key</a>
</span>
<!--span class="number">
376
</span-->
</li>
<li><span class="title">
<a href="#door-key" title="Door Key">Door Key</a>
</span>
<!--span class="number">
377
</span-->
</li>
<li><span class="title">
<a href="#door-opening-by-hero" title="Door Opening By Hero">Door Opening By Hero</a>
</span>
<!--span class="number">
378
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#stairs-entity" title="Stairs Entity">Stairs Entity</a>
</span>
<!--span class="number">
379
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-stairs" title="Add Stairs">Add Stairs</a>
</span>
<!--span class="number">
380
</span-->
</li>
<li><span class="title">
<a href="#stairs-properties" title="Stairs Properties">Stairs Properties</a>
</span>
<!--span class="number">
381
</span-->
</li>
<li><span class="title">
<a href="#stairs-setup" title="Stairs Setup">Stairs Setup</a>
</span>
<!--span class="number">
382
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#separator-entity" title="Separator Entity">Separator Entity</a>
</span>
<!--span class="number">
383
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-separator" title="Add Separator">Add Separator</a>
</span>
<!--span class="number">
384
</span-->
</li>
<li><span class="title">
<a href="#separator-properties" title="Separator Properties">Separator Properties</a>
</span>
<!--span class="number">
385
</span-->
</li>
<li><span class="title">
<a href="#separator-viewpoint" title="Separator viewpoint">Separator viewpoint</a>
</span>
<!--span class="number">
386
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#custom-entities" title="Custom Entities">Custom Entities</a>
</span>
<!--span class="number">
387
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#add-custom-entity" title="Add Custom Entity">Add Custom Entity</a>
</span>
<!--span class="number">
388
</span-->
</li>
<li><span class="title">
<a href="#custom-entity-properties" title="Custom Entity Properties">Custom Entity Properties</a>
</span>
<!--span class="number">
389
</span-->
</li>
<li><span class="title">
<a href="#create-custom-entity-script" title="Create Custom Entity Script">Create Custom Entity Script</a>
</span>
<!--span class="number">
390
</span-->
</li>
<li><span class="title">
<a href="#trick-chest-entity-scripting" title="Trick Chest Entity Scripting">Trick Chest Entity Scripting</a>
</span>
<!--span class="number">
391
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#custom-entity-switch" title="Custom Entity Switch">Custom Entity Switch</a>
</span>
<!--span class="number">
392
</span-->
</li>
<li><span class="title">
<a href="#custom-animation" title="Custom Animation">Custom Animation</a>
</span>
<!--span class="number">
393
</span-->
</li>
<li><span class="title">
<a href="#get-distance-to-entity" title="Get Distance to Entity">Get Distance to Entity</a>
</span>
<!--span class="number">
394
</span-->
</li>
<li><span class="title">
<a href="#make-entity-turn-to-entity" title="Make Entity Turn to Entity">Make Entity Turn to Entity</a>
</span>
<!--span class="number">
395
</span-->
</li>
<li><span class="title">
<a href="#obstacle-detection" title="Obstacle Detection">Obstacle Detection</a>
</span>
<!--span class="number">
396
</span-->
</li>
<li><span class="title">
<a href="#on-hero-state" title="On Hero State">On Hero State</a>
</span>
<!--span class="number">
397
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#hero-entity" title="Hero Entity">Hero Entity</a>
</span>
<!--span class="number">
398
</span-->
<ul>
<li><span class="title">
<a href="#hero-teleport" title="Hero Teleport">Hero Teleport</a>
</span>
<!--span class="number">
399
</span-->
</li>
<li><span class="title">
<a href="#hero-get-animation" title="Hero Get Animation">Hero Get Animation</a>
</span>
<!--span class="number">
400
</span-->
</li>
<li><span class="title">
<a href="#hero-set-animation" title="Hero Set Animation">Hero Set Animation</a>
</span>
<!--span class="number">
401
</span-->
</li>
<li><span class="title">
<a href="#set-sword-sound" title="Set Sword Sound">Set Sword Sound</a>
</span>
<!--span class="number">
402
</span-->
</li>
<li><span class="title">
<a href="#hero-walk" title="Hero Walk">Hero Walk</a>
</span>
<!--span class="number">
403
</span-->
</li>
<li><span class="title">
<a href="#hero-jump" title="Hero Jump">Hero Jump</a>
</span>
<!--span class="number">
404
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-14:-abilities,-save-game,-quest-launcher,-and-game-over" title="Chapter 14: Abilities, Save Game, Quest Launcher, and Game Over">Chapter 14: Abilities, Save Game, Quest Launcher, and Game Over</a>
</span>
<!--span class="number">
405
</span-->
<ul>
<li><span class="title">
<a href="#abilities:-swim,-lift,-sword,-run,-etc" title="Abilities: Swim, Lift, Sword, Run, etc">Abilities: Swim, Lift, Sword, Run, etc</a>
</span>
<!--span class="number">
406
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#set-ability" title="Set Ability">Set Ability</a>
</span>
<!--span class="number">
407
</span-->
</li>
<li><span class="title">
<a href="#get-ability" title="Get Ability">Get Ability</a>
</span>
<!--span class="number">
408
</span-->
</li>
<li><span class="title">
<a href="#has-ability" title="Has Ability">Has Ability</a>
</span>
<!--span class="number">
409
</span-->
</li>
<li><span class="title">
<a href="#tunic-ability-setup" title="Tunic Ability Setup">Tunic Ability Setup</a>
</span>
<!--span class="number">
410
</span-->
</li>
<li><span class="title">
<a href="#sword-ability-setup" title="Sword Ability Setup">Sword Ability Setup</a>
</span>
<!--span class="number">
411
</span-->
</li>
<li><span class="title">
<a href="#sword-knowledge" title="Sword Knowledge">Sword Knowledge</a>
</span>
<!--span class="number">
412
</span-->
</li>
<li><span class="title">
<a href="#shield-ability-setup" title="Shield Ability Setup">Shield Ability Setup</a>
</span>
<!--span class="number">
413
</span-->
</li>
<li><span class="title">
<a href="#lift-ability-setup" title="Lift Ability Setup">Lift Ability Setup</a>
</span>
<!--span class="number">
414
</span-->
</li>
<li><span class="title">
<a href="#water-jump-ability-setup" title="Water Jump Ability Setup">Water Jump Ability Setup</a>
</span>
<!--span class="number">
415
</span-->
</li>
<li><span class="title">
<a href="#run-ability-setup" title="Run Ability Setup">Run Ability Setup</a>
</span>
<!--span class="number">
416
</span-->
</li>
<li><span class="title">
<a href="#swim-ability-setup" title="Swim Ability Setup">Swim Ability Setup</a>
</span>
<!--span class="number">
417
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#quest-launcher" title="Quest Launcher">Quest Launcher</a>
</span>
<!--span class="number">
418
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#activate-quest-launcher" title="Activate Quest Launcher">Activate Quest Launcher</a>
</span>
<!--span class="number">
419
</span-->
</li>
<li><span class="title">
<a href="#play-game" title="Play Game">Play Game</a>
</span>
<!--span class="number">
420
</span-->
</li>
<li><span class="title">
<a href="#game---add-&amp;-remove" title="Game - Add &amp; Remove">Game - Add &amp; Remove</a>
</span>
<!--span class="number">
421
</span-->
</li>
<li><span class="title">
<a href="#video-&gt;-fullscreen,-2d-acceleration,-window-size,-&amp;-zoom" title="Video > Fullscreen, 2D Acceleration, Window Size, &amp; Zoom">Video &gt; Fullscreen, 2D Acceleration, Window Size, &amp; Zoom</a>
</span>
<!--span class="number">
422
</span-->
</li>
<li><span class="title">
<a href="#quest-launcher-&gt;-file-&gt;-add,-remove,-&amp;-exit" title="Quest Launcher > File > Add, Remove, &amp; Exit">Quest Launcher &gt; File &gt; Add, Remove, &amp; Exit</a>
</span>
<!--span class="number">
423
</span-->
</li>
<li><span class="title">
<a href="#game---play-&amp;-stop" title="Game - Play &amp; Stop">Game - Play &amp; Stop</a>
</span>
<!--span class="number">
424
</span-->
</li>
<li><span class="title">
<a href="#help-&gt;-about" title="Help > About">Help &gt; About</a>
</span>
<!--span class="number">
425
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#about-logo-&amp;-icons:" title="About Logo &amp; Icons:">About Logo &amp; Icons:</a>
</span>
<!--span class="number">
426
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#quest-logo" title="Quest Logo">Quest Logo</a>
</span>
<!--span class="number">
427
</span-->
</li>
<li><span class="title">
<a href="#quest-icons" title="Quest Icons">Quest Icons</a>
</span>
<!--span class="number">
428
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#save-game" title="Save Game">Save Game</a>
</span>
<!--span class="number">
429
</span-->
</li>
<li><span class="title">
<a href="#game-over" title="Game Over">Game Over</a>
</span>
<!--span class="number">
430
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-15:-title-screen,-save-menu,-movements,-map-types,-camera,-i/o" title="Chapter 15: Title Screen, Save menu, Movements, Map Types, Camera, I/O">Chapter 15: Title Screen, Save menu, Movements, Map Types, Camera, I/O</a>
</span>
<!--span class="number">
431
</span-->
<ul>
<li><span class="title">
<a href="#title-screen" title="Title Screen">Title Screen</a>
</span>
<!--span class="number">
432
</span-->
</li>
<li><span class="title">
<a href="#movements" title="Movements">Movements</a>
</span>
<!--span class="number">
433
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#create-movement" title="Create Movement">Create Movement</a>
</span>
<!--span class="number">
434
</span-->
</li>
<li><span class="title">
<a href="#jump-movement" title="Jump Movement">Jump Movement</a>
</span>
<!--span class="number">
435
</span-->
</li>
<li><span class="title">
<a href="#random-path-movement" title="Random Path Movement">Random Path Movement</a>
</span>
<!--span class="number">
436
</span-->
</li>
<li><span class="title">
<a href="#target-movement" title="Target Movement">Target Movement</a>
</span>
<!--span class="number">
437
</span-->
</li>
<li><span class="title">
<a href="#path-finding-movement" title="Path Finding Movement">Path Finding Movement</a>
</span>
<!--span class="number">
438
</span-->
</li>
<li><span class="title">
<a href="#random-movement" title="Random Movement">Random Movement</a>
</span>
<!--span class="number">
439
</span-->
</li>
<li><span class="title">
<a href="#straight-movement" title="Straight Movement">Straight Movement</a>
</span>
<!--span class="number">
440
</span-->
</li>
<li><span class="title">
<a href="#path-movement" title="Path Movement">Path Movement</a>
</span>
<!--span class="number">
441
</span-->
</li>
<li><span class="title">
<a href="#pixel-movement" title="Pixel Movement">Pixel Movement</a>
</span>
<!--span class="number">
442
</span-->
</li>
<li><span class="title">
<a href="#circle-movement" title="Circle Movement">Circle Movement</a>
</span>
<!--span class="number">
443
</span-->
</li>
<li><span class="title">
<a href="#walk-through-entity" title="Walk through Entity">Walk through Entity</a>
</span>
<!--span class="number">
444
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#moving-image" title="Moving Image">Moving Image</a>
</span>
<!--span class="number">
445
</span-->
</li>
<li><span class="title">
<a href="#map-types" title="Map Types">Map Types</a>
</span>
<!--span class="number">
446
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#making-a-map-entity" title="Making a Map Entity">Making a Map Entity</a>
</span>
<!--span class="number">
447
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#camera-entity" title="Camera Entity">Camera Entity</a>
</span>
<!--span class="number">
448
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#camera-size" title="Camera Size">Camera Size</a>
</span>
<!--span class="number">
449
</span-->
</li>
<li><span class="title">
<a href="#camera-tracking" title="Camera Tracking">Camera Tracking</a>
</span>
<!--span class="number">
450
</span-->
</li>
<li><span class="title">
<a href="#camera-position" title="Camera Position">Camera Position</a>
</span>
<!--span class="number">
451
</span-->
</li>
<li><span class="title">
<a href="#camera-&amp;-movements" title="Camera &amp; Movements">Camera &amp; Movements</a>
</span>
<!--span class="number">
452
</span-->
</li>
<li><span class="title">
<a href="#camera-example-script" title="Camera Example Script">Camera Example Script</a>
</span>
<!--span class="number">
453
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#i/o---input/output" title="I/O - Input/Output">I/O - Input/Output</a>
</span>
<!--span class="number">
454
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#opening,-writing,-and-closing-file" title="Opening, writing, and closing file">Opening, writing, and closing file</a>
</span>
<!--span class="number">
455
</span-->
</li>
<li><span class="title">
<a href="#reading,-searching,-and-outputting" title="Reading, searching, and outputting">Reading, searching, and outputting</a>
</span>
<!--span class="number">
456
</span-->
</li>
<li><span class="title">
<a href="#making-new-lines" title="Making New Lines">Making New Lines</a>
</span>
<!--span class="number">
457
</span-->
</li>
<li><span class="title">
<a href="#file-seek:-grab-a-variable" title="File Seek: Grab a Variable">File Seek: Grab a Variable</a>
</span>
<!--span class="number">
458
</span-->
</li>
<li><span class="title">
<a href="#read-&amp;-write-functions-script" title="Read &amp; Write Functions Script">Read &amp; Write Functions Script</a>
</span>
<!--span class="number">
459
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-16:-make-a-chain-quest,-bow,-boomerang,-and-hookshot" title="Chapter 16: Make a Chain Quest, Bow, Boomerang, and Hookshot">Chapter 16: Make a Chain Quest, Bow, Boomerang, and Hookshot</a>
</span>
<!--span class="number">
460
</span-->
<ul>
<li><span class="title">
<a href="#chain-quest" title="Chain Quest">Chain Quest</a>
</span>
<!--span class="number">
461
</span-->
</li>
<li><span class="title">
<a href="#sola-house" title="Sola House">Sola House</a>
</span>
<!--span class="number">
462
</span-->
</li>
<li><span class="title">
<a href="#sola-house-&gt;-f1" title="Sola House > F1">Sola House &gt; F1</a>
</span>
<!--span class="number">
463
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#disabling-spin-attack" title="Disabling Spin Attack">Disabling Spin Attack</a>
</span>
<!--span class="number">
464
</span-->
</li>
<li><span class="title">
<a href="#skeleton.lua" title="Skeleton.lua">Skeleton.lua</a>
</span>
<!--span class="number">
465
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#sola-house-&gt;-f2" title="Sola House > F2">Sola House &gt; F2</a>
</span>
<!--span class="number">
466
</span-->
</li>
<li><span class="title">
<a href="#soulia-forest-&gt;-part-1" title="Soulia Forest > Part 1">Soulia Forest &gt; Part 1</a>
</span>
<!--span class="number">
467
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#hidden-switch" title="Hidden Switch">Hidden Switch</a>
</span>
<!--span class="number">
468
</span-->
</li>
<li><span class="title">
<a href="#bomb-stump" title="Bomb Stump">Bomb Stump</a>
</span>
<!--span class="number">
469
</span-->
</li>
<li><span class="title">
<a href="#trick-chest" title="Trick Chest">Trick Chest</a>
</span>
<!--span class="number">
470
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#soulia-forest-&gt;-part-2" title="Soulia Forest > Part 2">Soulia Forest &gt; Part 2</a>
</span>
<!--span class="number">
471
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#key-stump" title="Key Stump">Key Stump</a>
</span>
<!--span class="number">
472
</span-->
</li>
<li><span class="title">
<a href="#block-switch" title="Block Switch">Block Switch</a>
</span>
<!--span class="number">
473
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chain-village" title="Chain Village">Chain Village</a>
</span>
<!--span class="number">
474
</span-->
</li>
<li><span class="title">
<a href="#chain-village-&gt;-shop" title="Chain Village > Shop">Chain Village &gt; Shop</a>
</span>
<!--span class="number">
475
</span-->
</li>
<li><span class="title">
<a href="#chain-village-&gt;-zark-house" title="Chain Village > Zark House">Chain Village &gt; Zark House</a>
</span>
<!--span class="number">
476
</span-->
</li>
<li><span class="title">
<a href="#chain-village-&gt;-water-house" title="Chain Village > Water House">Chain Village &gt; Water House</a>
</span>
<!--span class="number">
477
</span-->
</li>
<li><span class="title">
<a href="#chain-village-&gt;-elfa-house" title="Chain Village > Elfa House">Chain Village &gt; Elfa House</a>
</span>
<!--span class="number">
478
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#cutscene" title="Cutscene">Cutscene</a>
</span>
<!--span class="number">
479
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chain-village-&gt;-underground" title="Chain Village > Underground">Chain Village &gt; Underground</a>
</span>
<!--span class="number">
480
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#green-orc-soldier" title="Green Orc Soldier">Green Orc Soldier</a>
</span>
<!--span class="number">
481
</span-->
</li>
<li><span class="title">
<a href="#green_orc_soldier.lua" title="green_orc_soldier.lua">green_orc_soldier.lua</a>
</span>
<!--span class="number">
482
</span-->
</li>
<li><span class="title">
<a href="#underground-map" title="Underground Map">Underground Map</a>
</span>
<!--span class="number">
483
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chain-village-&gt;-underground-boss" title="Chain Village > Underground Boss">Chain Village &gt; Underground Boss</a>
</span>
<!--span class="number">
484
</span-->
</li>
<li><span class="title">
<a href="#bow" title="Bow">Bow</a>
</span>
<!--span class="number">
485
</span-->
</li>
<li><span class="title">
<a href="#boomerang" title="Boomerang">Boomerang</a>
</span>
<!--span class="number">
486
</span-->
</li>
<li><span class="title">
<a href="#hookshot" title="Hookshot">Hookshot</a>
</span>
<!--span class="number">
487
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-17:-game-design-walkthrough" title="Chapter 17: Game Design Walkthrough">Chapter 17: Game Design Walkthrough</a>
</span>
<!--span class="number">
488
</span-->
<ul>
<li><ul>
<li><ul>
<li><span class="title">
<a href="#enemy-types" title="Enemy Types">Enemy Types</a>
</span>
<!--span class="number">
489
</span-->
</li>
<li><span class="title">
<a href="#enemy-attack-patterns" title="Enemy Attack Patterns">Enemy Attack Patterns</a>
</span>
<!--span class="number">
490
</span-->
</li>
<li><span class="title">
<a href="#puzzles" title="Puzzles">Puzzles</a>
</span>
<!--span class="number">
491
</span-->
</li>
<li><span class="title">
<a href="#quest-types" title="Quest Types">Quest Types</a>
</span>
<!--span class="number">
492
</span-->
</li>
<li><span class="title">
<a href="#map-design" title="Map Design">Map Design</a>
</span>
<!--span class="number">
493
</span-->
</li>
<li><span class="title">
<a href="#map-examples-legend" title="Map Examples Legend">Map Examples Legend</a>
</span>
<!--span class="number">
494
</span-->
</li>
<li><span class="title">
<a href="#dungeon-layout" title="Dungeon Layout">Dungeon Layout</a>
</span>
<!--span class="number">
495
</span-->
</li>
<li><span class="title">
<a href="#sidescroller:-some-information" title="Sidescroller: Some Information">Sidescroller: Some Information</a>
</span>
<!--span class="number">
496
</span-->
</li>
<li><span class="title">
<a href="#basic-story-making\genre" title="Basic Story Making\Genre">Basic Story Making\Genre</a>
</span>
<!--span class="number">
497
</span-->
</li>
<li><span class="title">
<a href="#the-plot" title="The Plot">The Plot</a>
</span>
<!--span class="number">
498
</span-->
</li>
<li><span class="title">
<a href="#title" title="Title">Title</a>
</span>
<!--span class="number">
499
</span-->
</li>
<li><span class="title">
<a href="#characters" title="Characters">Characters</a>
</span>
<!--span class="number">
500
</span-->
</li>
<li><span class="title">
<a href="#goals" title="Goals">Goals</a>
</span>
<!--span class="number">
501
</span-->
</li>
<li><span class="title">
<a href="#story-flow-&amp;-outline" title="Story Flow &amp; Outline">Story Flow &amp; Outline</a>
</span>
<!--span class="number">
502
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#outline-styles" title="Outline styles">Outline styles</a>
</span>
<!--span class="number">
503
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#mind-mapping-software" title="Mind Mapping Software">Mind Mapping Software</a>
</span>
<!--span class="number">
504
</span-->
</li>
<li><span class="title">
<a href="#common-outline-styles" title="Common Outline Styles">Common Outline Styles</a>
</span>
<!--span class="number">
505
</span-->
</li>
<li><span class="title">
<a href="#names" title="Names">Names</a>
</span>
<!--span class="number">
506
</span-->
</li>
<li><span class="title">
<a href="#some-fictional-beings" title="Some Fictional Beings">Some Fictional Beings</a>
</span>
<!--span class="number">
507
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#personality-list" title="Personality List">Personality List</a>
</span>
<!--span class="number">
508
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#positive-traits" title="Positive Traits">Positive Traits</a>
</span>
<!--span class="number">
509
</span-->
</li>
<li><span class="title">
<a href="#negative-traits" title="Negative Traits">Negative Traits</a>
</span>
<!--span class="number">
510
</span-->
</li>
<li><span class="title">
<a href="#hobbies" title="Hobbies">Hobbies</a>
</span>
<!--span class="number">
511
</span-->
</li>
<li><span class="title">
<a href="#habits" title="Habits">Habits</a>
</span>
<!--span class="number">
512
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#main-fantasy-character-classes" title="Main Fantasy Character Classes">Main Fantasy Character Classes</a>
</span>
<!--span class="number">
513
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#fighter-class" title="Fighter Class">Fighter Class</a>
</span>
<!--span class="number">
514
</span-->
</li>
<li><span class="title">
<a href="#magician-class" title="Magician Class">Magician Class</a>
</span>
<!--span class="number">
515
</span-->
</li>
<li><span class="title">
<a href="#rogue-class" title="Rogue Class">Rogue Class</a>
</span>
<!--span class="number">
516
</span-->
</li>
<li><span class="title">
<a href="#cleric-class" title="Cleric Class">Cleric Class</a>
</span>
<!--span class="number">
517
</span-->
</li>
<li><span class="title">
<a href="#ranger-class" title="Ranger Class">Ranger Class</a>
</span>
<!--span class="number">
518
</span-->
</li>
<li><span class="title">
<a href="#rarer-class" title="Rarer Class">Rarer Class</a>
</span>
<!--span class="number">
519
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-18:-upgrading,-export-project,-and-making-libraries" title="Chapter 18: Upgrading, Export Project, and Making Libraries">Chapter 18: Upgrading, Export Project, and Making Libraries</a>
</span>
<!--span class="number">
520
</span-->
<ul>
<li><ul>
<li><ul>
<li><span class="title">
<a href="#upgrading:" title="Upgrading:">Upgrading:</a>
</span>
<!--span class="number">
521
</span-->
</li>
<li><span class="title">
<a href="#export-project:" title="Export Project:">Export Project:</a>
</span>
<!--span class="number">
522
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#making-libraries" title="Making Libraries">Making Libraries</a>
</span>
<!--span class="number">
523
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#sample-2" title="Sample">Sample</a>
</span>
<!--span class="number">
524
</span-->
</li>
<li><span class="title">
<a href="#documentation" title="Documentation">Documentation</a>
</span>
<!--span class="number">
525
</span-->
</li>
<li><span class="title">
<a href="#basic-markdown-formatting" title="Basic Markdown Formatting">Basic Markdown Formatting</a>
</span>
<!--span class="number">
526
</span-->
</li>
</ul>
</li>
<li><span class="title">
<a href="#types-of-libraries" title="Types of Libraries">Types of Libraries</a>
</span>
<!--span class="number">
527
</span-->
<ul>
<li><span class="title">
<a href="#entity-library-sample" title="Entity Library Sample">Entity Library Sample</a>
</span>
<!--span class="number">
528
</span-->
</li>
<li><span class="title">
<a href="#library-setup" title="Library Setup">Library Setup</a>
</span>
<!--span class="number">
529
</span-->
</li>
<li><span class="title">
<a href="#self-function" title="Self Function">Self Function</a>
</span>
<!--span class="number">
530
</span-->
</li>
<li><span class="title">
<a href="#special-entity" title="Special Entity">Special Entity</a>
</span>
<!--span class="number">
531
</span-->
</li>
<li><span class="title">
<a href="#function-arguments" title="Function Arguments">Function Arguments</a>
</span>
<!--span class="number">
532
</span-->
</li>
<li><span class="title">
<a href="#function-tables" title="Function Tables">Function Tables</a>
</span>
<!--span class="number">
533
</span-->
</li>
<li><span class="title">
<a href="#player-2-movement" title="Player 2 Movement">Player 2 Movement</a>
</span>
<!--span class="number">
534
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#debugging" title="Debugging">Debugging</a>
</span>
<!--span class="number">
535
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#debug-levels" title="Debug Levels">Debug Levels</a>
</span>
<!--span class="number">
536
</span-->
</li>
<li><span class="title">
<a href="#lua-debug-library-function" title="Lua Debug Library function">Lua Debug Library function</a>
</span>
<!--span class="number">
537
</span-->
</li>
<li><span class="title">
<a href="#debug-traceback" title="Debug Traceback">Debug Traceback</a>
</span>
<!--span class="number">
538
</span-->
</li>
<li><span class="title">
<a href="#pcall" title="Pcall">Pcall</a>
</span>
<!--span class="number">
539
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#chapter-19:-credits" title="Chapter 19: Credits">Chapter 19: Credits</a>
</span>
<!--span class="number">
540
</span-->
<ul>
<li><ul>
<li><ul>
<li><span class="title">
<a href="#graphics" title="Graphics">Graphics</a>
</span>
<!--span class="number">
541
</span-->
</li>
<li><span class="title">
<a href="#audio" title="Audio">Audio</a>
</span>
<!--span class="number">
542
</span-->
</li>
<li><span class="title">
<a href="#scripting-credits" title="Scripting Credits">Scripting Credits</a>
</span>
<!--span class="number">
543
</span-->
</li>
<li><span class="title">
<a href="#writing-credits" title="Writing Credits">Writing Credits</a>
</span>
<!--span class="number">
544
</span-->
</li>
<li><span class="title">
<a href="#solarus-team" title="Solarus Team">Solarus Team</a>
</span>
<!--span class="number">
545
</span-->
</li>
<li><span class="title">
<a href="#special-thanks" title="Special Thanks">Special Thanks</a>
</span>
<!--span class="number">
546
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#fairyolica-world-credits" title="Fairyolica World Credits">Fairyolica World Credits</a>
</span>
<!--span class="number">
547
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#about:" title="About:">About:</a>
</span>
<!--span class="number">
548
</span-->
</li>
</ul>
</li>
</ul>
</li>
<li><span class="title">
<a href="#credit" title="Credit">Credit</a>
</span>
<!--span class="number">
549
</span-->
<ul>
<li><ul>
<li><span class="title">
<a href="#[cc0-public-domain]" title="[CC0 Public Domain]">[CC0 Public Domain]</a>
</span>
<!--span class="number">
550
</span-->
</li>
<li><span class="title">
<a href="#[cc-by-3.0-credit-by-their-terms]" title="[CC-BY 3.0 Credit by their terms]">[CC-BY 3.0 Credit by their terms]</a>
</span>
<!--span class="number">
551
</span-->
</li>
<li><span class="title">
<a href="#[cc-by-sa-3.0-credit-by-their-terms-and-share-artwork-under-the-same-terms]" title="[CC-BY-SA 3.0 Credit by their terms and share artwork under the same terms]">[CC-BY-SA 3.0 Credit by their terms and share artwork under the same terms]</a>
</span>
<!--span class="number">
552
</span-->
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>

</ul>
<p></p><h2 id="reference-i:-rgb-color-reference"><a name="reference-i:-rgb-color-reference" href="#reference-i:-rgb-color-reference"></a>Reference I: RGB Color Reference</h2><p>Source: <a href="http://www.rapidtables.com/web/color/RGB_Color.htm">Rapidtables</a></p><p><strong>RGB REFERENCE LIST:</strong></p><table>
<thead>
<tr>
<th>Color/Colour</th>
<th>RGB</th>
</tr>
</thead>
<tbody>
<tr>
<td>maroon</td>
<td>(128,0,0)</td>
</tr>
<tr>
<td>dark red</td>
<td>(139,0,0)</td>
</tr>
<tr>
<td>brown</td>
<td>(165,42,42)</td>
</tr>
<tr>
<td>firebrick</td>
<td>(178,34,34)</td>
</tr>
<tr>
<td>crimson</td>
<td>(220,20,60)</td>
</tr>
<tr>
<td>red</td>
<td>(255,0,0)</td>
</tr>
<tr>
<td>tomato</td>
<td>(255,99,71)</td>
</tr>
<tr>
<td>coral</td>
<td>(255,127,80)</td>
</tr>
<tr>
<td>indian red</td>
<td>(205,92,92)</td>
</tr>
<tr>
<td>light coral</td>
<td>(240,128,128)</td>
</tr>
<tr>
<td>dark salmon</td>
<td>(233,150,122)</td>
</tr>
<tr>
<td>salmon</td>
<td>(250,128,114)</td>
</tr>
<tr>
<td>light salmon</td>
<td>(255,160,122)</td>
</tr>
<tr>
<td>orange red</td>
<td>(255,69,0)</td>
</tr>
<tr>
<td>dark orange</td>
<td>(255,140,0)</td>
</tr>
<tr>
<td>orange</td>
<td>(255,165,0)</td>
</tr>
<tr>
<td>gold</td>
<td>(255,215,0)</td>
</tr>
<tr>
<td>dark golden rod</td>
<td>(184,134,11)</td>
</tr>
<tr>
<td>golden rod</td>
<td>(218,165,32)</td>
</tr>
<tr>
<td>pale golden rod</td>
<td>(238,232,170)</td>
</tr>
<tr>
<td>dark khaki</td>
<td>(189,183,107)</td>
</tr>
<tr>
<td>khaki</td>
<td>(240,230,140)</td>
</tr>
<tr>
<td>olive</td>
<td>(128,128,0)</td>
</tr>
<tr>
<td>yellow</td>
<td>(255,255,0)</td>
</tr>
<tr>
<td>yellow green</td>
<td>(154,205,50)</td>
</tr>
<tr>
<td>dark olive green</td>
<td>(85,107,47)</td>
</tr>
<tr>
<td>olive drab</td>
<td>(107,142,35)</td>
</tr>
<tr>
<td>lawn green</td>
<td>(124,252,0)</td>
</tr>
<tr>
<td>chart reuse</td>
<td>(127,255,0)</td>
</tr>
<tr>
<td>green yellow</td>
<td>(173,255,47)</td>
</tr>
<tr>
<td>dark green</td>
<td>(0,100,0)</td>
</tr>
<tr>
<td>green</td>
<td>(0,128,0)</td>
</tr>
<tr>
<td>forest green</td>
<td>(34,139,34)</td>
</tr>
<tr>
<td>lime</td>
<td>(0,255,0)</td>
</tr>
<tr>
<td>lime green</td>
<td>(50,205,50)</td>
</tr>
<tr>
<td>light green</td>
<td>(144,238,144)</td>
</tr>
<tr>
<td>pale green</td>
<td>(152,251,152)</td>
</tr>
<tr>
<td>dark sea green</td>
<td>(143,188,143)</td>
</tr>
<tr>
<td>medium spring green</td>
<td>(0,250,154)</td>
</tr>
<tr>
<td>spring green</td>
<td>(0,255,127)</td>
</tr>
<tr>
<td>sea green</td>
<td>(46,139,87)</td>
</tr>
<tr>
<td>medium aqua marine</td>
<td>(102,205,170)</td>
</tr>
<tr>
<td>medium sea green</td>
<td>(60,179,113)</td>
</tr>
<tr>
<td>light sea green</td>
<td>(32,178,170)</td>
</tr>
<tr>
<td>dark slate gray</td>
<td>(47,79,79)</td>
</tr>
<tr>
<td>teal</td>
<td>0,128,128)</td>
</tr>
<tr>
<td>dark cyan</td>
<td>(0,139,139)</td>
</tr>
<tr>
<td>aqua</td>
<td>(0,255,255)</td>
</tr>
<tr>
<td>cyan</td>
<td>(0,255,255)</td>
</tr>
<tr>
<td>light cyan</td>
<td>(224,255,255)</td>
</tr>
<tr>
<td>dark turquoise</td>
<td>(0,206,209)</td>
</tr>
<tr>
<td>turquoise</td>
<td>(64,224,208)</td>
</tr>
<tr>
<td>medium turquoise</td>
<td>(72,209,204)</td>
</tr>
<tr>
<td>pale turquoise</td>
<td>(175,238,238)</td>
</tr>
<tr>
<td>aqua marine</td>
<td>(127,255,212)</td>
</tr>
<tr>
<td>powder blue</td>
<td>(176,224,230)</td>
</tr>
<tr>
<td>cadet blue</td>
<td>(95,158,160)</td>
</tr>
<tr>
<td>steel blue</td>
<td>(70,130,180)</td>
</tr>
<tr>
<td>corn flower blue</td>
<td>(100,149,237)</td>
</tr>
<tr>
<td>deep sky blue</td>
<td>(0,191,255)</td>
</tr>
<tr>
<td>dodger blue</td>
<td>(30,144,255)</td>
</tr>
<tr>
<td>light blue</td>
<td>(173,216,230)</td>
</tr>
<tr>
<td>sky blue</td>
<td>(135,206,235)</td>
</tr>
<tr>
<td>light sky blue</td>
<td>(135,206,250)</td>
</tr>
<tr>
<td>midnight blue</td>
<td>(25,25,112)</td>
</tr>
<tr>
<td>navy</td>
<td>(0,0,128)</td>
</tr>
<tr>
<td>dark blue</td>
<td>(0,0,139)</td>
</tr>
<tr>
<td>medium blue</td>
<td>(0,0,205)</td>
</tr>
<tr>
<td>blue</td>
<td>(0,0,255)</td>
</tr>
<tr>
<td>royal blue</td>
<td>(65,105,225)</td>
</tr>
<tr>
<td>blue violet</td>
<td>(138,43,226)</td>
</tr>
<tr>
<td>indigo</td>
<td>(75,0,130)</td>
</tr>
<tr>
<td>dark slate blue</td>
<td>(72,61,139)</td>
</tr>
<tr>
<td>slate blue</td>
<td>(106,90,205)</td>
</tr>
<tr>
<td>medium slate blue</td>
<td>(123,104,238)</td>
</tr>
<tr>
<td>medium purple</td>
<td>(147,112,219)</td>
</tr>
<tr>
<td>dark magenta</td>
<td>(139,0,139)</td>
</tr>
<tr>
<td>dark violet</td>
<td>(148,0,211)</td>
</tr>
<tr>
<td>dark orchid</td>
<td>(153,50,204)</td>
</tr>
<tr>
<td>medium orchid</td>
<td>(186,85,211)</td>
</tr>
<tr>
<td>purple</td>
<td>(128,0,128)</td>
</tr>
<tr>
<td>thistle</td>
<td>(216,191,216)</td>
</tr>
<tr>
<td>plum</td>
<td>(221,160,221)</td>
</tr>
<tr>
<td>violet</td>
<td>(238,130,238)</td>
</tr>
<tr>
<td>magenta / fuchsia</td>
<td>(255,0,255)</td>
</tr>
<tr>
<td>orchid</td>
<td>(218,112,214)</td>
</tr>
<tr>
<td>medium violet red</td>
<td>(199,21,133)</td>
</tr>
<tr>
<td>pale violet red</td>
<td>(219,112,147)</td>
</tr>
<tr>
<td>deep pink</td>
<td>(255,20,147)</td>
</tr>
<tr>
<td>hot pink</td>
<td>(255,105,180)</td>
</tr>
<tr>
<td>light pink</td>
<td>(255,182,193)</td>
</tr>
<tr>
<td>pink</td>
<td>(255,192,203)</td>
</tr>
<tr>
<td>antique white</td>
<td>(250,235,215)</td>
</tr>
<tr>
<td>beige</td>
<td>(245,245,220)</td>
</tr>
<tr>
<td>bisque</td>
<td>(255,228,196)</td>
</tr>
<tr>
<td>blanched almond</td>
<td>(255,235,205)</td>
</tr>
<tr>
<td>wheat</td>
<td>(245,222,179)</td>
</tr>
<tr>
<td>corn silk</td>
<td>(255,248,220)</td>
</tr>
<tr>
<td>lemon chiffon</td>
<td>(255,250,205)</td>
</tr>
<tr>
<td>light golden rod yellow</td>
<td>(250,250,210)</td>
</tr>
<tr>
<td>light yellow</td>
<td>(255,255,224)</td>
</tr>
<tr>
<td>saddbe brown</td>
<td>(139,69,19)</td>
</tr>
<tr>
<td>sienna</td>
<td>(160,82,45)</td>
</tr>
<tr>
<td>chocolate</td>
<td>(210,105,30)</td>
</tr>
<tr>
<td>peru</td>
<td>(205,133,63)</td>
</tr>
<tr>
<td>sandy brown</td>
<td>(244,164,96)</td>
</tr>
<tr>
<td>burly wood</td>
<td>(222,184,135)</td>
</tr>
<tr>
<td>tan</td>
<td>(210,180,140)</td>
</tr>
<tr>
<td>rosy brown</td>
<td>(188,143,143)</td>
</tr>
<tr>
<td>moccasin</td>
<td>(255,228,181)</td>
</tr>
<tr>
<td>navajo white</td>
<td>(255,222,173)</td>
</tr>
<tr>
<td>peach puff</td>
<td>(255,218,185)</td>
</tr>
<tr>
<td>misty rose</td>
<td>(255,228,225)</td>
</tr>
<tr>
<td>lavender blush</td>
<td>(255,240,245)</td>
</tr>
<tr>
<td>linen</td>
<td>(250,240,230)</td>
</tr>
<tr>
<td>old lace</td>
<td>(253,245,230)</td>
</tr>
<tr>
<td>papaya whip</td>
<td>(255,239,213)</td>
</tr>
<tr>
<td>sea shell</td>
<td>(255,245,238)</td>
</tr>
<tr>
<td>mint cream</td>
<td>(245,255,250)</td>
</tr>
<tr>
<td>slate gray</td>
<td>(112,128,144)</td>
</tr>
<tr>
<td>light slate gray</td>
<td>(119,136,153)</td>
</tr>
<tr>
<td>light steel blue</td>
<td>(176,196,222)</td>
</tr>
<tr>
<td>lavender</td>
<td>(230,230,250)</td>
</tr>
<tr>
<td>floral white</td>
<td>(255,250,240)</td>
</tr>
<tr>
<td>alice blue</td>
<td>(240,248,255)</td>
</tr>
<tr>
<td>ghost white</td>
<td>(248,248,255)</td>
</tr>
<tr>
<td>honeydew</td>
<td>(240,255,240)</td>
</tr>
<tr>
<td>ivory</td>
<td>(255,255,240)</td>
</tr>
<tr>
<td>azure</td>
<td>(240,255,255)</td>
</tr>
<tr>
<td>snow</td>
<td>(255,250,250)</td>
</tr>
<tr>
<td>black</td>
<td>(0,0,0)</td>
</tr>
<tr>
<td>dim gray / dim grey</td>
<td>(105,105,105)</td>
</tr>
<tr>
<td>gray / grey</td>
<td>(128,128,128)</td>
</tr>
<tr>
<td>dark gray / dark grey</td>
<td>(169,169,169)</td>
</tr>
<tr>
<td>silver</td>
<td>(192,192,192)</td>
</tr>
<tr>
<td>light gray / light grey</td>
<td>(211,211,211)</td>
</tr>
<tr>
<td>gainsboro</td>
<td>(220,220,220)</td>
</tr>
<tr>
<td>white smoke</td>
<td>(245,245,245)</td>
</tr>
<tr>
<td>white</td>
<td>(255,255,255)</td>
</tr>
</tbody>
</table><h2 id="glossary:-game-terms"><a name="glossary:-game-terms" href="#glossary:-game-terms"></a>Glossary: Game Terms</h2><table>
<thead>
<tr>
<th style="text-align:left">Glossary</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1-up</td>
<td style="text-align:left">In games where players have a number of â€œlivesâ€ to complete a game or level, an object or the act of gaining an extra life. The term â€œ1-UPâ€ also commonly referred to Player number 1. Two player games scores were displayed as â€œ1-UPâ€ and â€œ2-UPâ€.</td>
</tr>
<tr>
<td style="text-align:left">1v1</td>
<td style="text-align:left">Abbreviation of 1 versus 1, which means two players battling against each other.</td>
</tr>
<tr>
<td style="text-align:left">Console</td>
<td style="text-align:left">A video game hardware unit that typically offers connects to a video screen and controllers, along with other hardware. Unlike personal computers, a console typically has a fixed hardware configuration defined by its manufacturer and cannot be customized.</td>
</tr>
<tr>
<td style="text-align:left">8-bit</td>
<td style="text-align:left">A descriptor for hardware or software that arose during the third generation of video game consoles, targeting 8-bit computer architecture.</td>
</tr>
<tr>
<td style="text-align:left">16-bit</td>
<td style="text-align:left">A descriptor for hardware or software that arose during the fourth generation of video game consoles, targeting 16-bit computer architecture.</td>
</tr>
<tr>
<td style="text-align:left">32-bit</td>
<td style="text-align:left">A descriptor for hardware or software that arose during the fifth generation of video game consoles, targeting 32-bit computer architecture.</td>
</tr>
<tr>
<td style="text-align:left">2D graphics</td>
<td style="text-align:left">The game features 2-dimensional objects.</td>
</tr>
<tr>
<td style="text-align:left">2.5D graphics</td>
<td style="text-align:left">A game consisting of 3D graphics set in a 2D plane of movement, where objects outside of this 2D plane can have an effect on the gameplay.</td>
</tr>
<tr>
<td style="text-align:left">Mode 7</td>
<td style="text-align:left">is a graphics mode on the Super NES video game console that allows a background layer to be rotated and scaled on a scanline-by-scanline basis to create many different effects.Thus, an impression of three-dimensional graphics is achieved.</td>
</tr>
<tr>
<td style="text-align:left">Action role-playing game (ARPG)</td>
<td style="text-align:left">A genre of role-playing video games where battle actions are performed in real-time instead of a turn-based mechanic.</td>
</tr>
<tr>
<td style="text-align:left">ARPG</td>
<td style="text-align:left">Abbreviation of Action role-playing game.</td>
</tr>
<tr>
<td style="text-align:left">Alpha release</td>
<td style="text-align:left">An initial, incomplete version of a game (compare â€˜beta versionâ€™); alpha versions are usually released early in the development process to test a gameâ€™s most critical functionality and prototype design concepts.</td>
</tr>
<tr>
<td style="text-align:left">Beta release</td>
<td style="text-align:left">An early release of a video game, following its alpha release, where typically the game developer seeks to remove bugs prior to the released product through feedback from players and testers.</td>
</tr>
<tr>
<td style="text-align:left">Closed beta</td>
<td style="text-align:left">A beta period where only specific people have access to the game</td>
</tr>
<tr>
<td style="text-align:left">Open beta</td>
<td style="text-align:left">The opposite of a â€˜closed betaâ€™; the players are not bound by non-disclosure agreements and are free to show the game to others.</td>
</tr>
<tr>
<td style="text-align:left">Bonus stage</td>
<td style="text-align:left">A level that is usually unlocked and not normally on the level choose screen until unlocked.</td>
</tr>
<tr>
<td style="text-align:left">Campaign mode</td>
<td style="text-align:left">A campaign mode, story mode, or simply campaign refers to one of several possible operating modes of a game in which levels are specifically encountered in a linear or branching fashion, often with more story elements present compared to other modes (such as a skirmish mode or sound test).</td>
</tr>
<tr>
<td style="text-align:left">Challenge mode</td>
<td style="text-align:left">A mode of gameplay offered beyond the gameâ€™s normal play mode that tasks the player(s) to replay parts of the game or special levels under specific conditions that are not normally present or required in the main game, such as finishing a level within a specific time, or using only one type of weapon. If a game doesnâ€™t feature a â€˜challenge modeâ€™, players will often create self-imposed challenges by forbidding or restricting the use of certain game mechanics.</td>
</tr>
<tr>
<td style="text-align:left">Character class</td>
<td style="text-align:left">A character type with distinct abilities and attributes both positive and negative, such as a warrior, thief, wizard, or priest.</td>
</tr>
<tr>
<td style="text-align:left">Saved game (game save, savegame, savefile)</td>
<td style="text-align:left">A file or similar data storage method that stores the state of the game in non-temporary memory, enabling the player to shut down the gaming system and then later restart the system and load the game state from the game file to continuing playing where they left off. Saved games may also be used to store the gameâ€™s state before a difficult area that, should the player-character die, the player can restart from that save point. Known a lot as a checkpoint.</td>
</tr>
<tr>
<td style="text-align:left">Save point</td>
<td style="text-align:left">A place in the game world of a video game where a game save can be made. Some games do not have specific save points, instead allowing the player to save at any point.</td>
</tr>
<tr>
<td style="text-align:left">Chiptune</td>
<td style="text-align:left">Music composed for the microchip-based audio hardware of early home computers and gaming consoles. Due to the technical limitations of earlier video game hardware, chiptune came to define a style of its own, known for its â€œsoaring flutelike melodies, buzzing square wave bass, rapid arpeggios, and noisy gated percussion.â€</td>
</tr>
<tr>
<td style="text-align:left">Combo</td>
<td style="text-align:left">Combinations of attacks in a fighting game, during which an opponent is helpless to defend themselves. To correctly execute a combo, a player needs to learn complex series of joystick and button combinations.</td>
</tr>
<tr>
<td style="text-align:left">Continue</td>
<td style="text-align:left">A common term in video games for the option to continue the game after all of the playerâ€™s lives have been lost, rather than ending the game and restarting from the very beginning. There may or may not be a penalty for doing this, such as losing a certain number of points or being unable to access bonus stages. </td>
</tr>
<tr>
<td style="text-align:left">Controller</td>
<td style="text-align:left">A means of control over the console or PC you are playing the game on.</td>
</tr>
<tr>
<td style="text-align:left">PC(s)</td>
<td style="text-align:left">Player Character(s)</td>
</tr>
<tr>
<td style="text-align:left">Cutscene</td>
<td style="text-align:left">A (usually) short video which provides detail and exposition to the story. These videos, usually in much higher graphical resolution and detail than the basic game, are used extensively in MMOs and RPGs to move the story forward.</td>
</tr>
<tr>
<td style="text-align:left">D-pad</td>
<td style="text-align:left">A 4-directional rocker button that allows the player to direct game action in eight different directions: up, down, left, right, and the diagonals involving these. </td>
</tr>
<tr>
<td style="text-align:left">Damage over time (DoT)</td>
<td style="text-align:left">An effect, such as poison or catching on fire, that reduces a playerâ€™s health over the course of time or turns.</td>
</tr>
<tr>
<td style="text-align:left">Damage per second (DPS)</td>
<td style="text-align:left">Used as a metric in some games to allow the player to determine their offensive power.</td>
</tr>
<tr>
<td style="text-align:left">Difficulty</td>
<td style="text-align:left">The level of difficulty that a player wishes to face while playing a game; at higher difficulty levels, the player usually faces stronger NPCs, limited resources, or tighter time-limits.</td>
</tr>
<tr>
<td style="text-align:left">Double jump</td>
<td style="text-align:left">An additional jump that follows the first in quick succession</td>
</tr>
<tr>
<td style="text-align:left">Downloadable content (DLC)</td>
<td style="text-align:left">Additional content for a video game that is acquired through digital download and often requiring additional purchase. Increasingly replacing the traditional retail â€˜expansion packâ€™.</td>
</tr>
<tr>
<td style="text-align:left">DPM</td>
<td style="text-align:left">Abbreviation of â€œdamage per minuteâ€, used as a metric in some games to allow the player to determine their offensive power.</td>
</tr>
<tr>
<td style="text-align:left">DPS</td>
<td style="text-align:left">Abbreviation of Damage per second</td>
</tr>
<tr>
<td style="text-align:left">DRM</td>
<td style="text-align:left">Abbreviation of Digital rights management</td>
</tr>
<tr>
<td style="text-align:left">Emulator</td>
<td style="text-align:left">A software program that is designed to replicate the software and hardware of a video game console on more modern computers and other devices. Emulators typically include the ability to load in software images of cartridges and other similar hardware-based game distribution methods from the earlier hardware generations, in addition to more traditional software images.</td>
</tr>
<tr>
<td style="text-align:left">Experience point</td>
<td style="text-align:left">In games that feature the ability for the player character(s) to gain levels such as CRPGs and JRPGs, experience points are used to denote progress towards the next level.</td>
</tr>
<tr>
<td style="text-align:left">Farming</td>
<td style="text-align:left">Repeating a battle, quest or a similar part of the game in order to receive either experience points, money, or specific items that can be gained through that battle or quest.</td>
</tr>
<tr>
<td style="text-align:left">First-person shooter (FPS)</td>
<td style="text-align:left">A genre of video games where the player experiences the game from the first person perspective, and where the primary mechanic is the use of guns and other ranged weapons to defeat enemies.</td>
</tr>
<tr>
<td style="text-align:left">FPS</td>
<td style="text-align:left">An abbreviation for either First-person shooter or Frames per second.</td>
</tr>
<tr>
<td style="text-align:left">Frame rate</td>
<td style="text-align:left">A measure of the rendering speed of a video game, typically in frames per second (FPS).</td>
</tr>
<tr>
<td style="text-align:left">Fog of war</td>
<td style="text-align:left">A â€˜fogâ€™ that covers unexplored areas of the map, hiding enemy units in that area. Common in strategy games.</td>
</tr>
<tr>
<td style="text-align:left">Game over</td>
<td style="text-align:left">The end of the game (failure screen).</td>
</tr>
<tr>
<td style="text-align:left">Game port</td>
<td style="text-align:left">When a game is ported from one platform to another; cross-platform ports are often criticized for their quality, particularly if platform-specific design elements (such as input methods) are not updated for the target platform.</td>
</tr>
<tr>
<td style="text-align:left">God mode (infinite health/life, invincibility, invulnerability)</td>
<td style="text-align:left">A cheat that makes player-characters invulnerable. Occasionally adds invincibility, where the player can hurt enemies by touching them (e.g., the Super Mario Super Star)  The effect can also be temporary.</td>
</tr>
<tr>
<td style="text-align:left">Graphic content filter</td>
<td style="text-align:left">A setting that controls whether the game displays graphic violence.</td>
</tr>
<tr>
<td style="text-align:left">Griefer</td>
<td style="text-align:left">A player in a multiplayer video game who deliberately irritates and harasses other players within the game. Many online multiplayer games enforce rules that forbid griefing.</td>
</tr>
<tr>
<td style="text-align:left">Health</td>
<td style="text-align:left">The remaining amount of metered damage that a character or player can take before dying or losing a life.</td>
</tr>
<tr>
<td style="text-align:left">Indie game (independent video game)</td>
<td style="text-align:left">Loosely defined as a game made by a person or studio without any financial, development, marketing, or distribution support from a large publisher, though there are indie games that are exceptions to this definition.</td>
</tr>
<tr>
<td style="text-align:left">Inventory</td>
<td style="text-align:left">A menu or area of the screen where items collected by the player during the game are stored. This interface allows the player to retrieve any item to use it as an instant effect, or to equip the player character with the item.</td>
</tr>
<tr>
<td style="text-align:left">Joystick</td>
<td style="text-align:left">Note: Do not confuse this with â€œan Analog stick.â€ An input device consisting of a stick that pivots on a base and reports its angle or direction to the device it is controlling, such as a plane.</td>
</tr>
<tr>
<td style="text-align:left">JRPG</td>
<td style="text-align:left">Abbreviation of Japanese role-playing game, typically referring to a subgenre of RPGs that originated from Japan.</td>
</tr>
<tr>
<td style="text-align:left">Jump</td>
<td style="text-align:left">A basic move where the player jumps vertically upon pressing the action button.</td>
</tr>
<tr>
<td style="text-align:left">Kill screen</td>
<td style="text-align:left">A stage or level in a video game (often an arcade game) that stops the playerâ€™s progress due to a software bug.[26] Kill screens can result in unpredictable gameplay and bizarre glitches.</td>
</tr>
<tr>
<td style="text-align:left">Lag</td>
<td style="text-align:left">The delay between an action and its corresponding result, most commonly in an online environment. Often the result of delayed network traffic.</td>
</tr>
<tr>
<td style="text-align:left">Letâ€™s Play</td>
<td style="text-align:left">A type of video game run-through done by players, through screenshots or video, where the player provides commentary about the game as they work through it.</td>
</tr>
<tr>
<td style="text-align:left">Level</td>
<td style="text-align:left">A stage in a game. Level may also represent experience levels or difficulty levels, depending on context.</td>
</tr>
<tr>
<td style="text-align:left">Level editor</td>
<td style="text-align:left">A program, either provided within the game software or as an additional program, that allows players to create new levels for video games.</td>
</tr>
<tr>
<td style="text-align:left">Life</td>
<td style="text-align:left">In video games, if a player character loses all of its health points, it loses a life. Losing all of oneâ€™s lives is usually a loss condition and may force the player to start over. It is common in action games for the player character to have multiple lives and chances to earn more during the game. This way, a player can recover from making a disastrous mistake.</td>
</tr>
<tr>
<td style="text-align:left">Loot system</td>
<td style="text-align:left">Methods used in multiplayer games to distribute treasure among cooperating players for finishing a quest. While early MMOs distributed loot on a â€˜first come, first servedâ€™ basis, it was quickly discovered that such a system was easily abused, and later games instead used a â€˜need-or-greedâ€™ system, in which the participating players roll virtual â€˜diceâ€™ and the loot is distributed according to the results.</td>
</tr>
<tr>
<td style="text-align:left">Magic</td>
<td style="text-align:left">Any of a variety of systems in games to render fantastical or otherwise unnatural effects utilizing a game mechanic, either accessories (scrolls, potions, artifacts) or a pool of resources inherent to the character (â€œmanaâ€, magic points, etc).</td>
</tr>
<tr>
<td style="text-align:left">Main</td>
<td style="text-align:left">A term meaning to focus on playing a certain character, sometimes exclusively.</td>
</tr>
<tr>
<td style="text-align:left">Main Quest</td>
<td style="text-align:left">In games with multiple quests, the â€˜main questâ€™ is a chain of quests that comprise the gameâ€™s storyline and must be completed to finish the game. The opposite is side quest which still offer rewards but donâ€™t advance the main quest.</td>
</tr>
<tr>
<td style="text-align:left">Massively multiplayer online game (MMO)</td>
<td style="text-align:left">A game that involves a large community of players co-existing in an online world, in cooporation or competition with one another.</td>
</tr>
<tr>
<td style="text-align:left">Massively multiplayer online role-playing game (MMORPG)</td>
<td style="text-align:left">An MMO that utilizes traditional role-playing game game mechanics into its gameplay. Classic games such as EverQuest and Dark Age of Camelot were progenitors of the genre. The most popular and most well-known game of this type is Blizzard Entertainmentâ€™s World of Warcraft.</td>
</tr>
<tr>
<td style="text-align:left">MMO</td>
<td style="text-align:left">Abbreviation of Massively multiplayer online game</td>
</tr>
<tr>
<td style="text-align:left">MMORPG</td>
<td style="text-align:left">Abbreviation of Massively multiplayer online role-playing game</td>
</tr>
<tr>
<td style="text-align:left">MMR</td>
<td style="text-align:left">Abbreviation of Matchmaking rating</td>
</tr>
<tr>
<td style="text-align:left">Mob</td>
<td style="text-align:left">Mob is a term for an in-game enemy who roams a specific area. It is an abbreviation of â€œmobileâ€, and came into prevalence with the explosion of MMOs and the greater computing power available to these games. In older games, enemies you encountered were stationary, only occupying a specific location within the game and were therefore not â€œmobsâ€.</td>
</tr>
<tr>
<td style="text-align:left">MOBA</td>
<td style="text-align:left">Abbreviation of Multiplayer online battle arena</td>
</tr>
<tr>
<td style="text-align:left">Mod</td>
<td style="text-align:left">A third-party addition or alteration to a game. Mods may take the form of new character skins, altered gameplay mechanics or the creation of a new story or an entirely new game-world. Some games (such as Fallout 4 and Skyrim) provide tools to create game mods, while other games that donâ€™t officially support game modifications can be altered or extended with the use of third-party tools.</td>
</tr>
<tr>
<td style="text-align:left">Minigame</td>
<td style="text-align:left">A â€˜game-within-a-gameâ€™, often provided as a diversion from the gameâ€™s plot. Minigames are usually one-screen affairs with limited replay value, though some games have provided an entire commercial release as a â€˜mini-gameâ€™ within the primary game-world.</td>
</tr>
<tr>
<td style="text-align:left">Multiplatform</td>
<td style="text-align:left">A game which can be played on multiple platforms. Also called cross-platform</td>
</tr>
<tr>
<td style="text-align:left">Multiplayer</td>
<td style="text-align:left">A game that allows multiple players to play at once.</td>
</tr>
<tr>
<td style="text-align:left">MP</td>
<td style="text-align:left">Abbreviation of â€˜Magic Points. Abbreviation of Multiplayer.</td>
</tr>
<tr>
<td style="text-align:left">Nerf</td>
<td style="text-align:left">A change intended to weaken a particular item, tactic, ability, or character, ostensibly for balancing purposes.</td>
</tr>
<tr>
<td style="text-align:left">New Game Plus</td>
<td style="text-align:left">A mode typically offered in games with campaign modes that allows the player to replay the campaign and carry over characters, attributes, or equipment from a prior run-through.</td>
</tr>
<tr>
<td style="text-align:left">Newbie</td>
<td style="text-align:left">Someone new to the game, generally used as a pejorative, although usually light-heartedly. See also, â€œNoobâ€ (below).</td>
</tr>
<tr>
<td style="text-align:left">Noob</td>
<td style="text-align:left">A pejorative used to insult a player who is making mistakes that an experienced player would be expected to avoid; by far the most common insult in any gaming community.</td>
</tr>
<tr>
<td style="text-align:left">Non-player character (NPC)</td>
<td style="text-align:left">A computer controlled character, or any character that is not under the playerâ€™s direct control.</td>
</tr>
<tr>
<td style="text-align:left">NPC</td>
<td style="text-align:left">Abbreviation of Non-player character</td>
</tr>
<tr>
<td style="text-align:left">Patch</td>
<td style="text-align:left">The process by which a developer of a video game creates an update to an already released game with the intention of possibly adding new content, fixing any bugs/glitches currently residing in the game, balancing character issues (especially prevalent in online multi-player games with competitive focuses), or updating the game to be compatible with DLC releases.</td>
</tr>
<tr>
<td style="text-align:left">Physical release</td>
<td style="text-align:left">A version of a video game released on an optical disc or other storage device, as opposed to a digital download.</td>
</tr>
<tr>
<td style="text-align:left">Player-character</td>
<td style="text-align:left">A Player Character, or PC, is the main protagonist controlled and played by the human player in a video game. Tidus from Final Fantasy X, Doomguy from the Doom series, and Commander Shepard from the Mass Effect series are all â€œplayer charactersâ€ developed by their game studios. Your characters you create in MMOs and MMORPGs are also â€œplayer charactersâ€.</td>
</tr>
<tr>
<td style="text-align:left">Player versus environment (PvE)</td>
<td style="text-align:left">Refers to fighting computer-controlled enemies (non-playing characters), as opposed to PvP (player versus player).</td>
</tr>
<tr>
<td style="text-align:left">Player versus player (PvP)</td>
<td style="text-align:left">Refers to competing against other players, as opposed to PvE (player versus environment).</td>
</tr>
<tr>
<td style="text-align:left">PvE</td>
<td style="text-align:left">Abbreviation of Player versus Environment</td>
</tr>
<tr>
<td style="text-align:left">PvP</td>
<td style="text-align:left">Abbreviation of Player versus Player</td>
</tr>
<tr>
<td style="text-align:left">Playthrough</td>
<td style="text-align:left">The act of playing a game from start to finish, in one or several sessions.</td>
</tr>
<tr>
<td style="text-align:left">Power-up</td>
<td style="text-align:left">Objects that instantly benefit or add extra abilities to the game character, usually as a temporary effect. Persistent power-ups are called perks.</td>
</tr>
<tr>
<td style="text-align:left">Quest</td>
<td style="text-align:left">A â€œquestâ€ is any objective-based activity created in-game for the purpose of either story or character level advancement. Quests follow many common types, such as â€œKill X number of Y monsterâ€, â€œGather X number of Y itemâ€, or â€œEscort this person from point A to point B and keep them safeâ€. Some quests involve more detailed information and mechanics and are either greatly enjoyed by players as a break from the above common monotony, or are reviled as uselessly more complicated than necessary to the game.</td>
</tr>
<tr>
<td style="text-align:left">Quicksave/Quickload</td>
<td style="text-align:left">A mechanism in a video game where progress to or from a saved game can be done by pressing a single controller button or keystroke, instead of opening a file dialog to locate the save file. Typically, quicksaving will overwrite any previous saved state.</td>
</tr>
<tr>
<td style="text-align:left">Rage Game</td>
<td style="text-align:left">A video game which is designed to be extremely difficult and frustrating, with elements that intentionally try to â€˜cheatâ€™ in some way or form, with the intent of causing a player to become extremely angry and rage quit.</td>
</tr>
<tr>
<td style="text-align:left">Rage Quit</td>
<td style="text-align:left">Quitting a game in an act of anger; rage-quitting in an online game is widely considered poor sportsmanship.</td>
</tr>
<tr>
<td style="text-align:left">Real-time strategy (RTS)</td>
<td style="text-align:left">A genre of video games where the player controls one or more units in real-time combat with human or computer opponents.</td>
</tr>
<tr>
<td style="text-align:left">Retrogaming</td>
<td style="text-align:left">The playing or collecting of older personal computer, console, and arcade video games in contemporary times.</td>
</tr>
<tr>
<td style="text-align:left">Roguelike</td>
<td style="text-align:left">A genre of video games featuring procedurally-generated level generation and permanent death.</td>
</tr>
<tr>
<td style="text-align:left">RPG</td>
<td style="text-align:left">Abbreviation of Role-playing video game</td>
</tr>
<tr>
<td style="text-align:left">Role-playing video game (RPG)</td>
<td style="text-align:left">An RPG is a game where in the human player takes on the role of a specific character â€œclassâ€ and advances the skills and abilities of that character within the game environment. RPG characters generally have a wide variety of skills and abilities available to them, and much theorycrafting (the art of developing a specific character type to its highest in-game potential) is involved in creating the best possible form of each of these character classes.<br><br>This is different from games such as First Person Shooters (FPS), wherein the â€œplayer characterâ€ in those games are all standardized forms and the physical skills of the player involved are the determining factor in their success or failure within the game. In an RPG, a human player can be the best player in the world at the game, but if they are using a character build that is substandard, they can be significantly outplayed by a lesser player running a more optimal character build.</td>
</tr>
<tr>
<td style="text-align:left">Rush (or Zerg rush)</td>
<td style="text-align:left">A tactic in strategy games where the player sacrifices economic development in favour of using many low-cost fast/weak units to rush and overwhelm an enemy by attrition or sheer numbers.</td>
</tr>
<tr>
<td style="text-align:left">Sandbox game</td>
<td style="text-align:left">A game wherein the player has been freed from the traditional structure and direction typically found in video games, and is instead given the ability to choose what, when, and how they want to approach the available choices in content. The term is in reference to a childâ€™s sandbox in which no rules are present and play is derived from open-ended choice. While some sandbox games may have building and creation aspects to their gameplay, those activities are not required. Sandbox games usually take place in an open-world setting as to facilitate the freedom of choice a player is given.</td>
</tr>
<tr>
<td style="text-align:left">Side quest</td>
<td style="text-align:left">A quest that is optional, completing these wonâ€™t advance the main story line (Main quest).</td>
</tr>
<tr>
<td style="text-align:left">Simulation game (Sim)</td>
<td style="text-align:left">A video game that simulates some aspect of reality, though the degree of realism may vary. They are usually open-ended and have no intrinsic goals to be met. Inclusive definitions allow for any video game that models reality, such as sports games, while exclusive definitions generally focus on city-building games, vehicle simulation games, or both.</td>
</tr>
<tr>
<td style="text-align:left">Single-player</td>
<td style="text-align:left">A game that can only have one player at a time. Contrasted with multiplayer.</td>
</tr>
<tr>
<td style="text-align:left">Skill tree</td>
<td style="text-align:left">A character development gaming mechanic typically seen in role-playing games. A skill tree consists of a series of skills (sometimes known as perks or by other names) which can be earned by the player as he or she levels up or otherwise progresses his or her player character. These skills grant gameplay benefits to the player; for example, giving the character the ability to perform a new action, or giving a boost to one of the characterâ€™s stats. A skill tree is called a â€œtreeâ€ because it uses a tiered system and typically branches out into multiple paths.</td>
</tr>
<tr>
<td style="text-align:left">Split-screen multiplayer</td>
<td style="text-align:left">A game that presents 2 or more views seen by different players in a multiplayer game on the same display unit.</td>
</tr>
<tr>
<td style="text-align:left">Stat point</td>
<td style="text-align:left">A discrete amount of points for the player to distribute among their characterâ€™s attributes, e.g., to choose their playerâ€™s trade-offs between strength, charisma, and stamina.</td>
</tr>
<tr>
<td style="text-align:left">Status effect</td>
<td style="text-align:left">This is an overarching term that covers both â€œbuffsâ€ and â€œdebuffsâ€. Essentially, any effect to a character that is outside of the normal baseline is a â€œstatus effectâ€. Common negative status effects are poisoning (damage over time), petrification/paralysis (inability to move), or armor/damage reduction (lowering of defensive/offensive abilities). Common positive status effects include a heal-over-time (a small, pulsing heal that triggers multiple times over a set period), armor/damage increases, or speed increases.</td>
</tr>
<tr>
<td style="text-align:left">Title screen</td>
<td style="text-align:left">The initial screen of a computer, video, or arcade game after the credits and logos of the game developer and the publisher are displayed. Earlier title screens often included all the game options available (single player, multiplayer, configuration of controls, etc.) while modern games have opted for the title screen to serve as a splash screen. This can be attributed to the use of the title screen as a loading screen, in which to cache all the graphical elements of the main menu. Older computer and video games had relatively simple menu screens, that often featured pre-rendered artwork.</td>
</tr>
<tr>
<td style="text-align:left">Touchscreen</td>
<td style="text-align:left">When the screen of the console can be touched and get a response.</td>
</tr>
<tr>
<td style="text-align:left">Turn-based game</td>
<td style="text-align:left">When a game consists of multiple turns. When one playerâ€™s turn is up, they must wait until everyone else has finished their turn.</td>
</tr>
<tr>
<td style="text-align:left">Upgrade</td>
<td style="text-align:left">A way to make the given item, character, etc. more powerful.</td>
</tr>
<tr>
<td style="text-align:left">World</td>
<td style="text-align:left">A series of levels that share a similar environment or theme. A boss fight will typically happen once all or most of these levels are completed rather than after each individual level.</td>
</tr>
<tr>
<td style="text-align:left">XP</td>
<td style="text-align:left">Abbreviation of Experience Point</td>
</tr>
<tr>
<td style="text-align:left">Zero-day patch</td>
<td style="text-align:left">A software patch that is set to be released on the day of the gameâ€™s official release (â€œthe 0th dayâ€), reflecting updates and fixes that were added after the final release candidate was prepared.</td>
</tr>
<tr>
<td style="text-align:left">Sprite (computer graphics)</td>
<td style="text-align:left">In computer graphics, a sprite is a two-dimensional bitmap that is integrated into a larger scene.</td>
</tr>
<tr>
<td style="text-align:left">Pixel</td>
<td style="text-align:left">In digital imaging, a pixel, pel, dots, or picture element is a physical point in a raster image, or the smallest addressable element in an all points addressable display device; so it is the smallest controllable element of a picture represented on the screen.</td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Glossary_of_video_game_terms#Retrogaming">https://en.wikipedia.org/wiki/Glossary_of_video_game_terms#Retrogaming</a></td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Mode_7">https://en.wikipedia.org/wiki/Mode_7</a></td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29">https://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29</a></td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Pixel">https://en.wikipedia.org/wiki/Pixel</a></td>
</tr>
<tr>
<td style="text-align:left">Sound Novel</td>
<td style="text-align:left">A Sound Novel is a type of visual novel. The term is a trademark by Chunsoft and emphasizes the sound aspects as opposed to visual aspects. Sound novels are actually older than visual novels but because of the trademark the term â€œvisual novelâ€ is the one thatâ€™s stuck in the long term. For older games the distinction between the two is somewhat notable, but for most modern games thereâ€™s basically no difference between the meaning of the two terms.</td>
</tr>
<tr>
<td style="text-align:left">Kinetic Novel</td>
<td style="text-align:left">A Kinetic Novel is a type of visual novel without any gameplay at all. That includes things like making decisions for the protagonist. Because of the lack of any player input, the story is entirely preset and the player just reads through it without any input. These are quite close to ordinary novels with added graphics, sound, and typically more focus on dialogue. Planetarian would be an example of such a game. Kinetic novels are usually shorter than other visual novels, though there are exceptions to this like Higurashi.</td>
</tr>
<tr>
<td style="text-align:left">Dating Sims</td>
<td style="text-align:left">Dating Sims are a different category of game from Visual Novels. These games do feature gameplay, but the object of the gameplay is to get into a romantic relationship with a character from the game. The most familiar example is probably the Tokimeki Memorial series, though there are many other highly successful examples such as Love Plus. Unlike visual novels, the gameplay here can be fairly complex.</td>
</tr>
<tr>
<td style="text-align:left">Visual novel</td>
<td style="text-align:left">Visual Novel (ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒŽãƒ™ãƒ«), often shortened to VN, is a general type of game with a lot of dialogue and minimal gameplay (usually the gameplay is reduced to just making choices at a few plot points to determine what route one enters). It may or may not involve any romance or sexual encounters. For example, Danganronpa could qualify as a visual novel, but probably not for any of the other categories here. A more canonical example would be Higurashi no Naku Koro ni, though purists will sometimes insist on calling it a â€œSound Novelâ€ as this is the official description. More on this in the related terms section. Calling something a visual novel emphasizes the â€œnovelâ€ aspect and suggests that there is at least some semblance of a story. It would not usually be used to describe eroge which are solely sex scenes.<br><br>Visual novel can also be used in a more technical way to describe games where the text is overlayed over the background as opposed to being presented in dialogue boxes. This distinction is more common among Japanese speakers than English speakers. In English usually people will abbreviate this as NVL, and games where the dialogue is in a box at the bottom of the screen are called ADV. Fate/Stay Night is an example of this style.</td>
</tr>
<tr>
<td style="text-align:left">Eroge</td>
<td style="text-align:left">Eroge (ã‚¨ãƒ­ã‚²) is a Japanese shortening of â€œerotic gameâ€. These can also be called H-games. Native Japanese speakers sometimes use the term to describe games without any sexual content (e.g. Clannad), but in English this isnâ€™t really a correct use of the term. Eroge can be any game with sex scenes (also called H-scenes). This includes some games that are not traditionally included as visual novels or dating sims. For example, Kamidori Alchemy Meister is an example of a game without a great deal of visual novel content but which still qualifies as an eroge.</td>
</tr>
<tr>
<td style="text-align:left">Logan M:</td>
<td style="text-align:left"><a href="http://anime.stackexchange.com/questions/4926/what-are-the-differences-between-visual-novel-eroge-gal-game-and-a-dating-sim">http://anime.stackexchange.com/questions/4926/what-are-the-differences-between-visual-novel-eroge-gal-game-and-a-dating-sim</a> (CC-BY-SA 3.0)</td>
</tr>
<tr>
<td style="text-align:left">Artificial intelligence (AI)</td>
<td style="text-align:left">Artificial intelligence is used to generate intelligent behaviors primarily in non-player characters (NPCs), often simulating human-like intelligence. The techniques used typically draw upon existing methods from the field of artificial intelligence (AI).</td>
</tr>
<tr>
<td style="text-align:left">Beat â€˜em up</td>
<td style="text-align:left">Beat â€˜em up (also known as brawler) is a video game genre featuring hand-to-hand combat between the protagonist and an improbably large number of opponents. These games typically take place in urban settings and feature crime-fighting and revenge-based plots, though some games may employ historical, sci-fi or fantasy themes. Traditional beat â€˜em ups take place in scrolling, two-dimensional (2D) levels</td>
</tr>
<tr>
<td style="text-align:left">Central processing unit (CPU)</td>
<td style="text-align:left">A central processing unit (CPU) is the electronic circuitry within a computer that carries out the instructions of a computer program by performing the basic arithmetic, logical, control and input/output (I/O) operations specified by the instructions.</td>
</tr>
<tr>
<td style="text-align:left">Camera:</td>
<td style="text-align:left">The camera is what follows the character around. It causes the screen to scroll with the player character.</td>
</tr>
<tr>
<td style="text-align:left">Cheats Codes:</td>
<td style="text-align:left">Special codes that allow you bypass the normal limitations of a game.</td>
</tr>
<tr>
<td style="text-align:left">Spawning</td>
<td style="text-align:left">Spawning is the live creation of a character, item or mob. Respawning is the recreation of an entity after its death or destruction, perhaps after losing one of its lives.</td>
</tr>
<tr>
<td style="text-align:left">Shoulder buttons: (Triggers)</td>
<td style="text-align:left">Shoulder buttons are found on the back of modern controllers.</td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Artificial_intelligence_(video_games">https://en.wikipedia.org/wiki/Artificial_intelligence_(video_games</a>)</td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Beat_%27em_up">https://en.wikipedia.org/wiki/Beat_%27em_up</a></td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Central_processing_unit">https://en.wikipedia.org/wiki/Central_processing_unit</a></td>
</tr>
<tr>
<td style="text-align:left">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Spawning_%28video_gaming%29">https://en.wikipedia.org/wiki/Spawning_%28video_gaming%29</a></td>
</tr>
<tr>
<td style="text-align:left">Chipset</td>
<td style="text-align:left">Commonly know now as tileset. This word is kinda old school now. This is the file that holds most graphics. Normally, it does not contain character graphics.</td>
</tr>
<tr>
<td style="text-align:left">Charset</td>
<td style="text-align:left">Short for character sets. Charsets hold character graphics.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">Think of a layer like a sandwich. Cheese layer goes on the mean layer. Layers are basically images layered on top of each other. You can normally change the layers in some way.</td>
</tr>
<tr>
<td style="text-align:left">Entity</td>
<td style="text-align:left">An entity is something that exists separately from other things and has a clear identity or purpose. For example, a door entity would be used for only door like functions.</td>
</tr>
<tr>
<td style="text-align:left">Map</td>
<td style="text-align:left">A map in game development is the place where you put together the tiles from the tileset. Your map is the world you create with the tile graphics.</td>
</tr>
<tr>
<td style="text-align:left">Cursor</td>
<td style="text-align:left">The cursor is the black arrow (normally a black arrow) that you move around on the screen.</td>
</tr>
</tbody>
</table><h2 id="chapter-1:-about-solarus,-basic-history,-download-instructions,-shortcuts,-and-documentation"><a name="chapter-1:-about-solarus,-basic-history,-download-instructions,-shortcuts,-and-documentation" href="#chapter-1:-about-solarus,-basic-history,-download-instructions,-shortcuts,-and-documentation"></a>Chapter 1: About Solarus, Basic History, Download Instructions, Shortcuts, and Documentation</h2><h3 id="about"><a name="about" href="#about"></a>About</h3><p>Solarus is a free GPLv3 2D ARPG game engine. ARPG stands for action role playing game. That means it for making games like Secret of Mana or Zelda, but you can do anything in Solarus if you code it. Visual novels, sidescrollers, and all those good game types are possible as well. There is already code in the community for most of it. The coding language used for making games is Lua and it is a super easy programming language. The easiest part is that Solarusâ€™s creator, â€œChristophoâ€, has put together many functions to make tasks even easier.</p><h5 id="basic-solarus-history"><a name="basic-solarus-history" href="#basic-solarus-history"></a>Basic Solarus History</h5><p>Solarus began as a Zelda-like RPG Maker 2000 game. Due to limitations in RPG Maker 2000, the creator Christopho created a Java Engine called Solarus. The Solarus engine was named after the game made with RPG maker. The engine was scripted in Java, but later rewritten in C++ for speed.</p><p>Solarus has advanced greatly since being rewritten in C++, but that is greatly due to Christopho and his team. Their hard efforts keep the Solarus Community growing. The future of Solarus is getting brighter by each passing day.</p><h5 id="download-the-solarus-arpg-engine"><a name="download-the-solarus-arpg-engine" href="#download-the-solarus-arpg-engine"></a>Download the Solarus ARPG Engine</h5><p>Go to this URL to download Solarus.<br><a href="http://www.solarus-games.org/engine/download/">http://www.solarus-games.org/engine/download/</a></p><p>Scroll down to the bottom and choose the version that fits your OS. Ubuntu, Archlinux, Gentoo, OpenBSD / FreeBSD, OpenSUSE, Mac OS X, Microsoft Windows, and ReactOS Windows.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_1_images/Chapter_1_download.png" alt="Chapter_1_download.png"></p><h5 id="shortcuts"><a name="shortcuts" href="#shortcuts"></a>Shortcuts</h5><table>
<thead>
<tr>
<th>Task</th>
<th style="text-align:center">Shortcut</th>
</tr>
</thead>
<tbody>
<tr>
<td>New project</td>
<td style="text-align:center">CTRL + N</td>
</tr>
<tr>
<td>Load project</td>
<td style="text-align:center">CTRL + L</td>
</tr>
<tr>
<td>Close tab</td>
<td style="text-align:center">CTRL + F4</td>
</tr>
<tr>
<td>Close all tabs</td>
<td style="text-align:center">CTRL + W</td>
</tr>
<tr>
<td>Save project</td>
<td style="text-align:center">CTRL + S</td>
</tr>
<tr>
<td>Save all</td>
<td style="text-align:center">CTRL + SHIFT + S</td>
</tr>
<tr>
<td>Quest properties</td>
<td style="text-align:center">CTRL + P</td>
</tr>
<tr>
<td>Undo</td>
<td style="text-align:center">CTRL + Z</td>
</tr>
<tr>
<td>Redo</td>
<td style="text-align:center">CTRL + Y</td>
</tr>
<tr>
<td>Cut</td>
<td style="text-align:center">CTRL + X</td>
</tr>
<tr>
<td>Copy</td>
<td style="text-align:center">CTRL + C</td>
</tr>
<tr>
<td>Paste</td>
<td style="text-align:center">CTRL + V</td>
</tr>
<tr>
<td>Select all</td>
<td style="text-align:center">CTRL + A</td>
</tr>
<tr>
<td>Find</td>
<td style="text-align:center">CTRL + F</td>
</tr>
<tr>
<td>Show grid</td>
<td style="text-align:center">CTRL + G</td>
</tr>
<tr>
<td>Show console</td>
<td style="text-align:center">F12</td>
</tr>
<tr>
<td>Run quest</td>
<td style="text-align:center">F3</td>
</tr>
<tr>
<td>Link to Documentation</td>
<td style="text-align:center">F1</td>
</tr>
<tr>
<td>Edit tile details</td>
<td style="text-align:center">Enter or return key</td>
</tr>
<tr>
<td>Resize tile</td>
<td style="text-align:center">R</td>
</tr>
<tr>
<td>Tile up one layer</td>
<td style="text-align:center">SHIFT +</td>
</tr>
<tr>
<td>Tile down one layer</td>
<td style="text-align:center">minus key (-)</td>
</tr>
<tr>
<td>Bring tile to back</td>
<td style="text-align:center">T</td>
</tr>
<tr>
<td>Bring tile to front</td>
<td style="text-align:center">B</td>
</tr>
<tr>
<td>Delete</td>
<td style="text-align:center">DEL</td>
</tr>
<tr>
<td>Rename</td>
<td style="text-align:center">F2</td>
</tr>
<tr>
<td>Show/hide Tile</td>
<td style="text-align:center">CTRL + E, CTRL + 1</td>
</tr>
<tr>
<td>Show/hide Destination</td>
<td style="text-align:center">CTRL + E, CTRL + I</td>
</tr>
<tr>
<td>Show/hide Teletransporter</td>
<td style="text-align:center">CTRL + E, CTRL + T</td>
</tr>
<tr>
<td>Show/hide Pickable Treasure</td>
<td style="text-align:center">CTRL + E, CTRL + P</td>
</tr>
<tr>
<td>Show/hide Destructible Object</td>
<td style="text-align:center">CTRL + E, CTRL + D</td>
</tr>
<tr>
<td>Show/hide Chest</td>
<td style="text-align:center">CTRL + E, CTRL + C</td>
</tr>
<tr>
<td>Show/hide Jumper</td>
<td style="text-align:center">CTRL + E, CTRL + J</td>
</tr>
<tr>
<td>Show/hide Enemy</td>
<td style="text-align:center">CTRL + E, CTRL + E</td>
</tr>
<tr>
<td>Show/hide NPC</td>
<td style="text-align:center">CTRL + E, CTRL + N</td>
</tr>
<tr>
<td>Show/hide Block</td>
<td style="text-align:center">CTRL + E, CTRL + B</td>
</tr>
<tr>
<td>Show/hide Dynamic Tile</td>
<td style="text-align:center">CTRL + E, CTRL + 2</td>
</tr>
<tr>
<td>Show/hide Switch</td>
<td style="text-align:center">CTRL + E, CTRL + H</td>
</tr>
<tr>
<td>Show/hide Wall</td>
<td style="text-align:center">CTRL + E, CTRL + W</td>
</tr>
<tr>
<td>Show/hide Sensor</td>
<td style="text-align:center">CTRL + E, CTRL + S</td>
</tr>
<tr>
<td>Show/hide Crystal</td>
<td style="text-align:center">CTRL + E, CTRL + L</td>
</tr>
<tr>
<td>Show/hide Crystal Block</td>
<td style="text-align:center">CTRL + E, CTRL + K</td>
</tr>
<tr>
<td>Show/hide Treasure</td>
<td style="text-align:center">CTRL + E, CTRL + U</td>
</tr>
<tr>
<td>Show/hide Stream</td>
<td style="text-align:center">CTRL + E, CTRL + M</td>
</tr>
<tr>
<td>Show/hide Door</td>
<td style="text-align:center">CTRL + E, CTRL + O</td>
</tr>
<tr>
<td>Show/hide Stairs</td>
<td style="text-align:center">CTRL + E, CTRL + R</td>
</tr>
<tr>
<td>Show/hide Separator</td>
<td style="text-align:center">CTRL + E, CTRL + A</td>
</tr>
<tr>
<td>Show/hide Custom Entity</td>
<td style="text-align:center">CTRL + E, CTRL + Y</td>
</tr>
</tbody>
</table><h3 id="documentation-reading"><a name="documentation-reading" href="#documentation-reading"></a>Documentation Reading</h3><p>This section is an attempt to help basic understanding of the documentation.</p><p>You will be looking at the documentation a lot.</p><p>You can download at the <a href="http://www.solarus-games.org/development/documentation/">Solarus website</a>. I will provide a PDF version in this Github too.</p><h5 id="normal-functions"><a name="normal-functions" href="#normal-functions"></a>Normal Functions</h5><p>Normal functions are related to <code>sol</code>. Most of the time, a variable can be assigned to the <code>sol</code> functions.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map_metatable = sol.main.get_metatable(&quot;map&quot;)
</code></pre>"><span class="hljs-keyword">local</span> map_metatable = sol.main.get_metatable(<span class="hljs-string">"map"</span>)
</code></pre><h5 id="method-functions"><a name="method-functions" href="#method-functions"></a>Method Functions</h5><p>Method functions are attachment functions. They attach to an entity name or other functions. For example, the variable name assigned, like the movement example below.</p><p><strong>Movement:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local move_straight = sol.movement.create(&quot;straight&quot;)

move_straight:set_ignore_obstacles(true)
</code></pre>"><span class="hljs-keyword">local</span> move_straight = sol.movement.create(<span class="hljs-string">"straight"</span>)

move_straight:set_ignore_obstacles(<span class="hljs-keyword">true</span>)
</code></pre><p><strong>Hero:</strong></p><p>Hero methods would logically use the name â€œheroâ€. If no name can be given to the entity, then most likely you will just get and use the variable name you want.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local game = map:get_game()
local hero = map:get_hero()

hero:freeze()
</code></pre>"><span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

hero:freeze()
</code></pre><p><strong>Camera:</strong></p><p>Camera methods would logically use the name â€œcameraâ€. If no name can be given to the entity, then most likely you will just get and use the variable name you want.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local camera = map:get_camera()
camera:start_tracking(entity)
</code></pre>"><span class="hljs-keyword">local</span> camera = map:get_camera()
camera:start_tracking(entity)
</code></pre><p><strong>Enemy:</strong></p><p>Enemy functions use the name â€œenemyâ€, but one can get the name of the entity from the map and use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = enemy:get_map()
enemy:get_life()
</code></pre>"><span class="hljs-keyword">local</span> map = enemy:get_map()
enemy:get_life()
</code></pre><p>or</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = enemy:get_map()
local name = map:get_entity(&quot;name&quot;)

name:get_life()
</code></pre>"><span class="hljs-keyword">local</span> map = enemy:get_map()
<span class="hljs-keyword">local</span> name = map:get_entity(<span class="hljs-string">"name"</span>)

name:get_life()
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_1_images/Chapter_1_enemy_name.png" alt="Lesson_images/Chapter_1_enemy_name.png"></p><p><strong>Custom Entity:</strong></p><p>Custom entity functions use the name â€œentityâ€, but one can get the name of the entity from the map and use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local game = entity:get_game()
local map = entity:get_map()
entity:remove()
</code></pre>"><span class="hljs-keyword">local</span> game = entity:get_game()
<span class="hljs-keyword">local</span> map = entity:get_map()
entity:remove()
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local name = map:get_entity(&quot;name&quot;)

name:remove()
</code></pre>"><span class="hljs-keyword">local</span> name = map:get_entity(<span class="hljs-string">"name"</span>)

name:remove()
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_1_images/Chapter_1_custom_entity_name.png" alt="Lesson_images/Chapter_1_custom_entity_name.png"></p><p><strong>Other Entties:</strong></p><p>Entities like NPC will just use the name you give it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>name:remove()
</code></pre>">name:remove()
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_1_images/Chapter_1_name.png" alt="Lesson_images/Chapter_1_name.png"></p><h5 id="event-functions"><a name="event-functions" href="#event-functions"></a>Event Functions</h5><p>Event functions are setup up by putting the name <code>function</code> in front of them and having an <code>end</code> after it.</p><p>The function event <code>custom_entity:on_update()</code> would be setup like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function entity:on_update()
 --code here
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_update</span><span class="hljs-params">()</span></span>
 <span class="hljs-comment">--code here</span>
<span class="hljs-keyword">end</span>
</code></pre><h2 id="chapter-2:-free-graphics,-audio,-scripts,-and-basic-free-license-information"><a name="chapter-2:-free-graphics,-audio,-scripts,-and-basic-free-license-information" href="#chapter-2:-free-graphics,-audio,-scripts,-and-basic-free-license-information"></a>Chapter 2: Free Graphics, Audio, Scripts, and Basic Free License Information</h2><h3 id="free-graphics-&amp;-audio"><a name="free-graphics-&amp;-audio" href="#free-graphics-&amp;-audio"></a>Free Graphics &amp; Audio</h3><h5 id="sample-quest"><a name="sample-quest" href="#sample-quest"></a>Sample Quest</h5><p>Inside the Solarus Engine <code>Download</code> contains many free graphics, scripts, and audio in the sample quest. You can thank Diarandor for that because he is constantly adding resources to the sample quest.</p><p><a href="https://gitlab.com/solarus-games/solarus-sample-quest">https://gitlab.com/solarus-games/solarus-sample-quest</a></p><p><a href="https://gitlab.com/solarus-games/diarandor-art">https://gitlab.com/solarus-games/diarandor-art</a></p><h5 id="children-of-solarus"><a name="children-of-solarus" href="#children-of-solarus"></a>Children of Solarus</h5><p>This opensource project contains opensource graphics.</p><p><a href="https://gitlab.com/solarus-games/children-of-solarus">https://gitlab.com/solarus-games/children-of-solarus</a></p><h5 id="faryolica-world"><a name="faryolica-world" href="#faryolica-world"></a>Faryolica World</h5><p>This is an outside world tileset I put together with opensource art. I did make a few things, but that does not really matter.</p><p><a href="https://github.com/Zefk/Fairyolica-World">https://github.com/Zefk/Fairyolica-World</a><br><a href="https://github.com/Zefk/Fairyolica-World/releases">https://github.com/Zefk/Fairyolica-World/releases</a></p><h5 id="opengameart"><a name="opengameart" href="#opengameart"></a>OpenGameArt</h5><p>OpenGameArt has a ton of free graphics and sounds.</p><p><a href="https://opengameart.org/">https://opengameart.org/</a></p><h3 id="scripts"><a name="scripts" href="#scripts"></a>Scripts</h3><h5 id="solarus-fan-games"><a name="solarus-fan-games" href="#solarus-fan-games"></a>Solarus Fan Games</h5><p>You can get a lot of free enemy scripts and more.</p><p><a href="http://www.solarus-games.org/games/solarus-team/">http://www.solarus-games.org/games/solarus-team/</a></p><h5 id="solarus-forum-scripts"><a name="solarus-forum-scripts" href="#solarus-forum-scripts"></a>Solarus Forum Scripts</h5><p><a href="http://forum.solarus-games.org/index.php/board,9.0.html">Script Section</a></p><p><a href="http://forum.solarus-games.org/index.php/topic,856.0.html">Script Post</a></p><h3 id="solarus-help-guide"><a name="solarus-help-guide" href="#solarus-help-guide"></a>Solarus Help Guide</h3><p>The Solarus Help Guide is just a big chunk of useful information that I have gathered. It is on a post in the Solarus forum.</p><p><a href="http://forum.solarus-games.org/index.php/topic,611.0.html">http://forum.solarus-games.org/index.php/topic,611.0.html</a></p><h3 id="basic-free-license-information"><a name="basic-free-license-information" href="#basic-free-license-information"></a>Basic Free License Information</h3><p>Refer to <a href="http://forum.solarus-games.org/index.php/topic,610.0.html">this link</a> for the most up to date information. I will provide a pdf in this GitHub as well.</p><h2 id="chapter-3:-moving-around-the-solarus-editor"><a name="chapter-3:-moving-around-the-solarus-editor" href="#chapter-3:-moving-around-the-solarus-editor"></a>Chapter 3: Moving Around The Solarus Editor</h2><h3 id="first-appearance"><a name="first-appearance" href="#first-appearance"></a>First Appearance</h3><p>The Solarus editor looks like this when one first opens it. This is before any quests are loaded or made.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_1_Solarus_Editor_plain.png" alt="Chapter_3_1_Solarus_Editor_plain.png"></p><h3 id="file"><a name="file" href="#file"></a>File</h3><p>You will notice <code>file</code> at the upper left corner of the Solarus Editor. This is where one would make a new quest, load a quest,  close a quest, check recently loaded quests, close tabs, save game, and check the quest properties.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_2_Solarus_Editor_file.png" alt="Chapter_3_2_Solarus_Editor_file.png"></p><h5 id="file->-quest-properties"><a name="file->-quest-properties" href="#file-&gt;-quest-properties"></a>File &gt; Quest Properties</h5><p>The quest properties is about the quest information. The name of the save directory, quest title, summary, description, author, quest version, release date, website, and quest size.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_0_Solarus_Editor_quest_properties.png" alt="Chapter_3_0_Solarus_Editor_quest_properties.png"></p><p><strong>Example of filled in Quest Properties:</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_-2_Solarus_Editor_quest_properties.png" alt="Chapter_3_-2_Solarus_Editor_quest_properties.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_-1_Solarus_Editor_quest_properties_size.png" alt="Chapter_3_-1_Solarus_Editor_quest_properties_size.png"></p><h3 id="edit-menu"><a name="edit-menu" href="#edit-menu"></a>Edit Menu</h3><p>One can undo, redo, copy, paste, cut, select all, deselect all, and find text (In the Solarus text editor). The <code>edit</code> menu is located at the upper left corner next to <code>file</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_3_Solarus_Editor_edit.png" alt="Chapter_3_3_Solarus_Editor_edit.png"></p><h3 id="view-menu"><a name="view-menu" href="#view-menu"></a>View Menu</h3><p>One can zoom, show grid, show console, show/hide layers, show/hide entities, and show/hide entity types in the <code>view</code> menu next to <code>edit.</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_4_Solarus_Editor_view.png" alt="Chapter_3_4_Solarus_Editor_view.png"></p><h3 id="run-menu"><a name="run-menu" href="#run-menu"></a>Run Menu</h3><p>One can run the game from the <code>run</code> menu or press F5. This menu is right next to the <code>view</code> menu.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_5_Solarus_Editor_run.png" alt="Chapter_3_5_Solarus_Editor_run.png"></p><h3 id="audio-menu"><a name="audio-menu" href="#audio-menu"></a>Audio Menu</h3><p>One can play selected audio files from this menu. This menu is right next to the <code>run</code> menu.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_6_Solarus_Editor_audio.png" alt="hapter_3_6_Solarus_Editor_audio.png"></p><h3 id="tools-menu"><a name="tools-menu" href="#tools-menu"></a>Tools Menu</h3><p>This menu is a bit more complex than all the others. The <code>tools</code> menu has a lot of options that makes the Solarus experience even better.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_7_Solarus_Editor_options.png" alt="Chapter_3_7_Solarus_Editor_options.png"></p><h5 id="tools->-options"><a name="tools->-options" href="#tools-&gt;-options"></a>Tools &gt; Options</h5><p>There are many tabs. At the <code>Options</code> menu.  The options in the tabs are General, Text editor, Map editor, Sprite editor, and tileset editor.</p><h5 id="tools->-options->-general-tab"><a name="tools->-options->-general-tab" href="#tools-&gt;-options-&gt;-general-tab"></a>Tools &gt; Options &gt; General Tab</h5><p>1.The General tab contained the <code>working directory</code> this is where our projects will be located. </p><p>2.There is an option to <code>restore opened tabs at startup</code>.</p><p>3.Another option is to <code>Save modified file</code> before running the quest.</p><p>4.One can disable the audio</p><p>5.An ability to disable and enable video acceleration.</p><p>6.Change the default quest size.</p><p>7.At the very bottom of the window you can <code>restore default</code> settings.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_8_Solarus_Editor_general_options.png" alt="Chapter_3_8_Solarus_Editor_general_options.png"></p><h5 id="tools->-options->-text-editor-tab"><a name="tools->-options->-text-editor-tab" href="#tools-&gt;-options-&gt;-text-editor-tab"></a>Tools &gt; Options &gt; Text Editor Tab</h5><p>The <code>Text editor</code> options are very simple.</p><p>1.Able to change the font.</p><p>2.An option to change the font size.</p><p>3.Tabulation option â€” which is the space length when one hit the tab key.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_9_Solarus_Editor_text_editor_options.png" alt="Chapter_3_9_Solarus_Editor_text_editor_options.png"></p><h5 id="tools->-options->-map-editor-tab"><a name="tools->-options->-map-editor-tab" href="#tools-&gt;-options-&gt;-map-editor-tab"></a>Tools &gt; Options &gt; Map Editor Tab</h5><p>The <code>map editor</code> has a lot of useful options.</p><p>1.One can change the background color of the map.</p><p>2.One can change the grid options. Have the grid open at start, change the default grid size, change the grid color, and change the grid style.</p><p>3.Change the default zoom percentage for the map.</p><p>4.Change the zoom and background color for the tileset view.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_10_Solarus_Editor_map_editor_options.png" alt="Chapter_3_10_Solarus_Editor_map_editor_options.png"></p><h5 id="tools->-options->-sprite-editor-tab"><a name="tools->-options->-sprite-editor-tab" href="#tools-&gt;-options-&gt;-sprite-editor-tab"></a>Tools &gt; Options &gt; Sprite Editor Tab</h5><p>The <code>sprite editor</code> has almost the same options as the <code>map editor</code>.</p><p>1.One can change the background color of the sprite editor.</p><p>2.One can change the grid options. Have the grid open at start, change the default grid size, change the grid color, and change the grid style.</p><p>3.Change the default zoom percentage for the map.</p><p>4.Change the zoom and background color for the graphic view.</p><p>5.Make the origin show at opening and change the origin color</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_11_Solarus_Editor_sprite_editor_options.png" alt="Chapter_3_11_Solarus_Editor_sprite_editor_options.png"></p><h5 id="tools->-options->-tileset-editor-tab"><a name="tools->-options->-tileset-editor-tab" href="#tools-&gt;-options-&gt;-tileset-editor-tab"></a>Tools &gt; Options &gt; Tileset Editor Tab</h5><p>The <code>sprite editor</code> has almost the same options as the <code>map editor</code> and <code>sprite editor</code>.</p><p>1.One can change the background color of the tileset editor.</p><p>2.One can change the grid options. Have the grid open at start, change the default grid size, change the grid color, and change the grid style.</p><p>3.Change the default zoom percentage for the tileset.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_12_Solarus_Editor_tileset_editor_options.png" alt="Chapter_3_12_Solarus_Editor_tileset_editor_options.bm"></p><h3 id="help-menu"><a name="help-menu" href="#help-menu"></a>Help Menu</h3><p>The help menu links one to the Solarus Website or the Solarus Documentation Website.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_13_Solarus_Editor_options_help.png" alt="Chapter_3_13_Solarus_Editor_options_help.png"></p><h3 id="icon-shortcut-bar"><a name="icon-shortcut-bar" href="#icon-shortcut-bar"></a>Icon Shortcut Bar</h3><p>The <code>icon bar</code> has a bunch of shortcuts. This is how it looks when a quest is not loaded.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_14_Solarus_Editor_options_bar_icons.png" alt="Chapter_3_14_Solarus_Editor_options_bar_icons.png"></p><p>The main difference for the <code>icon bar</code> from not having a quest open is color and layers. See the following image.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_15_Solarus_Editor_options_bar_icons_color_fixed.png" alt="Chapter_3_15_Solarus_Editor_options_bar_icons_color_fixed.png"></p><h3 id="resource-manager-list"><a name="resource-manager-list" href="#resource-manager-list"></a>Resource Manager List</h3><p>The resource list appears at the left side of the editor when a quest is loaded from <code>file &gt; load quest</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_16_Solarus_Editor_resource_file_manager.png" alt="Chapter_3_16_Solarus_Editor_resource_file_manager.png"></p><h5 id="resource-manager-list->-tileset-editor"><a name="resource-manager-list->-tileset-editor" href="#resource-manager-list-&gt;-tileset-editor"></a>Resource Manager List &gt; Tileset Editor</h5><p>The tileset editor appears when a tileset is selected from the tileset folder. I will not get too much into the tileset editor this chapter.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_17_Solarus_Editor_resource_file_manager_tileset_editor.png" alt="Chapter_3_17_Solarus_Editor_resource_file_manager_tileset_editor.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_18_Solarus_Editor_resource_file_manager_tileset_editor_properties.png" alt="Chapter_3_18_Solarus_Editor_resource_file_manager_tileset_editor_properties.png"></p><h5 id="resource-manager-list->-sprite-editor"><a name="resource-manager-list->-sprite-editor" href="#resource-manager-list-&gt;-sprite-editor"></a>Resource Manager List &gt; Sprite Editor</h5><p>The sprite editor appears when a sprite character is selected from the sprites folder. I will not get too much into the sprite editor this chapter.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_19_Solarus_Editor_resource_file_manager_Sprite_editor_properties.png" alt="Chapter_3_19_Solarus_Editor_resource_file_manager_Sprite_editor_properties.png"></p><h5 id="resource-manager-list->-sound-player"><a name="resource-manager-list->-sound-player" href="#resource-manager-list-&gt;-sound-player"></a>Resource Manager List &gt; Sound Player</h5><p>When a sound is selected from the sound folder and the right mouse button is clicked, the option to play audio shows up.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_20_Solarus_Editor_resource_file_manager_audio_player.png" alt="Chapter_3_20_Solarus_Editor_resource_file_manager_audio_player.png"></p><h5 id="resource-manager-list->-text-editor"><a name="resource-manager-list->-text-editor" href="#resource-manager-list-&gt;-text-editor"></a>Resource Manager List &gt; Text Editor</h5><p>A script editing window will open if one were to right click on a script and open it. Also, one can rename the script from that window as well. Also, if the left mouse button is double clicked on the script, then script editor will appear.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_21_Solarus_Editor_resource_file_manager_text_editor.png" alt="Chapter_3_21_Solarus_Editor_resource_file_manager_text_editor.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_27_open_script.png" alt="Chapter_3_27_open_script.png"></p><h5 id="resource-manager-list->-music-player"><a name="resource-manager-list->-music-player" href="#resource-manager-list-&gt;-music-player"></a>Resource Manager List &gt; Music Player</h5><p>When a music is selected from the music folder and the right mouse button is clicked, the option to play audio appears.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_22_Solarus_Editor_resource_file_manager_audio_player.png" alt="Chapter_3_22_Solarus_Editor_resource_file_manager_audio_player.png"></p><h5 id="resource-manager-list->-map-editor"><a name="resource-manager-list->-map-editor" href="#resource-manager-list-&gt;-map-editor"></a>Resource Manager List &gt; Map Editor</h5><p>When a map is selected from the map folder and the left mouse button is double clicked, the map editor activates.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_23_Solarus_Editor_resource_file_manager_map_editor.png" alt="Chapter_3_23_Solarus_Editor_resource_file_manager_map_editor.png"></p><h5 id="resource-manager-list->-map-editor->-entities"><a name="resource-manager-list->-map-editor->-entities" href="#resource-manager-list-&gt;-map-editor-&gt;-entities"></a>Resource Manager List &gt; Map Editor &gt; Entities</h5><p>There are many entities for the map.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_24_Solarus_Editor_resource_file_manager_map_editor_entities.png" alt="Chapter_3_24_Solarus_Editor_resource_file_manager_map_editor_entities.png"></p><table>
<thead>
<tr>
<th>Entity</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Destination</td>
<td style="text-align:left">The starting point.</td>
</tr>
<tr>
<td>Teletransporter</td>
<td style="text-align:left">Where the character appears on another map</td>
</tr>
<tr>
<td>Pickable</td>
<td style="text-align:left">An item that is picked up, like a coin or rupee.</td>
</tr>
<tr>
<td>Destructible</td>
<td style="text-align:left">Something that can be destroyed</td>
</tr>
<tr>
<td>Chest</td>
<td style="text-align:left">A container for items. You normally find chests in dungeons.</td>
</tr>
<tr>
<td>Jumper</td>
<td style="text-align:left">This makes it so the player can jump over cliff edges and so on.</td>
</tr>
<tr>
<td>Enemy</td>
<td style="text-align:left">A character that tries to harm or kill you.</td>
</tr>
<tr>
<td>NPC</td>
<td style="text-align:left">A player that does not harm you and normally gives you advice or a quest.</td>
</tr>
<tr>
<td>Movable block</td>
<td style="text-align:left">A block the player can move around or push.</td>
</tr>
<tr>
<td>Switch</td>
<td style="text-align:left">Once activated on something occurs. Ex: Flip a light switch and a light comes on.  </td>
</tr>
<tr>
<td>Wall</td>
<td style="text-align:left">A custom wall. Maybe it can vanish.    </td>
</tr>
<tr>
<td>Sensor</td>
<td style="text-align:left">Once stepped on something occurs. Ex: Step on a mine and boom!    </td>
</tr>
<tr>
<td>Crystal</td>
<td style="text-align:left">The crystal is related to the crystal block. When it is hit, the crystal blocks go under ground or block the playerâ€™s path.</td>
</tr>
<tr>
<td>Crystal block</td>
<td style="text-align:left">Crystal blocks go under ground or block the playerâ€™s path. </td>
</tr>
<tr>
<td>Shop</td>
<td style="text-align:left">A simple shop that can be set up.</td>
</tr>
<tr>
<td>Stream</td>
<td style="text-align:left">A stream. Possibly can be used for current.  </td>
</tr>
<tr>
<td>Door</td>
<td style="text-align:left">A door that can be opened and closed.       </td>
</tr>
<tr>
<td>Stairs</td>
<td style="text-align:left">Used for a walking up stair animation.    </td>
</tr>
<tr>
<td>Separator</td>
<td style="text-align:left">Blocks the camera or player from seeing parts of the dungeon or room.   </td>
</tr>
<tr>
<td>Custom Entity</td>
<td style="text-align:left">Make your own entity!</td>
</tr>
</tbody>
</table><h5 id="resource-manager-list->-map-editor->-drag"><a name="resource-manager-list->-map-editor->-drag" href="#resource-manager-list-&gt;-map-editor-&gt;-drag"></a>Resource Manager List &gt; Map Editor &gt; Drag</h5><p>One can drag the edges of the Solarus Editor to have a better view of the tileset for mapping the game.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_25_Solarus_Editor_resource_file_manager_map_editor_drag_tile_area.png" alt="Chapter_3_25_Solarus_Editor_resource_file_manager_map_editor_drag_tile_area.bm"></p><h5 id="resource-manager-list->-language->-en->-dialog-editor"><a name="resource-manager-list->-language->-en->-dialog-editor" href="#resource-manager-list-&gt;-language-&gt;-en-&gt;-dialog-editor"></a>Resource Manager List &gt; Language &gt; en &gt; Dialog Editor</h5><p>When the language type <code>en</code> is double click on with the left mouse button inside the language folder, the dialog editor appears.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_3_%20images/Chapter_3_26_Solarus_Editor_resource_file_manager_dialog_editor_fixed.png" alt="Chapter_3_26_Solarus_Editor_resource_file_manager_dialog_editor_fixed.png"></p><h2 id="chapter-4:-using-the-sprite-editor"><a name="chapter-4:-using-the-sprite-editor" href="#chapter-4:-using-the-sprite-editor"></a>Chapter 4: Using The Sprite Editor</h2><h3 id="resource-manager->-sprites->-sprite-editor"><a name="resource-manager->-sprites->-sprite-editor" href="#resource-manager-&gt;-sprites-&gt;-sprite-editor"></a>Resource Manager &gt; Sprites &gt; Sprite Editor</h3><p>You can add a sprite character by putting a sprite image in the sprites folder directory and add it by right clicking in the Solarus Editor resource manager. </p><p>For example, <code>old_woman.dat</code> for <code>old_woman.png</code>. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_0_Sprite_editor.png" alt="Chapter_4_0_Sprite_editor.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_21_add_as_sprite.png" alt="Chapter_4_21_add_as_sprite.png"></p><p>You can right click on the <code>sprites</code> folder in the resource manager to add as well.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_20_New_Sprite.png" alt="Chapter_4_20_New_Sprite.png"></p><p>The sprite editor appears when one double clicks on a sprite name. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_1_Sprite_editor.png" alt="Chapter_4_images/Chapter_4_1_Sprite_editor.png"></p><h5 id="sprite-properties"><a name="sprite-properties" href="#sprite-properties"></a>Sprite Properties</h5><p>You can add various different types of movements in the sprite editor. You can use the green plus(+) sign to add new ones. The other options allow duplicating an animation, deleting(x) an animation, and renaming them.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_2_Sprite_editor_sprite_properties.png" alt="Chapter_4_2_Sprite_editor_sprite_properties.png"></p><p>You can right click the mouse to do the same task.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_17_right_click.png" alt="Chapter_4_17_right_click.png"></p><h5 id="animation-properties"><a name="animation-properties" href="#animation-properties"></a>Animation Properties</h5><p>There are many options when it comes to the animation properties. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_3_Sprite_editor_sprite_animation_properties.png" alt="Chapter_4_images/Chapter_4_3_Sprite_editor_sprite_animation_properties.png"></p><ol>
<li><p>Setting an animation as default</p>
</li><li><p>Selecting a source image</p>
</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_16_Sprite_editor_sprite_direction_animation_selection_preview_image.png" alt="Chapter_4_16_Sprite_editor_sprite_direction_animation_selection_preview_image.png"></p><ol>
<li><p>Frame delay</p>
</li><li><p>Loop on a certain frame number. Ex: Loop on frame 0</p>
</li></ol><p>It can be used for the preview if checked. Also, if this is checks on the walking animation for a sprite, then the sprite will walk in place. It will not move.</p><h5 id="direction-order"><a name="direction-order" href="#direction-order"></a>Direction Order</h5><p>The direction numbers represent the animation direction. </p><p><strong>EX:</strong><br><code>Direction 1</code> would be walking to the right.</p><table>
<thead>
<tr>
<th style="text-align:left">Number</th>
<th style="text-align:left">Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Direction 1</td>
<td style="text-align:left">Right</td>
</tr>
<tr>
<td style="text-align:left">Direction 2</td>
<td style="text-align:left">Up</td>
</tr>
<tr>
<td style="text-align:left">Direction 3</td>
<td style="text-align:left">Left</td>
</tr>
<tr>
<td style="text-align:left">Direction 4</td>
<td style="text-align:left">Down</td>
</tr>
</tbody>
</table><h5 id="direction-properties"><a name="direction-properties" href="#direction-properties"></a>Direction Properties</h5><p>The <code>direction properties</code> contains dimension options that allows one to easily set up a sprite.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_4_Sprite_editor_sprite_direction_properties.png" alt="Chapter_4_4_Sprite_editor_sprite_direction_properties.png"></p><ol>
<li><p>Size</p>
</li><li><p>Position</p>
</li><li><p>Origin</p>
</li><li><p>Number of frames</p>
</li><li><p>Number of columns</p>
</li></ol><h5 id="size"><a name="size" href="#size"></a>Size</h5><p>This is what it looks like when the size is changed. I changed the size from 24 x 24 to 12 x 12.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_5_Sprite_editor_sprite_direction_properties_size_1.png" alt="Chapter_4_5_Sprite_editor_sprite_direction_properties_size_1.png"></p><p><em>The result:</em></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_6_Sprite_editor_sprite_direction_properties_size_2.png" alt="Chapter_4_6_Sprite_editor_sprite_direction_properties_size_2.png"></p><h5 id="position"><a name="position" href="#position"></a>Position</h5><p>This is what it looks like when the position is changed from 0 x 0 to 20 x 20 .</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_7_Sprite_editor_sprite_direction_properties_position_1.png" alt="Chapter_4_7_Sprite_editor_sprite_direction_properties_position_1.png"></p><p><em>The result:</em></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_8_Sprite_editor_sprite_direction_properties_position_2.png" alt="Chapter_4_8_Sprite_editor_sprite_direction_properties_position_2.png"></p><h5 id="origin"><a name="origin" href="#origin"></a>Origin</h5><p>The origin is the center of the player character. One would normally have it <code>y</code> centered and <code>x</code> lowered down to the sprites feet. This helps with proper collision with tileset objects. For this sprite the <code>x</code> is 12 and <code>y</code> is 23. (12 x 23)</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_9.1_Sprite_editor_sprite_direction_properties_origin_0.png" alt="Chapter_4_9.1_Sprite_editor_sprite_direction_properties_origin_0.png"></p><p>I will change the origin from 12 x 23 to 6 x 12.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_9_Sprite_editor_sprite_direction_properties_origin_1.png" alt="Chapter_4_9_Sprite_editor_sprite_direction_properties_origin_1.png"></p><p><strong>The result:</strong></p><p>The player will not collide with objects properly this way.</p><p>EX: A tree. No one wants to bump into a tree 4 steps before it is reached.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_10_Sprite_editor_sprite_direction_properties_origin_2.png" alt="Chapter_4_10_Sprite_editor_sprite_direction_properties_origin_2.png"></p><p><strong>Switch Origin</strong></p><p>The origin is different for switches and some other sprites. The origin needs to be centered to the upper left corner for a switch. You check the sample in chapter 15. The samples are in the directory <code>Lessons/Chapter_15/Chapter_15_Sample.zip.</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_18_switch_centered_upper_left%20corner.png" alt="Chapter_4_images/Chapter_4_18_switch_centered_upper_left%20corner.png"></p><h5 id="frames"><a name="frames" href="#frames"></a>Frames</h5><p>This is what it looks like when the frames are set to 8.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_11_Sprite_editor_sprite_direction_properties_frames_1.png" alt="Chapter_4_11_Sprite_editor_sprite_direction_properties_frames_1.png"></p><p>Now this is what it looks like when the frames are changed from 8 to 3.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_12_Sprite_editor_sprite_direction_properties_frames_2.png" alt="Chapter_4_12_Sprite_editor_sprite_direction_properties_frames_2.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_13_Sprite_editor_sprite_direction_properties_frames_3.png" alt="Chapter_4_13_Sprite_editor_sprite_direction_properties_frames_3.png"></p><h5 id="columns"><a name="columns" href="#columns"></a>Columns</h5><p>This is what it looks like when the column is changed from 8 to 2.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_14_Sprite_editor_sprite_direction_properties_columns_1.png" alt="Chapter_4_14_Sprite_editor_sprite_direction_properties_columns_1.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_15_Sprite_editor_sprite_direction_properties_columns_2.png" alt="Chapter_4_15_Sprite_editor_sprite_direction_properties_columns_2.png"></p><h3 id="setting-up-a-sprite"><a name="setting-up-a-sprite" href="#setting-up-a-sprite"></a>Setting up a Sprite</h3><p>Everyone needs to know how to setup a sprite. The Solarus Sprite editor is super amazing and makes this task easy as pie!</p><h5 id="making-a-sprite"><a name="making-a-sprite" href="#making-a-sprite"></a>Making a Sprite</h5><p>Making a new sprite is first thing that needs to be done.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/0_a_make_sprite.png" alt="chapter_4_sprite_setup_images/0_a_make_sprite.png"></p><h5 id="name-sprite"><a name="name-sprite" href="#name-sprite"></a>Name Sprite</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/0_name_sprite.png" alt="chapter_4_sprite_setup_images/0_name_sprite.png"></p><h5 id="create-animation"><a name="create-animation" href="#create-animation"></a>Create Animation</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/1_create_animation.png" alt="chapter_4_sprite_setup_images/1_create_animation.png"></p><h5 id="name-animation"><a name="name-animation" href="#name-animation"></a>Name Animation</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/2_name_animation.png" alt="chapter_4_sprite_setup_images/2_name_animation.png"></p><h5 id="load-sprite-image"><a name="load-sprite-image" href="#load-sprite-image"></a>Load Sprite Image</h5><p>Click the pencil to load an image from the sprite directory.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/3_load_slime_image_2.png.png" alt="chapter_4_sprite_setup_images/3_load_slime_image_2.png.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/3_load_slime_image.png" alt="chapter_4_sprite_setup_images/3_load_slime_image.png"></p><h5 id="making-directions---drag-click-release"><a name="making-directions---drag-click-release" href="#making-directions---drag-click-release"></a>Making Directions - Drag Click Release</h5><p>Click one of the sprite image frames and add it as a new direction. This can be done by holding down the left mouse button and dragging to highlight one of the red slime sprites. The first sprite at the upper left corner would be best.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/4_click_drag_release_1.png" alt="chapter_4_sprite_setup_images/4_click_drag_release_1.png"></p><p>That creates a direction called, â€œ<code>Direction 0</code>.â€</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/5_direction_zero.png" alt="chapter_4_sprite_setup_images/5_direction_zero.png"></p><p>Repeat this process until you get 4 frames.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/6_repeat_until_four_directions.png" alt="chapter_4_sprite_setup_images/6_repeat_until_four_directions.png"></p><h5 id="set-frame-delay-&amp;-loop"><a name="set-frame-delay-&amp;-loop" href="#set-frame-delay-&amp;-loop"></a>Set Frame Delay &amp; Loop</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/7_set_frame_delay_loop_it.png" alt="chapter_4_sprite_setup_images/7_set_frame_delay_loop_it.png"></p><h5 id="set-columns,-rows,-&amp;-origin"><a name="set-columns,-rows,-&amp;-origin" href="#set-columns,-rows,-&amp;-origin"></a>Set Columns, Rows, &amp; Origin</h5><p>We are using 4 frames, so column and rows are 4.</p><p>Origin should be fine at 8x8.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/8_set_origin_row_column_4.png" alt="chapter_4_sprite_setup_images/8_set_origin_row_column_4.png"></p><h5 id="show-origin"><a name="show-origin" href="#show-origin"></a>Show Origin</h5><p>Click the check box to show the origin.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/9_show_origin_centered.png" alt="chapter_4_sprite_setup_images/9_show_origin_centered.png"></p><h5 id="zoom-on-sprite-preview"><a name="zoom-on-sprite-preview" href="#zoom-on-sprite-preview"></a>Zoom On Sprite Preview</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/10_zoom.png" alt="chapter_4_sprite_setup_images/10_zoom.png"></p><h5 id="zoom-on-sprite-animation-direction-setup-area"><a name="zoom-on-sprite-animation-direction-setup-area" href="#zoom-on-sprite-animation-direction-setup-area"></a>Zoom On Sprite Animation Direction Setup Area</h5><p>You can use <code>CTRL + Scroll Wheel</code> to zoom in and out of the animation direction setup area.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_19_Sprite_Direction_Zoom.png" alt="Chapter_4_19_Sprite_Direction_Zoom.png"></p><h5 id="previous-&amp;-next-sprite-frame"><a name="previous-&amp;-next-sprite-frame" href="#previous-&amp;-next-sprite-frame"></a>Previous &amp; Next Sprite Frame</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/11_previous_next_frame.png" alt="Chapter_4_images/chapter_4_sprite_setup_images/11_previous_next_frame.png"></p><h5 id="last-&amp;-first-frame-+-play-&amp;-stop"><a name="last-&amp;-first-frame-+-play-&amp;-stop" href="#last-&amp;-first-frame-+-play-&amp;-stop"></a>Last &amp; First Frame + Play &amp; Stop</h5><p>Previous and next are the arrows.</p><p>Stop is the button with the square and play is the triangle that is on its side.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/chapter_4_sprite_setup_images/12_last_play_stop_first.png" alt=""></p><h5 id="dat-file-editing"><a name="dat-file-editing" href="#dat-file-editing"></a>Dat File Editing</h5><p><code>.dat</code> file editing is useful. If the dat file is going to be almost the same for every sprite, then the filenames just need to be changed. This would be faster than creating everything over and over again in the editor.</p><p>A few good notepad editors.</p><ul>
<li>Notepad++ (Windows/Wine)</li><li>Jedit (Linux)</li><li>Gedit (Linux): <a href="https://code.google.com/archive/p/advanced-find/downloads">advanced-find-add-on</a></li></ul><p><strong>Example:</strong></p><p>Blue_female.dat</p><pre><code data-origin="<pre><code>  src_image = &quot;Erbarlow/Bard/Female/Blue_female.png&quot;,
</code></pre>">  src_image = "Erbarlow/Bard/Female/Blue_female.png",
</code></pre><p>Green_female.dat</p><pre><code data-origin="<pre><code>  src_image = &quot;Erbarlow/Bard/Female/green_female.png&quot;,
</code></pre>">  src_image = "Erbarlow/Bard/Female/green_female.png",
</code></pre><p><strong>Another Example:</strong></p><p>Dat format is useful for trading animation to another sprite. Some animations can take a lot of time to setup.</p><pre><code data-origin="<pre><code>animation{
  name = &quot;stopped&quot;,
  src_image = &quot;Erbarlow/Bard/Female/green_female.png&quot;,
  directions = {
    { x = 0, y = 64, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 96, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 32, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 0, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
  },
}
</code></pre>">animation{
  name = "stopped",
  src_image = "Erbarlow/Bard/Female/green_female.png",
  directions = {
    { x = 0, y = 64, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 96, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 32, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
    { x = 0, y = 0, frame_width = 32, frame_height = 32, origin_x = 16, origin_y = 32 },
  },
}
</code></pre><h5 id="bounding-box-or-hitbox"><a name="bounding-box-or-hitbox" href="#bounding-box-or-hitbox"></a>Bounding box or Hitbox</h5><p>The default size value is 16x16 pixels. This is the effective size used to detect obstacles when moving, but the sprite(s) of the custom entity and enemy may be bigger than 16x16.</p><p>The functions <code>custom_entity:set_size(width, height)</code> for the custom entity and <code>enemy:set_size(width, height)</code> can be used for enemies.</p><h3 id="basic-sprite-information"><a name="basic-sprite-information" href="#basic-sprite-information"></a>Basic Sprite Information</h3><p>Solarus has a sprite editor to set up animations and you can make as many as you want. You can activate your custom animations for the hero with <code>hero:set_animation("name_of_animation")</code> and entities with <code>entity:get_sprite():set_animation("name_of_animation")</code>.</p><p>Solarus goes by 8x8 formatting and it would be best to make a grid for proper positioning. The sprite can be any size, but only the bounding box size can be changed for the entities â€œenemyâ€ and â€œcustom entity.â€  The other entities bounding box is 16x16. A hero, NPC, etc.</p><p>You can make more animations and code them using the sprite drawable functions, but I will cover most of the default animations built into the engine. You can make any sword attack for the hero. As far as I know. </p><h5 id="sword"><a name="sword" href="#sword"></a>Sword</h5><p>You will need to create a file called â€œ<code>sword1</code>â€œ and it can contain the following animations.</p><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">spin_attack</td>
</tr>
<tr>
<td style="text-align:left">super_spin_attack</td>
</tr>
<tr>
<td style="text-align:left">sword</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_stopped</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_walking</td>
</tr>
<tr>
<td style="text-align:left">sword_running</td>
</tr>
<tr>
<td style="text-align:left">sword_tapping</td>
</tr>
<tr>
<td style="text-align:left">victory</td>
</tr>
</tbody>
</table><h5 id="shield"><a name="shield" href="#shield"></a>Shield</h5><p>It is the similar for the file â€œ<code>shield1</code>â€œ.</p><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">stopped</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
<tr>
<td style="text-align:left">sword</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_stopped</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_walking</td>
</tr>
<tr>
<td style="text-align:left">sword_running</td>
</tr>
<tr>
<td style="text-align:left">sword_tapping</td>
</tr>
</tbody>
</table><h5 id="npc"><a name="npc" href="#npc"></a>NPC</h5><p>A NPC needs two animations:</p><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">stopped</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
</tbody>
</table><h5 id="enemy"><a name="enemy" href="#enemy"></a>Enemy</h5><p>You honestly only need animations â€œhurtâ€ and â€œwalkingâ€.</p><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">hurt</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
<tr>
<td style="text-align:left">immobilized</td>
</tr>
<tr>
<td style="text-align:left">shaking</td>
</tr>
</tbody>
</table><h5 id="hero"><a name="hero" href="#hero"></a>Hero</h5><p>The hero file is called, â€œ<code>tunic1</code>â€œ.</p><p>This is a list of most default hero animations, but there are more. You do not need them all. For example, the hero can still work without swimming, the spin attack can be disabled with code, and so on. </p><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">boomerang1</td>
</tr>
<tr>
<td style="text-align:left">boomerang2</td>
</tr>
<tr>
<td style="text-align:left">bow</td>
</tr>
<tr>
<td style="text-align:left">carrying_stopped</td>
</tr>
<tr>
<td style="text-align:left">carrying_walking</td>
</tr>
<tr>
<td style="text-align:left">falling</td>
</tr>
<tr>
<td style="text-align:left">grabbing</td>
</tr>
<tr>
<td style="text-align:left">hookshot</td>
</tr>
<tr>
<td style="text-align:left">hurt</td>
</tr>
<tr>
<td style="text-align:left">jumping</td>
</tr>
<tr>
<td style="text-align:left">lifting</td>
</tr>
<tr>
<td style="text-align:left">plunging_water</td>
</tr>
<tr>
<td style="text-align:left">pulling</td>
</tr>
<tr>
<td style="text-align:left">pushing</td>
</tr>
<tr>
<td style="text-align:left">running</td>
</tr>
<tr>
<td style="text-align:left">spin_attack</td>
</tr>
<tr>
<td style="text-align:left">super_spin_attack</td>
</tr>
<tr>
<td style="text-align:left">stopped</td>
</tr>
<tr>
<td style="text-align:left">swimming_fast</td>
</tr>
<tr>
<td style="text-align:left">swimming_slow</td>
</tr>
<tr>
<td style="text-align:left">swimming_stopped</td>
</tr>
<tr>
<td style="text-align:left">sword</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_stopped</td>
</tr>
<tr>
<td style="text-align:left">sword_loading_walking</td>
</tr>
<tr>
<td style="text-align:left">sword_tapping</td>
</tr>
<tr>
<td style="text-align:left">throw</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
<tr>
<td style="text-align:left">walking_with_shield</td>
</tr>
</tbody>
</table><h5 id="destructible"><a name="destructible" href="#destructible"></a>Destructible</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">destroy</td>
</tr>
<tr>
<td style="text-align:left">on_ground</td>
</tr>
<tr>
<td style="text-align:left">stopped</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
</tbody>
</table><h5 id="bomb"><a name="bomb" href="#bomb"></a>bomb</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">stopped</td>
</tr>
<tr>
<td style="text-align:left">stopped_explosion_soon</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
<tr>
<td style="text-align:left">walking_explosion_soon</td>
</tr>
</tbody>
</table><h5 id="block"><a name="block" href="#block"></a>block</h5><table>
<thead>
<tr>
<th style="text-align:left">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">block</td>
</tr>
</tbody>
</table><h5 id="chest"><a name="chest" href="#chest"></a>chest</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">closed</td>
</tr>
<tr>
<td style="text-align:left">open</td>
</tr>
</tbody>
</table><h5 id="explosion"><a name="explosion" href="#explosion"></a>explosion</h5><table>
<thead>
<tr>
<th style="text-align:left">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">explosion</td>
</tr>
</tbody>
</table><h5 id="shadow"><a name="shadow" href="#shadow"></a>shadow</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">big</td>
</tr>
<tr>
<td style="text-align:left">small</td>
</tr>
</tbody>
</table><h5 id="crystal_block"><a name="crystal_block" href="#crystal_block"></a>crystal_block</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">blue_lowered</td>
</tr>
<tr>
<td style="text-align:left">blue_raised</td>
</tr>
<tr>
<td style="text-align:left">orange_lowered</td>
</tr>
<tr>
<td style="text-align:left">orange_raised</td>
</tr>
</tbody>
</table><h5 id="crystal"><a name="crystal" href="#crystal"></a>crystal</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">blue_lowered</td>
</tr>
<tr>
<td style="text-align:left">orange_lowered</td>
</tr>
</tbody>
</table><h5 id="switch"><a name="switch" href="#switch"></a>switch</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">activated</td>
</tr>
<tr>
<td style="text-align:left">inactivated</td>
</tr>
</tbody>
</table><h5 id="arrow"><a name="arrow" href="#arrow"></a>arrow</h5><table>
<thead>
<tr>
<th style="text-align:left">Animations</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">flying</td>
</tr>
<tr>
<td style="text-align:left">reached_obstacle</td>
</tr>
</tbody>
</table><h5 id="star"><a name="star" href="#star"></a>star</h5><table>
<thead>
<tr>
<th style="text-align:left">Animation</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">normal</td>
<td style="text-align:left">stars or other animation for spin attack</td>
</tr>
</tbody>
</table><h5 id="ground1"><a name="ground1" href="#ground1"></a>ground1</h5><table>
<thead>
<tr>
<th style="text-align:left">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Stopped</td>
</tr>
<tr>
<td style="text-align:left">walking</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th style="text-align:left">Sound</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">walk_on_grass.ogg</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_22_ground1.png" alt="Chapter_4_images/Chapter_4_22_ground1.png"></p><h5 id="ground2"><a name="ground2" href="#ground2"></a>ground2</h5><table>
<thead>
<tr>
<th style="text-align:left">Animation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Stopped</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th style="text-align:left">Sound</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">walk_on_water.ogg</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_4_images/Chapter_4_23_ground2.png" alt="Chapter_4_images/Chapter_4_23_ground2.png"></p><h2 id="chapter-5:-using-the-tileset-editor"><a name="chapter-5:-using-the-tileset-editor" href="#chapter-5:-using-the-tileset-editor"></a>Chapter 5: Using The Tileset Editor</h2><h3 id="resource-manager->-tileset->-tileset-editor"><a name="resource-manager->-tileset->-tileset-editor" href="#resource-manager-&gt;-tileset-&gt;-tileset-editor"></a>Resource Manager &gt; Tileset &gt; Tileset Editor</h3><p>You can add a tileset by putting an image with the following extension <code>file_name.tiles.png</code> and making a <code>file_name.dat</code> in the tileset directory and add it by right clicking. </p><p>For example, <code>Fairyolica World.png</code> to <code>Fairyolica World.tiles.png</code>. You will need a <code>Fairyolica World.dat</code> as well.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_0_Tileset_Editor.png" alt="Chapter_5_images/chapter_5_0_Tileset_Editor.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_11_add_as_tileset.png" alt="Chapter_5_11_add_as_tileset.png"></p><p>Also, one can make a <code>.dat</code> file or new tileset by right clicking the <code>tilesets</code> folder in the editor.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_10_new_tileset.png" alt="Chapter_5_10_new_tileset.png"></p><p>When one double clicks on a tileset, the tileset editor appears. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_1_Tileset_Editor.png" alt="Chapter_5_images/chapter_5_1_Tileset_Editor.png"></p><h5 id="selection-properties"><a name="selection-properties" href="#selection-properties"></a>Selection Properties</h5><p>Properties appear in the <code>selection properties section</code> when one selects a pattern image id in a tileset.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_2_Tileset_Editor_selecting_1.png" alt="chapter_5_2_Tileset_Editor_selecting_1.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_3_Tileset_Editor_selecting_2.png" alt="chapter_5_3_Tileset_Editor_selecting_2.png"></p><h5 id="rename-id"><a name="rename-id" href="#rename-id"></a>Rename ID</h5><p>A pattern id can be changed by clicking the pencil icon:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_4_Tileset_Editor_selecting_3_pattern_id.png" alt="chapter_5_4_Tileset_Editor_selecting_3_pattern_id.png"></p><p>A pattern ID is important because if you have two tilesets that are exactly the same except one is a different color, then you can simply give the same patterns to the other tileset and the map will be changed to that different color when you switch tilesets. Also, it is good with tasks that need certain tiles. For example, a shovel to only work on specific dirt tile.</p><p><strong>Example:</strong></p><p>A forest can become an instant desert once tilesets are changed. The patterns must be the same or similar enough for a decent change without much editing. This could be useful for different dimensions or terrain changes due to some cause.</p><p>You can use <code>map:set_tileset("tileset_name")</code> to change tilesets.</p><h5 id="ground"><a name="ground" href="#ground"></a>Ground</h5><p>You can select different grounds to fit your tile. For example, the tile would be <code>traversable</code> if the player character can walk on it.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_5_Tileset_Editor_selecting_4_ground.png" alt="chapter_5_5_Tileset_Editor_selecting_4_ground.png"></p><h5 id="repeatable"><a name="repeatable" href="#repeatable"></a>Repeatable</h5><p>A repeatable tile is normally a tile that looks the same while it is being duplicated or by being set right next to the same tile. Grass ground tiles normally look the same in games. They are repeated or duplicated over and over again.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_repeatable.png" alt="Chapter_5_repeatable.png"></p><p>You can set a direction. For example, in the case that the tile only repeats in the horizontal direction.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_6_Tileset_Editor_selecting_5_repeatable.png" alt="chapter_5_6_Tileset_Editor_selecting_5_repeatable.png"></p><h5 id="animation"><a name="animation" href="#animation"></a>Animation</h5><p>Animation can make moving flowers or waterfalls. You can set different frame patterns to fit your needs.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_7_Tileset_Editor_selecting_6_animation.png" alt="chapter_5_7_Tileset_Editor_selecting_6_animation.png"></p><h5 id="making-tile-patterns"><a name="making-tile-patterns" href="#making-tile-patterns"></a>Making Tile Patterns</h5><p>The tilesets in Solarus follow an 8 x 8 pattern per block. That means you will have to set up your tileset in a grid to make it work properly. </p><p>For example, if you overlay Fairyolica World tileset with an 8x8 grid, then you will see that mostly everything fits a 8x8 pattern.</p><p><img src="https://github.com/Zefk/Fairyolica-World/raw/master/SOGP-Fairyolica%20World/data/tilesets/Fairyolica%20World.tiles.png" alt="Chapter_5_images/Fairyolica%20World.tiles.png"></p><p>To make a pattern you just click and drag to make a box. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_8_Tileset_Editor_selecting_7_making_tiles.png" alt="chapter_5_8_Tileset_Editor_selecting_7_making_tiles.png"></p><p>You can also select the pattern option for the tile.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/chapter_5_9_Tileset_Editor_selecting_7_making_new_type_tile.png" alt="chapter_5_9_Tileset_Editor_selecting_7_making_new_type_tile.png"></p><h5 id="8x8-formatting"><a name="8x8-formatting" href="#8x8-formatting"></a>8x8 Formatting</h5><p>I will use Gimp as an example for 8x8 formatting. In <code>edit &gt; preferences</code> menu go down to grid.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_12_Gimp_preferences_8x8.png" alt="Chapter_5_12_Gimp_preferences_8x8.png"></p><p>Now you may have to restart Gimp after saving your new grid preferences.</p><p>Afterward, go to <code>view &gt; show grid</code>, you will notice black lined boxes. Each box is an 8x8 block as you can see in the image below. In this example image each tile is in an 8x8 block.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_13_Gimp_grid_8x8_block.png" alt="Chapter_5_13_Gimp_grid_8x8_block.png"></p><p>Your graphics do not have to be in a single 8x8 block, but they will have to be in the same range. For example, the whirlpool and larger sand tile below. They are 16 x 16 blocks.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_5_images/Chapter_5_14_Gimp_grid_8x8_block_2.png" alt="Chapter_5_14_Gimp_grid_8x8_block_2.png"></p><h2 id="chapter-6:-very-basic-lua-scripting,-tutorial-point-lua-pdf,-ways-to-load-script,-and-lua-console"><a name="chapter-6:-very-basic-lua-scripting,-tutorial-point-lua-pdf,-ways-to-load-script,-and-lua-console" href="#chapter-6:-very-basic-lua-scripting,-tutorial-point-lua-pdf,-ways-to-load-script,-and-lua-console"></a>Chapter 6: Very Basic Lua Scripting, Tutorial Point Lua PDF, ways to load script, and Lua console</h2><h3 id="very-basic-lua-scripting"><a name="very-basic-lua-scripting" href="#very-basic-lua-scripting"></a>Very Basic Lua Scripting</h3><p>The files for the very basic programming knowledge are added the Github.</p><p><code>Lessons &gt; Chapter_6 &gt; Chapter_6_Lua_Quick_Basics</code></p><h5 id="zerobrane-ide"><a name="zerobrane-ide" href="#zerobrane-ide"></a>ZeroBrane IDE</h5><p>For the basic lessons I recommend <a href="https://studio.zerobrane.com/">ZeroBrane IDE</a> or you can skip to â€œways to load scripts in Solarus.â€</p><h5 id="using-zerobrane"><a name="using-zerobrane" href="#using-zerobrane"></a>Using ZeroBrane</h5><p>1.Install and open ZeroBrane.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_6_images/Chapter_6_1_open_zero_brane.png" alt="Chapter_6_1_open_zero_brane.png"></p><p>2.Open a Lua file or add the following code and save it somewhere.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Hello_Solarus.lua
print(&quot;Hello Solarus!&quot;)
</code></pre>"><span class="hljs-comment">--Hello_Solarus.lua</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello Solarus!"</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_6_images/Chapter_6_2_open_lua_file_save.png" alt="Chapter_6_2_open_lua_file_save.png"></p><p>3.Click the first green arrow to compile and run the script. You can press the key <code>F6</code> as well.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_6_images/Chapter_6_3_run_F6.png" alt="Chapter_6_3_run_F6.png"></p><p>4.When you run the script with F6, the console at the bottom will show the text.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_6_images/Chapter_6_4_console.png" alt="Chapter_6_4_console.png"></p><p>5.ZeroBrane has a bunch of free basic lessons. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_6_images/Chapter_6_5_free_lessons.png" alt="Chapter_6_5_free_lessons.png"></p><p>That is all!</p><h5 id="whitespace"><a name="whitespace" href="#whitespace"></a>Whitespace</h5><p>Blank lines and spaces that are ignored.</p><h5 id="variables"><a name="variables" href="#variables"></a>Variables</h5><p>Variables are just names that can be manipulated. Global variables are not marked with local or global. </p><p>Three types:</p><ol>
<li>Local</li><li>Global</li><li>Tables can hold anything, but a nil.</li></ol><pre><code data-origin="<pre><code>name50 -- No local before it makes it global.

local name = 20

local name2 = 10

name + name2
</code></pre>">name50 -- No local before it makes it global.

local name = 20

local name2 = 10

name + name2
</code></pre><h5 id="identifiers"><a name="identifiers" href="#identifiers"></a>Identifiers</h5><p>When making a variable name, there are some rules. </p><p>Unacceptable:</p><pre><code data-origin="<pre><code>1. Punctuation characters: @#$%

2. Cannot start with a number

3. No spaces between variables. EX: `local the variable` should be: `local the_variable`.
</code></pre>">1. Punctuation characters: @#$%

2. Cannot start with a number

3. No spaces between variables. EX: `local the variable` should be: `local the_variable`.
</code></pre><p>Acceptable:`</p><pre><code data-origin="<pre><code>1. A - Z  EX: SHE

2. a - z  EX: she

3. Underscore followed by numbers and letters _8Wn

4. Case-sensitive EX: She and she are different
</code></pre>">1. A - Z  EX: SHE

2. a - z  EX: she

3. Underscore followed by numbers and letters _8Wn

4. Case-sensitive EX: She and she are different
</code></pre><p>Examples of the acceptable identifiers:</p><table>
<thead>
<tr>
<th></th>
<th style="text-align:center"></th>
<th style="text-align:right"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
</tr>
</thead>
<tbody>
<tr>
<td>yodz</td>
<td style="text-align:center">zata</td>
<td style="text-align:right">abcd</td>
<td style="text-align:center">number_five</td>
<td style="text-align:center">z_456</td>
</tr>
<tr>
<td>sefra34</td>
<td style="text-align:center">_ten</td>
<td style="text-align:right">x</td>
<td style="text-align:center">f2359y2</td>
<td style="text-align:center">SpiritBlast</td>
</tr>
</tbody>
</table><h5 id="keywords"><a name="keywords" href="#keywords"></a>Keywords</h5><p>Reserved words in Lua. You cannot name them as variables.</p><table>
<thead>
<tr>
<th></th>
<th style="text-align:center"></th>
<th style="text-align:right"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th style="text-align:center"></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>for</td>
<td style="text-align:center">break</td>
<td style="text-align:right">false</td>
<td style="text-align:center">true</td>
<td style="text-align:center">and</td>
<td style="text-align:center">or</td>
<td style="text-align:center">not</td>
</tr>
<tr>
<td>in</td>
<td style="text-align:center">else</td>
<td style="text-align:right">elseif</td>
<td style="text-align:center">local</td>
<td style="text-align:center">if</td>
<td style="text-align:center">nil</td>
<td style="text-align:center">repeat</td>
</tr>
<tr>
<td>return</td>
<td style="text-align:center">function</td>
<td style="text-align:right">while</td>
<td style="text-align:center">end</td>
<td style="text-align:center">then</td>
<td style="text-align:center">until</td>
<td style="text-align:center">do</td>
</tr>
</tbody>
</table><h5 id="data-types"><a name="data-types" href="#data-types"></a>Data Types</h5><table>
<thead>
<tr>
<th>Type:</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td>Number:</td>
<td>Represents real numbers.</td>
</tr>
<tr>
<td>String:</td>
<td>Represents array of characters.</td>
</tr>
<tr>
<td>Boolean:</td>
<td>True and false as values. Used for checking a condition.</td>
</tr>
<tr>
<td>Nil:</td>
<td>Has no data.</td>
</tr>
<tr>
<td>Function:</td>
<td>A method and most of the time it does a task for you. EX: Drawing images.</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>print(type(true))                ---&amp;gt; boolean
print(type(2.1*z))               ---&amp;gt; number
print(type(nil))                 ---&amp;gt; nil
print(type(type(XYZ)))           ---&amp;gt; string
print(type(print))               ---&amp;gt; function
print(type(false))               ---&amp;gt; boolean
print(type(type))                ---&amp;gt; function
</code></pre>"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-keyword">true</span>))                <span class="hljs-comment">---&gt; boolean</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-number">2.1</span>*z))               <span class="hljs-comment">---&gt; number</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-keyword">nil</span>))                 <span class="hljs-comment">---&gt; nil</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">type</span>(XYZ)))           <span class="hljs-comment">---&gt; string</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">print</span>))               <span class="hljs-comment">---&gt; function</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-keyword">false</span>))               <span class="hljs-comment">---&gt; boolean</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(<span class="hljs-built_in">type</span>))                <span class="hljs-comment">---&gt; function</span>
</code></pre><h5 id="relational-operators"><a name="relational-operators" href="#relational-operators"></a>Relational Operators</h5><table>
<thead>
<tr>
<th>Operator:</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td>==</td>
<td>Checks if  they are equal.</td>
</tr>
<tr>
<td>~=</td>
<td>Checks if they are not equal</td>
</tr>
<tr>
<td>&gt;</td>
<td>Checks if one is greater than the other</td>
</tr>
<tr>
<td>&lt;</td>
<td>Checks if one is less than the other</td>
</tr>
<tr>
<td>&gt;=</td>
<td>Checks if one is greater or equal to each other</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Checks if one is less or equal to each other</td>
</tr>
</tbody>
</table><h5 id="logical-operators"><a name="logical-operators" href="#logical-operators"></a>Logical Operators</h5><table>
<thead>
<tr>
<th>Operator:</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>and</strong></td>
<td>If both are true, then it activates.</td>
</tr>
<tr>
<td><strong>or</strong></td>
<td>If one of them are true, the it activates.               </td>
</tr>
<tr>
<td><strong>not</strong></td>
<td>If it is true, then it will be false.     </td>
</tr>
</tbody>
</table><h5 id="arithmetic-operators"><a name="arithmetic-operators" href="#arithmetic-operators"></a>Arithmetic Operators</h5><table>
<thead>
<tr>
<th>Operator</th>
<th>Math</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>+</strong></td>
<td>Adds</td>
<td>Three + three = 6</td>
</tr>
<tr>
<td><strong>-</strong></td>
<td>Subtracts</td>
<td>Three - three = 0</td>
</tr>
<tr>
<td>*</td>
<td>Multiplies</td>
<td>Three * three = 9</td>
</tr>
<tr>
<td><strong>/</strong></td>
<td>Divides</td>
<td>Three / three = 1</td>
</tr>
<tr>
<td><strong>%</strong></td>
<td>Remainder</td>
<td>Three % five = 2</td>
</tr>
<tr>
<td><strong>^</strong></td>
<td>Exponent</td>
<td>three^2 = 9</td>
</tr>
<tr>
<td><strong>-</strong></td>
<td>Can act as a negative</td>
<td>-Three * three = -9</td>
</tr>
</tbody>
</table><h5 id="other-operators"><a name="other-operators" href="#other-operators"></a>Other Operators</h5><table>
<thead>
<tr>
<th>Misc:</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>..</strong></td>
<td>Concatenates or combines text/string.    aa..5 = aa5</td>
</tr>
<tr>
<td><strong>#</strong></td>
<td>Length of text/string. #text = 4 (â€œtextâ€ is equal to 4 letters.)</td>
</tr>
</tbody>
</table><h5 id="escape-sequences"><a name="escape-sequences" href="#escape-sequences"></a>Escape Sequences</h5><table>
<thead>
<tr>
<th>Escape</th>
<th>Task</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>\n</strong></td>
<td>New line</td>
</tr>
<tr>
<td><strong>\t</strong></td>
<td>Tab</td>
</tr>
<tr>
<td><strong>\â€™</strong></td>
<td>Single quotes</td>
</tr>
<tr>
<td><strong>\â€</strong></td>
<td>Double quotes</td>
</tr>
<tr>
<td><strong>\</strong></td>
<td>Backslash</td>
</tr>
<tr>
<td><strong>\b</strong></td>
<td>Backspace</td>
</tr>
<tr>
<td><strong>\f</strong></td>
<td>Formfeed</td>
</tr>
<tr>
<td><strong>\a</strong></td>
<td>Bell</td>
</tr>
<tr>
<td><strong>\r</strong></td>
<td>Carriage return</td>
</tr>
<tr>
<td><strong>\v</strong></td>
<td>Vertical tab</td>
</tr>
<tr>
<td><strong>[</strong></td>
<td>Left square bracket</td>
</tr>
<tr>
<td><strong>]</strong></td>
<td>Right square bracket</td>
</tr>
</tbody>
</table><h5 id="repetitions-pattern-modifiers"><a name="repetitions-pattern-modifiers" href="#repetitions-pattern-modifiers"></a>Repetitions Pattern Modifiers</h5><table>
<thead>
<tr>
<th>Modifier</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>1 or more repetitions</td>
</tr>
<tr>
<td>*</td>
<td>0 or more repetitions</td>
</tr>
<tr>
<td>-</td>
<td>also 0 or more repetitions</td>
</tr>
<tr>
<td>?</td>
<td>optional (0 or 1 occurrence)</td>
</tr>
</tbody>
</table><h5 id="character-pattern-classes"><a name="character-pattern-classes" href="#character-pattern-classes"></a>Character Pattern Classes</h5><table>
<thead>
<tr>
<th>Pattern</th>
<th>About</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>.</strong></td>
<td>all characters</td>
</tr>
<tr>
<td><strong>%a</strong></td>
<td>letters</td>
</tr>
<tr>
<td><strong>%c</strong></td>
<td>control characters</td>
</tr>
<tr>
<td><strong>%d</strong></td>
<td>digits</td>
</tr>
<tr>
<td><strong>%l</strong></td>
<td>lower case letters</td>
</tr>
<tr>
<td><strong>%p</strong></td>
<td>punctuation characters</td>
</tr>
<tr>
<td><strong>%s</strong></td>
<td>space characters</td>
</tr>
<tr>
<td><strong>%u</strong></td>
<td>upper case letters</td>
</tr>
<tr>
<td><strong>%w</strong></td>
<td>alphanumeric characters</td>
</tr>
<tr>
<td><strong>%x</strong></td>
<td>hexadecimal digits</td>
</tr>
<tr>
<td><strong>%z</strong></td>
<td>the character with representation 0</td>
</tr>
</tbody>
</table><h3 id="common-variable-naming-rules"><a name="common-variable-naming-rules" href="#common-variable-naming-rules"></a>Common Variable Naming Rules</h3><p>This is not a Lua naming rule and one can completely ignore this<br>because everyone can program the way they want, but this<br>will help people read your code. This is standard in most programming languages.</p><h5 id="clear-variable-name"><a name="clear-variable-name" href="#clear-variable-name"></a>Clear Variable Name</h5><p>Variable <code>yellow</code> is easier to understand than <code>var2</code>.</p><h5 id="variable-length"><a name="variable-length" href="#variable-length"></a>Variable Length</h5><p>The variable name can be of any length, but do not get make too long. One will have to type this name.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local the_bunny_crossed_the_road_at_street_number = 50

--The street number that the bunny crosses the road on.
local bunny_crossed = 50
</code></pre>"><span class="hljs-keyword">local</span> the_bunny_crossed_the_road_at_street_number = <span class="hljs-number">50</span>

<span class="hljs-comment">--The street number that the bunny crosses the road on.</span>
<span class="hljs-keyword">local</span> bunny_crossed = <span class="hljs-number">50</span>
</code></pre><h5 id="uppercase-vs-lowercase-variables"><a name="uppercase-vs-lowercase-variables" href="#uppercase-vs-lowercase-variables"></a>UPPERCASE vs lowercase Variables</h5><p>Constants are normally uppercased. This variable will always stay the same.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local SPEED = 50
</code></pre>"><span class="hljs-keyword">local</span> SPEED = <span class="hljs-number">50</span>
</code></pre><p>Deciding on StudlyCaps vs. camelCase vs SCREAMING_CAPS is worth maybe 90 seconds discussion with a programming team one is working with, but I always see ALL_CAPS.</p><p>Lowercase variables are mostly normal variables.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local color = &quot;yellow&quot;
color = &quot;green&quot;
</code></pre>"><span class="hljs-keyword">local</span> color = <span class="hljs-string">"yellow"</span>
color = <span class="hljs-string">"green"</span>
</code></pre><h3 id="lua-programming"><a name="lua-programming" href="#lua-programming"></a>Lua Programming</h3><h5 id="comments"><a name="comments" href="#comments"></a>Comments</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

Comments: 
You can make comments in a few ways in Lua. These are ignored by the code and one uses them to help themselves or others to understand the code.

Single comment:

You must put &quot;--&quot; before the text. 

Example:
--Hello

Multiple line comments:

You must use two dashes and opening plus closing brackets. -- [ [ ] ]
]]

--Example:

--[[
Write all the text you want between here.
--]]
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

Comments: 
You can make comments in a few ways in Lua. These are ignored by the code and one uses them to help themselves or others to understand the code.

Single comment:

You must put "--" before the text. 

Example:
--Hello

Multiple line comments:

You must use two dashes and opening plus closing brackets. -- [ [ ] ]
]]</span>

<span class="hljs-comment">--Example:</span>

<span class="hljs-comment">--[[
Write all the text you want between here.
--]]</span>
</code></pre><h5 id="print-text"><a name="print-text" href="#print-text"></a>Print Text</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf
--]]

--Ways to print text in the terminal. Printing text is very useful for testing your code.

print &quot;Hello Solarus World! - Method 1 without ()&quot;

print (&quot;Hello Solarus World! - Method 2 with ()&quot;)
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf
--]]</span>

<span class="hljs-comment">--Ways to print text in the terminal. Printing text is very useful for testing your code.</span>

<span class="hljs-built_in">print</span> <span class="hljs-string">"Hello Solarus World! - Method 1 without ()"</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"Hello Solarus World! - Method 2 with ()"</span>)
</code></pre><h5 id="declaring-variables"><a name="declaring-variables" href="#declaring-variables"></a>Declaring variables</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]

--Declaring a variable. A variable is just storing a name. They can be global or local. One will normally always use local.

--Pie is local because it is not everywhere on earth
local pie = 0

--Air is global because it is everywhere on earth.
air = 0

--String is basically text in double quotes.
local pie_type = &quot;pumpkin pie.&quot;

--For testing, it is good to print a value or string to know it is working. A simple comma after the quotes.
print (&quot;My favorite pie is&quot;, pie_type)

--Concatenation is used to combine. A simple &quot;..&quot;
print (&quot;My favorite pie is &quot;..pie_type)

--Value is basically numbers.
local pie_number = 5

--Separate two different pieces of text and a single variable.
print (&quot;I have&quot;, pie_number, &quot;pies.&quot;)

--Concatenation is used to combine. A simple &quot;..&quot;
print (&quot;I have &quot;..pie_number..&quot; pies.&quot;)

--adding variables or names
local add = 5
local pie = 3

print (pie + add)
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]</span>

<span class="hljs-comment">--Declaring a variable. A variable is just storing a name. They can be global or local. One will normally always use local.</span>

<span class="hljs-comment">--Pie is local because it is not everywhere on earth</span>
<span class="hljs-keyword">local</span> pie = <span class="hljs-number">0</span>

<span class="hljs-comment">--Air is global because it is everywhere on earth.</span>
air = <span class="hljs-number">0</span>

<span class="hljs-comment">--String is basically text in double quotes.</span>
<span class="hljs-keyword">local</span> pie_type = <span class="hljs-string">"pumpkin pie."</span>

<span class="hljs-comment">--For testing, it is good to print a value or string to know it is working. A simple comma after the quotes.</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"My favorite pie is"</span>, pie_type)

<span class="hljs-comment">--Concatenation is used to combine. A simple ".."</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"My favorite pie is "</span>..pie_type)

<span class="hljs-comment">--Value is basically numbers.</span>
<span class="hljs-keyword">local</span> pie_number = <span class="hljs-number">5</span>

<span class="hljs-comment">--Separate two different pieces of text and a single variable.</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"I have"</span>, pie_number, <span class="hljs-string">"pies."</span>)

<span class="hljs-comment">--Concatenation is used to combine. A simple ".."</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"I have "</span>..pie_number..<span class="hljs-string">" pies."</span>)

<span class="hljs-comment">--adding variables or names</span>
<span class="hljs-keyword">local</span> add = <span class="hljs-number">5</span>
<span class="hljs-keyword">local</span> pie = <span class="hljs-number">3</span>

<span class="hljs-built_in">print</span> (pie + add)
</code></pre><h5 id="tables"><a name="tables" href="#tables"></a>Tables</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]

--Tables. You need tables if you plan to have a many variables or you will get an upvalue error. They can help you identify and organize your variables better too. Declare or add as many names as you want in the table, but remember the comma after the name.

local muffin = {
  chocolate,
  blueberry,
}

muffin.chocolate = 5

muffin.blueberry = 2

print (&quot;I have &quot;..muffin.chocolate..&quot; chocolate muffins and &quot;..muffin.blueberry..&quot; blueberry muffins.&quot;)
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]</span>

<span class="hljs-comment">--Tables. You need tables if you plan to have a many variables or you will get an upvalue error. They can help you identify and organize your variables better too. Declare or add as many names as you want in the table, but remember the comma after the name.</span>

<span class="hljs-keyword">local</span> muffin = {
  chocolate,
  blueberry,
}

muffin.chocolate = <span class="hljs-number">5</span>

muffin.blueberry = <span class="hljs-number">2</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"I have "</span>..muffin.chocolate..<span class="hljs-string">" chocolate muffins and "</span>..muffin.blueberry..<span class="hljs-string">" blueberry muffins."</span>)
</code></pre><h5 id="arrays"><a name="arrays" href="#arrays"></a>Arrays</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]

--Arrays and for loops.
--Arrays are not scary. They help with repetition. They can be used in tables too.

--Declare an array.
local array = {} -- that is it.
local pie = {} -- Simple to declare

-- All you have to do with arrays is to add a number in square brackets after each new variable. [number]
pie[1] = &quot;Chocolate&quot;
pie[2] = &quot;Apple&quot;

--Easier that doing this
chocolate_pie = &quot;Chocolate&quot;
apple_pie = &quot;Apple&quot;

--Using arrays to print many variables with a &quot;for loop&quot;
--rep stands for repetition. You do not have to use rep. 1,2 is basically 1 through 2, so only print variable 1 and 2. 
for rep = 1,2 do
  print(pie[rep])
end

--You can use variable names for this as well. 1,2
pie[4] = 1
pie[5] = 2

for rep = pie[4],pie[5] do
  print(pie[rep])
end

--Making variables equal to a variable. You need this with calculations or you will get a &quot;nil error&quot;, so make them zero at least. This is better than declaring a hundred variables to '0' one by one. That would be a pain!
for rep = 1, 10 do
  array[rep] = 0
  print(&quot;Array &quot;..rep..&quot;:&quot;..array[rep])
end

--Math in lua is pretty simple.
for rep = 11, 21 do
  array[rep] = 5
  print(&quot;Array &quot;..rep..&quot;:&quot;..array[rep] + 5 * rep - 10 / 2)
end

--A string in the square brackets of an array. This can be good for an inventory.
local cake = {}

cake[&quot;chocolate&quot;] = 5

print (cake[&quot;chocolate&quot;])

--Increment
cake[&quot;chocolate&quot;] = cake[&quot;chocolate&quot;] + 1

print (cake[&quot;chocolate&quot;])

--Decrement (Declare again or it will be 5)
cake[&quot;chocolate&quot;] = 5

cake[&quot;chocolate&quot;] = cake[&quot;chocolate&quot;] - 1

print (cake[&quot;chocolate&quot;])

--Multidimensional array
--This is array type is important in cases where one wants to keep the code basically the same and not duplicate it or copy and paste it over, over, and over again.
--Lets pretend you want 3 rows for each array number block.

-- Initializing the array
row = {}

-- Initializing the multidimensional array
for rep_d1=1,3 do
 row[rep_d1] = {}
 for rep_d2=1,3 do
 row[rep_d1][rep_d2] = 0
 end
end

--row 1
row[1][1] = 5
row[1][2] = 3
row[1][3] = 2

for rep = 1,3 do
  print(&quot;Row 1: &quot;..row[1][rep])
end

--row 2
row[2][1] = 7 + 2
row[2][2] = 3 * 4
row[2][3] = 1 - 3

for rep = 1,3 do
  print(&quot;Row 2: &quot;..row[2][rep])
end

--row 3
row[3][1] = &quot;pie&quot;
row[3][2] = &quot;cake&quot;
row[3][3] = &quot;muffin&quot;

for rep = 1,3 do
  print(&quot;Row 3: &quot;..row[3][rep])
end
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]</span>

<span class="hljs-comment">--Arrays and for loops.</span>
<span class="hljs-comment">--Arrays are not scary. They help with repetition. They can be used in tables too.</span>

<span class="hljs-comment">--Declare an array.</span>
<span class="hljs-keyword">local</span> array = {} <span class="hljs-comment">-- that is it.</span>
<span class="hljs-keyword">local</span> pie = {} <span class="hljs-comment">-- Simple to declare</span>

<span class="hljs-comment">-- All you have to do with arrays is to add a number in square brackets after each new variable. [number]</span>
pie[<span class="hljs-number">1</span>] = <span class="hljs-string">"Chocolate"</span>
pie[<span class="hljs-number">2</span>] = <span class="hljs-string">"Apple"</span>

<span class="hljs-comment">--Easier that doing this</span>
chocolate_pie = <span class="hljs-string">"Chocolate"</span>
apple_pie = <span class="hljs-string">"Apple"</span>

<span class="hljs-comment">--Using arrays to print many variables with a "for loop"</span>
<span class="hljs-comment">--rep stands for repetition. You do not have to use rep. 1,2 is basically 1 through 2, so only print variable 1 and 2. </span>
<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">2</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(pie[rep])
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--You can use variable names for this as well. 1,2</span>
pie[<span class="hljs-number">4</span>] = <span class="hljs-number">1</span>
pie[<span class="hljs-number">5</span>] = <span class="hljs-number">2</span>

<span class="hljs-keyword">for</span> rep = pie[<span class="hljs-number">4</span>],pie[<span class="hljs-number">5</span>] <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(pie[rep])
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Making variables equal to a variable. You need this with calculations or you will get a "nil error", so make them zero at least. This is better than declaring a hundred variables to '0' one by one. That would be a pain!</span>
<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>, <span class="hljs-number">10</span> <span class="hljs-keyword">do</span>
  array[rep] = <span class="hljs-number">0</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Array "</span>..rep..<span class="hljs-string">":"</span>..array[rep])
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Math in lua is pretty simple.</span>
<span class="hljs-keyword">for</span> rep = <span class="hljs-number">11</span>, <span class="hljs-number">21</span> <span class="hljs-keyword">do</span>
  array[rep] = <span class="hljs-number">5</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Array "</span>..rep..<span class="hljs-string">":"</span>..array[rep] + <span class="hljs-number">5</span> * rep - <span class="hljs-number">10</span> / <span class="hljs-number">2</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--A string in the square brackets of an array. This can be good for an inventory.</span>
<span class="hljs-keyword">local</span> cake = {}

cake[<span class="hljs-string">"chocolate"</span>] = <span class="hljs-number">5</span>

<span class="hljs-built_in">print</span> (cake[<span class="hljs-string">"chocolate"</span>])

<span class="hljs-comment">--Increment</span>
cake[<span class="hljs-string">"chocolate"</span>] = cake[<span class="hljs-string">"chocolate"</span>] + <span class="hljs-number">1</span>

<span class="hljs-built_in">print</span> (cake[<span class="hljs-string">"chocolate"</span>])

<span class="hljs-comment">--Decrement (Declare again or it will be 5)</span>
cake[<span class="hljs-string">"chocolate"</span>] = <span class="hljs-number">5</span>

cake[<span class="hljs-string">"chocolate"</span>] = cake[<span class="hljs-string">"chocolate"</span>] - <span class="hljs-number">1</span>

<span class="hljs-built_in">print</span> (cake[<span class="hljs-string">"chocolate"</span>])

<span class="hljs-comment">--Multidimensional array</span>
<span class="hljs-comment">--This is array type is important in cases where one wants to keep the code basically the same and not duplicate it or copy and paste it over, over, and over again.</span>
<span class="hljs-comment">--Lets pretend you want 3 rows for each array number block.</span>

<span class="hljs-comment">-- Initializing the array</span>
row = {}

<span class="hljs-comment">-- Initializing the multidimensional array</span>
<span class="hljs-keyword">for</span> rep_d1=<span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span>
 row[rep_d1] = {}
 <span class="hljs-keyword">for</span> rep_d2=<span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span>
 row[rep_d1][rep_d2] = <span class="hljs-number">0</span>
 <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--row 1</span>
row[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">5</span>
row[<span class="hljs-number">1</span>][<span class="hljs-number">2</span>] = <span class="hljs-number">3</span>
row[<span class="hljs-number">1</span>][<span class="hljs-number">3</span>] = <span class="hljs-number">2</span>

<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Row 1: "</span>..row[<span class="hljs-number">1</span>][rep])
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--row 2</span>
row[<span class="hljs-number">2</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">7</span> + <span class="hljs-number">2</span>
row[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] = <span class="hljs-number">3</span> * <span class="hljs-number">4</span>
row[<span class="hljs-number">2</span>][<span class="hljs-number">3</span>] = <span class="hljs-number">1</span> - <span class="hljs-number">3</span>

<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Row 2: "</span>..row[<span class="hljs-number">2</span>][rep])
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--row 3</span>
row[<span class="hljs-number">3</span>][<span class="hljs-number">1</span>] = <span class="hljs-string">"pie"</span>
row[<span class="hljs-number">3</span>][<span class="hljs-number">2</span>] = <span class="hljs-string">"cake"</span>
row[<span class="hljs-number">3</span>][<span class="hljs-number">3</span>] = <span class="hljs-string">"muffin"</span>

<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Row 3: "</span>..row[<span class="hljs-number">3</span>][rep])
<span class="hljs-keyword">end</span>
</code></pre><h5 id="if-statement-&amp;-operators"><a name="if-statement-&amp;-operators" href="#if-statement-&amp;-operators"></a>If Statement &amp; Operators</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the &quot;very&quot; basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]

--if statement
local frog = 4

-- use &quot;==&quot; instead of &quot;=&quot;. You use &quot;==&quot; for reach points.
if frog == 4 then
  print(&quot;You do not see &quot;..frog..&quot; frogs everyday!&quot;)
end

--if else statement
local frog = 5

if frog == 4 then
  print(&quot;You do not see &quot;..frog..&quot; frogs everyday!&quot;)
else
  print(&quot;I see no frog.&quot;)
end

--Greater than
local frog = 10
local bat = 9

if frog &amp;gt; bat then
   print(&quot;I see more frogs.&quot;)
end

--Less than 
local frog = 10
local bat = 11

if frog &amp;lt; bat then
   print(&quot;I see more bats.&quot;)
end

--Greater than or equal to
--Logical Operators: and
local frog = 10
local bat = 9

if frog &amp;gt; bat and frog &amp;gt;= 11 then
   print(&quot;I see 10 frogs.&quot;)
 else
   print(&quot;I do not see 11 frogs.&quot;)
end

--Less than or equal to 
--Logical Operators: and
local frog = 10
local bat = 9

if frog &amp;gt; bat and frog &amp;lt;= 11 then
   print(&quot;I see 10 frogs.&quot;)
 else
   print(&quot;I do not see 11 frogs.&quot;)
end

--if does not equal ~=
local frog = 3

if frog ~= 2 then
  print(&quot;There are more than 10 frogs!&quot;)
end

--Logical Operators: or
--As long as one is true, then it wil be true.
--As long as one of the variables are equal to something other than &quot;nil&quot;
local a = 5
local z = nil

if a or z then
   print(&quot;It is true.&quot; )
end

local a = 5
local z = 1

if a or z then
   print(&quot;It is true.&quot; )
end

--Logical Operators: not
--Remember a and z are equal to a value. That names them true, but &quot;not&quot; will make that true into false. It makes the opposite happen.
--Changing the values.
local a = 1
local z = 1

if not (a and z) then
   print(&quot;It is true.&quot; )
else
   print(&quot;It is false.&quot; )
end

local a = 1
local z = nil

if not (a and z) then
   print(&quot;It is true.&quot; )
else
   print(&quot;It is false.&quot; )
end

--elseif statement
local frog = 3

if frog ~= 3 then
    print(&quot;There are more than 10 frogs!&quot;)
elseif frog &amp;lt; 2 then
    print(&quot;There are 2 frogs!&quot;)
elseif frog == 3 then
    print(&quot;There are 3 frogs!&quot;)
end

--Nested if statement. That means an if statement inside an if statement
--Example 1
local a = 10
local b = 5

--If 'a' is greater than 'b'
if a &amp;gt; b then
--if 'a' is greater than 9
  if a &amp;gt; 9 then
    print (&quot;a is greater than 9!&quot;)
  end
end

--Example 2
local a = 8
local b = 5

--If 'a' is greater than 'b'
if a &amp;gt; b then
--if 'a' is greater than 9
  if a &amp;gt; 9 then
    print (&quot;a is greater than 9!&quot;)
  else
    print (&quot;a is less than 9!&quot;)
  end
end
</code></pre>"><span class="hljs-comment">--[[
Lua is a very simple programming language, but very powerful.
This is a quick start for the "very" basics of Lua and more will be added later based on examples in scripts.

Read this book for more information and detail.
https://www.tutorialspoint.com/lua/lua_tutorial.pdf

--]]</span>

<span class="hljs-comment">--if statement</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">4</span>

<span class="hljs-comment">-- use "==" instead of "=". You use "==" for reach points.</span>
<span class="hljs-keyword">if</span> frog == <span class="hljs-number">4</span> <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"You do not see "</span>..frog..<span class="hljs-string">" frogs everyday!"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--if else statement</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">5</span>

<span class="hljs-keyword">if</span> frog == <span class="hljs-number">4</span> <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"You do not see "</span>..frog..<span class="hljs-string">" frogs everyday!"</span>)
<span class="hljs-keyword">else</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"I see no frog."</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Greater than</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">10</span>
<span class="hljs-keyword">local</span> bat = <span class="hljs-number">9</span>

<span class="hljs-keyword">if</span> frog &gt; bat <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I see more frogs."</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Less than </span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">10</span>
<span class="hljs-keyword">local</span> bat = <span class="hljs-number">11</span>

<span class="hljs-keyword">if</span> frog &lt; bat <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I see more bats."</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Greater than or equal to</span>
<span class="hljs-comment">--Logical Operators: and</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">10</span>
<span class="hljs-keyword">local</span> bat = <span class="hljs-number">9</span>

<span class="hljs-keyword">if</span> frog &gt; bat <span class="hljs-keyword">and</span> frog &gt;= <span class="hljs-number">11</span> <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I see 10 frogs."</span>)
 <span class="hljs-keyword">else</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I do not see 11 frogs."</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Less than or equal to </span>
<span class="hljs-comment">--Logical Operators: and</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">10</span>
<span class="hljs-keyword">local</span> bat = <span class="hljs-number">9</span>

<span class="hljs-keyword">if</span> frog &gt; bat <span class="hljs-keyword">and</span> frog &lt;= <span class="hljs-number">11</span> <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I see 10 frogs."</span>)
 <span class="hljs-keyword">else</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"I do not see 11 frogs."</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--if does not equal ~=</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">3</span>

<span class="hljs-keyword">if</span> frog ~= <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"There are more than 10 frogs!"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Logical Operators: or</span>
<span class="hljs-comment">--As long as one is true, then it wil be true.</span>
<span class="hljs-comment">--As long as one of the variables are equal to something other than "nil"</span>
<span class="hljs-keyword">local</span> a = <span class="hljs-number">5</span>
<span class="hljs-keyword">local</span> z = <span class="hljs-keyword">nil</span>

<span class="hljs-keyword">if</span> a <span class="hljs-keyword">or</span> z <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is true."</span> )
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> a = <span class="hljs-number">5</span>
<span class="hljs-keyword">local</span> z = <span class="hljs-number">1</span>

<span class="hljs-keyword">if</span> a <span class="hljs-keyword">or</span> z <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is true."</span> )
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Logical Operators: not</span>
<span class="hljs-comment">--Remember a and z are equal to a value. That names them true, but "not" will make that true into false. It makes the opposite happen.</span>
<span class="hljs-comment">--Changing the values.</span>
<span class="hljs-keyword">local</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">local</span> z = <span class="hljs-number">1</span>

<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (a <span class="hljs-keyword">and</span> z) <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is true."</span> )
<span class="hljs-keyword">else</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is false."</span> )
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">local</span> z = <span class="hljs-keyword">nil</span>

<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (a <span class="hljs-keyword">and</span> z) <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is true."</span> )
<span class="hljs-keyword">else</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"It is false."</span> )
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--elseif statement</span>
<span class="hljs-keyword">local</span> frog = <span class="hljs-number">3</span>

<span class="hljs-keyword">if</span> frog ~= <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"There are more than 10 frogs!"</span>)
<span class="hljs-keyword">elseif</span> frog &lt; <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"There are 2 frogs!"</span>)
<span class="hljs-keyword">elseif</span> frog == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"There are 3 frogs!"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Nested if statement. That means an if statement inside an if statement</span>
<span class="hljs-comment">--Example 1</span>
<span class="hljs-keyword">local</span> a = <span class="hljs-number">10</span>
<span class="hljs-keyword">local</span> b = <span class="hljs-number">5</span>

<span class="hljs-comment">--If 'a' is greater than 'b'</span>
<span class="hljs-keyword">if</span> a &gt; b <span class="hljs-keyword">then</span>
<span class="hljs-comment">--if 'a' is greater than 9</span>
  <span class="hljs-keyword">if</span> a &gt; <span class="hljs-number">9</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"a is greater than 9!"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Example 2</span>
<span class="hljs-keyword">local</span> a = <span class="hljs-number">8</span>
<span class="hljs-keyword">local</span> b = <span class="hljs-number">5</span>

<span class="hljs-comment">--If 'a' is greater than 'b'</span>
<span class="hljs-keyword">if</span> a &gt; b <span class="hljs-keyword">then</span>
<span class="hljs-comment">--if 'a' is greater than 9</span>
  <span class="hljs-keyword">if</span> a &gt; <span class="hljs-number">9</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"a is greater than 9!"</span>)
  <span class="hljs-keyword">else</span>
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"a is less than 9!"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="goto-statement"><a name="goto-statement" href="#goto-statement"></a>Goto Statement</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Use goto as a nested break statement
local a = 1
local b = 6

for z=1,10 do
  if a &amp;lt; b then
    a = a + 1
    print(&quot;a is less than b&quot;)
  else
    goto done
  end
end
::done::
</code></pre>"><span class="hljs-comment">--Use goto as a nested break statement</span>
<span class="hljs-keyword">local</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">local</span> b = <span class="hljs-number">6</span>

<span class="hljs-keyword">for</span> z=<span class="hljs-number">1</span>,<span class="hljs-number">10</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> a &lt; b <span class="hljs-keyword">then</span>
    a = a + <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"a is less than b"</span>)
  <span class="hljs-keyword">else</span>
    goto done
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
::done::
</code></pre><h5 id="loops-types"><a name="loops-types" href="#loops-types"></a>Loops Types</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--While loop: Repeats a statement a given condition is true.


local z = 7

while( z &amp;lt; 18 )
do
   print(&quot;value of z:&quot;, z)
   z = z*3
end

print(&quot;End of while loop&quot;)

--For loop: Executes statements multiple times simplifies the code

--[[
for init or start value,max or min value, increment or decrement
do
   statement(s)
end
--]]

for start = 10,1,-1 do 
   print(start) 
end

print(&quot;End of for loop part 1&quot;)

for start = 1,10 do 
   print(start) 
end

print(&quot;End of for loop part 2&quot;)

--Repeat...until loop: Repeats till the until condition is met.

local z = 3

repeat
   print(&quot;value of z:&quot;, z)
   z = z + 5
until( z &amp;gt; 15 )

print(&quot;End of Repeat...until loop&quot;)


--Nested loops:    You can use one or more loop inside any another while, for or do..while loop.


for i=1,10 do
   for s = 1,2 do
      print(&quot;Nested loop.&quot;)
   end
end

print(&quot;End of nested loop&quot;)


--break statement: This stops a loop.

for i=1,10 do
   for s = 1,2 do
      print(&quot;break loop.&quot;)
      break
      print(&quot;Muffin loop.&quot;)

   end
end

print(&quot;End of break loop&quot;)

--The Infinite Loop: Keeps going forever. Normally causes a crash.

--[[
while( true )
do
   print(&quot;Print this F-O-R-E-V-E-R.&quot;)
end
--]]
</code></pre>"><span class="hljs-comment">--While loop: Repeats a statement a given condition is true.</span>


<span class="hljs-keyword">local</span> z = <span class="hljs-number">7</span>

<span class="hljs-keyword">while</span>( z &lt; <span class="hljs-number">18</span> )
<span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"value of z:"</span>, z)
   z = z*<span class="hljs-number">3</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of while loop"</span>)

<span class="hljs-comment">--For loop: Executes statements multiple times simplifies the code</span>

<span class="hljs-comment">--[[
for init or start value,max or min value, increment or decrement
do
   statement(s)
end
--]]</span>

<span class="hljs-keyword">for</span> start = <span class="hljs-number">10</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">1</span> <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(start) 
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of for loop part 1"</span>)

<span class="hljs-keyword">for</span> start = <span class="hljs-number">1</span>,<span class="hljs-number">10</span> <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(start) 
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of for loop part 2"</span>)

<span class="hljs-comment">--Repeat...until loop: Repeats till the until condition is met.</span>

<span class="hljs-keyword">local</span> z = <span class="hljs-number">3</span>

<span class="hljs-keyword">repeat</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"value of z:"</span>, z)
   z = z + <span class="hljs-number">5</span>
<span class="hljs-keyword">until</span>( z &gt; <span class="hljs-number">15</span> )

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of Repeat...until loop"</span>)


<span class="hljs-comment">--Nested loops:    You can use one or more loop inside any another while, for or do..while loop.</span>


<span class="hljs-keyword">for</span> i=<span class="hljs-number">1</span>,<span class="hljs-number">10</span> <span class="hljs-keyword">do</span>
   <span class="hljs-keyword">for</span> s = <span class="hljs-number">1</span>,<span class="hljs-number">2</span> <span class="hljs-keyword">do</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"Nested loop."</span>)
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of nested loop"</span>)


<span class="hljs-comment">--break statement: This stops a loop.</span>

<span class="hljs-keyword">for</span> i=<span class="hljs-number">1</span>,<span class="hljs-number">10</span> <span class="hljs-keyword">do</span>
   <span class="hljs-keyword">for</span> s = <span class="hljs-number">1</span>,<span class="hljs-number">2</span> <span class="hljs-keyword">do</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"break loop."</span>)
      <span class="hljs-keyword">break</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"Muffin loop."</span>)

   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of break loop"</span>)

<span class="hljs-comment">--The Infinite Loop: Keeps going forever. Normally causes a crash.</span>

<span class="hljs-comment">--[[
while( true )
do
   print("Print this F-O-R-E-V-E-R.")
end
--]]</span>
</code></pre><h5 id="math"><a name="math" href="#math"></a>Math</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Math Library List:

Check the following link for more information:
http://lua-users.org/wiki/MathLibraryTutorial

math.acos
math.cos
math.asin
math.sin
math.atan
math.tan
math.ceil
math.deg
math.exp
math.fmod
math.huge
math.log
math.min
math.mininteger
math.max
math.maxinteger
math.modf
math.random
math.randomseed
math.abs
math.sqrt
math.pi
math.rad
math.floor
math.tointeger
math.type
math.ult

--]]


print(&quot;&quot;)

--math.abs

--Return the absolute value. Basically, the non-negative value.
print(&quot;The absolute vale is: &quot;..math.abs(-50))

print(&quot;The absolute vale is: &quot;..math.abs(19.37))

print(&quot;The absolute vale is: &quot;..math.abs(0))

print(&quot;&quot;)

--math.deg

--Angle degrees
print(&quot;The angle degree is: &quot;..math.deg(math.pi * 2))
print(&quot;The angle degree is: &quot;..math.deg(math.pi))
print(&quot;The angle degree is: &quot;..math.deg(math.pi / 2))
print(&quot;The angle degree is: &quot;..math.deg(math.pi / 4))

print(&quot;&quot;)

--math.min , math.max

--Minimum or maximum value 
print(&quot;The min is: &quot;..math.min(3,6))
print(&quot;The min is: &quot;..math.min(2.2, 3.6, 8))
print(&quot;The min is: &quot;..math.min(1.4, -6, 4))
print(&quot;The max is: &quot;..math.max(1.9, -12, 4))
print(&quot;The max is: &quot;..math.max(1.22, 5, 2))

print(&quot;&quot;)

--math.sqrt

--Square root of a number. Only non-negative values are allowed.
print(&quot;The square root is: &quot;..math.sqrt(25))
print(&quot;The square root is: &quot;..math.sqrt(9))
print(&quot;The square root is: &quot;..math.sqrt(200))

print(&quot;&quot;)

--math.random

--math.random() Generates a number between 0 and 1.

print(&quot;The random number is: &quot;..math.random())
print(&quot;The random number is: &quot;..math.random())
print(&quot;The random number is: &quot;..math.random())

print(&quot;&quot;)

--math.random(upper) generates a number between 1 and upper.

print(&quot;The random upper number is: &quot;..math.random(120))
print(&quot;The random upper number is: &quot;..math.random(110))

print(&quot;&quot;)

--math.random(lower, upper) generates numbers between lower and upper.

print(&quot;The random lower to upper number is: &quot;..math.random(75,80))
print(&quot;The random lower to upper number is: &quot;..math.random(81,85))

print(&quot;&quot;)


--math.randomseed
--The &quot;seed&quot; is a starting point. Basically, you will always get the same random numbers no matter how many times you run your script.

math.randomseed(12)

print(&quot;The randomseed number is: &quot;..math.random(15))
print(&quot;The randomseed number is: &quot;..math.random(17))
print(&quot;The randomseed number is: &quot;..math.random(19))
print(&quot;The randomseed number is: &quot;..math.random(22))

print(&quot;&quot;)

--math.pi

print(&quot;pi is: &quot;..math.pi)

print(&quot;&quot;)

--math.floor is for rounding down and math.ceil is for rounding up
print (&quot;1.5 rounded down: &quot;..math.floor(1.5))
print (&quot;1.5 rounded  up: &quot;..math.ceil(1.5))

print (&quot;-1.5 rounded down: &quot;..math.floor(-1.5))
print (&quot;-1.5 rounded  up: &quot;..math.ceil(-1.5))
</code></pre>"><span class="hljs-comment">--[[
Math Library List:

Check the following link for more information:
http://lua-users.org/wiki/MathLibraryTutorial

math.acos
math.cos
math.asin
math.sin
math.atan
math.tan
math.ceil
math.deg
math.exp
math.fmod
math.huge
math.log
math.min
math.mininteger
math.max
math.maxinteger
math.modf
math.random
math.randomseed
math.abs
math.sqrt
math.pi
math.rad
math.floor
math.tointeger
math.type
math.ult

--]]</span>


<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.abs</span>

<span class="hljs-comment">--Return the absolute value. Basically, the non-negative value.</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The absolute vale is: "</span>..<span class="hljs-built_in">math</span>.abs(-<span class="hljs-number">50</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The absolute vale is: "</span>..<span class="hljs-built_in">math</span>.abs(<span class="hljs-number">19.37</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The absolute vale is: "</span>..<span class="hljs-built_in">math</span>.abs(<span class="hljs-number">0</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.deg</span>

<span class="hljs-comment">--Angle degrees</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The angle degree is: "</span>..<span class="hljs-built_in">math</span>.deg(<span class="hljs-built_in">math</span>.pi * <span class="hljs-number">2</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The angle degree is: "</span>..<span class="hljs-built_in">math</span>.deg(<span class="hljs-built_in">math</span>.pi))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The angle degree is: "</span>..<span class="hljs-built_in">math</span>.deg(<span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The angle degree is: "</span>..<span class="hljs-built_in">math</span>.deg(<span class="hljs-built_in">math</span>.pi / <span class="hljs-number">4</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.min , math.max</span>

<span class="hljs-comment">--Minimum or maximum value </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The min is: "</span>..<span class="hljs-built_in">math</span>.min(<span class="hljs-number">3</span>,<span class="hljs-number">6</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The min is: "</span>..<span class="hljs-built_in">math</span>.min(<span class="hljs-number">2.2</span>, <span class="hljs-number">3.6</span>, <span class="hljs-number">8</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The min is: "</span>..<span class="hljs-built_in">math</span>.min(<span class="hljs-number">1.4</span>, -<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The max is: "</span>..<span class="hljs-built_in">math</span>.max(<span class="hljs-number">1.9</span>, -<span class="hljs-number">12</span>, <span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The max is: "</span>..<span class="hljs-built_in">math</span>.max(<span class="hljs-number">1.22</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.sqrt</span>

<span class="hljs-comment">--Square root of a number. Only non-negative values are allowed.</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The square root is: "</span>..<span class="hljs-built_in">math</span>.sqrt(<span class="hljs-number">25</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The square root is: "</span>..<span class="hljs-built_in">math</span>.sqrt(<span class="hljs-number">9</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The square root is: "</span>..<span class="hljs-built_in">math</span>.sqrt(<span class="hljs-number">200</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.random</span>

<span class="hljs-comment">--math.random() Generates a number between 0 and 1.</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random number is: "</span>..<span class="hljs-built_in">math</span>.random())
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random number is: "</span>..<span class="hljs-built_in">math</span>.random())
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random number is: "</span>..<span class="hljs-built_in">math</span>.random())

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.random(upper) generates a number between 1 and upper.</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random upper number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">120</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random upper number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">110</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.random(lower, upper) generates numbers between lower and upper.</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random lower to upper number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">75</span>,<span class="hljs-number">80</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The random lower to upper number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">81</span>,<span class="hljs-number">85</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)


<span class="hljs-comment">--math.randomseed</span>
<span class="hljs-comment">--The "seed" is a starting point. Basically, you will always get the same random numbers no matter how many times you run your script.</span>

<span class="hljs-built_in">math</span>.randomseed(<span class="hljs-number">12</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The randomseed number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">15</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The randomseed number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">17</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The randomseed number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">19</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The randomseed number is: "</span>..<span class="hljs-built_in">math</span>.random(<span class="hljs-number">22</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.pi</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"pi is: "</span>..<span class="hljs-built_in">math</span>.pi)

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--math.floor is for rounding down and math.ceil is for rounding up</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"1.5 rounded down: "</span>..<span class="hljs-built_in">math</span>.floor(<span class="hljs-number">1.5</span>))
<span class="hljs-built_in">print</span> (<span class="hljs-string">"1.5 rounded  up: "</span>..<span class="hljs-built_in">math</span>.ceil(<span class="hljs-number">1.5</span>))

<span class="hljs-built_in">print</span> (<span class="hljs-string">"-1.5 rounded down: "</span>..<span class="hljs-built_in">math</span>.floor(-<span class="hljs-number">1.5</span>))
<span class="hljs-built_in">print</span> (<span class="hljs-string">"-1.5 rounded  up: "</span>..<span class="hljs-built_in">math</span>.ceil(-<span class="hljs-number">1.5</span>))
</code></pre><h5 id="strings"><a name="strings" href="#strings"></a>Strings</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--String Examples

--Escape Sequence example:
print (&quot;What do you want\n with\r me\n\t? \nYou \&quot;mushroom\&quot; \'woman\' mutated monster!&quot;)

--Replacing a string

local name = &quot;Zeta Ataria&quot;

print(&quot;Her old name was &quot;..name)

-- replacing strings
local replace_name = string.gsub(name,&quot;Ataria&quot;,&quot;Setrita&quot;)
print(&quot;Her new name is&quot;,replace_name)


--Case Manipulation

print(string.lower(replace_name))
print(string.upper(replace_name))


-- Length of string
print(&quot;Length of replace_name is &quot;,string.len(replace_name))

-- String Concatenations with ..
print(&quot;Concatenated:&quot;,replace_name..name)

-- Repeating strings
local repeating = string.rep(replace_name,4)
print(repeating)

--Formatting Strings
local name = &quot;zeta&quot;
local rules = &quot;rules&quot;

-- Basic string formatting
print(string.format(&quot;Basic %s format %s&quot;,name,rules))

-- Decimal formatting
print(string.format(&quot;%.0f&quot;,1/3))
print(string.format(&quot;%.1f&quot;,1/3))
print(string.format(&quot;%.2f&quot;,1/3))
print(string.format(&quot;%.3f&quot;,1/3))
print(string.format(&quot;%.4f&quot;,1/3))
print(string.format(&quot;%.5f&quot;,1/3))

-- Date format + wacky
local month = 2; local day = 1; local year = 2014;  local wacky = 2
print(string.format(&quot;Date %02d/%02d/%03d/%09d&quot;, month, day, year,wacky))


--Find and Reverse

local name = &quot;zerta galxeria&quot;

print(&quot;Her name was:&quot;..name)

print(string.find(name,&quot;zerta&quot;))
reverse_text = string.reverse(name)
print(&quot;The new name is now:&quot;..reverse_text)

--Calculate te length with #
print (&quot;The length is: &quot;..#&quot;Length&quot;)
</code></pre>"><span class="hljs-comment">--String Examples</span>

<span class="hljs-comment">--Escape Sequence example:</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"What do you want\n with\r me\n\t? \nYou \"mushroom\" \'woman\' mutated monster!"</span>)

<span class="hljs-comment">--Replacing a string</span>

<span class="hljs-keyword">local</span> name = <span class="hljs-string">"Zeta Ataria"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Her old name was "</span>..name)

<span class="hljs-comment">-- replacing strings</span>
<span class="hljs-keyword">local</span> replace_name = <span class="hljs-built_in">string</span>.gsub(name,<span class="hljs-string">"Ataria"</span>,<span class="hljs-string">"Setrita"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Her new name is"</span>,replace_name)


<span class="hljs-comment">--Case Manipulation</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.lower(replace_name))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.upper(replace_name))


<span class="hljs-comment">-- Length of string</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Length of replace_name is "</span>,<span class="hljs-built_in">string</span>.len(replace_name))

<span class="hljs-comment">-- String Concatenations with ..</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Concatenated:"</span>,replace_name..name)

<span class="hljs-comment">-- Repeating strings</span>
<span class="hljs-keyword">local</span> repeating = <span class="hljs-built_in">string</span>.rep(replace_name,<span class="hljs-number">4</span>)
<span class="hljs-built_in">print</span>(repeating)

<span class="hljs-comment">--Formatting Strings</span>
<span class="hljs-keyword">local</span> name = <span class="hljs-string">"zeta"</span>
<span class="hljs-keyword">local</span> rules = <span class="hljs-string">"rules"</span>

<span class="hljs-comment">-- Basic string formatting</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"Basic %s format %s"</span>,name,rules))

<span class="hljs-comment">-- Decimal formatting</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.0f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.1f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.2f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.3f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.4f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%.5f"</span>,<span class="hljs-number">1</span>/<span class="hljs-number">3</span>))

<span class="hljs-comment">-- Date format + wacky</span>
<span class="hljs-keyword">local</span> month = <span class="hljs-number">2</span>; <span class="hljs-keyword">local</span> day = <span class="hljs-number">1</span>; <span class="hljs-keyword">local</span> year = <span class="hljs-number">2014</span>;  <span class="hljs-keyword">local</span> wacky = <span class="hljs-number">2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.format(<span class="hljs-string">"Date %02d/%02d/%03d/%09d"</span>, month, day, year,wacky))


<span class="hljs-comment">--Find and Reverse</span>

<span class="hljs-keyword">local</span> name = <span class="hljs-string">"zerta galxeria"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Her name was:"</span>..name)

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.find(name,<span class="hljs-string">"zerta"</span>))
reverse_text = <span class="hljs-built_in">string</span>.reverse(name)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The new name is now:"</span>..reverse_text)

<span class="hljs-comment">--Calculate te length with #</span>
<span class="hljs-built_in">print</span> (<span class="hljs-string">"The length is: "</span>..#<span class="hljs-string">"Length"</span>)
</code></pre><h5 id="tonumber()"><a name="tonumber()" href="#tonumber()"></a>tonumber()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--A string of numbers. These would need to be converted in order to do math.
local string = &quot;5678&quot;

local number = tonumber(string)

print(&quot;End of tonumber(): &quot;..number - 178)
</code></pre>"><span class="hljs-comment">--A string of numbers. These would need to be converted in order to do math.</span>
<span class="hljs-keyword">local</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">"5678"</span>

<span class="hljs-keyword">local</span> number = <span class="hljs-built_in">tonumber</span>(<span class="hljs-built_in">string</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of tonumber(): "</span>..number - <span class="hljs-number">178</span>)
</code></pre><hr class="section"><h5 id="string.format()"><a name="string.format()" href="#string.format()"></a>string.format()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local number = 3300

--converts varible 'number' into a string with 4 digits.
--Digit about can be changed. %0(number)d EX: %09d
local number_string = string.format(&quot;%07d&quot;, number)

print(&quot;End of string.format(): &quot;..number_string)
</code></pre>"><span class="hljs-keyword">local</span> number = <span class="hljs-number">3300</span>

<span class="hljs-comment">--converts varible 'number' into a string with 4 digits.</span>
<span class="hljs-comment">--Digit about can be changed. %0(number)d EX: %09d</span>
<span class="hljs-keyword">local</span> number_string = <span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%07d"</span>, number)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"End of string.format(): "</span>..number_string)
</code></pre><hr class="section"><h5 id="string.len()-or-:len()"><a name="string.len()-or-:len()" href="#string.len()-or-:len()"></a>string.len() or :len()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local string = &quot;What&quot;

print(&quot;The string length is: &quot;..string.len(string))

print(&quot;The string length is: &quot;..string:len())
</code></pre>"><span class="hljs-keyword">local</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">"What"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The string length is: "</span>..<span class="hljs-built_in">string</span>.len(<span class="hljs-built_in">string</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"The string length is: "</span>..<span class="hljs-built_in">string</span>:len())
</code></pre><hr class="section"><h5 id="string.reverse()-or-:reverse()"><a name="string.reverse()-or-:reverse()" href="#string.reverse()-or-:reverse()"></a>string.reverse() or :reverse()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local string = &quot;Programming&quot;

print(&quot;Reversing programming: &quot;..string.reverse(string))

print(&quot;Reversing programming: &quot;..string:reverse())
</code></pre>"><span class="hljs-keyword">local</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">"Programming"</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Reversing programming: "</span>..<span class="hljs-built_in">string</span>.reverse(<span class="hljs-built_in">string</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Reversing programming: "</span>..<span class="hljs-built_in">string</span>:reverse())
</code></pre><hr class="section"><h5 id="string.sub()-or-:sub()"><a name="string.sub()-or-:sub()" href="#string.sub()-or-:sub()"></a>string.sub() or :sub()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Print 7 until the end. &quot;Print &quot; = 6 characters (with space), so they are not included
print(string.sub(&quot;Print seven characters&quot;, 7))

--Print 7 until 9. &quot;Print &quot; = 6 characters (with space), so they are not included
print(string.sub(&quot;Print seven characters&quot;, 7, 9))

--Print -7 until the end. &quot;Print &quot; = 6 characters (with space), so they are not included
print(string.sub(&quot;Print seven characters&quot;, -7))

--Print -7 until -9. &quot;Print &quot; = 6 characters (with space), so they are not included
print(string.sub(&quot;Print seven characters&quot;, 7, -9))
</code></pre>"><span class="hljs-comment">--Print 7 until the end. "Print " = 6 characters (with space), so they are not included</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.sub(<span class="hljs-string">"Print seven characters"</span>, <span class="hljs-number">7</span>))

<span class="hljs-comment">--Print 7 until 9. "Print " = 6 characters (with space), so they are not included</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.sub(<span class="hljs-string">"Print seven characters"</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>))

<span class="hljs-comment">--Print -7 until the end. "Print " = 6 characters (with space), so they are not included</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.sub(<span class="hljs-string">"Print seven characters"</span>, -<span class="hljs-number">7</span>))

<span class="hljs-comment">--Print -7 until -9. "Print " = 6 characters (with space), so they are not included</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">string</span>.sub(<span class="hljs-string">"Print seven characters"</span>, <span class="hljs-number">7</span>, -<span class="hljs-number">9</span>))
</code></pre><hr class="section"><h5 id="string.gmatch(string,-pattern)-or-string:gmatch(pattern)"><a name="string.gmatch(string,-pattern)-or-string:gmatch(pattern)" href="#string.gmatch(string,-pattern)-or-string:gmatch(pattern)"></a>string.gmatch(string, pattern) or string:gmatch(pattern)</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local word

--&quot;%a&quot; is a &quot;letters&quot; character class. Check at the start of the programming lesson for all of them. The &quot;+&quot; means one or more words. Otherwise, without the plus...one will just get one letter per character.
for word in string.gmatch(&quot;Hello Lua user&quot;, &quot;%a+&quot;) do 
   print(&quot;%a+: &quot;..word)
end

for word in string.gmatch(&quot;Hello Lua user&quot;, &quot;%a&quot;) do 
   print(&quot;%a: &quot;..word)
end

for word in string.gmatch(&quot;Hello Lua user&quot;, &quot;%a*&quot;) do 
   print(&quot;%a*: &quot;..word)
end

for word in string.gmatch(&quot;Hello Lua user&quot;, &quot;%a?&quot;) do 
   print(&quot;%a?: &quot;..word)
end

--[[
Repetitions pattern Modifiers:

+    1 or more repetitions
*    0 or more repetitions
-    also 0 or more repetitions
?    Optional (0 or 1 occurrence)

--]]

--[[
Character pattern classes:

.    all characters
%a    letters
%c    control characters
%d    digits
%l    lower case letters
%p    punctuation characters
%s    space characters
%u    upper case letters
%w    alphanumeric characters
%x    hexadecimal digits
%z    the character with representation 0
--]]
</code></pre>"><span class="hljs-keyword">local</span> word

<span class="hljs-comment">--"%a" is a "letters" character class. Check at the start of the programming lesson for all of them. The "+" means one or more words. Otherwise, without the plus...one will just get one letter per character.</span>
<span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch(<span class="hljs-string">"Hello Lua user"</span>, <span class="hljs-string">"%a+"</span>) <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"%a+: "</span>..word)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch(<span class="hljs-string">"Hello Lua user"</span>, <span class="hljs-string">"%a"</span>) <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"%a: "</span>..word)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch(<span class="hljs-string">"Hello Lua user"</span>, <span class="hljs-string">"%a*"</span>) <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"%a*: "</span>..word)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch(<span class="hljs-string">"Hello Lua user"</span>, <span class="hljs-string">"%a?"</span>) <span class="hljs-keyword">do</span> 
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"%a?: "</span>..word)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--[[
Repetitions pattern Modifiers:

+    1 or more repetitions
*    0 or more repetitions
-    also 0 or more repetitions
?    Optional (0 or 1 occurrence)

--]]</span>

<span class="hljs-comment">--[[
Character pattern classes:

.    all characters
%a    letters
%c    control characters
%d    digits
%l    lower case letters
%p    punctuation characters
%s    space characters
%u    upper case letters
%w    alphanumeric characters
%x    hexadecimal digits
%z    the character with representation 0
--]]</span>
</code></pre><hr class="section"><h5 id="clear-table"><a name="clear-table" href="#clear-table"></a>Clear Table</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Makes a table with 2 and 5 in it.
local vars = {&quot;2&quot;, &quot;5&quot;}

--prints the table above
print(&quot;Table before clearing: &quot;..vars[1]..vars[2])

--clears the table and this makes vars[2] = nil
vars = {}

vars[1] = 6

print(&quot;Table after clearing: &quot;..vars[1],vars[2])
</code></pre>"><span class="hljs-comment">--Makes a table with 2 and 5 in it.</span>
<span class="hljs-keyword">local</span> vars = {<span class="hljs-string">"2"</span>, <span class="hljs-string">"5"</span>}

<span class="hljs-comment">--prints the table above</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Table before clearing: "</span>..vars[<span class="hljs-number">1</span>]..vars[<span class="hljs-number">2</span>])

<span class="hljs-comment">--clears the table and this makes vars[2] = nil</span>
vars = {}

vars[<span class="hljs-number">1</span>] = <span class="hljs-number">6</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Table after clearing: "</span>..vars[<span class="hljs-number">1</span>],vars[<span class="hljs-number">2</span>])
</code></pre><hr class="section"><h5 id="math/arithmetic-in-an-if-statement"><a name="math/arithmetic-in-an-if-statement" href="#math/arithmetic-in-an-if-statement"></a>Math/Arithmetic in an if statement</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local test = 2
local test2 = 1
local limit = 5

-- If variable 'test' added to variable 'test 2' are less than limit, then print, &quot;Cannot go beyond limit!&quot;
if test + test2 &amp;lt; limit then
  print(&quot;If/math:Cannot go beyond limit!&quot;)
end


local test = 4
local test2 = 2
local limit = 5

-- If variable 'test' added to variable 'test 2' are greater than limit, then print, &quot;Going beyond the limit!&quot;
if test + test2 &amp;gt; limit then
  print(&quot;If/math:Going beyond the limit!&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> test = <span class="hljs-number">2</span>
<span class="hljs-keyword">local</span> test2 = <span class="hljs-number">1</span>
<span class="hljs-keyword">local</span> limit = <span class="hljs-number">5</span>

<span class="hljs-comment">-- If variable 'test' added to variable 'test 2' are less than limit, then print, "Cannot go beyond limit!"</span>
<span class="hljs-keyword">if</span> test + test2 &lt; limit <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"If/math:Cannot go beyond limit!"</span>)
<span class="hljs-keyword">end</span>


<span class="hljs-keyword">local</span> test = <span class="hljs-number">4</span>
<span class="hljs-keyword">local</span> test2 = <span class="hljs-number">2</span>
<span class="hljs-keyword">local</span> limit = <span class="hljs-number">5</span>

<span class="hljs-comment">-- If variable 'test' added to variable 'test 2' are greater than limit, then print, "Going beyond the limit!"</span>
<span class="hljs-keyword">if</span> test + test2 &gt; limit <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"If/math:Going beyond the limit!"</span>)
<span class="hljs-keyword">end</span>
</code></pre><hr class="section"><h5 id="simple-table.concat()"><a name="simple-table.concat()" href="#simple-table.concat()"></a>Simple table.concat()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local char ={}

char[3] = &quot;g&quot;
char[2] = &quot;p&quot;
char[1] = &quot;h&quot;

--adds the char in the table together.
local foo = table.concat(char)

print(&quot;Table concat: &quot;..foo)
</code></pre>"><span class="hljs-keyword">local</span> char ={}

char[<span class="hljs-number">3</span>] = <span class="hljs-string">"g"</span>
char[<span class="hljs-number">2</span>] = <span class="hljs-string">"p"</span>
char[<span class="hljs-number">1</span>] = <span class="hljs-string">"h"</span>

<span class="hljs-comment">--adds the char in the table together.</span>
<span class="hljs-keyword">local</span> foo = <span class="hljs-built_in">table</span>.concat(char)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Table concat: "</span>..foo)
</code></pre><hr class="section"><h5 id="table.concat()-and-table.insert()"><a name="table.concat()-and-table.insert()" href="#table.concat()-and-table.insert()"></a>table.concat() and table.insert()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local multiple ={}
local character_num = {}
local character = {}
local char = {}

local j = 1

multiple[1] = true


for i = 1,15 do
   char[i] = &quot;q&quot;
   char[15] = &quot;g&quot;

    --Variable j = 1 above and multiple[1] is true above, so it activates.
    if multiple[j] == true then

      --inserts 'q' into 'character_num' until char[15] because it equals 'g'
      table.insert(character_num, char[i]) 

      --concat combines each 'q' from the array table
      character[i] = table.concat(character_num)

      --print each character concat line
      print(&quot;Concat insert: &quot;..character[i])

    end
end
</code></pre>"><span class="hljs-keyword">local</span> multiple ={}
<span class="hljs-keyword">local</span> character_num = {}
<span class="hljs-keyword">local</span> character = {}
<span class="hljs-keyword">local</span> char = {}

<span class="hljs-keyword">local</span> j = <span class="hljs-number">1</span>

multiple[<span class="hljs-number">1</span>] = <span class="hljs-keyword">true</span>


<span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>,<span class="hljs-number">15</span> <span class="hljs-keyword">do</span>
   char[i] = <span class="hljs-string">"q"</span>
   char[<span class="hljs-number">15</span>] = <span class="hljs-string">"g"</span>

    <span class="hljs-comment">--Variable j = 1 above and multiple[1] is true above, so it activates.</span>
    <span class="hljs-keyword">if</span> multiple[j] == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>

      <span class="hljs-comment">--inserts 'q' into 'character_num' until char[15] because it equals 'g'</span>
      <span class="hljs-built_in">table</span>.insert(character_num, char[i]) 

      <span class="hljs-comment">--concat combines each 'q' from the array table</span>
      character[i] = <span class="hljs-built_in">table</span>.concat(character_num)

      <span class="hljs-comment">--print each character concat line</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"Concat insert: "</span>..character[i])

    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><hr class="section"><h5 id="table.sort"><a name="table.sort" href="#table.sort"></a>table.sort</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local test_table = {&quot;b&quot;, &quot;a&quot;, &quot;c&quot;, &quot;e&quot;, &quot;d&quot;}

-- Sort the table from a to z.
table.sort(test_table) 

for i = 1,5 do
   print(test_table[i])
end

print(&quot;&quot;)

--sort the table from z to a.
local test_table2 = {&quot;b&quot;, &quot;a&quot;, &quot;c&quot;, &quot;e&quot;, &quot;d&quot;}

table.sort(test_table2, function(a, b) return a &amp;gt; b end) -- Sort our table, but this time lets make it sort backwards.

for i = 1,5 do
  print(test_table2[i])
end

print(&quot;&quot;)

-- Randomly shuffles the table.
table.sort(test_table2, function(a, b) return math.random(0,0) &amp;lt; 0 end) 

for i = 1,5 do
  print(test_table2[i])
end

print(&quot;&quot;)
</code></pre>"><span class="hljs-keyword">local</span> test_table = {<span class="hljs-string">"b"</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"d"</span>}

<span class="hljs-comment">-- Sort the table from a to z.</span>
<span class="hljs-built_in">table</span>.sort(test_table) 

<span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span>(test_table[i])
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--sort the table from z to a.</span>
<span class="hljs-keyword">local</span> test_table2 = {<span class="hljs-string">"b"</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"e"</span>, <span class="hljs-string">"d"</span>}

<span class="hljs-built_in">table</span>.sort(test_table2, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a, b)</span></span> <span class="hljs-keyword">return</span> a &gt; b <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- Sort our table, but this time lets make it sort backwards.</span>

<span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(test_table2[i])
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">-- Randomly shuffles the table.</span>
<span class="hljs-built_in">table</span>.sort(test_table2, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a, b)</span></span> <span class="hljs-keyword">return</span> <span class="hljs-built_in">math</span>.random(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">end</span>) 

<span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">print</span>(test_table2[i])
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)
</code></pre><hr class="section"><h5 id="defining-a-function"><a name="defining-a-function" href="#defining-a-function"></a>Defining a function</h5><p>The <code>local</code> scope, aruguments, and return are optional for functions. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
scope_optional function name( arg1, arg2, arg3....., arg[num])
      function_body
return something
end
--]]

 --If number1 is less number 2 then 1 will be added to number 2 
 --local scope is optional. It will be global without it.
local function increase(number1, number2)

    if number1 &amp;lt; number2 then
      result = number2 + 1
    end

   --Result is what is printed.
   return result; 
end

print (&quot;The result: &quot;..increase(2,3))

print(&quot;&quot;)

--You do not have to return it in this case.
function thetruth()
   print(&quot;You were a mutant!&quot;)
end

print(thetruth())
</code></pre>"><span class="hljs-comment">--[[
scope_optional function name( arg1, arg2, arg3....., arg[num])
      function_body
return something
end
--]]</span>

 <span class="hljs-comment">--If number1 is less number 2 then 1 will be added to number 2 </span>
 <span class="hljs-comment">--local scope is optional. It will be global without it.</span>
<span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increase</span><span class="hljs-params">(number1, number2)</span></span>

    <span class="hljs-keyword">if</span> number1 &lt; number2 <span class="hljs-keyword">then</span>
      result = number2 + <span class="hljs-number">1</span>
    <span class="hljs-keyword">end</span>

   <span class="hljs-comment">--Result is what is printed.</span>
   <span class="hljs-keyword">return</span> result; 
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"The result: "</span>..increase(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">""</span>)

<span class="hljs-comment">--You do not have to return it in this case.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">thetruth</span><span class="hljs-params">()</span></span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"You were a mutant!"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(thetruth())
</code></pre><p>Functions can be declared in a straignt line, in a table, and assigned to variables.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>x = {pos_x = function(x,y) return x end, pos_y = function(x,y) return y end, }

print(&quot;Dot: &quot;,x.pos_x(3,4))
print(&quot;Dot: &quot;,x.pos_y(3,4))
</code></pre>">x = {pos_x = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x <span class="hljs-keyword">end</span>, pos_y = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> y <span class="hljs-keyword">end</span>, }

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot: "</span>,x.pos_x(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot: "</span>,x.pos_y(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>Dot: 3
Dot: 4
</code></pre>">Dot: 3
Dot: 4
</code></pre><hr class="section"><h5 id="pairs()-and-ipairs()"><a name="pairs()-and-ipairs()" href="#pairs()-and-ipairs()"></a>pairs() and ipairs()</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--for key, variable in pairs() (no particular order)
--for key, variable in ipairs() (in order)
--pairs() and ipairs() loop through a table

local itemList = {
    {bName = &quot;Candy &quot;, bCountry = &quot;Gestra &quot;, bType = &quot;50HP&quot;},
    {bName = &quot;Chocolate &quot;, bCountry = &quot;Fragrath &quot;, bType = &quot;100HP&quot;},
    {bName = &quot;Sword &quot;, bCountry = &quot;Nerzarta &quot;, bType = &quot;90ATK&quot;},
    {bName = &quot;Shield &quot;, bCountry = &quot;kelboax &quot;, bType = &quot;100DEF&quot;},
}

local sort_func = function( a,b ) return a.bName &amp;lt; b.bName end
table.sort( itemList, sort_func )

for i, record in ipairs( itemList ) do
    print(record.bName..record.bCountry..record.bType)
end
</code></pre>"><span class="hljs-comment">--for key, variable in pairs() (no particular order)</span>
<span class="hljs-comment">--for key, variable in ipairs() (in order)</span>
<span class="hljs-comment">--pairs() and ipairs() loop through a table</span>

<span class="hljs-keyword">local</span> itemList = {
    {bName = <span class="hljs-string">"Candy "</span>, bCountry = <span class="hljs-string">"Gestra "</span>, bType = <span class="hljs-string">"50HP"</span>},
    {bName = <span class="hljs-string">"Chocolate "</span>, bCountry = <span class="hljs-string">"Fragrath "</span>, bType = <span class="hljs-string">"100HP"</span>},
    {bName = <span class="hljs-string">"Sword "</span>, bCountry = <span class="hljs-string">"Nerzarta "</span>, bType = <span class="hljs-string">"90ATK"</span>},
    {bName = <span class="hljs-string">"Shield "</span>, bCountry = <span class="hljs-string">"kelboax "</span>, bType = <span class="hljs-string">"100DEF"</span>},
}

<span class="hljs-keyword">local</span> sort_func = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( a,b )</span></span> <span class="hljs-keyword">return</span> a.bName &lt; b.bName <span class="hljs-keyword">end</span>
<span class="hljs-built_in">table</span>.sort( itemList, sort_func )

<span class="hljs-keyword">for</span> i, record <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>( itemList ) <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">print</span>(record.bName..record.bCountry..record.bType)
<span class="hljs-keyword">end</span>
</code></pre><hr class="section"><h5 id="associative-table"><a name="associative-table" href="#associative-table"></a>Associative table</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
Sorting an Associative table - not possible.
You can only sort a table of keys which has a number index
]]

Assosciative = {muffin = &quot;strawberry&quot;, tree = &quot;oak&quot;,
        cake = &quot;oreo&quot;, seed = &quot;apple&quot;,
        pie = &quot;chocolate&quot;, fruit = &quot;orange&quot;}

print (&quot;\nMethod 1 - sort an array of keys&quot;)

list = {}

for name,value in pairs(Assosciative) do
   list[#list+1] = name
end

print (&quot;****************by key&quot;)

table.sort(list)

for key=1,#list do
   print (list[key] .. &quot; is &quot; .. Assosciative[list[key]])
end

print (&quot;****************by value&quot;)

function byvalue(a,b)
  return Assosciative[a] &amp;lt; Assosciative[b]
end

table.sort(list,byvalue)

for k=1,#list do
   print (list[k] .. &quot; is &quot; .. Assosciative[list[k]])
end

print (&quot;\nMethod 2 - create an array of pairs&quot;)

arraypairs = {}

for name,value in pairs(Assosciative) do
   table.insert(arraypairs,{name=name, value=value})
end

table.sort(arraypairs,function(a,b) return a.name &amp;lt; b.name end)

--The variable consisting of only an underscore &quot;_&quot; is commonly used as a placeholder when you want to ignore the variable
for _,line in ipairs(arraypairs) do
   print (line.name .. &quot; is &quot; .. line.value)
end
</code></pre>"><span class="hljs-comment">--[[
Sorting an Associative table - not possible.
You can only sort a table of keys which has a number index
]]</span>

Assosciative = {muffin = <span class="hljs-string">"strawberry"</span>, tree = <span class="hljs-string">"oak"</span>,
        cake = <span class="hljs-string">"oreo"</span>, seed = <span class="hljs-string">"apple"</span>,
        pie = <span class="hljs-string">"chocolate"</span>, fruit = <span class="hljs-string">"orange"</span>}

<span class="hljs-built_in">print</span> (<span class="hljs-string">"\nMethod 1 - sort an array of keys"</span>)

list = {}

<span class="hljs-keyword">for</span> name,value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(Assosciative) <span class="hljs-keyword">do</span>
   list[#list+<span class="hljs-number">1</span>] = name
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"****************by key"</span>)

<span class="hljs-built_in">table</span>.sort(list)

<span class="hljs-keyword">for</span> key=<span class="hljs-number">1</span>,#list <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span> (list[key] .. <span class="hljs-string">" is "</span> .. Assosciative[list[key]])
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"****************by value"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byvalue</span><span class="hljs-params">(a,b)</span></span>
  <span class="hljs-keyword">return</span> Assosciative[a] &lt; Assosciative[b]
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">table</span>.sort(list,byvalue)

<span class="hljs-keyword">for</span> k=<span class="hljs-number">1</span>,#list <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span> (list[k] .. <span class="hljs-string">" is "</span> .. Assosciative[list[k]])
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span> (<span class="hljs-string">"\nMethod 2 - create an array of pairs"</span>)

arraypairs = {}

<span class="hljs-keyword">for</span> name,value <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(Assosciative) <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">table</span>.insert(arraypairs,{name=name, value=value})
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">table</span>.sort(arraypairs,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(a,b)</span></span> <span class="hljs-keyword">return</span> a.name &lt; b.name <span class="hljs-keyword">end</span>)

<span class="hljs-comment">--The variable consisting of only an underscore "_" is commonly used as a placeholder when you want to ignore the variable</span>
<span class="hljs-keyword">for</span> _,line <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(arraypairs) <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span> (line.name .. <span class="hljs-string">" is "</span> .. line.value)
<span class="hljs-keyword">end</span>
</code></pre><hr class="section"><h5 id="error-handling"><a name="error-handling" href="#error-handling"></a>Error Handling</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Common errors people make in lua

--Forgetting do
for rep = 1,3
   print(rep)
end

--13_error_handling.lua:6: 'do' expected near 'print'


--Forgetting to assign a number value to be. Be should equal at least zero.EX local b = 0
local b

local c = 5

print(b + c)

--13_error_handling.lua:20: attempt to perform arithmetic on local 'b' (a nil value)


--This should be a single equal. &quot;=&quot;
local d == 5

print(d)

--13_error_handling.lua:25: unexpected symbol near '=='


--For getting to add &quot;then&quot;
local b = 5

if b == 5
  print(5)
end

--13_error_handling.lua:38: 'then' expected near 'print'

---------------------------------------------------------------------------------

--[[
Some other common errors. That happen when people do not use tables and arrays.

1. Function at line has more than 60 upvalues for local variables, arrays, &amp;amp; 200 Local Variables Limit

2.Control structure too long near
--]]
</code></pre>"><span class="hljs-comment">--Common errors people make in lua</span>

<span class="hljs-comment">--Forgetting do</span>
<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span>
   <span class="hljs-built_in">print</span>(rep)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--13_error_handling.lua:6: 'do' expected near 'print'</span>


<span class="hljs-comment">--Forgetting to assign a number value to be. Be should equal at least zero.EX local b = 0</span>
<span class="hljs-keyword">local</span> b

<span class="hljs-keyword">local</span> c = <span class="hljs-number">5</span>

<span class="hljs-built_in">print</span>(b + c)

<span class="hljs-comment">--13_error_handling.lua:20: attempt to perform arithmetic on local 'b' (a nil value)</span>


<span class="hljs-comment">--This should be a single equal. "="</span>
<span class="hljs-keyword">local</span> d == <span class="hljs-number">5</span>

<span class="hljs-built_in">print</span>(d)

<span class="hljs-comment">--13_error_handling.lua:25: unexpected symbol near '=='</span>


<span class="hljs-comment">--For getting to add "then"</span>
<span class="hljs-keyword">local</span> b = <span class="hljs-number">5</span>

<span class="hljs-keyword">if</span> b == <span class="hljs-number">5</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-number">5</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--13_error_handling.lua:38: 'then' expected near 'print'</span>

<span class="hljs-comment">---------------------------------------------------------------------------------</span>

<span class="hljs-comment">--[[
Some other common errors. That happen when people do not use tables and arrays.

1. Function at line has more than 60 upvalues for local variables, arrays, &amp; 200 Local Variables Limit

2.Control structure too long near
--]]</span>
</code></pre><h5 id="declaring-multiple-variables-on-one-line"><a name="declaring-multiple-variables-on-one-line" href="#declaring-multiple-variables-on-one-line"></a>Declaring Multiple Variables On One Line</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--One can use a comma to declare many variables at one time.
local a,b,c,d = 5,6,7,8

print(a)
print(b)
print(c)
print(d)

print(a + b + c + d)
</code></pre>"><span class="hljs-comment">--One can use a comma to declare many variables at one time.</span>
<span class="hljs-keyword">local</span> a,b,c,d = <span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>

<span class="hljs-built_in">print</span>(a)
<span class="hljs-built_in">print</span>(b)
<span class="hljs-built_in">print</span>(c)
<span class="hljs-built_in">print</span>(d)

<span class="hljs-built_in">print</span>(a + b + c + d)
</code></pre><h4 id="coroutine"><a name="coroutine" href="#coroutine"></a>Coroutine</h4><p>A coroutine can stop (yield) and restart (resume) a task.</p><h5 id="make-a-coroutine"><a name="make-a-coroutine" href="#make-a-coroutine"></a>Make a Coroutine</h5><p>It is quite simple to create a coroutine.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>variable = coroutine.create(function()
--code here
end))
</code></pre>">variable = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
<span class="hljs-comment">--code here</span>
<span class="hljs-keyword">end</span>))
</code></pre><h5 id="coroutine-yield"><a name="coroutine-yield" href="#coroutine-yield"></a>Coroutine Yield</h5><p>The <code>coroutine.yield()</code> function stops the coroutine.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
     end
end)
</code></pre>">co = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
       <span class="hljs-built_in">print</span>(i)
       <span class="hljs-built_in">coroutine</span>.yield()
     <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)
</code></pre><h5 id="coroutine-resume"><a name="coroutine-resume" href="#coroutine-resume"></a>Coroutine Resume</h5><p>The function <code>coroutine.resume()</code> needs to be called to start a coroutine.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
     end
end)

coroutine.resume(co)
coroutine.resume(co)
</code></pre>">co = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
       <span class="hljs-built_in">print</span>(i)
       <span class="hljs-built_in">coroutine</span>.yield()
     <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">coroutine</span>.resume(co)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>1
2
</code></pre>">1
2
</code></pre><h5 id="tasks-between-resume"><a name="tasks-between-resume" href="#tasks-between-resume"></a>Tasks Between Resume</h5><p>One can do other things between <code>coroutine.resume()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
     end
end)

coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
</code></pre>"><span class="hljs-comment">--[[
co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
     end
end)

coroutine.resume(co)
print("do something")
coroutine.resume(co)
print("do something")
coroutine.resume(co)
print("do something")
</span></code></pre><p>Result:</p><pre><code data-origin="<pre><code>1
do something
2
do something
3
do something
</code></pre>">1
do something
2
do something
3
do something
</code></pre><h5 id="coroutine-status"><a name="coroutine-status" href="#coroutine-status"></a>Coroutine Status</h5><p>The function <code>coroutine.status()</code> tells you if the coroutine is dead, running, and suspended. A coroutine dies if it exceeds the limit. In this case, the limit is 5 times according to the for loop.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
       print(coroutine.resume(co)) -- Resume in a function
       print(coroutine.status(co))
     end
end)

coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
print(coroutine.resume(co))
print(coroutine.status(co))
coroutine.resume(co)
coroutine.resume(co)
print(coroutine.resume(co))
print(coroutine.status(co))
</code></pre>">co = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
       <span class="hljs-built_in">print</span>(i)
       <span class="hljs-built_in">coroutine</span>.yield()
       <span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co)) <span class="hljs-comment">-- Resume in a function</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
     <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>1
do something
false cannot resume running coroutine
running
2
do something
false cannot resume running coroutine
running
3
do something
false cannot resume running coroutine
running
4
true
suspended
false cannot resume running coroutine
running
5
false cannot resume running coroutine
running
false cannot resume dead coroutine
dead
</code></pre>">1
do something
false cannot resume running coroutine
running
2
do something
false cannot resume running coroutine
running
3
do something
false cannot resume running coroutine
running
4
true
suspended
false cannot resume running coroutine
running
5
false cannot resume running coroutine
running
false cannot resume dead coroutine
dead
</code></pre><p><strong>Another example:</strong></p><p>Above I showed the output if <code>print(coroutine.resume(co))</code> was in the function. I will demonstrate the result of it not being there.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>co = coroutine.create(function()
     for i = 1, 5 do
       print(i)
       coroutine.yield()
       print(coroutine.status(co))
     end
end)

coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
coroutine.resume(co)
print(&quot;do something&quot;)
print(coroutine.resume(co))
print(coroutine.status(co))
coroutine.resume(co)
coroutine.resume(co)
print(coroutine.resume(co))
print(coroutine.status(co))
</code></pre>">co = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
       <span class="hljs-built_in">print</span>(i)
       <span class="hljs-built_in">coroutine</span>.yield()
       <span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
     <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"do something"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">coroutine</span>.resume(co)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.status(co))
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>1
do something
running
2
do something
running
3
do something
running
4
true
suspended
running
5
running
false cannot resume dead coroutine
dead
</code></pre>">1
do something
running
2
do something
running
3
do something
running
4
true
suspended
running
5
running
false cannot resume dead coroutine
dead
</code></pre><h5 id="coroutine-callback"><a name="coroutine-callback" href="#coroutine-callback"></a>Coroutine Callback</h5><p>Calls can be added to <code>coroutine.resume()</code>.</p><pre><code data-origin="<pre><code>coroutine.resume(co, call, call)
</code></pre>">coroutine.resume(co, call, call)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>co = coroutine.create(function()
     for i = 1, 5 do
       print(coroutine.yield(i)) -- true or flase
     end
end)

local three = 3
print(coroutine.resume(co))
print(coroutine.resume(co, three, 4))
print(coroutine.resume(co, 5, 6))
print(coroutine.resume(co, 7, 8))
print(coroutine.resume(co, 9, 10))
print(coroutine.resume(co, 11, 12))
print(coroutine.resume(co, 13, 14))
print(coroutine.resume(co, 15, 16))
</code></pre>">co = <span class="hljs-built_in">coroutine</span>.create(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
     <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>, <span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.yield(i)) <span class="hljs-comment">-- true or flase</span>
     <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-keyword">local</span> three = <span class="hljs-number">3</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, three, <span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">13</span>, <span class="hljs-number">14</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">coroutine</span>.resume(co, <span class="hljs-number">15</span>, <span class="hljs-number">16</span>))
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>true
1
3 4
true 2
5 6
true 3
7 8
true 4
9 10
true 5
11 12
true
false cannot resume dead coroutine
false cannot resume dead coroutine
</code></pre>">true
1
3 4
true 2
5 6
true 3
7 8
true 4
9 10
true 5
11 12
true
false cannot resume dead coroutine
false cannot resume dead coroutine
</code></pre><h5 id="coroutine-wrap-shortcut"><a name="coroutine-wrap-shortcut" href="#coroutine-wrap-shortcut"></a>Coroutine Wrap Shortcut</h5><p>One can use the function <code>coroutine.wrap</code> to shorten the coroutine process.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>c = coroutine.wrap(function()
    for i = 1,5 do
      print(i)
      coroutine.yield()
    end
end)

c()
c()
</code></pre>">c = <span class="hljs-built_in">coroutine</span>.wrap(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">for</span> i = <span class="hljs-number">1</span>,<span class="hljs-number">5</span> <span class="hljs-keyword">do</span>
      <span class="hljs-built_in">print</span>(i)
      <span class="hljs-built_in">coroutine</span>.yield()
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

c()
c()
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>1
2
</code></pre>">1
2
</code></pre><h4 id="module"><a name="module" href="#module"></a>Module</h4><p>Fist off, make a Lua file called <code>Module_1.lua</code> or any name you want to be honest, but it will be that name in this example. Put it in the scripts directory of the project data folder.</p><h5 id="make-a-table"><a name="make-a-table" href="#make-a-table"></a>Make a table</h5><p>The first task is to make a table. It is better to keep your table local, but it will be global to show you why it should be local later.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
m = {} -- make local

return m
--]]
</code></pre>"><span class="hljs-comment">--[[
m = {} -- make local

return m
--]]</span>
</code></pre><h5 id="add-tasks"><a name="add-tasks" href="#add-tasks"></a>Add Tasks</h5><p>You will need to add <code>m.</code> before any table item like normal.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>m.printHello = function()
  print(&quot;hello&quot;)
end

m.pi = 3.1415

m.t = {1, 2, 3}

m.number = function(number)
  print(&quot;Number is: &quot;..number)
end
</code></pre>">m.printHello = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)
<span class="hljs-keyword">end</span>

m.pi = <span class="hljs-number">3.1415</span>

m.t = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}

m.number = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(number)</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Number is: "</span>..number)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="require-module"><a name="require-module" href="#require-module"></a>Require Module</h5><p>If you plan to use this module all of your scripts, then it would be best to require it at the top of <code>main.lua</code>.</p><p>In this case I will use a map script because it will be discarded when leaving the map.</p><p>In <code>first_map.lua</code> require the module and activate the tasks. One will have to assign a variable to the required script to use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>c = require(&quot;scripts/module_1&quot;)

--print hello
c.printHello()

--print pi
print(c.pi)

--print all values in table
for _, v in pairs(c.t) do
   print(v)
end

--number is:
c.number(400)
</code></pre>">c = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/module_1"</span>)

<span class="hljs-comment">--print hello</span>
c.printHello()

<span class="hljs-comment">--print pi</span>
<span class="hljs-built_in">print</span>(c.pi)

<span class="hljs-comment">--print all values in table</span>
<span class="hljs-keyword">for</span> _, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(c.t) <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span>(v)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--number is:</span>
c.number(<span class="hljs-number">400</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>hello
3.1415
1
2
3
Number is: 400
</code></pre>">hello
3.1415
1
2
3
Number is: 400
</code></pre><h5 id="global-module-table-issue"><a name="global-module-table-issue" href="#global-module-table-issue"></a>Global Module Table Issue</h5><p>Making the table in the module <code>global</code> is not a good idea because at some point there might be mix ups with code in the module.</p><p>Let me show you what I mean.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>c = require(&quot;scripts/module_1&quot;)

c.printHello()
m.printHello()
</code></pre>">c = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/module_1"</span>)

c.printHello()
m.printHello()
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>hello
hello
</code></pre>">hello
hello
</code></pre><p>As you can see â€œhelloâ€ printed twice because there is no local restriction in the module for <code>m.printHello()</code>. This might become a problem at some point. An easy fix is to make the table in the module local.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local m = {} -- make local

m.printHello = function()
  print(&quot;hello&quot;)
end

m.pi = 3.1415

m.t = {1, 2, 3}

m.number = function(number)
  print(&quot;Number is: &quot;..number)
end

return m
</code></pre>"><span class="hljs-keyword">local</span> m = {} <span class="hljs-comment">-- make local</span>

m.printHello = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)
<span class="hljs-keyword">end</span>

m.pi = <span class="hljs-number">3.1415</span>

m.t = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}

m.number = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(number)</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Number is: "</span>..number)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> m
</code></pre><p>Now if you try it an error will occur with <code>m.printHello()</code>.</p><pre><code data-origin="<pre><code>Error: In maps/first_map: [string &quot;maps/first_map.lua&quot;]:21: attempt to index global 'm' (a nil value)
</code></pre>">Error: In maps/first_map: [string "maps/first_map.lua"]:21: attempt to index global 'm' (a nil value)
</code></pre><h5 id="module-shortcut"><a name="module-shortcut" href="#module-shortcut"></a>Module Shortcut</h5><p>Instead of writing <code>m.</code> over and over again, one can set a metatable and point the table to <code>_ENV</code> (Environment).</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local m = {}
setmetatable(m, {__index = _G}) -- index items in table to be global (_G)
_ENV = m -- use this to remove &quot;m.&quot; in code.

printHello = function()
  print(&quot;hello&quot;)
end

pi = 3.1415

t = {1, 2, 3}

number = function(number)
  print(&quot;Number is: &quot;..number)
end

return m
</code></pre>"><span class="hljs-keyword">local</span> m = {}
<span class="hljs-built_in">setmetatable</span>(m, {__index = <span class="hljs-built_in">_G</span>}) <span class="hljs-comment">-- index items in table to be global (_G)</span>
_ENV = m <span class="hljs-comment">-- use this to remove "m." in code.</span>

printHello = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"hello"</span>)
<span class="hljs-keyword">end</span>

pi = <span class="hljs-number">3.1415</span>

t = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}

number = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(number)</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"Number is: "</span>..number)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> m
</code></pre><h5 id="assign-new-variable"><a name="assign-new-variable" href="#assign-new-variable"></a>Assign New Variable</h5><p>One can assign a new variable to require and use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>c = require(&quot;scripts/module_1&quot;)

c.printHello()
print(c.pi)

for _, v in pairs(c.t) do
   print(v)
end

c.number(400)

value = require(&quot;scripts/module_1&quot;)

value.number(700)
c.number(500)

maths = c

maths.number(2000)
</code></pre>">c = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/module_1"</span>)

c.printHello()
<span class="hljs-built_in">print</span>(c.pi)

<span class="hljs-keyword">for</span> _, v <span class="hljs-keyword">in</span> <span class="hljs-built_in">pairs</span>(c.t) <span class="hljs-keyword">do</span>
   <span class="hljs-built_in">print</span>(v)
<span class="hljs-keyword">end</span>

c.number(<span class="hljs-number">400</span>)

value = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/module_1"</span>)

value.number(<span class="hljs-number">700</span>)
c.number(<span class="hljs-number">500</span>)

maths = c

maths.number(<span class="hljs-number">2000</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>hello
3.1415
1
2
3
Number is: 400
Number is: 700
Number is: 500
Number is: 2000
</code></pre>">hello
3.1415
1
2
3
Number is: 400
Number is: 700
Number is: 500
Number is: 2000
</code></pre><h5 id="dot-vs-colon"><a name="dot-vs-colon" href="#dot-vs-colon"></a>Dot vs Colon</h5><p>The colon <code>:</code> is for implementing methods that pass self as the first parameter and the dot <code>.</code> does not unless you pass it into itself.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>x = {pos_x = function(x,y) return x end, pos_y = function(x,y) return y end, }

print(&quot;Dot: &quot;,x.pos_x(3,4))
print(&quot;Dot: &quot;,x.pos_y(3,4))

print(&quot;Colon: &quot;,x:pos_x(3,4))
print(&quot;Colon: &quot;,x:pos_y(3,4))

--Same as Colon.
print(&quot;Dot self: &quot;,x.pos_x(x,3,4))
print(&quot;Dot self: &quot;,x.pos_y(x,3,4))
</code></pre>">x = {pos_x = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> x <span class="hljs-keyword">end</span>, pos_y = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span></span> <span class="hljs-keyword">return</span> y <span class="hljs-keyword">end</span>, }

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot: "</span>,x.pos_x(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot: "</span>,x.pos_y(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Colon: "</span>,x:pos_x(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Colon: "</span>,x:pos_y(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))

<span class="hljs-comment">--Same as Colon.</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot self: "</span>,x.pos_x(x,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Dot self: "</span>,x.pos_y(x,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>))
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>Dot: 3
Dot: 4
Colon: table: 0x06a57fb8
Colon: 3
Dot self: table: 0x06a57fb8
Dot self: 3
</code></pre>">Dot: 3
Dot: 4
Colon: table: 0x06a57fb8
Colon: 3
Dot self: table: 0x06a57fb8
Dot self: 3
</code></pre><h4 id="function-objects"><a name="function-objects" href="#function-objects"></a>Function Objects</h4><table>
<thead>
<tr>
<th style="text-align:left">An object has:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">state</td>
<td>Being in a form for growth or development.</td>
</tr>
<tr>
<td style="text-align:left">independent value identity</td>
<td>A self.</td>
</tr>
<tr>
<td style="text-align:left">independent life cycle</td>
<td>Does not matter what created them or where they were created.</td>
</tr>
<tr>
<td style="text-align:left">assignablity</td>
<td>Receive operation.</td>
</tr>
</tbody>
</table><h5 id="almost-method"><a name="almost-method" href="#almost-method"></a>Almost Method</h5><p>A table in Lua is basically a object. However, this function will work only for this object.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--almost method
MoneyBag = {amount = 0}
function MoneyBag.add(value)
  MoneyBag.amount = MoneyBag.amount + value
end

MoneyBag.add(200)

print(&quot;You have the total amount of &quot;..MoneyBag.amount..&quot; in your bag.&quot;)
</code></pre>"><span class="hljs-comment">--almost method</span>
MoneyBag = {amount = <span class="hljs-number">0</span>}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MoneyBag.add</span><span class="hljs-params">(value)</span></span>
  MoneyBag.amount = MoneyBag.amount + value
<span class="hljs-keyword">end</span>

MoneyBag.add(<span class="hljs-number">200</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..MoneyBag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 200 in your bag.
</code></pre>">You have the total amount of 200 in your bag.
</code></pre><p>You can change the name of MoneyBag.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>bag = MoneyBag

bag.add(50)

print(&quot;You have the total amount of &quot;..MoneyBag.amount..&quot; in your bag.&quot;)

or

print(&quot;You have the total amount of &quot;..bag.amount..&quot; in your bag.&quot;)
</code></pre>">bag = MoneyBag

bag.add(<span class="hljs-number">50</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..MoneyBag.amount..<span class="hljs-string">" in your bag."</span>)

<span class="hljs-keyword">or</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..bag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 250 in your bag.
</code></pre>">You have the total amount of 250 in your bag.
</code></pre><p>The reason this is almost a method is because if we do the following we get an error.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>MoneyBag = nil

bag.add(50)

print(&quot;You have the total amount of &quot;..bag.amount..&quot; in your bag.&quot;)
</code></pre>">MoneyBag = <span class="hljs-keyword">nil</span>

bag.add(<span class="hljs-number">50</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..bag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>Error: attempt to index global 'MoneyBag' (a nil value)
</code></pre>">Error: attempt to index global 'MoneyBag' (a nil value)
</code></pre><h5 id="method"><a name="method" href="#method"></a>Method</h5><p>This function will work only for more than one object. <code>Self</code> refers to itself.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>MoneyBag = {amount = 0}
function MoneyBag.add(self, value)
  self.amount = self.amount + value
end

MoneyBag.add(MoneyBag, 200) 

bag = MoneyBag

MoneyBag = nil

bag.add(bag,50)

print(&quot;You have the total amount of &quot;..bag.amount..&quot; in your bag.&quot;)
</code></pre>">MoneyBag = {amount = <span class="hljs-number">0</span>}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MoneyBag.add</span><span class="hljs-params">(self, value)</span></span>
  self.amount = self.amount + value
<span class="hljs-keyword">end</span>

MoneyBag.add(MoneyBag, <span class="hljs-number">200</span>) 

bag = MoneyBag

MoneyBag = <span class="hljs-keyword">nil</span>

bag.add(bag,<span class="hljs-number">50</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..bag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 250 in your bag.
</code></pre>">You have the total amount of 250 in your bag.
</code></pre><h5 id="method-with-colon"><a name="method-with-colon" href="#method-with-colon"></a>Method With Colon</h5><p>You can shorten the method with a Colon. This will pass <code>self</code> for you.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>MoneyBag = {amount = 0}
function MoneyBag:add(value)
  self.amount = self.amount + value
end

MoneyBag:add(200) 

bag = MoneyBag

MoneyBag = nil

bag:add(50)

print(&quot;You have the total amount of &quot;..bag.amount..&quot; in your bag.&quot;)
</code></pre>">MoneyBag = {amount = <span class="hljs-number">0</span>}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MoneyBag:add</span><span class="hljs-params">(value)</span></span>
  self.amount = self.amount + value
<span class="hljs-keyword">end</span>

MoneyBag:add(<span class="hljs-number">200</span>) 

bag = MoneyBag

MoneyBag = <span class="hljs-keyword">nil</span>

bag:add(<span class="hljs-number">50</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..bag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 250 in your bag.
</code></pre>">You have the total amount of 250 in your bag.
</code></pre><h5 id="colon-hidden-parameter"><a name="colon-hidden-parameter" href="#colon-hidden-parameter"></a>Colon Hidden Parameter</h5><p>The colon passes a hidden parameter by assigning the function to a variable called <code>add</code> in this case. </p><p>That means the colon is doing the following:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    MoneyBag = { amount = 0,
                --Assign variable to dot function
                add = function (self, value)
                             self.amount = self.amount + value
                           end
              }


MoneyBag:add(400)

print(&quot;You have the total amount of &quot;..MoneyBag.amount..&quot; in your bag.&quot;)
</code></pre>">    MoneyBag = { amount = <span class="hljs-number">0</span>,
                <span class="hljs-comment">--Assign variable to dot function</span>
                add = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(self, value)</span></span>
                             self.amount = self.amount + value
                           <span class="hljs-keyword">end</span>
              }


MoneyBag:add(<span class="hljs-number">400</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..MoneyBag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 400 in your bag.
</code></pre>">You have the total amount of 400 in your bag.
</code></pre><p>I prefer using a colon though. It is cleaner and easier to organize.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>MoneyBag = {amount = 0}
function MoneyBag:add(value)
  self.amount = self.amount + value
end

MoneyBag:add(400)

print(&quot;You have the total amount of &quot;..MoneyBag.amount..&quot; in your bag.&quot;)
</code></pre>">MoneyBag = {amount = <span class="hljs-number">0</span>}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">MoneyBag:add</span><span class="hljs-params">(value)</span></span>
  self.amount = self.amount + value
<span class="hljs-keyword">end</span>

MoneyBag:add(<span class="hljs-number">400</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"You have the total amount of "</span>..MoneyBag.amount..<span class="hljs-string">" in your bag."</span>)
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>You have the total amount of 400 in your bag.
</code></pre>">You have the total amount of 400 in your bag.
</code></pre><h3 id="tutorial-point-lua-pdf"><a name="tutorial-point-lua-pdf" href="#tutorial-point-lua-pdf"></a>Tutorial Point Lua PDF</h3><p>Read this book for more information and detail.</p><p><a href="https://www.tutorialspoint.com/lua/lua_tutorial.pdf">https://www.tutorialspoint.com/lua/lua_tutorial.pdf</a></p><h3 id="ways-to-load-script-in-solarus-part-1"><a name="ways-to-load-script-in-solarus-part-1" href="#ways-to-load-script-in-solarus-part-1"></a>Ways To Load Script In Solarus Part 1</h3><h5 id="require()"><a name="require()" href="#require()"></a>Require()</h5><p><strong>Require Part 1:</strong></p><p>Using require is the best way to load your file, but I use sol.main.load_file a lot when simply testing because it is faster to set up.</p><p>In the file <code>game_manager.lua</code></p><p>put <code>local load_that = require("scripts/0_Lua_Quick_Basics.lua")</code> at the top of <code>game_manager.lua</code></p><p>put <code>load_that:load_test()</code> above <code>return game_manager</code> at the bottom of <code>game_manager.lua</code> </p><p><strong>Require Part 2:</strong></p><p>In the file <code>0_Lua_Quick_Basics.lua</code></p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>`--Make a table`
`local load_that = {}`

`--Make a function`
`function load_that:load_test(game)`
`--Code of file 0_Lua_Quick_Basics.lua`
`end -- end of function`

`return load_that --return the table`
</code></pre>">`<span class="hljs-comment">--Make a table`</span>
`<span class="hljs-keyword">local</span> load_that = {}`

`<span class="hljs-comment">--Make a function`</span>
`<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">load_that:load_test</span><span class="hljs-params">(game)</span></span>`
`<span class="hljs-comment">--Code of file 0_Lua_Quick_Basics.lua`</span>
`<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of function`</span>

`<span class="hljs-keyword">return</span> load_that <span class="hljs-comment">--return the table`</span>
</code></pre><p><strong>Breaking down the script:</strong></p><p>In the file <code>game_manager.lua</code></p><p><code>local load_that = {}</code> is making a table named <code>load_that</code></p><p><code>require</code> is for loading and remembering code files</p><p><code>"scripts/0_Lua_Quick_Basics.lua"</code> is a directory. Scripts folder &gt; file 0_Lua_Quick_Basics.lua</p><p>In the file <code>0_Lua_Quick_Basics.lua</code></p><p>Now you should know everything basic except for the function from the quick Lua knowledge files. A function does a certain task and in this case it loads the script.</p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>function table:give_name_to_function(parameter)
--Code in here
end

`return table`
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">table:give_name_to_function</span><span class="hljs-params">(parameter)</span></span>
<span class="hljs-comment">--Code in here</span>
<span class="hljs-keyword">end</span>

`<span class="hljs-keyword">return</span> <span class="hljs-built_in">table</span>`
</code></pre><p><code>(parameter)</code> is like the scope or range of something. Normally, it is either the (game) or (map)</p><p>Playtest the game with F5 and the script will run. Sometimes the console will open. If not, then press F12. You can drag it up to show more of the output.</p><p><strong>Lesson Sample File:</strong></p><p>I added a test file in the Github repo. Lessons folder &gt; Chapter_6 &gt; chapter_6_require_load.zip</p><h5 id="sol-main-load"><a name="sol-main-load" href="#sol-main-load"></a>Sol Main Load</h5><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>sol.main.load_file(script_name)
</code></pre>">sol.main.load_file(script_name)
</code></pre><p>This one way to load a Lua script with Solarus. Not the best way. Slower than require because require actually remembers the script after the first run. I use this mainly for testing purposes.</p><p>In the <code>file game_manager.lua</code></p><p>put <code>sol.main.load_file("scripts/0_Lua_Quick_Basics.lua")(game)</code> above <code>game:start()</code></p><p><strong>Breaking down the script:</strong></p><p><code>sol.main.load_file()</code> is for loading files</p><p><code>"scripts/0_Lua_Quick_Basics.lua"</code> is a directory. Scripts folder &gt; file 0_Lua_Quick_Basics.lua</p><p>Direct it to the game parameter:<code>(game)</code></p><p>The end result is this:</p><p><code>sol.main.load_file("scripts/0_Lua_Quick_Basics.lua")(game)</code></p><p>Playtest the game with F5 and the script will run. Sometimes the console will open. If not, then press F12. You can drag it up to show more of the output.</p><p>I added a test file in the Github repository. <code>Lessons folder &gt; Chapter_6_sol_main_load.zip</code></p><h3 id="grab-numbers-&amp;-letters"><a name="grab-numbers-&amp;-letters" href="#grab-numbers-&amp;-letters"></a>Grab Numbers &amp; Letters</h3><p>Grabbing letters and numbers can make some interesting puzzles or scripts. </p><p>I made a very bulky <a href="http://forum.solarus-games.org/index.php/topic,809.0.html">Menu Dialog Display Script</a> using letter grabs and I used digit grabs in my <a href="http://forum.solarus-games.org/index.php/topic,803.0.html">ADVANCED DIGIT DISPLAY SCRIPT</a>. I made those scripts as I was first learning Lua.</p><h5 id="grab-numbers"><a name="grab-numbers" href="#grab-numbers"></a>Grab Numbers</h5><p><strong>Script 1:</strong></p><p>This script converts the number value into a string, splits it up, and converts it back into a number.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local value = 25436 -- value
local value_string = string.format(&quot;%04d&quot;, value) --value_string = &quot;25436&quot; (make value a string)
-- sting format: &quot;%d&quot;
-- Add zeros: &quot;%04d&quot; (if below 4 digits)

local lenth = value_string:len() --Grabs lenth of string for soda array

local value_split = {}
for i = 0,lenth do
        local index = value_string:len()-i --decrease by i
        local num = tonumber(value_string:sub(index,index)) -- convert string to number and decrease string by i
        table.insert(value_split, num) --insert letter into table value_split
end

print(&quot;value &quot;..value_split[1])
print(&quot;value &quot;..value_split[2])
print(&quot;value &quot;..value_split[3])
print(&quot;value &quot;..value_split[4])
print(&quot;value &quot;..value_split[5])
</code></pre>"><span class="hljs-keyword">local</span> value = <span class="hljs-number">25436</span> <span class="hljs-comment">-- value</span>
<span class="hljs-keyword">local</span> value_string = <span class="hljs-built_in">string</span>.format(<span class="hljs-string">"%04d"</span>, value) <span class="hljs-comment">--value_string = "25436" (make value a string)</span>
<span class="hljs-comment">-- sting format: "%d"</span>
<span class="hljs-comment">-- Add zeros: "%04d" (if below 4 digits)</span>

<span class="hljs-keyword">local</span> lenth = value_string:len() <span class="hljs-comment">--Grabs lenth of string for soda array</span>

<span class="hljs-keyword">local</span> value_split = {}
<span class="hljs-keyword">for</span> i = <span class="hljs-number">0</span>,lenth <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">local</span> index = value_string:len()-i <span class="hljs-comment">--decrease by i</span>
        <span class="hljs-keyword">local</span> num = <span class="hljs-built_in">tonumber</span>(value_string:sub(index,index)) <span class="hljs-comment">-- convert string to number and decrease string by i</span>
        <span class="hljs-built_in">table</span>.insert(value_split, num) <span class="hljs-comment">--insert letter into table value_split</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">4</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">5</span>])
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>value 6
value 3
value 4
value 5
value 2
</code></pre>">value 6
value 3
value 4
value 5
value 2
</code></pre><p><strong>Script 2:</strong></p><p>This script inserts each digit into a table.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local value = 25436 
local value_split = {}

for digit in string.gmatch( tostring(value), &quot;%d&quot; ) do
  table.insert(value_split, digit)
end

print(&quot;value &quot;..value_split[1])
print(&quot;value &quot;..value_split[2])
print(&quot;value &quot;..value_split[3])
print(&quot;value &quot;..value_split[4])
print(&quot;value &quot;..value_split[5])
</code></pre>"><span class="hljs-keyword">local</span> value = <span class="hljs-number">25436</span> 
<span class="hljs-keyword">local</span> value_split = {}

<span class="hljs-keyword">for</span> digit <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch( <span class="hljs-built_in">tostring</span>(value), <span class="hljs-string">"%d"</span> ) <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">table</span>.insert(value_split, digit)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">4</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">5</span>])
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>value 2
value 5
value 4
value 3
value 6
</code></pre>">value 2
value 5
value 4
value 3
value 6
</code></pre><p><strong>Script 3:</strong></p><p>This script uses a somewhat classic calculation in an advanced way.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local value = 25436 
local value_split = {}

local num = value
if num == 0 then value_split = {0} end
while num &amp;gt; 0 do
  local digit = num % 10
  num = math.floor(num / 10)
  table.insert(value_split, digit)
end

print(&quot;value &quot;..value_split[1])
print(&quot;value &quot;..value_split[2])
print(&quot;value &quot;..value_split[3])
print(&quot;value &quot;..value_split[4])
print(&quot;value &quot;..value_split[5])
</code></pre>"><span class="hljs-keyword">local</span> value = <span class="hljs-number">25436</span> 
<span class="hljs-keyword">local</span> value_split = {}

<span class="hljs-keyword">local</span> num = value
<span class="hljs-keyword">if</span> num == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> value_split = {<span class="hljs-number">0</span>} <span class="hljs-keyword">end</span>
<span class="hljs-keyword">while</span> num &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">local</span> digit = num % <span class="hljs-number">10</span>
  num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">10</span>)
  <span class="hljs-built_in">table</span>.insert(value_split, digit)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">4</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"value "</span>..value_split[<span class="hljs-number">5</span>])
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>value 6
value 3
value 4
value 5
value 2
</code></pre>">value 6
value 3
value 4
value 5
value 2
</code></pre><p>The script above takes the remainder of the value and decreases the place value.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local value = 25436 

local num = value

local digit = num % 10
num = math.floor(num / 10)

print(num) -- 2543
print(digit) -- 6

--Takes the remainder
digit = num % 1 -- remainder of the 1st place is 0 ( No remainder)
digit = num % 10 -- remainder of the 10th place is 6
digit = num % 100 -- Remainder of the 100th place is 36
digit = num % 1000 -- Remainder of the 1000th place is 436
digit = num % 10000 -- Remainder of the 10000th place is 5436
digit = num % 100000 -- Remainder of the 100000th place is 25436

--Decreases the value place
num = math.floor(num / 1) -- 25436
num = math.floor(num / 10) -- 2543
num = math.floor(num / 100) -- 254
num = math.floor(num / 1000) -- 25
num = math.floor(num / 10000) -- 2
</code></pre>"><span class="hljs-keyword">local</span> value = <span class="hljs-number">25436</span> 

<span class="hljs-keyword">local</span> num = value

<span class="hljs-keyword">local</span> digit = num % <span class="hljs-number">10</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">10</span>)

<span class="hljs-built_in">print</span>(num) <span class="hljs-comment">-- 2543</span>
<span class="hljs-built_in">print</span>(digit) <span class="hljs-comment">-- 6</span>

<span class="hljs-comment">--Takes the remainder</span>
digit = num % <span class="hljs-number">1</span> <span class="hljs-comment">-- remainder of the 1st place is 0 ( No remainder)</span>
digit = num % <span class="hljs-number">10</span> <span class="hljs-comment">-- remainder of the 10th place is 6</span>
digit = num % <span class="hljs-number">100</span> <span class="hljs-comment">-- Remainder of the 100th place is 36</span>
digit = num % <span class="hljs-number">1000</span> <span class="hljs-comment">-- Remainder of the 1000th place is 436</span>
digit = num % <span class="hljs-number">10000</span> <span class="hljs-comment">-- Remainder of the 10000th place is 5436</span>
digit = num % <span class="hljs-number">100000</span> <span class="hljs-comment">-- Remainder of the 100000th place is 25436</span>

<span class="hljs-comment">--Decreases the value place</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">1</span>) <span class="hljs-comment">-- 25436</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">10</span>) <span class="hljs-comment">-- 2543</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">100</span>) <span class="hljs-comment">-- 254</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">1000</span>) <span class="hljs-comment">-- 25</span>
num = <span class="hljs-built_in">math</span>.floor(num / <span class="hljs-number">10000</span>) <span class="hljs-comment">-- 2</span>
</code></pre><h5 id="grab-letter"><a name="grab-letter" href="#grab-letter"></a>Grab Letter</h5><p><strong>Script 1:</strong></p><p>This script uses the alphabet pattern <code>"%w"</code> to get letters and inserts them into a table.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local string = &quot;test&quot; 
local string_split = {}

for char in string.gmatch(string, &quot;%w&quot;) do
  table.insert(string_split, char)
end

print(&quot;letter &quot;..string_split[1])
print(&quot;letter &quot;..string_split[2])
print(&quot;letter &quot;..string_split[3])
print(&quot;letter &quot;..string_split[4])
</code></pre>"><span class="hljs-keyword">local</span> <span class="hljs-built_in">string</span> = <span class="hljs-string">"test"</span> 
<span class="hljs-keyword">local</span> string_split = {}

<span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> <span class="hljs-built_in">string</span>.gmatch(<span class="hljs-built_in">string</span>, <span class="hljs-string">"%w"</span>) <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">table</span>.insert(string_split, char)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">4</span>])
</code></pre><p>Result:</p><pre><code data-origin="<pre><code>letter t
letter e
letter s
letter t
</code></pre>">letter t
letter e
letter s
letter t
</code></pre><p> <strong>Script 2:</strong></p><p> This one shows how one can reverse the string with <code>string.reverse()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>string_split = {}
local text = &quot;test&quot;
local length = text:len()
local reverse = false

if reverse == true then
   for msg = 0, length do
     index = text:len()-msg
     letter = text:sub(index,index) 
     table.insert(string_split, letter)
   end
else
   for msg = 0, length do
     index = string.reverse(text):len()-msg
     letter = string.reverse(text):sub(index,index) 
     table.insert(string_split,letter)
   end
end

print(&quot;letter &quot;..string_split[1])
print(&quot;letter &quot;..string_split[2])
print(&quot;letter &quot;..string_split[3])
print(&quot;letter &quot;..string_split[4])
</code></pre>">string_split = {}
<span class="hljs-keyword">local</span> text = <span class="hljs-string">"test"</span>
<span class="hljs-keyword">local</span> length = text:len()
<span class="hljs-keyword">local</span> reverse = <span class="hljs-keyword">false</span>

<span class="hljs-keyword">if</span> reverse == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
   <span class="hljs-keyword">for</span> msg = <span class="hljs-number">0</span>, length <span class="hljs-keyword">do</span>
     index = text:len()-msg
     letter = text:sub(index,index) 
     <span class="hljs-built_in">table</span>.insert(string_split, letter)
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">else</span>
   <span class="hljs-keyword">for</span> msg = <span class="hljs-number">0</span>, length <span class="hljs-keyword">do</span>
     index = <span class="hljs-built_in">string</span>.reverse(text):len()-msg
     letter = <span class="hljs-built_in">string</span>.reverse(text):sub(index,index) 
     <span class="hljs-built_in">table</span>.insert(string_split,letter)
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">1</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">2</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">3</span>])
<span class="hljs-built_in">print</span>(<span class="hljs-string">"letter "</span>..string_split[<span class="hljs-number">4</span>])
</code></pre><p>Result:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>reverse = false
</code></pre>">reverse = <span class="hljs-keyword">false</span>
</code></pre><pre><code data-origin="<pre><code>letter t
letter e
letter s
letter t
</code></pre>">letter t
letter e
letter s
letter t
</code></pre><p>Result:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>reverse = true
</code></pre>">reverse = <span class="hljs-keyword">true</span>
</code></pre><pre><code data-origin="<pre><code>letter t
letter s
letter e
letter t
</code></pre>">letter t
letter s
letter e
letter t
</code></pre><h2 id="chapter-7:-setting-up-dialog-and-pause"><a name="chapter-7:-setting-up-dialog-and-pause" href="#chapter-7:-setting-up-dialog-and-pause"></a>Chapter 7: Setting up Dialog and Pause</h2><h5 id="setting-up-the-dialog-script"><a name="setting-up-the-dialog-script" href="#setting-up-the-dialog-script"></a>Setting Up The Dialog Script</h5><p>In <code>game_manager.lua</code> put the following require directory at the top of the script. (I explained how to use require already. This is the dialog box script designed by Christopho.)</p><p><code>require("scripts/menus/alttp_dialog_box")</code></p><p>in folder <code>scripts/menus/</code></p><p>put <code>alttp_dialog_box.lua</code></p><p>in folder <code>scripts/</code></p><p>put <code>multi_events.lua</code></p><p>in folder <code>sprites/hud</code></p><p>put <code>dialog_box.png</code> (I provide a free image to use in the lesson &gt; chapter_7_Dialog.zip)</p><p>in folder <code>fonts/</code></p><p>put bitmap font <code>alttp.png</code></p><p>In the editor in the font section. Make sure to add the alttp.png.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_add_files.png" alt="Chapter_7_add_files.png"></p><h5 id="using-the-dialog-box"><a name="using-the-dialog-box" href="#using-the-dialog-box"></a>Using the Dialog box</h5><p>Go to the dialog section of the editor. Languages &gt; en &gt; double click</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_open_Dialog_GUI.png" alt="Chapter_7_open_Dialog_GUI.png"></p><p>Press the big green plus(+) sign.</p><p>type <code>_dialog.test</code></p><p><code>_dialog</code> is the main folder</p><p><code>.test</code> is the dialog</p><p>Double click on <code>test</code>, go to dialog properties and down to the first rectangle box where it says text (At the right)</p><p>Type any text you want in that box. For example, â€œThis is a test dialog.â€</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_add_dialog.png" alt="Chapter_7_add_dialog.png"></p><h5 id="mouse-control-fix"><a name="mouse-control-fix" href="#mouse-control-fix"></a>Mouse Control Fix</h5><p>In <code>game manager.lua</code></p><p>Basically for the mouse control to work <code>function game:on_started() end</code> needs to be replaced with <code>game:register_event("on_started", function() end)</code>.</p><p>Change this:</p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>   function game:on_started()
    -- HUD menu.
    local hud = require(&quot;scripts/menus/hud&quot;)

    sol.menu.start(game, hud)
    hud:create(game)

    -- Mouse control.
    local mouse_control = require(&quot;scripts/menus/mouse_control&quot;)

    sol.menu.start(game, mouse_control)
    mouse_control:create(game, hud)

    local hero = game:get_hero()
    hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
  end
</code></pre>">   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_started</span><span class="hljs-params">()</span></span>
    <span class="hljs-comment">-- HUD menu.</span>
    <span class="hljs-keyword">local</span> hud = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/hud"</span>)

    sol.menu.start(game, hud)
    hud:create(game)

    <span class="hljs-comment">-- Mouse control.</span>
    <span class="hljs-keyword">local</span> mouse_control = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/mouse_control"</span>)

    sol.menu.start(game, mouse_control)
    mouse_control:create(game, hud)

    <span class="hljs-keyword">local</span> hero = game:get_hero()
    hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>To this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> game:register_event(&quot;on_started&quot;, function()
    -- HUD menu.
    local hud = require(&quot;scripts/menus/hud&quot;)
    sol.menu.start(game, hud)
    hud:create(game)

    -- Mouse control.
    local mouse_control = require(&quot;scripts/menus/mouse_control&quot;)
    sol.menu.start(game, mouse_control)
    mouse_control:create(game, hud)

    local hero = game:get_hero()
    hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
 end)
</code></pre>"> game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-comment">-- HUD menu.</span>
    <span class="hljs-keyword">local</span> hud = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/hud"</span>)
    sol.menu.start(game, hud)
    hud:create(game)

    <span class="hljs-comment">-- Mouse control.</span>
    <span class="hljs-keyword">local</span> mouse_control = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/mouse_control"</span>)
    sol.menu.start(game, mouse_control)
    mouse_control:create(game, hud)

    <span class="hljs-keyword">local</span> hero = game:get_hero()
    hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
 <span class="hljs-keyword">end</span>)
</code></pre><p>Add <code>multi_events</code> at the beginning of the script: </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/multi_events&quot;)
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/multi_events"</span>)
</code></pre><p>You can add a NPC and add <code>_dialog.test</code> to it.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_Add_dialog_NPC.png" alt="Chapter 7 dialog to NPC"></p><p>Save the project and playtest with F5. You should see a dialog box appear after â€œpressing the space barâ€ to talking to the NPC.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_NPC_Playtest.png" alt="Chapter_7_NPC_Playtest.png"></p><h5 id="passing-a-value-and-string-into-the-dialog"><a name="passing-a-value-and-string-into-the-dialog" href="#passing-a-value-and-string-into-the-dialog"></a>Passing a value and string into the dialog</h5><p>Now what if you wanted to pass a name or number value into the dialog?</p><p>Make a new dialog. Click test &gt; add new dialog (+) &gt; change it to â€œ_dialog.test2</p><p>In the text section, add the <code>$v</code> in the text. This passed a variable into the dialog.</p><p><strong>Example:</strong></p><p>â€œI got the number $v.â€</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/chapter_7_Variable_pass.png" alt="chapter_7_Variable_pass.png"></p><p>Open your map script. map folder &gt; right click &gt; open script</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_open_map_script.png" alt="Chapter_7_open_map_script.png"></p><p>You want to pass the game parameter into the map.</p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>local map = ...

local game = map:get_game()
</code></pre>"><span class="hljs-keyword">local</span> map = ...

<span class="hljs-keyword">local</span> game = map:get_game()
</code></pre><p>You would make a variable to pass to <code>$v</code></p><p><code>local value = 5</code></p><p>To start a dialog in the map script.</p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>game:start_dialog(&quot;_dialog.test2&quot;, value)
</code></pre>">game:start_dialog(<span class="hljs-string">"_dialog.test2"</span>, value)
</code></pre><p><code>game:start_dialog("_dialog.test2",</code> starts the dialog</p><p><code>, value)</code> passes the number 5 from value variable into the dialog.</p><p>The following would stop the dialog, but you cannot start a dialog and stop one at the same time. You most likely would use a key press to stop the dialog, but we will get to that in a later chapter.</p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>game:stop_dialog(&quot;_dialog.test2&quot;)
</code></pre>">game:stop_dialog(<span class="hljs-string">"_dialog.test2"</span>)
</code></pre><p>Save the project and playtest with F5. It should just appear. Press the â€œspace barâ€ to get rid of the text.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/chapter_7_value_playtest.png" alt="chapter_7_value_playtest.png"></p><h5 id="setting-up-yes_no"><a name="setting-up-yes_no" href="#setting-up-yes_no"></a>Setting up yes_no</h5><p>I personally script my own yes_no menu with images, but the alttp dialog box can make yes and no. </p><p>First off, we will start with making the dialog for the pause: <code>_dialog.yes_no</code></p><p>Secondly, make the text: <code>"Do you want to print yes?"</code></p><p>The characters for activating the arrow and picking of yes/no is: <code>$?</code></p><p>In the text section:</p><p><code>"Do you want to print yes?"</code></p><pre><code data-origin="<pre><code>           $?Yes

           $?No
</code></pre>">           $?Yes

           $?No
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/chapter_7_yes_no.png" alt="chapter_7_yes_no.png"></p><h5 id="dialog-lines"><a name="dialog-lines" href="#dialog-lines"></a>Dialog lines</h5><p>You must remember the line order for yes/no in order to correctly code it.</p><p><code>"Do you want to print yes?"</code> (line 1)</p><p><code>$?Yes</code> (line 2)</p><p><code>$?no</code> (line 3)</p><h5 id="adding-on_paused"><a name="adding-on_paused" href="#adding-on_paused"></a>Adding on_paused</h5><p>In the <code>game_manager.lua</code> put the following code above <code>game:start()</code></p><pre class="lua hljs"><code class="Lua" data-origin="<pre><code class=&quot;Lua&quot;>  function game:on_paused()
    game:start_dialog(&quot;_dialog.yes_no&quot;,function(answer)
      --Answer 2 is line 2
      if answer == 2 then
        print(&quot;Yes&quot;)
      end 
  end)
end
</code></pre>">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
    game:start_dialog(<span class="hljs-string">"_dialog.yes_no"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-comment">--Answer 2 is line 2</span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Yes"</span>)
      <span class="hljs-keyword">end</span> 
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><p><code>function game:on_paused()</code> is the pause function. This activates when the game is paused. The key <code>d</code> is default for pausing in Solarus. There is function <code>game:on_unpaused()</code>as well. In unpaused, code you write will activate when you press <code>d</code> again to unpause the game.</p><p><code>function(answer)</code> is part of the dialog box. Basically, <code>answer == 2</code> is line 2.</p><p>Playtest with <code>F5</code> and press the key <code>d</code> and press the <code>space bar</code> to choose yes.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_7_images/Chapter_7_yes_no_playtest.png" alt="Chapter_7_yes_no_playtest.png)"></p><p><strong>Dialog Lesson Sample:</strong></p><p>The lesson file is located in the folder:</p><p><code>Lesson &gt; chapter_7_Dialog.zip</code></p><h2 id="chapter-8:-displaying-an-image,-opacity,-color-fill,-blend-modes,-and-font-display"><a name="chapter-8:-displaying-an-image,-opacity,-color-fill,-blend-modes,-and-font-display" href="#chapter-8:-displaying-an-image,-opacity,-color-fill,-blend-modes,-and-font-display"></a>Chapter 8: Displaying an image, opacity, color fill, blend modes, and font display</h2><p><strong>Preview:</strong></p><p>I would like to show a preview before starting the lesson. This is everything you will be learning in this lesson.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_8_images/Chapter_8_sample_preview_blend_updated.png" alt="Chapter_8_sample_preview.png"></p><h3 id="script-for-the-lesson"><a name="script-for-the-lesson" href="#script-for-the-lesson"></a>Script For The Lesson</h3><p>I wanted to show the script before breaking it down. This is file <code>display_sample.lua</code>. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Pass the game parameter to the script.
local game = ...

--If sample is true then the surfaces appear.
local image_sample = true

--Clear_pixels variable
local clear_pixels = false

--Make the surface for the orange surface
local surface_img = sol.surface.create()

--Make the suface for the button image
local button_img = sol.surface.create(&quot;button.png&quot;)

--Make the suface for blend multiply
local blend_multiply_img = sol.surface.create(&quot;blend.png&quot;)

--Make the suface for blend add
local blend_add_img = sol.surface.create(&quot;blend.png&quot;)

--Make the suface for no blending
local blend_none_img = sol.surface.create(&quot;blend.png&quot;)

--Make the suface for blend
local blend_green_img = sol.surface.create(&quot;green.png&quot;)

--Make the suface for blend
local blend_red_img = sol.surface.create(&quot;red.png&quot;)

--Make the suface for blend
local blend_blue_img = sol.surface.create(&quot;blue.png&quot;)

local blend_test_img = sol.surface.create()

--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html
local text_img = sol.text_surface.create({ -- name a local variable something and assign it to the sol.text_surface
      font = &quot;minecraftia&quot;, -- font name
      text = &quot;what&quot;, -- text you want to show
      font_size = 50, -- font size obviously
      horizontal_alignment = &quot;center&quot;, -- default &quot;left&quot;
      vertical_alignment = &quot;bottom&quot;, -- default &quot;middle&quot;
      rendering_mode = &quot;antialiasing&quot;, -- &quot;solid&quot; (faster) and default
      color = {0,0,0}, -- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)
    })

-- A function for displaying images and fonts on screen.
function sol.main:on_draw(screen) 

--Drawing the variable surface (local test) on screen with coordinates (100,100) or x,y
  if image_sample == true then

    --&quot;multiply&quot; blend mode.
    blend_multiply_img:draw(screen,100,100)
    blend_multiply_img:set_blend_mode(&quot;multiply&quot;)

    --&quot;add&quot; blend mode.
    blend_add_img:draw(screen,100,150)
    blend_add_img:set_blend_mode(&quot;add&quot;)

    --&quot;none&quot; blend mode.
    blend_none_img:draw(screen,160,200)
    blend_none_img:set_blend_mode(&quot;none&quot;)

    --show or draw the surface
    surface_img:draw(screen)

    --fill suface with a orange color
    surface_img:fill_color({245,68,0})

   --&quot;blend&quot; blend mode.
    blend_test_img:draw(screen)
    blend_red_img:draw(surface_img,100,200)
    blend_red_img:set_blend_mode(&quot;blend&quot;)

    blend_green_img:draw(surface_img,100,200)
    blend_green_img:set_blend_mode(&quot;blend&quot;)

    blend_blue_img:draw(surface_img,100,200)
    blend_blue_img:set_blend_mode(&quot;blend&quot;)

    --show the text &quot;what&quot; at (x,y) (100,100)
    text_img:draw(screen,100,100)

    --show or draw the button image
    button_img:draw(screen)

    --opacity to 50% semi-transparent
    surface_img:set_opacity(50)

    --if clear pixels is true
    if clear_pixels == true then
       --clear surface
       surface_img:clear()
       blend_test_img:clear()
    end
  end -- end of if image_sample is true
end --end of draw function

--on_paused
--Press key 'd' to make  the orange surface to appear
function game:on_paused()
  clear_pixels = true
end

--on_unpaused
--Press key 'd' again to clear the orange surface
function game:on_unpaused()
  clear_pixels = false
end
</code></pre>"><span class="hljs-comment">--Pass the game parameter to the script.</span>
<span class="hljs-keyword">local</span> game = ...

<span class="hljs-comment">--If sample is true then the surfaces appear.</span>
<span class="hljs-keyword">local</span> image_sample = <span class="hljs-keyword">true</span>

<span class="hljs-comment">--Clear_pixels variable</span>
<span class="hljs-keyword">local</span> clear_pixels = <span class="hljs-keyword">false</span>

<span class="hljs-comment">--Make the surface for the orange surface</span>
<span class="hljs-keyword">local</span> surface_img = sol.surface.create()

<span class="hljs-comment">--Make the suface for the button image</span>
<span class="hljs-keyword">local</span> button_img = sol.surface.create(<span class="hljs-string">"button.png"</span>)

<span class="hljs-comment">--Make the suface for blend multiply</span>
<span class="hljs-keyword">local</span> blend_multiply_img = sol.surface.create(<span class="hljs-string">"blend.png"</span>)

<span class="hljs-comment">--Make the suface for blend add</span>
<span class="hljs-keyword">local</span> blend_add_img = sol.surface.create(<span class="hljs-string">"blend.png"</span>)

<span class="hljs-comment">--Make the suface for no blending</span>
<span class="hljs-keyword">local</span> blend_none_img = sol.surface.create(<span class="hljs-string">"blend.png"</span>)

<span class="hljs-comment">--Make the suface for blend</span>
<span class="hljs-keyword">local</span> blend_green_img = sol.surface.create(<span class="hljs-string">"green.png"</span>)

<span class="hljs-comment">--Make the suface for blend</span>
<span class="hljs-keyword">local</span> blend_red_img = sol.surface.create(<span class="hljs-string">"red.png"</span>)

<span class="hljs-comment">--Make the suface for blend</span>
<span class="hljs-keyword">local</span> blend_blue_img = sol.surface.create(<span class="hljs-string">"blue.png"</span>)

<span class="hljs-keyword">local</span> blend_test_img = sol.surface.create()

<span class="hljs-comment">--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html</span>
<span class="hljs-keyword">local</span> text_img = sol.text_surface.create({ <span class="hljs-comment">-- name a local variable something and assign it to the sol.text_surface</span>
      font = <span class="hljs-string">"minecraftia"</span>, <span class="hljs-comment">-- font name</span>
      text = <span class="hljs-string">"what"</span>, <span class="hljs-comment">-- text you want to show</span>
      font_size = <span class="hljs-number">50</span>, <span class="hljs-comment">-- font size obviously</span>
      horizontal_alignment = <span class="hljs-string">"center"</span>, <span class="hljs-comment">-- default "left"</span>
      vertical_alignment = <span class="hljs-string">"bottom"</span>, <span class="hljs-comment">-- default "middle"</span>
      rendering_mode = <span class="hljs-string">"antialiasing"</span>, <span class="hljs-comment">-- "solid" (faster) and default</span>
      color = {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>}, <span class="hljs-comment">-- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)</span>
    })

<span class="hljs-comment">-- A function for displaying images and fonts on screen.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span> 

<span class="hljs-comment">--Drawing the variable surface (local test) on screen with coordinates (100,100) or x,y</span>
  <span class="hljs-keyword">if</span> image_sample == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>

    <span class="hljs-comment">--"multiply" blend mode.</span>
    blend_multiply_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>)
    blend_multiply_img:set_blend_mode(<span class="hljs-string">"multiply"</span>)

    <span class="hljs-comment">--"add" blend mode.</span>
    blend_add_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">150</span>)
    blend_add_img:set_blend_mode(<span class="hljs-string">"add"</span>)

    <span class="hljs-comment">--"none" blend mode.</span>
    blend_none_img:draw(screen,<span class="hljs-number">160</span>,<span class="hljs-number">200</span>)
    blend_none_img:set_blend_mode(<span class="hljs-string">"none"</span>)

    <span class="hljs-comment">--show or draw the surface</span>
    surface_img:draw(screen)

    <span class="hljs-comment">--fill suface with a orange color</span>
    surface_img:fill_color({<span class="hljs-number">245</span>,<span class="hljs-number">68</span>,<span class="hljs-number">0</span>})

   <span class="hljs-comment">--"blend" blend mode.</span>
    blend_test_img:draw(screen)
    blend_red_img:draw(surface_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_red_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_green_img:draw(surface_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_green_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_blue_img:draw(surface_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_blue_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    <span class="hljs-comment">--show the text "what" at (x,y) (100,100)</span>
    text_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>)

    <span class="hljs-comment">--show or draw the button image</span>
    button_img:draw(screen)

    <span class="hljs-comment">--opacity to 50% semi-transparent</span>
    surface_img:set_opacity(<span class="hljs-number">50</span>)

    <span class="hljs-comment">--if clear pixels is true</span>
    <span class="hljs-keyword">if</span> clear_pixels == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
       <span class="hljs-comment">--clear surface</span>
       surface_img:clear()
       blend_test_img:clear()
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of if image_sample is true</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">--end of draw function</span>

<span class="hljs-comment">--on_paused</span>
<span class="hljs-comment">--Press key 'd' to make  the orange surface to appear</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
  clear_pixels = <span class="hljs-keyword">true</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--on_unpaused</span>
<span class="hljs-comment">--Press key 'd' again to clear the orange surface</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_unpaused</span><span class="hljs-params">()</span></span>
  clear_pixels = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Download Sample:</strong></p><p>You can download the sample for this lesson in the lessons folder.</p><p><code>Lessons &gt; Chapter_8 &gt; Chapter_8_display_example_added_blend.zip</code></p><h3 id="breaking-down-the-script"><a name="breaking-down-the-script" href="#breaking-down-the-script"></a>Breaking Down The Script</h3><h5 id="explaining-surfaces"><a name="explaining-surfaces" href="#explaining-surfaces"></a>Explaining Surfaces</h5><p>First off, I would like to say that I will not repeatedly break down the â€œsameâ€ parts of the script. I will only give examples of new material I introduce. Let us begin!</p><p>In order to pass the game parameter into the script, one needs to add <code>local game = ...</code> at the beginning of the script. You need this to use functions like <code>function game:on_paused()</code>.</p><p>The next line that you may not understand is <code>local surface_img = sol.surface.create()</code>. In this line of code I create and assign a variable called <code>surface_img</code> to a newly created surface <code>sol.surface.create()</code>. This surface will make pixels fill the whole screen with a single RGB color value for <code>surface_img</code>. We will get to that later in the script.</p><p>The next line of code <code>local button_img = sol.surface.create("button.png")</code> is exactly the same as the pervious line I explained, but we create a surface for an image file. In this case a portable graphic image (.png) <code>button.png</code>. This image is located in the spritesâ€™ directory. <code>sprites &gt; button.png</code></p><p>The next line of code is making a surface for a <code>.ttf</code> font package or bitmap font like <code>alttp.png</code>. You cannot change colors for the bitmap font and there are a few other limitation with that font type. You can do everything with a <code>.ttf</code> font(TrueType Font). Solarus supports .ttf, .tcc and fon. The surface that is created for the font, uses a table in order to assign properties to it. You must never forget the comma at the end of each line.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local test_img = sol.text_surface.create({ -- name a local variable something and assign it to the sol.text_surface
      font = &quot;minecraftia&quot;, -- font name
      text = &quot;what&quot;, -- text you want to show
      font_size = 50, -- font size obviously
      horizontal_alignment = &quot;center&quot;, -- default &quot;left&quot;
      vertical_alignment = &quot;bottom&quot;, -- default &quot;middle&quot;
      rendering_mode = &quot;antialiasing&quot;, -- &quot;solid&quot; (faster) and default
      color = {0,0,0}, -- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)
    })
</code></pre>"><span class="hljs-keyword">local</span> test_img = sol.text_surface.create({ <span class="hljs-comment">-- name a local variable something and assign it to the sol.text_surface</span>
      font = <span class="hljs-string">"minecraftia"</span>, <span class="hljs-comment">-- font name</span>
      text = <span class="hljs-string">"what"</span>, <span class="hljs-comment">-- text you want to show</span>
      font_size = <span class="hljs-number">50</span>, <span class="hljs-comment">-- font size obviously</span>
      horizontal_alignment = <span class="hljs-string">"center"</span>, <span class="hljs-comment">-- default "left"</span>
      vertical_alignment = <span class="hljs-string">"bottom"</span>, <span class="hljs-comment">-- default "middle"</span>
      rendering_mode = <span class="hljs-string">"antialiasing"</span>, <span class="hljs-comment">-- "solid" (faster) and default</span>
      color = {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>}, <span class="hljs-comment">-- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)</span>
    })
</code></pre><p>1 .<code>font = "minecraftia",</code> is the name of the font package. You can leave off the extension <code>.ttf</code>.</p><p>2 .<code>text = "what",</code> is the text you want to draw or show on the screen. The best way to do this would be with an array. </p><p><strong>Example:</strong> </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>for rep = 1, line_amount do
   text = line[rep}
end

line[1] = &quot;what&quot;
line[2] = &quot;the&quot;
line[3] = &quot;sprite&quot;
</code></pre>"><span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>, line_amount <span class="hljs-keyword">do</span>
   text = line[rep}
<span class="hljs-keyword">end</span>

line[<span class="hljs-number">1</span>] = <span class="hljs-string">"what"</span>
line[<span class="hljs-number">2</span>] = <span class="hljs-string">"the"</span>
line[<span class="hljs-number">3</span>] = <span class="hljs-string">"sprite"</span>
</code></pre><p>3 .<code>font_size = 50,</code> This is..well, the size of your font. </p><p>4 .<code>horizontal_alignment = "center",</code> The horizontal alignment. The default is default â€œleft.â€ I personally ignore the   alignments. I just remove them from the table.</p><p>5 .<code>vertical_alignment = "bottom",</code> The vertical alignment. The default is â€œmiddle.â€</p><p>6 .<code>rendering_mode = "antialiasing",</code> The rendering mode is how your font looks. <code>"Solid"</code> is faster and default.</p><p>7 .<code>color = {0,0,0}</code> This is the RGB value for the font color. <code>{0.0.0}</code> is black. You can look at the RGB reference section in the book for more color values.</p><h5 id="explaining-draw-function"><a name="explaining-draw-function" href="#explaining-draw-function"></a>Explaining Draw Function</h5><p>Now we are going to go over the <code>function sol.main:on_draw(screen)</code>. We need this function for showing images and text on the screen.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_draw(screen) 

end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span> 

<span class="hljs-keyword">end</span>
</code></pre><h5 id="drawing-an-image,-font,-and-a-fill_color"><a name="drawing-an-image,-font,-and-a-fill_color" href="#drawing-an-image,-font,-and-a-fill_color"></a>Drawing an image, font, and a fill_color</h5><p>We need to add <code>:draw(screen,x,y)</code>on to a surface we created <code>test_img</code> and <code>button_img</code> or <code>surface_img</code> in order to draw a surface and set coordinates.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_draw(screen) 
  test_img:draw(screen,100,100)'
end
</code></pre>">function sol.main:on_draw(screen) 
  test_img:draw(screen,100,100)'
end
</code></pre><h5 id="filling-a-color"><a name="filling-a-color" href="#filling-a-color"></a>Filling a Color</h5><p>On the surface <code>surface_img</code> that was created we need to add <code>fill_color({245,68,0})</code> on to <code>surface_img</code>. That will create an orange color.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_draw(screen) 
  surface_img:draw(screen)
  surface_img:fill_color({245,68,0})
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span> 
  surface_img:draw(screen)
  surface_img:fill_color({<span class="hljs-number">245</span>,<span class="hljs-number">68</span>,<span class="hljs-number">0</span>})
<span class="hljs-keyword">end</span>
</code></pre><h5 id="opacity-or-semi-transparency"><a name="opacity-or-semi-transparency" href="#opacity-or-semi-transparency"></a>Opacity or Semi-transparency</h5><p>We currently have a screen filled with orange color and now we cannot see anything. One will need to make it see through or semi-transparent. That is the opacity. You need to assign the surface <code>surface_img</code> to <code>set_opacity(number)</code>.</p><p>For example:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  surface_img:set_opacity(50)
</code></pre>">  surface_img:set_opacity(<span class="hljs-number">50</span>)
</code></pre><p>  Opacity at 50% will make it perfect most of the time.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_draw(screen) 
  surface_img:draw(screen)
  surface_img:fill_color({245,68,0})
  surface_img:set_opacity(50)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span> 
  surface_img:draw(screen)
  surface_img:fill_color({<span class="hljs-number">245</span>,<span class="hljs-number">68</span>,<span class="hljs-number">0</span>})
  surface_img:set_opacity(<span class="hljs-number">50</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="on_unpaused-function-&amp;-clear-pixels"><a name="on_unpaused-function-&amp;-clear-pixels" href="#on_unpaused-function-&amp;-clear-pixels"></a>on_unpaused function &amp; clear pixels</h5><p>I never explained the on_unpaused function fully before. I did mention it, but not in actual use. When the game it paused with the key <code>d</code> the orange semi-transparent pixels are cleared. In order to clear pixels the <code>clear()</code> needs to be added onto the surface <code>surface_img</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    if clear_pixels == true then
       --clear surface
       surface_img:clear()
    end
</code></pre>">    <span class="hljs-keyword">if</span> clear_pixels == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
       <span class="hljs-comment">--clear surface</span>
       surface_img:clear()
    <span class="hljs-keyword">end</span>
</code></pre><p>That means when the â€˜dâ€™ key is pressed to pause the game, all the orange pixels will vanish off the screen. Also, when â€˜dâ€™ is press again, the orange pixels will once again appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--on_paused
--Press key 'd' to make  the orange surface to appear
function game:on_paused()
  clear_pixels = true
end

--on_unpaused
--Press key 'd' again to clear the orange surface
function game:on_unpaused()
  clear_pixels = false
end
</code></pre>"><span class="hljs-comment">--on_paused</span>
<span class="hljs-comment">--Press key 'd' to make  the orange surface to appear</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
  clear_pixels = <span class="hljs-keyword">true</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--on_unpaused</span>
<span class="hljs-comment">--Press key 'd' again to clear the orange surface</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_unpaused</span><span class="hljs-params">()</span></span>
  clear_pixels = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="blend-modes"><a name="blend-modes" href="#blend-modes"></a>Blend Modes</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>surface:set_blend_mode(blend_mode)
</code></pre>">surface:set_blend_mode(blend_mode)
</code></pre><table>
<thead>
<tr>
<th>mode(blend_modes)</th>
<th style="text-align:left">About</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œnoneâ€</td>
<td style="text-align:left">No blending.</td>
</tr>
<tr>
<td>â€œblendâ€(default)</td>
<td style="text-align:left">The surface is alpha-blended</td>
</tr>
<tr>
<td>â€œaddâ€</td>
<td style="text-align:left">The surface is colored and lightened.</td>
</tr>
<tr>
<td>â€œmultiplyâ€</td>
<td style="text-align:left">Darken the surface without degrading the image</td>
</tr>
</tbody>
</table><p><strong>Examples:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    --&quot;multiply&quot; blend mode.
    blend_multiply_img:draw(screen,100,100)
    blend_multiply_img:set_blend_mode(&quot;multiply&quot;)

    --&quot;add&quot; blend mode.
    blend_add_img:draw(screen,100,150)
    blend_add_img:set_blend_mode(&quot;add&quot;)

    --&quot;none&quot; blend mode.
    blend_none_img:draw(screen,160,200)
    blend_none_img:set_blend_mode(&quot;none&quot;)

   --&quot;blend&quot; blend mode.
    blend_red_img:draw(screen,100,200)
    blend_red_img:set_blend_mode(&quot;blend&quot;)

    blend_green_img:draw(screen,100,200)
    blend_green_img:set_blend_mode(&quot;blend&quot;)

    blend_blue_img:draw(screen,100,200)
    blend_blue_img:set_blend_mode(&quot;blend&quot;)
</code></pre>">    <span class="hljs-comment">--"multiply" blend mode.</span>
    blend_multiply_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>)
    blend_multiply_img:set_blend_mode(<span class="hljs-string">"multiply"</span>)

    <span class="hljs-comment">--"add" blend mode.</span>
    blend_add_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">150</span>)
    blend_add_img:set_blend_mode(<span class="hljs-string">"add"</span>)

    <span class="hljs-comment">--"none" blend mode.</span>
    blend_none_img:draw(screen,<span class="hljs-number">160</span>,<span class="hljs-number">200</span>)
    blend_none_img:set_blend_mode(<span class="hljs-string">"none"</span>)

   <span class="hljs-comment">--"blend" blend mode.</span>
    blend_red_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_red_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_green_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_green_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_blue_img:draw(screen,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_blue_img:set_blend_mode(<span class="hljs-string">"blend"</span>)
</code></pre><h5 id="drawing-to-a-surface"><a name="drawing-to-a-surface" href="#drawing-to-a-surface"></a>Drawing to a Surface</h5><p>I am not going mention this in the sample, the same way, but one can draw images to a single surface and remove them all at the same time.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local blend_test_img = sol.surface.create()

-- A function for displaying images and fonts on screen.
function sol.main:on_draw(screen) 
   --&quot;blend&quot; blend mode.
    blend_test_img:draw(screen)
    blend_red_img:draw(blend_test_img,100,200)
    blend_red_img:set_blend_mode(&quot;blend&quot;)

    blend_green_img:draw(blend_test_img,100,200)
    blend_green_img:set_blend_mode(&quot;blend&quot;)

    blend_blue_img:draw(blend_test_img,100,200)
    blend_blue_img:set_blend_mode(&quot;blend&quot;)

    --if clear pixels is true
    if clear_pixels == true then
       --clear surface
       blend_test_img:clear()
    end
end
</code></pre>"><span class="hljs-keyword">local</span> blend_test_img = sol.surface.create()

<span class="hljs-comment">-- A function for displaying images and fonts on screen.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span> 
   <span class="hljs-comment">--"blend" blend mode.</span>
    blend_test_img:draw(screen)
    blend_red_img:draw(blend_test_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_red_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_green_img:draw(blend_test_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_green_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    blend_blue_img:draw(blend_test_img,<span class="hljs-number">100</span>,<span class="hljs-number">200</span>)
    blend_blue_img:set_blend_mode(<span class="hljs-string">"blend"</span>)

    <span class="hljs-comment">--if clear pixels is true</span>
    <span class="hljs-keyword">if</span> clear_pixels == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
       <span class="hljs-comment">--clear surface</span>
       blend_test_img:clear()
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The example shows that everything is being drawn on <code>blend_test_img</code> instead of the <code>screen</code>. All three of the images will vanish at the same when <code>clear_pixels is true</code>.</p><h3 id="drawing-a-sprite"><a name="drawing-a-sprite" href="#drawing-a-sprite"></a>Drawing a Sprite</h3><p>You can draw more than just font, images, and color surfaces. Solarus has the ability to draw sprites and animate them.</p><p>A common usage for sprite drawing is for scenes. For example, when an boss enemy or hero dies because the drawn sprite can be <a href="http://www.solarus-games.org/doc/latest/lua_api_sprite.html#lua_api_sprite_set_paused">unpaused when the game is paused</a>.</p><h5 id="sample"><a name="sample" href="#sample"></a>Sample</h5><p>You can grab the sample in the directory <code>Lessons &gt; Chapter_8 &gt; Chapter_8_sprite_draw.zip</code>.</p><h5 id="script"><a name="script" href="#script"></a>Script</h5><p>This script is in the <code>first_map.lua</code> in the sample.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()

local x_pos, y_pos = 100, 100 -- x,y coordinates
local x,y -- drawing coordinates

sol.timer.start(100, function() --Timer for checking. Normally not needed if you pause the game.
  local camera_x, camera_y = map:get_camera():get_bounding_box()-- Get camera coordinates and bounding box or the player's hitbox.
  y = y_pos - camera_y -- y_pos = y_pos - camera_y will constantly minus the camera coordinates, use variable &quot;y&quot; when drawing.
  x = x_pos - camera_x
  return true -- repeat timer
end)

local sprite = sol.sprite.create(&quot;main_heroes/eldran&quot;) -- sprite you want to draw.
sprite:set_animation(&quot;dying&quot;) -- do not loop it in the sprite editor or it will keep doing the dying animation

function sprite:on_animation_finished() --function for when the dying animation ends.
  sprite:set_animation(&quot;dead&quot;)
end

function map:on_draw(screen) -- draw sprite
  sprite:draw(screen, x, y)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-keyword">local</span> x_pos, y_pos = <span class="hljs-number">100</span>, <span class="hljs-number">100</span> <span class="hljs-comment">-- x,y coordinates</span>
<span class="hljs-keyword">local</span> x,y <span class="hljs-comment">-- drawing coordinates</span>

sol.timer.start(<span class="hljs-number">100</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> <span class="hljs-comment">--Timer for checking. Normally not needed if you pause the game.</span>
  <span class="hljs-keyword">local</span> camera_x, camera_y = map:get_camera():get_bounding_box()<span class="hljs-comment">-- Get camera coordinates and bounding box or the player's hitbox.</span>
  y = y_pos - camera_y <span class="hljs-comment">-- y_pos = y_pos - camera_y will constantly minus the camera coordinates, use variable "y" when drawing.</span>
  x = x_pos - camera_x
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> <span class="hljs-comment">-- repeat timer</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-keyword">local</span> sprite = sol.sprite.create(<span class="hljs-string">"main_heroes/eldran"</span>) <span class="hljs-comment">-- sprite you want to draw.</span>
sprite:set_animation(<span class="hljs-string">"dying"</span>) <span class="hljs-comment">-- do not loop it in the sprite editor or it will keep doing the dying animation</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sprite:on_animation_finished</span><span class="hljs-params">()</span></span> <span class="hljs-comment">--function for when the dying animation ends.</span>
  sprite:set_animation(<span class="hljs-string">"dead"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_draw</span><span class="hljs-params">(screen)</span></span> <span class="hljs-comment">-- draw sprite</span>
  sprite:draw(screen, x, y)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="breaking-down-the-script"><a name="breaking-down-the-script" href="#breaking-down-the-script"></a>Breaking down the Script</h5><ol>
<li>First, make the coordinates. We will not use the x_pos, y_pos variables for drawing. Instead, we will use x, y variables for checking reasons.<pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local x_pos, y_pos = 100, 100 -- x,y coordinates
local x,y -- drawing coordinates
</code></pre>"><span class="hljs-keyword">local</span> x_pos, y_pos = <span class="hljs-number">100</span>, <span class="hljs-number">100</span> <span class="hljs-comment">-- x,y coordinates</span>
<span class="hljs-keyword">local</span> x,y <span class="hljs-comment">-- drawing coordinates</span>
</code></pre>
</li><li>Second, make a timer for checking. Normally not needed if you pause the game. If your map size is beyond 320 x 240, then you must minus the camera to get proper drawing coordinates. I use the x, y variables because I do not want the x_pos, y_pos to be constantly subtracted from the coordinates, when checking with the timer.<pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.start(100, function() --Timer for checking. Normally not needed if you pause the game.
local camera_x, camera_y = map:get_camera():get_bounding_box() -- Get camera coordinates and bounding box or the player's hitbox.
y = y_pos - camera_y -- y_pos = y_pos - camera_y will constantly minus the camera coordinates, use variable &quot;y&quot; when drawing.
x = x_pos - camera_x
return true -- repeat timer
end)
</code></pre>">sol.timer.start(<span class="hljs-number">100</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> <span class="hljs-comment">--Timer for checking. Normally not needed if you pause the game.</span>
<span class="hljs-keyword">local</span> camera_x, camera_y = map:get_camera():get_bounding_box() <span class="hljs-comment">-- Get camera coordinates and bounding box or the player's hitbox.</span>
y = y_pos - camera_y <span class="hljs-comment">-- y_pos = y_pos - camera_y will constantly minus the camera coordinates, use variable "y" when drawing.</span>
x = x_pos - camera_x
<span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> <span class="hljs-comment">-- repeat timer</span>
<span class="hljs-keyword">end</span>)
</code></pre>
</li><li>Thirdly, create the sprite from the sprite directory and set a desired animation. Do not loop the animation in the sprite editor or it will repeat. Most likely one will want an end animation because one would want a finishing animation.<pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local sprite = sol.sprite.create(&quot;main_heroes/eldran&quot;) -- sprite you want to draw.
sprite:set_animation(&quot;dying&quot;) -- do not loop it in the sprite editor or it will keep doing the dying animation
</code></pre>"><span class="hljs-keyword">local</span> sprite = sol.sprite.create(<span class="hljs-string">"main_heroes/eldran"</span>) <span class="hljs-comment">-- sprite you want to draw.</span>
sprite:set_animation(<span class="hljs-string">"dying"</span>) <span class="hljs-comment">-- do not loop it in the sprite editor or it will keep doing the dying animation</span>
</code></pre>
</li><li>Use the function <code>on_animation_finished()</code> to set an end animation or you could use a timer, but that would be more effort.<pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sprite:on_animation_finished() --function for when the dying animation ends.
sprite:set_animation(&quot;dead&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sprite:on_animation_finished</span><span class="hljs-params">()</span></span> <span class="hljs-comment">--function for when the dying animation ends.</span>
sprite:set_animation(<span class="hljs-string">"dead"</span>)
<span class="hljs-keyword">end</span>
</code></pre>
</li><li>Lastly, draw the sprite at the x, y coordinates.<pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_draw(screen) -- draw sprite
sprite:draw(screen, x, y)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_draw</span><span class="hljs-params">(screen)</span></span> <span class="hljs-comment">-- draw sprite</span>
sprite:draw(screen, x, y)
<span class="hljs-keyword">end</span>
</code></pre>
</li></ol><h2 id="chapter-9:-key-press,-mouse-press,-image-fade,-and-playing-audio"><a name="chapter-9:-key-press,-mouse-press,-image-fade,-and-playing-audio" href="#chapter-9:-key-press,-mouse-press,-image-fade,-and-playing-audio"></a>Chapter 9: Key press, Mouse press, Image fade, and Playing Audio</h2><p><strong>Lesson Preview:</strong></p><p>One can watch a video preview of the lesson. </p><p><code>Lessons &gt; Chapter_9 &gt; Chapter_9_Video_Preview.ogv.zip</code></p><p><strong>Lesson Sample:</strong></p><p>One can download the completed lesson.</p><p><code>Lessons &gt; Chapter_9 &gt; Chapter_9_key_mouse_fade.zip</code></p><h3 id="lesson-script"><a name="lesson-script" href="#lesson-script"></a>Lesson Script</h3><p>I would like to show the script before beginning the lesson and how to use it. </p><ol>
<li>The script can be activated with the â€˜aâ€™ key. </li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_9_images/Chapter_9_2_Key_a.png" alt="Chapter_9_images/Chapter_9_2_Key_a.png"></p><ol>
<li><p>The green image will fade out when â€˜oâ€™ is pressed. </p>
</li><li><p>The green image will fade in when â€˜iâ€™ is pressed. </p>
</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_9_images/Chapter_9_5_Fade_Out_Vanish_Function.png" alt="Chapter_9_images/Chapter_9_5_Fade_Out_Vanish_Function.png"></p><ol>
<li><p>The volume will go up by 5 if the â€˜uâ€™ key is pressed. </p>
</li><li><p>The volume will go down by 5 if the â€˜yâ€™ key is pressed. </p>
</li><li><p>The blue block will move up, down, left, and right by three (3). Only if the up, down, left, right keys are pressed. One will notice it moved a little.</p>
</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_9_images/Chapter_9_4_Arrow_keys_blue_block.png" alt="Chapter_9_images/Chapter_9_4_Arrow_keys_blue_block.png"></p><ol>
<li>Right clicking the mouse â€œonâ€ the red block will make it vanish and left clicking will make it appear again.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_9_images/Chapter_9_3_Vanish_Right_Click.png" alt="Chapter_9_3_Vanish_Right_Click.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Pass the game parameter to the script.
local game = ...

--Creating surfaces for the images and loading in the images.
local key_img = sol.surface.create (&quot;key.png&quot;)
local mouse_img = sol.surface.create (&quot;mouse.png&quot;)
local fade_img = sol.surface.create (&quot;fade.png&quot;)

local key_image = false
local mouse = false
local fade = false

--Variables for the sound
local volume = 0

--Up and down direction variables
local up_direction = 0
local down_direction = 0

--Left and right direction variables 
local right_direction = 0
local left_direction = 0

--X and y for key_img surface
local key_x = 0
local key_y = 0

--Solarus key pressing function
function sol.main:on_key_pressed(key)

--Pause the game
game:set_paused(true)

--set volume to zero if it goes into the negatives.
     if volume &amp;lt; 0 then
       volume = 0
     end 

--If key is 's' then the volume goes down by 5 as long as it is greater than zero.
   if key == &quot;y&quot; then

       --Decreases the volume
       volume = volume - 5
       print(&quot;Volume down: &quot;..volume)

       --Change the volume
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)

       --Play music and sound
       sol.audio.play_music(&quot;village&quot;)
       sol.audio.play_sound(&quot;chest_appears&quot;)
   end

--If key is 'a' then the volume goes up by 5 as long as it is greater than or equal to zero.
   if key == &quot;u&quot; then 
     --Volume increases by 5 only if it is less than or equal to 100
     if volume &amp;lt;= 100 then

       --Increases the volume
       volume = volume + 5
       print(&quot;Volume up: &quot;..volume)

       --Change the volume
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)

       --Play music and sound
       sol.audio.play_music(&quot;village&quot;)
       sol.audio.play_sound(&quot;chest_appears&quot;)
     end
   end


--Activates images on key 'a'
   if key == &quot;a&quot; then
     key_image = true
     fade = true
     mouse = true 
   end

----Activates fade in on key 'i'
   if key == &quot;i&quot; then
     fade_img:fade_in(100,stop_draw())
   end

----Activates fade out on key 'o'
   if key == &quot;o&quot; then
     fade_img:fade_out(100,stop_draw())
   end

--Activates when the up key is pressed
   if key == &quot;up&quot; then

     --Decreases down by 1 it it is greater than 0
     if down_direction &amp;gt; 0 then  
       down_direction = down_direction - 1
     end

     --If up is less than 3, then up increases by 1
     if up_direction &amp;lt; 3 then 
       up_direction = up_direction + 1
       print(&quot;Up: &quot;..up_direction)

       --For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.
       for rep = 1,3 do 
          if up_direction == rep then
            --surface Key_img y coordinate decreases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))
            key_y = key_y - 3
            print(&quot;Up_key: &quot;..key_y)
         end
       end --end of for loop
     end -- end of up direction
   end -- end of up key

--Activates when the down key is pressed
   if key == &quot;down&quot; then

     --Decreases up by 1 it it is greater than 0
     if up_direction &amp;gt; 0 then 
       up_direction = up_direction - 1
     end

     --If down is less than 3, then up increases by 1
     if down_direction &amp;lt; 3 then  
       down_direction = down_direction + 1
       print(&quot;Down: &quot;..down_direction)

       --For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.
       for rep = 1,3 do 
          if down_direction == rep then
            --surface Key_img y coordinate increases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))
            key_y = key_y + 3
            print(&quot;Down_key: &quot;..key_y)
          end
       end --end of for loop
     end -- end of down direction
   end -- end of down key

--Activates when the left key is pressed
   if key == &quot;left&quot; then 

     --Decreases right by 1 it it is greater than 0
     if right_direction &amp;gt; 0 then 
       right_direction = right_direction - 1
     end

     --If left is less than 3, then up increases by 1
     if left_direction &amp;lt; 3 then
       left_direction = left_direction + 1
       print(&quot;Left: &quot;..left_direction)

       --For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.
       for rep = 1,3 do 
          if left_direction == rep then
            --surface Key_img x coordinate decreases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))
            key_x = key_x - 3
            print(&quot;Left_key: &quot;..key_x)
         end
       end --end of for loop
     end -- end of left direction
   end -- end of left key

--Activates when the right key is pressed
   if key == &quot;right&quot; then

     --Decreases right by 1 it it is greater than 0
     if left_direction &amp;gt; 0 then
       left_direction = left_direction - 1
     end

     --If right is less than 3, then up increases by 1
     if right_direction &amp;lt; 3 then 
       right_direction = right_direction + 1
       print(&quot;Right: &quot;..right_direction)

       --For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.
       for rep = 1,3 do 
          if right_direction == rep then
            --surface Key_img x coordinate increases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))
            key_x = key_x + 3
            print(&quot;right_key: &quot;..key_x)
          end
       end --end of for loop
     end -- end of right direction
   end -- end of right key


end -- end of key press function

--Function for drawing or showing images
function sol.main:on_draw(screen)


--Show the mouse image if true
  if mouse == true then
    mouse_img:draw(screen)
  end

--Show the key image if true
  if key_image == true then
    key_img:draw(screen, key_x, key_y)
  end

--Show the fade image if true
  if fade == true then
    fade_img:draw(screen)
  end

end -- end of draw function

--Mouse press coordinates. Use a simple paint program. I used Kolourpaint on Linux.
function sol.main:on_mouse_pressed(button,x,y)

--The red button shows if the left mouse button is pressed
  if button == &quot;left&quot; then
    if (x &amp;gt; 210 and x &amp;lt; 268) and (y &amp;gt; 52 and y &amp;lt; 74) then
      mouse = true  
    end
  end -- end of left button

--The red button vanishes if the right mouse button is pressed
  if button == &quot;right&quot; then
    if (x &amp;gt; 210 and x &amp;lt; 268) and (y &amp;gt; 52 and y &amp;lt; 74) then
      mouse = false  
    end
  end -- end of right button
end -- end of mouse press function


--An example on how to make a function. This makes the key and mouse image vanish when fade is activated.
function stop_draw()
  key_image = false
  mouse = false
end
</code></pre>"><span class="hljs-comment">--Pass the game parameter to the script.</span>
<span class="hljs-keyword">local</span> game = ...

<span class="hljs-comment">--Creating surfaces for the images and loading in the images.</span>
<span class="hljs-keyword">local</span> key_img = sol.surface.create (<span class="hljs-string">"key.png"</span>)
<span class="hljs-keyword">local</span> mouse_img = sol.surface.create (<span class="hljs-string">"mouse.png"</span>)
<span class="hljs-keyword">local</span> fade_img = sol.surface.create (<span class="hljs-string">"fade.png"</span>)

<span class="hljs-keyword">local</span> key_image = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">local</span> mouse = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">local</span> fade = <span class="hljs-keyword">false</span>

<span class="hljs-comment">--Variables for the sound</span>
<span class="hljs-keyword">local</span> volume = <span class="hljs-number">0</span>

<span class="hljs-comment">--Up and down direction variables</span>
<span class="hljs-keyword">local</span> up_direction = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> down_direction = <span class="hljs-number">0</span>

<span class="hljs-comment">--Left and right direction variables </span>
<span class="hljs-keyword">local</span> right_direction = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> left_direction = <span class="hljs-number">0</span>

<span class="hljs-comment">--X and y for key_img surface</span>
<span class="hljs-keyword">local</span> key_x = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> key_y = <span class="hljs-number">0</span>

<span class="hljs-comment">--Solarus key pressing function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>

<span class="hljs-comment">--Pause the game</span>
game:set_paused(<span class="hljs-keyword">true</span>)

<span class="hljs-comment">--set volume to zero if it goes into the negatives.</span>
     <span class="hljs-keyword">if</span> volume &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
       volume = <span class="hljs-number">0</span>
     <span class="hljs-keyword">end</span> 

<span class="hljs-comment">--If key is 's' then the volume goes down by 5 as long as it is greater than zero.</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"y"</span> <span class="hljs-keyword">then</span>

       <span class="hljs-comment">--Decreases the volume</span>
       volume = volume - <span class="hljs-number">5</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Volume down: "</span>..volume)

       <span class="hljs-comment">--Change the volume</span>
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)

       <span class="hljs-comment">--Play music and sound</span>
       sol.audio.play_music(<span class="hljs-string">"village"</span>)
       sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">--If key is 'a' then the volume goes up by 5 as long as it is greater than or equal to zero.</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"u"</span> <span class="hljs-keyword">then</span> 
     <span class="hljs-comment">--Volume increases by 5 only if it is less than or equal to 100</span>
     <span class="hljs-keyword">if</span> volume &lt;= <span class="hljs-number">100</span> <span class="hljs-keyword">then</span>

       <span class="hljs-comment">--Increases the volume</span>
       volume = volume + <span class="hljs-number">5</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Volume up: "</span>..volume)

       <span class="hljs-comment">--Change the volume</span>
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)

       <span class="hljs-comment">--Play music and sound</span>
       sol.audio.play_music(<span class="hljs-string">"village"</span>)
       sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
     <span class="hljs-keyword">end</span>
   <span class="hljs-keyword">end</span>


<span class="hljs-comment">--Activates images on key 'a'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>
     key_image = <span class="hljs-keyword">true</span>
     fade = <span class="hljs-keyword">true</span>
     mouse = <span class="hljs-keyword">true</span> 
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">----Activates fade in on key 'i'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"i"</span> <span class="hljs-keyword">then</span>
     fade_img:fade_in(<span class="hljs-number">100</span>,stop_draw())
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">----Activates fade out on key 'o'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"o"</span> <span class="hljs-keyword">then</span>
     fade_img:fade_out(<span class="hljs-number">100</span>,stop_draw())
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Activates when the up key is pressed</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"up"</span> <span class="hljs-keyword">then</span>

     <span class="hljs-comment">--Decreases down by 1 it it is greater than 0</span>
     <span class="hljs-keyword">if</span> down_direction &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>  
       down_direction = down_direction - <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>

     <span class="hljs-comment">--If up is less than 3, then up increases by 1</span>
     <span class="hljs-keyword">if</span> up_direction &lt; <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> 
       up_direction = up_direction + <span class="hljs-number">1</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Up: "</span>..up_direction)

       <span class="hljs-comment">--For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.</span>
       <span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span> 
          <span class="hljs-keyword">if</span> up_direction == rep <span class="hljs-keyword">then</span>
            <span class="hljs-comment">--surface Key_img y coordinate decreases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))</span>
            key_y = key_y - <span class="hljs-number">3</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Up_key: "</span>..key_y)
         <span class="hljs-keyword">end</span>
       <span class="hljs-keyword">end</span> <span class="hljs-comment">--end of for loop</span>
     <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of up direction</span>
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of up key</span>

<span class="hljs-comment">--Activates when the down key is pressed</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"down"</span> <span class="hljs-keyword">then</span>

     <span class="hljs-comment">--Decreases up by 1 it it is greater than 0</span>
     <span class="hljs-keyword">if</span> up_direction &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> 
       up_direction = up_direction - <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>

     <span class="hljs-comment">--If down is less than 3, then up increases by 1</span>
     <span class="hljs-keyword">if</span> down_direction &lt; <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>  
       down_direction = down_direction + <span class="hljs-number">1</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Down: "</span>..down_direction)

       <span class="hljs-comment">--For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.</span>
       <span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span> 
          <span class="hljs-keyword">if</span> down_direction == rep <span class="hljs-keyword">then</span>
            <span class="hljs-comment">--surface Key_img y coordinate increases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))</span>
            key_y = key_y + <span class="hljs-number">3</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Down_key: "</span>..key_y)
          <span class="hljs-keyword">end</span>
       <span class="hljs-keyword">end</span> <span class="hljs-comment">--end of for loop</span>
     <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of down direction</span>
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of down key</span>

<span class="hljs-comment">--Activates when the left key is pressed</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"left"</span> <span class="hljs-keyword">then</span> 

     <span class="hljs-comment">--Decreases right by 1 it it is greater than 0</span>
     <span class="hljs-keyword">if</span> right_direction &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span> 
       right_direction = right_direction - <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>

     <span class="hljs-comment">--If left is less than 3, then up increases by 1</span>
     <span class="hljs-keyword">if</span> left_direction &lt; <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
       left_direction = left_direction + <span class="hljs-number">1</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Left: "</span>..left_direction)

       <span class="hljs-comment">--For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.</span>
       <span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span> 
          <span class="hljs-keyword">if</span> left_direction == rep <span class="hljs-keyword">then</span>
            <span class="hljs-comment">--surface Key_img x coordinate decreases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))</span>
            key_x = key_x - <span class="hljs-number">3</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Left_key: "</span>..key_x)
         <span class="hljs-keyword">end</span>
       <span class="hljs-keyword">end</span> <span class="hljs-comment">--end of for loop</span>
     <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of left direction</span>
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of left key</span>

<span class="hljs-comment">--Activates when the right key is pressed</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"right"</span> <span class="hljs-keyword">then</span>

     <span class="hljs-comment">--Decreases right by 1 it it is greater than 0</span>
     <span class="hljs-keyword">if</span> left_direction &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
       left_direction = left_direction - <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>

     <span class="hljs-comment">--If right is less than 3, then up increases by 1</span>
     <span class="hljs-keyword">if</span> right_direction &lt; <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> 
       right_direction = right_direction + <span class="hljs-number">1</span>
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"Right: "</span>..right_direction)

       <span class="hljs-comment">--For loop for when up direction equals a certain number. This way I do not have to write the same code 3 times.</span>
       <span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">3</span> <span class="hljs-keyword">do</span> 
          <span class="hljs-keyword">if</span> right_direction == rep <span class="hljs-keyword">then</span>
            <span class="hljs-comment">--surface Key_img x coordinate increases by 3. This moves the blue block. (key_img:draw(screen, key_x, key_y))</span>
            key_x = key_x + <span class="hljs-number">3</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"right_key: "</span>..key_x)
          <span class="hljs-keyword">end</span>
       <span class="hljs-keyword">end</span> <span class="hljs-comment">--end of for loop</span>
     <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of right direction</span>
   <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of right key</span>


<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of key press function</span>

<span class="hljs-comment">--Function for drawing or showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>


<span class="hljs-comment">--Show the mouse image if true</span>
  <span class="hljs-keyword">if</span> mouse == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    mouse_img:draw(screen)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Show the key image if true</span>
  <span class="hljs-keyword">if</span> key_image == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    key_img:draw(screen, key_x, key_y)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Show the fade image if true</span>
  <span class="hljs-keyword">if</span> fade == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    fade_img:draw(screen)
  <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>

<span class="hljs-comment">--Mouse press coordinates. Use a simple paint program. I used Kolourpaint on Linux.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_mouse_pressed</span><span class="hljs-params">(button,x,y)</span></span>

<span class="hljs-comment">--The red button shows if the left mouse button is pressed</span>
  <span class="hljs-keyword">if</span> button == <span class="hljs-string">"left"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">210</span> <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">268</span>) <span class="hljs-keyword">and</span> (y &gt; <span class="hljs-number">52</span> <span class="hljs-keyword">and</span> y &lt; <span class="hljs-number">74</span>) <span class="hljs-keyword">then</span>
      mouse = <span class="hljs-keyword">true</span>  
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of left button</span>

<span class="hljs-comment">--The red button vanishes if the right mouse button is pressed</span>
  <span class="hljs-keyword">if</span> button == <span class="hljs-string">"right"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">210</span> <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">268</span>) <span class="hljs-keyword">and</span> (y &gt; <span class="hljs-number">52</span> <span class="hljs-keyword">and</span> y &lt; <span class="hljs-number">74</span>) <span class="hljs-keyword">then</span>
      mouse = <span class="hljs-keyword">false</span>  
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of right button</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of mouse press function</span>


<span class="hljs-comment">--An example on how to make a function. This makes the key and mouse image vanish when fade is activated.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stop_draw</span><span class="hljs-params">()</span></span>
  key_image = <span class="hljs-keyword">false</span>
  mouse = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">end</span>
</code></pre><h3 id="breaking-down-the-script"><a name="breaking-down-the-script" href="#breaking-down-the-script"></a>Breaking Down the Script</h3><p>I will not mention anything related to how to use the draw function because that was explained last chapter.</p><h5 id="key-pressed"><a name="key-pressed" href="#key-pressed"></a>Key Pressed</h5><p>The key press function is very easy to use.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_key_pressed(key)
  if key == &quot;The key you want&quot; then
     -- something happens
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"The key you want"</span> <span class="hljs-keyword">then</span>
     <span class="hljs-comment">-- something happens</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p><strong>EX:</strong></p><p>This will activate if the key â€˜aâ€™ is pressed.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_key_pressed(key)
--Activates images on key 'a'
   if key == &quot;a&quot; then
     key_image = true
     fade = true
     mouse = true 
   end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>
<span class="hljs-comment">--Activates images on key 'a'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>
     key_image = <span class="hljs-keyword">true</span>
     fade = <span class="hljs-keyword">true</span>
     mouse = <span class="hljs-keyword">true</span> 
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="set-pause"><a name="set-pause" href="#set-pause"></a>Set Pause</h5><p>By default, the game pauses with the key â€˜dâ€™, but that is not the only way to pause the game. One can use <code>game:set_pause</code> to pause and unpause the game.</p><p><strong>EX:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--pause the game
game:set_paused(true)

--unpause the game
game:set_paused(false)
</code></pre>"><span class="hljs-comment">--pause the game</span>
game:set_paused(<span class="hljs-keyword">true</span>)

<span class="hljs-comment">--unpause the game</span>
game:set_paused(<span class="hljs-keyword">false</span>)
</code></pre><h5 id="changing-volume"><a name="changing-volume" href="#changing-volume"></a>Changing Volume</h5><p>Changing the volume is very easy. All one has to do is type <code>sol.audio.set_music/sound_volume(number or variable from 1 - 100)</code>.</p><p><strong>EX:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>       --Change the volume
       sol.audio.set_music_volume(20)
       sol.audio.set_sound_volume(5)

       --A variable called volume
       local volume = 50
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)
</code></pre>">       <span class="hljs-comment">--Change the volume</span>
       sol.audio.set_music_volume(<span class="hljs-number">20</span>)
       sol.audio.set_sound_volume(<span class="hljs-number">5</span>)

       <span class="hljs-comment">--A variable called volume</span>
       <span class="hljs-keyword">local</span> volume = <span class="hljs-number">50</span>
       sol.audio.set_music_volume(volume)
       sol.audio.set_sound_volume(volume)
</code></pre><h5 id="playing-music-&amp;-sound"><a name="playing-music-&amp;-sound" href="#playing-music-&amp;-sound"></a>Playing Music &amp; Sound</h5><p>Play music/sound is as easy as changing the volume. All one has to do is type <code>sol.audio.play_music/sound("the name of the audio")</code>.</p><p><strong>EX:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>       --Play music and sound
       sol.audio.play_music(&quot;village&quot;)
       sol.audio.play_sound(&quot;chest_appears&quot;)
</code></pre>">       <span class="hljs-comment">--Play music and sound</span>
       sol.audio.play_music(<span class="hljs-string">"village"</span>)
       sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
</code></pre><h5 id="making-your-own-function"><a name="making-your-own-function" href="#making-your-own-function"></a>Making Your Own Function</h5><p>I mentioned functions in chapter 6, but here is a review.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Making function
function name_you_want(parameters)
  --What you want to happen
end

--Calling function
name_you_want()
</code></pre>"><span class="hljs-comment">--Making function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">name_you_want</span><span class="hljs-params">(parameters)</span></span>
  <span class="hljs-comment">--What you want to happen</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Calling function</span>
name_you_want()
</code></pre><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function stop_draw()
  key_image = false
  mouse = false
end

fade_img:fade_in(100,stop_draw())
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stop_draw</span><span class="hljs-params">()</span></span>
  key_image = <span class="hljs-keyword">false</span>
  mouse = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">end</span>

fade_img:fade_in(<span class="hljs-number">100</span>,stop_draw())
</code></pre><h5 id="fade-in-and-out"><a name="fade-in-and-out" href="#fade-in-and-out"></a>Fade In and Out</h5><p>I would have covered fading in/out during the last chapter, but the key pressed was needed for a decent example. One takes the surface <code>fade_img</code> and adds <code>fade_in/out(delay time in milliseconds, A function)</code>.</p><p><strong>EX:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>----Activates fade in on key 'i'
   if key == &quot;i&quot; then
     fade_img:fade_in(100, stop_draw())
   end

----Activates fade out on key 'o'
   if key == &quot;o&quot; then
     fade_img:fade_out(100, stop_draw())
   end
</code></pre>"><span class="hljs-comment">----Activates fade in on key 'i'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"i"</span> <span class="hljs-keyword">then</span>
     fade_img:fade_in(<span class="hljs-number">100</span>, stop_draw())
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">----Activates fade out on key 'o'</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"o"</span> <span class="hljs-keyword">then</span>
     fade_img:fade_out(<span class="hljs-number">100</span>, stop_draw())
   <span class="hljs-keyword">end</span>
</code></pre><h5 id="mouse-pressed"><a name="mouse-pressed" href="#mouse-pressed"></a>Mouse Pressed</h5><p>The hardest part about the mouse press function is getting the coordinates. I use a program on the Linux operating system called KolourPaint, but you can do this in most paint programs.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_9_images/Chapter_9_1_Coordinates.png" alt="Chapter_9_images/Chapter_9_1_Coordinates.png"></p><p>The mouse press function works like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_mouse_pressed(button,x,y)
  if button = &quot;left/right/middle/&quot; then
    if (x &amp;gt; value and x &amp;lt; value) and (y &amp;gt; value and y &amp;lt; value) then
      -- something happens
    end
  end -- end of if button 
end -- end of mouse press function
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_mouse_pressed</span><span class="hljs-params">(button,x,y)</span></span>
  <span class="hljs-keyword">if</span> button = <span class="hljs-string">"left/right/middle/"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (x &gt; value <span class="hljs-keyword">and</span> x &lt; value) <span class="hljs-keyword">and</span> (y &gt; value <span class="hljs-keyword">and</span> y &lt; value) <span class="hljs-keyword">then</span>
      <span class="hljs-comment">-- something happens</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of if button </span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of mouse press function</span>
</code></pre><p><strong>EX:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Mouse press coordinates. Use a simple paint program. I used Kolourpaint on Linux.
function sol.main:on_mouse_pressed(button,x,y)

--The red button shows if the left mouse button is pressed
  if button == &quot;left&quot; then
    if (x &amp;gt; 210 and x &amp;lt; 268) and (y &amp;gt; 52 and y &amp;lt; 74) then
      mouse = true  
    end
  end -- end of left button

--The red button vanishes if the right mouse button is pressed
  if button == &quot;right&quot; then
    if (x &amp;gt; 210 and x &amp;lt; 268) and (y &amp;gt; 52 and y &amp;lt; 74) then
      mouse = false  
    end
  end -- end of right button
end -- end of mouse press function
</code></pre>"><span class="hljs-comment">--Mouse press coordinates. Use a simple paint program. I used Kolourpaint on Linux.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_mouse_pressed</span><span class="hljs-params">(button,x,y)</span></span>

<span class="hljs-comment">--The red button shows if the left mouse button is pressed</span>
  <span class="hljs-keyword">if</span> button == <span class="hljs-string">"left"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">210</span> <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">268</span>) <span class="hljs-keyword">and</span> (y &gt; <span class="hljs-number">52</span> <span class="hljs-keyword">and</span> y &lt; <span class="hljs-number">74</span>) <span class="hljs-keyword">then</span>
      mouse = <span class="hljs-keyword">true</span>  
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of left button</span>

<span class="hljs-comment">--The red button vanishes if the right mouse button is pressed</span>
  <span class="hljs-keyword">if</span> button == <span class="hljs-string">"right"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">210</span> <span class="hljs-keyword">and</span> x &lt; <span class="hljs-number">268</span>) <span class="hljs-keyword">and</span> (y &gt; <span class="hljs-number">52</span> <span class="hljs-keyword">and</span> y &lt; <span class="hljs-number">74</span>) <span class="hljs-keyword">then</span>
      mouse = <span class="hljs-keyword">false</span>  
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of right button</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of mouse press function</span>
</code></pre><h2 id="chapter-10:-timers-and-getting-coordinates"><a name="chapter-10:-timers-and-getting-coordinates" href="#chapter-10:-timers-and-getting-coordinates"></a>Chapter 10: Timers and Getting Coordinates</h2><p><strong>Preview:</strong></p><p><code>Lessons &gt; Chapter_10 &gt; Chapter_10_Click_drag_mouse_preview.ogv.zip</code></p><h3 id="basic-timer-map-script-example"><a name="basic-timer-map-script-example" href="#basic-timer-map-script-example"></a>Basic Timer Map Script Example</h3><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
--------------
Instructions:
--------------
============================================================================================================
Key &quot;o&quot; to stop some timers.
============================================================================================================
--]]
local map = ...
local game = map:get_game()

--[[
--Timer will go off (as long as you are still on the same map) in 5 seconds. 5000 milliseconds is 5 seconds.
--Timer will not go off if you go to another map before 5 seconds are reached.
--If the game is paused with &quot;d&quot;, then the timer is paused as well.
sol.timer.start(5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)

--Using the &quot;game&quot; context or parameter will make the timer go off even though you leave the map.
--context (map, game, item, map entity, menu or sol.main; optional)
--
sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)


local sup_timer =  sol.timer.start(5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)

--Unsuspend the timer. You can do this if you do not want to use the game parameter or context.
--You can use suspend with map too: &quot;timer:is_suspended_with_map(false)&quot;
sup_timer:set_suspended(false)


-- Call a function half second.
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return true  -- To call the timer again (with the same delay).
end)


--]]
-- Call a function half second with a number value variable
--Press &quot;o&quot; to stop the timer
local variable_1 = 0
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return variable_1 ~= 1
end)
--[[


-- Call a function half second with a true/false
--Press &quot;o&quot; to stop the timer
local on = true
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return on == true
end)


-- Call a function ten times, with half second between each call.
local num_calls = 0
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;bomb&quot;)
  num_calls = num_calls + 1
  return num_calls &amp;lt; 3
end)
--]]

--Solarus key pressing function
function sol.main:on_key_pressed(key)

if key == &quot;o&quot; then
  on = false
  variable_1 = 1
  print(variable_1)
end


end -- end of key press function
</code></pre>"><span class="hljs-comment">--[[
--------------
Instructions:
--------------
============================================================================================================
Key "o" to stop some timers.
============================================================================================================
--]]</span>
<span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-comment">--[[
--Timer will go off (as long as you are still on the same map) in 5 seconds. 5000 milliseconds is 5 seconds.
--Timer will not go off if you go to another map before 5 seconds are reached.
--If the game is paused with "d", then the timer is paused as well.
sol.timer.start(5000, function()
  sol.audio.play_sound("secret")
end)

--Using the "game" context or parameter will make the timer go off even though you leave the map.
--context (map, game, item, map entity, menu or sol.main; optional)
--
sol.timer.start(game, 5000, function()
  sol.audio.play_sound("secret")
end)


local sup_timer =  sol.timer.start(5000, function()
  sol.audio.play_sound("secret")
end)

--Unsuspend the timer. You can do this if you do not want to use the game parameter or context.
--You can use suspend with map too: "timer:is_suspended_with_map(false)"
sup_timer:set_suspended(false)


-- Call a function half second.
sol.timer.start(500, function()
  sol.audio.play_sound("cane")
  return true  -- To call the timer again (with the same delay).
end)


--]]</span>
<span class="hljs-comment">-- Call a function half second with a number value variable</span>
<span class="hljs-comment">--Press "o" to stop the timer</span>
<span class="hljs-keyword">local</span> variable_1 = <span class="hljs-number">0</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"cane"</span>)
  <span class="hljs-keyword">return</span> variable_1 ~= <span class="hljs-number">1</span>
<span class="hljs-keyword">end</span>)
<span class="hljs-comment">--[[


-- Call a function half second with a true/false
--Press "o" to stop the timer
local on = true
sol.timer.start(500, function()
  sol.audio.play_sound("cane")
  return on == true
end)


-- Call a function ten times, with half second between each call.
local num_calls = 0
sol.timer.start(500, function()
  sol.audio.play_sound("bomb")
  num_calls = num_calls + 1
  return num_calls &lt; 3
end)
--]]</span>

<span class="hljs-comment">--Solarus key pressing function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>

<span class="hljs-keyword">if</span> key == <span class="hljs-string">"o"</span> <span class="hljs-keyword">then</span>
  on = <span class="hljs-keyword">false</span>
  variable_1 = <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(variable_1)
<span class="hljs-keyword">end</span>


<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of key press function</span>
</code></pre><h3 id="timer"><a name="timer" href="#timer"></a>Timer</h3><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.start([context], delay (in milliseconds) , callback)
</code></pre>">sol.timer.start([context], delay (<span class="hljs-keyword">in</span> milliseconds) , callback)
</code></pre><h5 id="timer-function-delay"><a name="timer-function-delay" href="#timer-function-delay"></a>Timer Function Delay</h5><ol>
<li><p>Timer will go off (as long as you are still on the same map) for 1<br>second in the example below.</p>
</li><li><p>There are 1000 milliseconds in 1 seconds.</p>
</li><li><p>Timer will not go off if you go to another map before 1 second is reached.</p>
</li><li><p>If the game is paused with â€œdâ€, then the timer is paused as well.</p>
</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Play sound &quot;secret&quot; in one second.
local function play_secret_sound()
  sol.audio.play_sound(&quot;secret&quot;)
end

sol.timer.start(1000, play_secret_sound)
</code></pre>"><span class="hljs-comment">-- Play sound "secret" in one second.</span>
<span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">play_secret_sound</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>

sol.timer.start(<span class="hljs-number">1000</span>, play_secret_sound)
</code></pre><h5 id="timer-anonymous-function-delay"><a name="timer-anonymous-function-delay" href="#timer-anonymous-function-delay"></a>Timer Anonymous Function Delay</h5><p>This is a shorter form of the example before.</p><ol>
<li><p>Timer will go off (as long as you are still on the same map) in 5<br>seconds.</p>
</li><li><p>There are 5000 milliseconds in 5 seconds.</p>
</li><li><p>Timer will not go off if you go to another map before 5 seconds are reached.</p>
</li><li><p>If the game is paused with â€œdâ€, then the timer is paused as well.</p>
</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.start(5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)
</code></pre>">sol.timer.start(<span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)
</code></pre><h5 id="repeat-timer-with-true"><a name="repeat-timer-with-true" href="#repeat-timer-with-true"></a>Repeat Timer with True</h5><p>This timer repeats after every half second.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return true  -- To call the timer again (with the same delay).
end)
</code></pre>">sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"cane"</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>  <span class="hljs-comment">-- To call the timer again (with the same delay).</span>
<span class="hljs-keyword">end</span>)
</code></pre><h5 id="stop-repeating-timer-with-variable"><a name="stop-repeating-timer-with-variable" href="#stop-repeating-timer-with-variable"></a>Stop Repeating Timer With Variable</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Call a function with a number value variable
--Press &quot;o&quot; to stop the timer
local variable_1 = 0
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return variable_1 ~= 1
end)

-- Call a function with a true/false
--Press &quot;o&quot; to stop the timer
local on = true
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;cane&quot;)
  return on == true
end)

--Solarus key pressing function
function sol.main:on_key_pressed(key)

if key == &quot;o&quot; then
  on = false
  variable_1 = 1
  print(variable_1)
end

end -- end of key press function
</code></pre>"><span class="hljs-comment">-- Call a function with a number value variable</span>
<span class="hljs-comment">--Press "o" to stop the timer</span>
<span class="hljs-keyword">local</span> variable_1 = <span class="hljs-number">0</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"cane"</span>)
  <span class="hljs-keyword">return</span> variable_1 ~= <span class="hljs-number">1</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-comment">-- Call a function with a true/false</span>
<span class="hljs-comment">--Press "o" to stop the timer</span>
<span class="hljs-keyword">local</span> on = <span class="hljs-keyword">true</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"cane"</span>)
  <span class="hljs-keyword">return</span> on == <span class="hljs-keyword">true</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-comment">--Solarus key pressing function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>

<span class="hljs-keyword">if</span> key == <span class="hljs-string">"o"</span> <span class="hljs-keyword">then</span>
  on = <span class="hljs-keyword">false</span>
  variable_1 = <span class="hljs-number">1</span>
  <span class="hljs-built_in">print</span>(variable_1)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of key press function</span>
</code></pre><h5 id="repeat-timer-a-number-of-times"><a name="repeat-timer-a-number-of-times" href="#repeat-timer-a-number-of-times"></a>Repeat Timer a Number of Times</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Call a function ten times, with half second between each call.
local num_calls = 0
sol.timer.start(500, function()
  sol.audio.play_sound(&quot;bomb&quot;)
  num_calls = num_calls + 1
  return num_calls &amp;lt; 3
end)
</code></pre>"><span class="hljs-comment">-- Call a function ten times, with half second between each call.</span>
<span class="hljs-keyword">local</span> num_calls = <span class="hljs-number">0</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"bomb"</span>)
  num_calls = num_calls + <span class="hljs-number">1</span>
  <span class="hljs-keyword">return</span> num_calls &lt; <span class="hljs-number">3</span>
<span class="hljs-keyword">end</span>)
</code></pre><h5 id="context-timer"><a name="context-timer" href="#context-timer"></a>Context Timer</h5><ol>
<li><p>Using the â€œgameâ€ context or parameter will make the timer go off even though you leave the map.</p>
</li><li><p>Context (map, game, item, map entity, menu or sol.main; optional)</p>
</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)
</code></pre>">sol.timer.start(game, <span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)
</code></pre><h3 id="timer-display-drag-click-script-example"><a name="timer-display-drag-click-script-example" href="#timer-display-drag-click-script-example"></a>Timer Display Drag Click Script Example</h3><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
--------------
Instructions:
--------------
============================================================================================================
Key &quot;m&quot; is for moving the cursor image around on the screen. You can turn off the cursor and use it instead.
Key &quot;c&quot; makes it so one can click the cursor around (Press &quot;m&quot; first because &quot;c&quot; will stop the timer)
Key &quot;t&quot; displays the timer
Key &quot;a&quot; sets the timer to 20 seconds.
============================================================================================================
--]]

--Pass the game parameter to the script.
local game = ...

--Creating surfaces for the images and loading in the images.
local arrow_img = sol.surface.create (&quot;arrow.png&quot;)

--Makes the timer display, clicking the mouse around, and moving the mouse not being at start of script.
local click_mouse_xy = false
local move_mouse_xy = false
local time_display = false

--Variables for the timer display
local milliseconds = 0
local seconds = 0 
local minutes = 0
local hours   = 0


--MOVES IMAGE AROUND SCREEN BY CLICKING VARIABLES
--A table because I like tables and it prevents upvalue errors
local click = {

     place_x,
     place_y,
}

--DRAG IMAGE AROUND THE SCREEN VARIABLES
--A table because I like tables and it prevents upvalue errors
local move = {

     place_x,
     place_y,
}

--Function for mouse releases
function sol.main:on_mouse_released(button, x, y)

--MOVES IMAGE AROUND SCREEN BY CLICKING.
   if click_mouse_xy == true then
     if button == &quot;left&quot; then
       --Setting x,y drag to get mouse position.
       local drag_x,drag_y = sol.input.get_mouse_position()
       click.place_x = drag_x
       click.place_y = drag_y
       print(&quot;x,&quot;,click.place_x, &quot;y&quot;,click.place_y)
     end
   end
end

     --DRAG IMAGE AROUND THE SCREEN
     local num_calls = 0
     --Assign variable &quot;test&quot; to the timer
     local test = sol.timer.start(80, function()
       --Setting x,y drag to get mouse position.
         local drag_x,drag_y = sol.input.get_mouse_position()
         move.place_x = drag_x
         move.place_y = drag_y
         print(&quot;x,&quot;,move.place_x, &quot;y&quot;,move.place_y)
         return num_calls ~= 1
     end)

--Solarus key pressing function
function sol.main:on_key_pressed(key)
   --Pause the game
   game:set_paused(true)

   if key == &quot;c&quot; then
     click_mouse_xy = true
     move_mouse_xy = false
     --Stop the timer &quot;test&quot;
     test:stop()
     --Timer &quot;test&quot; sound is off
     test:set_with_sound(false)
   end

   if key == &quot;m&quot; then
     click_mouse_xy = false
     move_mouse_xy = true
     --Timer &quot;test&quot; sound is on
     --The timer will be very fast and annoying at 80 milliseconds. It will go slower with like 5000 (5 seconds)
     test:set_with_sound(true)
   end

   if key == &quot;t&quot; then
     --Turn on the timer display
     time_display = true
   end

   if key == &quot;a&quot; then 
     --Change the time to 20 seconds
     test:set_remaining_time(20000)
   end
end -- end of key press function

--The draw function for showing images
function sol.main:on_draw(screen)

--Basic time calculations. There is no int (integer) declaration for variables in Lua, so I used math.floor.
--Math.floor rounds down and math.ceil rounds up math.floor(0.5) = 0 and math.ceil(0.5) = 1
seconds = math.floor((milliseconds / 1000) % 60) 
minutes = math.floor(((milliseconds / (1000*60)) % 60))
hours   = math.floor(((milliseconds / (1000*60*60)) % 24))

--TEXT ON SCREEN
--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html
    local text_display = sol.text_surface.create({ -- name a local variable something and assign it to the sol.text_surface
      font = &quot;minecraftia&quot;, -- font name
      text = hours..&quot;:&quot;..minutes..&quot;:&quot;..seconds..&quot;:&quot;..milliseconds, -- text you want to show
      rendering_mode = &quot;solid&quot;, -- &quot;solid&quot; (faster) and default
      color = {0,0,0}, -- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)
    })

if move_mouse_xy == true then
  --Get the remaining time of the timer &quot;test.&quot; This is displayed at the end, &quot;text = hours..&quot;:&quot;..minutes..&quot;:&quot;..seconds..&quot;:&quot;..milliseconds.&quot;
  milliseconds = test:get_remaining_time()
  print(test:get_remaining_time())
end

   if click_mouse_xy == true then
     arrow_img:draw(screen, click.place_x,click.place_y)
   end

   if move_mouse_xy == true then
     arrow_img:draw(screen, move.place_x,move.place_y)
   end

   if time_display == true then
     text_display:draw(screen, 20,20)
   end

end --end of draw function
</code></pre>"><span class="hljs-comment">--[[
--------------
Instructions:
--------------
============================================================================================================
Key "m" is for moving the cursor image around on the screen. You can turn off the cursor and use it instead.
Key "c" makes it so one can click the cursor around (Press "m" first because "c" will stop the timer)
Key "t" displays the timer
Key "a" sets the timer to 20 seconds.
============================================================================================================
--]]</span>

<span class="hljs-comment">--Pass the game parameter to the script.</span>
<span class="hljs-keyword">local</span> game = ...

<span class="hljs-comment">--Creating surfaces for the images and loading in the images.</span>
<span class="hljs-keyword">local</span> arrow_img = sol.surface.create (<span class="hljs-string">"arrow.png"</span>)

<span class="hljs-comment">--Makes the timer display, clicking the mouse around, and moving the mouse not being at start of script.</span>
<span class="hljs-keyword">local</span> click_mouse_xy = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">local</span> move_mouse_xy = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">local</span> time_display = <span class="hljs-keyword">false</span>

<span class="hljs-comment">--Variables for the timer display</span>
<span class="hljs-keyword">local</span> milliseconds = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> seconds = <span class="hljs-number">0</span> 
<span class="hljs-keyword">local</span> minutes = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> hours   = <span class="hljs-number">0</span>


<span class="hljs-comment">--MOVES IMAGE AROUND SCREEN BY CLICKING VARIABLES</span>
<span class="hljs-comment">--A table because I like tables and it prevents upvalue errors</span>
<span class="hljs-keyword">local</span> click = {

     place_x,
     place_y,
}

<span class="hljs-comment">--DRAG IMAGE AROUND THE SCREEN VARIABLES</span>
<span class="hljs-comment">--A table because I like tables and it prevents upvalue errors</span>
<span class="hljs-keyword">local</span> move = {

     place_x,
     place_y,
}

<span class="hljs-comment">--Function for mouse releases</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_mouse_released</span><span class="hljs-params">(button, x, y)</span></span>

<span class="hljs-comment">--MOVES IMAGE AROUND SCREEN BY CLICKING.</span>
   <span class="hljs-keyword">if</span> click_mouse_xy == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     <span class="hljs-keyword">if</span> button == <span class="hljs-string">"left"</span> <span class="hljs-keyword">then</span>
       <span class="hljs-comment">--Setting x,y drag to get mouse position.</span>
       <span class="hljs-keyword">local</span> drag_x,drag_y = sol.input.get_mouse_position()
       click.place_x = drag_x
       click.place_y = drag_y
       <span class="hljs-built_in">print</span>(<span class="hljs-string">"x,"</span>,click.place_x, <span class="hljs-string">"y"</span>,click.place_y)
     <span class="hljs-keyword">end</span>
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

     <span class="hljs-comment">--DRAG IMAGE AROUND THE SCREEN</span>
     <span class="hljs-keyword">local</span> num_calls = <span class="hljs-number">0</span>
     <span class="hljs-comment">--Assign variable "test" to the timer</span>
     <span class="hljs-keyword">local</span> test = sol.timer.start(<span class="hljs-number">80</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
       <span class="hljs-comment">--Setting x,y drag to get mouse position.</span>
         <span class="hljs-keyword">local</span> drag_x,drag_y = sol.input.get_mouse_position()
         move.place_x = drag_x
         move.place_y = drag_y
         <span class="hljs-built_in">print</span>(<span class="hljs-string">"x,"</span>,move.place_x, <span class="hljs-string">"y"</span>,move.place_y)
         <span class="hljs-keyword">return</span> num_calls ~= <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>)

<span class="hljs-comment">--Solarus key pressing function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>
   <span class="hljs-comment">--Pause the game</span>
   game:set_paused(<span class="hljs-keyword">true</span>)

   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"c"</span> <span class="hljs-keyword">then</span>
     click_mouse_xy = <span class="hljs-keyword">true</span>
     move_mouse_xy = <span class="hljs-keyword">false</span>
     <span class="hljs-comment">--Stop the timer "test"</span>
     test:stop()
     <span class="hljs-comment">--Timer "test" sound is off</span>
     test:set_with_sound(<span class="hljs-keyword">false</span>)
   <span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"m"</span> <span class="hljs-keyword">then</span>
     click_mouse_xy = <span class="hljs-keyword">false</span>
     move_mouse_xy = <span class="hljs-keyword">true</span>
     <span class="hljs-comment">--Timer "test" sound is on</span>
     <span class="hljs-comment">--The timer will be very fast and annoying at 80 milliseconds. It will go slower with like 5000 (5 seconds)</span>
     test:set_with_sound(<span class="hljs-keyword">true</span>)
   <span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"t"</span> <span class="hljs-keyword">then</span>
     <span class="hljs-comment">--Turn on the timer display</span>
     time_display = <span class="hljs-keyword">true</span>
   <span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span> 
     <span class="hljs-comment">--Change the time to 20 seconds</span>
     test:set_remaining_time(<span class="hljs-number">20000</span>)
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of key press function</span>

<span class="hljs-comment">--The draw function for showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>

<span class="hljs-comment">--Basic time calculations. There is no int (integer) declaration for variables in Lua, so I used math.floor.</span>
<span class="hljs-comment">--Math.floor rounds down and math.ceil rounds up math.floor(0.5) = 0 and math.ceil(0.5) = 1</span>
seconds = <span class="hljs-built_in">math</span>.floor((milliseconds / <span class="hljs-number">1000</span>) % <span class="hljs-number">60</span>) 
minutes = <span class="hljs-built_in">math</span>.floor(((milliseconds / (<span class="hljs-number">1000</span>*<span class="hljs-number">60</span>)) % <span class="hljs-number">60</span>))
hours   = <span class="hljs-built_in">math</span>.floor(((milliseconds / (<span class="hljs-number">1000</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>)) % <span class="hljs-number">24</span>))

<span class="hljs-comment">--TEXT ON SCREEN</span>
<span class="hljs-comment">--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html</span>
    <span class="hljs-keyword">local</span> text_display = sol.text_surface.create({ <span class="hljs-comment">-- name a local variable something and assign it to the sol.text_surface</span>
      font = <span class="hljs-string">"minecraftia"</span>, <span class="hljs-comment">-- font name</span>
      text = hours..<span class="hljs-string">":"</span>..minutes..<span class="hljs-string">":"</span>..seconds..<span class="hljs-string">":"</span>..milliseconds, <span class="hljs-comment">-- text you want to show</span>
      rendering_mode = <span class="hljs-string">"solid"</span>, <span class="hljs-comment">-- "solid" (faster) and default</span>
      color = {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>}, <span class="hljs-comment">-- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)</span>
    })

<span class="hljs-keyword">if</span> move_mouse_xy == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
  <span class="hljs-comment">--Get the remaining time of the timer "test." This is displayed at the end, "text = hours..":"..minutes..":"..seconds..":"..milliseconds."</span>
  milliseconds = test:get_remaining_time()
  <span class="hljs-built_in">print</span>(test:get_remaining_time())
<span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> click_mouse_xy == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     arrow_img:draw(screen, click.place_x,click.place_y)
   <span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> move_mouse_xy == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     arrow_img:draw(screen, move.place_x,move.place_y)
   <span class="hljs-keyword">end</span>

   <span class="hljs-keyword">if</span> time_display == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     text_display:draw(screen, <span class="hljs-number">20</span>,<span class="hljs-number">20</span>)
   <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">--end of draw function</span>
</code></pre><h5 id="stopping-a-timer"><a name="stopping-a-timer" href="#stopping-a-timer"></a>Stopping a Timer</h5><p>Stopping a timer is simple.</p><ol>
<li>Assign a variable to the timer.  â€œlocal timerâ€ in this case.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local timer = sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)
</code></pre>"><span class="hljs-keyword">local</span> timer = sol.timer.start(game, <span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)
</code></pre><ol>
<li>variable:stop(). â€œtimerâ€ is the variable.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>timer:stop()
</code></pre>">timer:stop()
</code></pre><h5 id="stop-all-context-timers"><a name="stop-all-context-timers" href="#stop-all-context-timers"></a>Stop all Context Timers</h5><ol>
<li>Context (map, game, item, map entity, menu or sol.main; optional)</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.timer.stop_all(context)
</code></pre>">sol.timer.stop_all(context)
</code></pre><h5 id="getting-remaining-time"><a name="getting-remaining-time" href="#getting-remaining-time"></a>Getting Remaining Time</h5><p>This is very useful for when wanting to display a time count down.</p><p><code>variable:get_remaining_time()</code></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local milliseconds

local test = sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)

test:get_remaining_time()
print(test:get_remaining_time())

milliseconds = test:get_remaining_time()
</code></pre>"><span class="hljs-keyword">local</span> milliseconds

<span class="hljs-keyword">local</span> test = sol.timer.start(game, <span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)

test:get_remaining_time()
<span class="hljs-built_in">print</span>(test:get_remaining_time())

milliseconds = test:get_remaining_time()
</code></pre><h5 id="displaying-timer"><a name="displaying-timer" href="#displaying-timer"></a>Displaying Timer</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--The draw function for showing images
function sol.main:on_draw(screen)

--Basic time calculations. There is no int (integer) declaration for variables in Lua, so I used math.floor.
--Math.floor rounds down and math.ceil rounds up math.floor(0.5) = 0 and math.ceil(0.5) = 1
seconds = math.floor((milliseconds / 1000) % 60) 
minutes = math.floor(((milliseconds / (1000*60)) % 60))
hours   = math.floor(((milliseconds / (1000*60*60)) % 24))

--TEXT ON SCREEN
--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html
    local text_display = sol.text_surface.create({ -- name a local variable something and assign it to the sol.text_surface
      font = &quot;minecraftia&quot;, -- font name
      text = hours..&quot;:&quot;..minutes..&quot;:&quot;..seconds..&quot;:&quot;..milliseconds, -- text you want to show
      rendering_mode = &quot;solid&quot;, -- &quot;solid&quot; (faster) and default
      color = {0,0,0}, -- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)
    })

  --Get the remaining time of the timer &quot;test.&quot; This is displayed at the end, &quot;text = hours..&quot;:&quot;..minutes..&quot;:&quot;..seconds..&quot;:&quot;..milliseconds.&quot;
  milliseconds = test:get_remaining_time()
  print(test:get_remaining_time())

--Draw text display
  text_display:draw(screen, 20,20)

end --end of draw function
</code></pre>"><span class="hljs-comment">--The draw function for showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>

<span class="hljs-comment">--Basic time calculations. There is no int (integer) declaration for variables in Lua, so I used math.floor.</span>
<span class="hljs-comment">--Math.floor rounds down and math.ceil rounds up math.floor(0.5) = 0 and math.ceil(0.5) = 1</span>
seconds = <span class="hljs-built_in">math</span>.floor((milliseconds / <span class="hljs-number">1000</span>) % <span class="hljs-number">60</span>) 
minutes = <span class="hljs-built_in">math</span>.floor(((milliseconds / (<span class="hljs-number">1000</span>*<span class="hljs-number">60</span>)) % <span class="hljs-number">60</span>))
hours   = <span class="hljs-built_in">math</span>.floor(((milliseconds / (<span class="hljs-number">1000</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>)) % <span class="hljs-number">24</span>))

<span class="hljs-comment">--TEXT ON SCREEN</span>
<span class="hljs-comment">--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html</span>
    <span class="hljs-keyword">local</span> text_display = sol.text_surface.create({ <span class="hljs-comment">-- name a local variable something and assign it to the sol.text_surface</span>
      font = <span class="hljs-string">"minecraftia"</span>, <span class="hljs-comment">-- font name</span>
      text = hours..<span class="hljs-string">":"</span>..minutes..<span class="hljs-string">":"</span>..seconds..<span class="hljs-string">":"</span>..milliseconds, <span class="hljs-comment">-- text you want to show</span>
      rendering_mode = <span class="hljs-string">"solid"</span>, <span class="hljs-comment">-- "solid" (faster) and default</span>
      color = {<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>}, <span class="hljs-comment">-- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)</span>
    })

  <span class="hljs-comment">--Get the remaining time of the timer "test." This is displayed at the end, "text = hours..":"..minutes..":"..seconds..":"..milliseconds."</span>
  milliseconds = test:get_remaining_time()
  <span class="hljs-built_in">print</span>(test:get_remaining_time())

<span class="hljs-comment">--Draw text display</span>
  text_display:draw(screen, <span class="hljs-number">20</span>,<span class="hljs-number">20</span>)

<span class="hljs-keyword">end</span> <span class="hljs-comment">--end of draw function</span>
</code></pre><h5 id="timer-sound"><a name="timer-sound" href="#timer-sound"></a>Timer Sound</h5><pre><code data-origin="<pre><code>Variable:set_with_sound(true/false)
</code></pre>">Variable:set_with_sound(true/false)
</code></pre><p>These uses built in sound names:</p><ol>
<li><p>timer_hurry</p>
</li><li><p>timer</p>
</li></ol><p>The sound will go slower the more seconds. It will go faster with only a few milliseconds.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local test = sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)

test:set_with_sound(true)
</code></pre>"><span class="hljs-keyword">local</span> test = sol.timer.start(game, <span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)

test:set_with_sound(<span class="hljs-keyword">true</span>)
</code></pre><h5 id="change-remaining-timer"><a name="change-remaining-timer" href="#change-remaining-timer"></a>Change Remaining Timer</h5><p>You can change the remaining time.</p><pre><code data-origin="<pre><code>variable:set_remaining_time([time in milliseconds[)
</code></pre>">variable:set_remaining_time([time in milliseconds[)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
local test = sol.timer.start(game, 5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)


test:set_remaining_time(20000)
</code></pre>">
<span class="hljs-keyword">local</span> test = sol.timer.start(game, <span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)


test:set_remaining_time(<span class="hljs-number">20000</span>)
</code></pre><h5 id="suspend-timer"><a name="suspend-timer" href="#suspend-timer"></a>Suspend Timer</h5><p>When you pause the game with <code>d</code>, the timer pauses too. You can unsuspend the timer, so the timer still goes off for when the game is paused.</p><pre><code data-origin="<pre><code>variable:set_suspended(false/true)
</code></pre>">variable:set_suspended(false/true)
</code></pre><p>or</p><pre><code data-origin="<pre><code>variable:is_suspended_with_map(false/true)
</code></pre>">variable:is_suspended_with_map(false/true)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local sup_timer =  sol.timer.start(5000, function()
  sol.audio.play_sound(&quot;secret&quot;)
end)

--Unsuspend the timer. You can do this if you do not want to use the game parameter or context.
--You can use suspend with map too: &quot;sup_timer:is_suspended_with_map(false)&quot;
sup_timer:set_suspended(false)
</code></pre>"><span class="hljs-keyword">local</span> sup_timer =  sol.timer.start(<span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
<span class="hljs-keyword">end</span>)

<span class="hljs-comment">--Unsuspend the timer. You can do this if you do not want to use the game parameter or context.</span>
<span class="hljs-comment">--You can use suspend with map too: "sup_timer:is_suspended_with_map(false)"</span>
sup_timer:set_suspended(<span class="hljs-keyword">false</span>)
</code></pre><h3 id="get-coordinates"><a name="get-coordinates" href="#get-coordinates"></a>Get Coordinates</h3><h5 id="getting-cursor-location"><a name="getting-cursor-location" href="#getting-cursor-location"></a>Getting Cursor Location</h5><p>You must assign variables to the following to get coordinates of the cursor.</p><pre><code data-origin="<pre><code>sol.input.get_mouse_position()
</code></pre>">sol.input.get_mouse_position()
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local x,y = sol.input.get_mouse_position()
</code></pre>"><span class="hljs-keyword">local</span> x,y = sol.input.get_mouse_position()
</code></pre><h5 id="applying-coordinates-to-images"><a name="applying-coordinates-to-images" href="#applying-coordinates-to-images"></a>Applying Coordinates To Images</h5><pre><code data-origin="<pre><code>sol.input.get_mouse_position()
</code></pre>">sol.input.get_mouse_position()
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local x,y = sol.input.get_mouse_position()

--The draw function for showing images
function sol.main:on_draw(screen)
   arrow_img:draw(screen, x,y)
end
</code></pre>"><span class="hljs-keyword">local</span> x,y = sol.input.get_mouse_position()

<span class="hljs-comment">--The draw function for showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>
   arrow_img:draw(screen, x,y)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="using-timer-to-drag-image"><a name="using-timer-to-drag-image" href="#using-timer-to-drag-image"></a>Using Timer To Drag Image</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local drag_x
local drag_y

     --DRAG IMAGE AROUND THE SCREEN
     local num_calls = 1
     --Assign variable &quot;test&quot; to the timer
     local test = sol.timer.start(80, function()
       --Setting x,y drag to get mouse position.
         local x,y = sol.input.get_mouse_position()
         x = drag_x
         y = drag_y
         print(&quot;x,&quot;,x, &quot;y&quot;,y)
         num_calls = num_calls + 1
         return num_calls ~= 1
     end)


--The draw function for showing images
function sol.main:on_draw(screen)
   arrow_img:draw(screen, drag_x,drag_y)
end
</code></pre>"><span class="hljs-keyword">local</span> drag_x
<span class="hljs-keyword">local</span> drag_y

     <span class="hljs-comment">--DRAG IMAGE AROUND THE SCREEN</span>
     <span class="hljs-keyword">local</span> num_calls = <span class="hljs-number">1</span>
     <span class="hljs-comment">--Assign variable "test" to the timer</span>
     <span class="hljs-keyword">local</span> test = sol.timer.start(<span class="hljs-number">80</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
       <span class="hljs-comment">--Setting x,y drag to get mouse position.</span>
         <span class="hljs-keyword">local</span> x,y = sol.input.get_mouse_position()
         x = drag_x
         y = drag_y
         <span class="hljs-built_in">print</span>(<span class="hljs-string">"x,"</span>,x, <span class="hljs-string">"y"</span>,y)
         num_calls = num_calls + <span class="hljs-number">1</span>
         <span class="hljs-keyword">return</span> num_calls ~= <span class="hljs-number">1</span>
     <span class="hljs-keyword">end</span>)


<span class="hljs-comment">--The draw function for showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>
   arrow_img:draw(screen, drag_x,drag_y)
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Documentation:</strong></p><p>Check the <a href="http://www.solarus-games.org/doc/latest/">documentation</a> for more information on timers.</p><p><strong>Timer Project Sample(s)</strong></p><p><code>Lessons &gt; Chapter_10 &gt; Chapter_10_Timer.zip</code></p><p><code>Lessons &gt; Chapter_10 &gt; Chapter_10_Click_drag_mouse.zip</code></p><h2 id="chapter-11:-map-editor"><a name="chapter-11:-map-editor" href="#chapter-11:-map-editor"></a>Chapter 11: Map editor</h2><h5 id="making-a-map"><a name="making-a-map" href="#making-a-map"></a>Making a Map</h5><p>Right click the Map directory folder and give the map/description a name.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_0_Making%20map.png" alt="Chapter_11_images/Chapter-11_0_Making%20map.png"></p><h5 id="map-properties"><a name="map-properties" href="#map-properties"></a>Map Properties</h5><p>By default, the map size is 320 x 240 and change the layer amount to 3 or more if you desire. I will go over these options in more detail soon.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_1_map_properties.png" alt="Chapter_11_images/Chapter-11_1_map_properties.png"></p><h5 id="map-script"><a name="map-script" href="#map-script"></a>Map Script</h5><p>You can open the map script by right clicking on the map name in the directory or by going to this icon.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_2_map_script.png" alt="Chapter_11_images/Chapter-11_2_map_script.png"></p><h5 id="map-property-features"><a name="map-property-features" href="#map-property-features"></a>Map Property Features</h5><ol>
<li><p>One can change the description of the map. I changed it to <code>book map</code>.</p>
</li><li><p>The <code>size</code> is how large the map will to be. By default it is 320 x 240.</p>
</li><li><p>The <code>layers</code> in Solarus are super amazing. One is not limited to 2 or 3 layers, many layers can be added. I set it to 0 to 3 layers. </p>
</li><li><p>One can <code>set a world</code>. Your maps are organized under the world name.</p>
</li><li><p>The <code>floors</code> are as the name suggests. They are the floors on your map </p>
</li><li><p>The location is the coordinates where your map is located in the world.</p>
</li><li><p>One can pick the tileset to use from the <code>tileset</code> option.</p>
</li><li><p>The <code>music</code> section is where one can set default music for the map.</p>
</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_3_map_features.png" alt="Chapter_11_images/Chapter-11_3_map_features.png"></p><h5 id="map-drag"><a name="map-drag" href="#map-drag"></a>Map Drag</h5><p>One can drag the edges of the map editor for a better view of the tileset.</p><p>Clicking and dragging the left edge.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_4_drag_1.png" alt="Chapter_11_images/Chapter-11_4_drag_1.png"></p><p>Clicking and dragging up.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_4_drag_2.png" alt="Chapter_11_images/Chapter-11_4_drag_2.png"></p><p>Dragging up results in this.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_4_drag_3.png" alt="Chapter_11_images/Chapter-11_4_drag_3.png"></p><p>Click and drag the right edge.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_4_drag_4.png" alt="Chapter_11_images/Chapter-11_4_drag_4.png"></p><h5 id="map-zoom"><a name="map-zoom" href="#map-zoom"></a>Map Zoom</h5><p>You can zoom into the map with CTRL + Z or with the zoom icon. You can do the same where you select the tiles for the map.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_5_Zoom_CTRL_Z.png" alt="Chapter_11_images/Chapter-11_5_Zoom_CTRL_Z.png"></p><h5 id="selecting-map-tiles"><a name="selecting-map-tiles" href="#selecting-map-tiles"></a>Selecting Map Tiles</h5><p>Click on the tile that has already been made in the tileset editor.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_6_select_tile.png" alt="Chapter_11_images/Chapter-11_6_select_tile.pn"></p><h5 id="dragging-map-tile"><a name="dragging-map-tile" href="#dragging-map-tile"></a>Dragging Map Tile</h5><p>Move the tile over to the map, click (Hold the click), and drag. One can resize it with the <code>R</code> shortcut key.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_7_right_click_hold_drag.png" alt="Chapter_11_images/Chapter-11_7_right_click_hold_drag.png"></p><h5 id="bring-to-back-map-tile"><a name="bring-to-back-map-tile" href="#bring-to-back-map-tile"></a>Bring to Back Map Tile</h5><p>As one can see in the image, the stone tile is overlapping the brick wall.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_8_Tile_blocking_brick_wall.png" alt="Chapter_11_images/Chapter-11_8_Tile_blocking_brick_wall.png"></p><p>One needs to right click on the tile and select <code>bring to back</code> or click the shortcut key <code>B</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_9_Bring_Back.png" alt="Chapter_11_images/Chapter-11_9_Bring_Back.png"></p><h5 id="change-map-tile-layer"><a name="change-map-tile-layer" href="#change-map-tile-layer"></a>Change Map Tile Layer</h5><p>As one can see, the bookcase is on top of the table because they are both on layer 0.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_10_Book_case_on_table.png" alt="Chapter_11_images/Chapter-11_10_Book_case_on_table.png"></p><p>The tableâ€™s layer needs to changed from layer 0 to layer 1. This can be done by right clicking on the table.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_11_layer_0_to_layer_1.png" alt="Lesson_images/Chapter_11_images/Chapter-11_11_layer_0_to_layer_1.png"></p><h5 id="selecting-multiple-tiles"><a name="selecting-multiple-tiles" href="#selecting-multiple-tiles"></a>Selecting Multiple Tiles</h5><p>Selecting multiple tiles is very useful for when one needs to move many objects around. This can be done by pressing CTRL + dragging the mouse.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_12_CTRL_Drag_select_many.png" alt="Chapter_11_images/Chapter-11_12_CTRL_Drag_select_many.png"></p><h5 id="dynamic-tiles"><a name="dynamic-tiles" href="#dynamic-tiles"></a>Dynamic Tiles</h5><p>Dynamic tiles can be manipulated by script. For example, making water vanish. The main difference from a normal tile is that one can add a name.</p><p>One can convert a normal tile to a dynamic tile like this.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_13_dynamic_tile.png" alt="Chapter_11_images/Chapter-11_13_dynamic_tile.png"></p><p>Dynamic tile properties. One can get to this by selecting a tile and pressing <code>enter</code> or by right clicking and selecting <code>edit</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_14_dynamic_tile_Details_Make_Vanish_with_Script.png" alt="Chapter_11_images/Chapter-11_14_dynamic_tile_Details_Make_Vanish_with_Script.png"></p><p>Normal tile properties. One can get to this by selecting a tile and pressing <code>enter</code> or by right clicking and selecting <code>edit</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_15_normal_tile_properties.png" alt="Chapter_11_images/Chapter-11_15_normal_tile_properties.png"></p><h5 id="resizing-tiles"><a name="resizing-tiles" href="#resizing-tiles"></a>Resizing Tiles</h5><p>I mentioned resizing tiles before, but who does not like pictures? One can right click and select resize or by using the key shortcut <code>R</code>. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_16_Resize_R_key.png" alt="Chapter_11_images/Chapter-11_16_Resize_R_key.png"></p><h5 id="making-obstacles-vanish"><a name="making-obstacles-vanish" href="#making-obstacles-vanish"></a>Making Obstacles Vanish</h5><p>One can select the remove obstacle brick wall icon on the icon bar to make obstacles vanish. Anything that does block the playerâ€™s path is an obstacle. The brick wall, table, and bookcase were obstacles.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_17_RBrick_wall_icon_Obsticles_vanish.png" alt="Chapter_11_images/Chapter-11_17_RBrick_wall_icon_Obsticles_vanish.png"></p><h5 id="making-traversable-vanish"><a name="making-traversable-vanish" href="#making-traversable-vanish"></a>Making Traversable Vanish</h5><p>One can select the remove traversable grass icon on the icon bar to make traversable tiles vanish. Anything that does not block the playerâ€™s path is a traversable tile. The stone floor tile was traversable.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_18_traverable_vanish.png" alt="Chapter_11_images/Chapter-11_18_traverable_vanish.png"></p><h5 id="making-layer[num]-vanish"><a name="making-layer[num]-vanish" href="#making-layer[num]-vanish"></a>Making Layer[num] Vanish</h5><p>One can select the remove layer number icon on the icon bar to make layer numbers vanish. Everything, but the table in the images vanishes because I selected layer 0. The table is on layer 1.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_11_images/Chapter-11_19_show_hide_layers.png" alt="Chapter_11_images/Chapter-11_19_show_hide_layers.png"></p><h2 id="chapter-12-menus-and-window-options"><a name="chapter-12-menus-and-window-options" href="#chapter-12-menus-and-window-options"></a>Chapter 12 Menus and Window Options</h2><p><strong>Preview:</strong></p><p><code>Lessons &gt; Chapter_12 &gt; Chapter_12_menu_preview.gif</code></p><h3 id="window-options"><a name="window-options" href="#window-options"></a>Window Options</h3><p>The window is related to video. Not playing a video clip, but the window.</p><h5 id="video-mode"><a name="video-mode" href="#video-mode"></a>Video Mode</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_mode(&quot;video_mode&quot;)
</code></pre>">sol.video.set_mode(<span class="hljs-string">"video_mode"</span>)
</code></pre><p>There are a few options for the <code>video_mode</code>.</p><table>
<thead>
<tr>
<th>â€œvideo_modeâ€</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œnormalâ€ (default):</td>
<td style="text-align:left">The quest screen is unchanged. In windowed mode, the image is stretched by a factor of 2.</td>
</tr>
<tr>
<td>â€œscale2xâ€:</td>
<td style="text-align:left">The quest screen is scaled by a factor of 2 with the Scale2X algorithm.</td>
</tr>
<tr>
<td>â€œhq2xâ€:</td>
<td style="text-align:left">The quest screen is scaled by a factor of 2 with the hq2x algorithm.</td>
</tr>
<tr>
<td>â€œhq3xâ€:</td>
<td style="text-align:left">The quest screen is scaled by a factor of 3 with the hq3x algorithm.</td>
</tr>
<tr>
<td>â€œhq4xâ€:</td>
<td style="text-align:left">The quest screen is scaled by a factor of 4 with the hq4x algorithm.</td>
</tr>
</tbody>
</table><p><strong>Example:</strong></p><p>The â€œhq3x modeâ€ is bigger than the â€œnormalâ€ mode.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_mode(&quot;hq3x&quot;)
</code></pre>">sol.video.set_mode(<span class="hljs-string">"hq3x"</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_12_images/Chapter_12_1_hq3x.png" alt="Chapter_12_1_hq3x.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_mode(&quot;normal&quot;)
</code></pre>">sol.video.set_mode(<span class="hljs-string">"normal"</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_12_images/Chapter_12_2_normal.png" alt="Chapter_12_2_normal.png"></p><h5 id="fullscreen"><a name="fullscreen" href="#fullscreen"></a>Fullscreen</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_fullscreen(true/false)
</code></pre>">sol.video.set_fullscreen(<span class="hljs-keyword">true</span>/<span class="hljs-keyword">false</span>)
</code></pre><p>The screen is full at â€œtrueâ€ and default at â€œfalse.â€</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_fullscreen(true)
</code></pre>">sol.video.set_fullscreen(<span class="hljs-keyword">true</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_12_images/Chapter_12_3_fullscreen.png" alt="Chapter_12_3_fullscreen.png"></p><h5 id="cursor-visibility"><a name="cursor-visibility" href="#cursor-visibility"></a>Cursor Visibility</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_cursor_visible(true/false)
</code></pre>">sol.video.set_cursor_visible(<span class="hljs-keyword">true</span>/<span class="hljs-keyword">false</span>)
</code></pre><p>The cursor is the arrow on the screen that is moved with the mouse. Your cursor will not show if it is set to false.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_cursor_visible(false)
</code></pre>">sol.video.set_cursor_visible(<span class="hljs-keyword">false</span>)
</code></pre><h5 id="window-size"><a name="window-size" href="#window-size"></a>Window Size</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_window_size(width, height)
</code></pre>">sol.video.set_window_size(width, height)
</code></pre><p>Window size sets the dimensions of the window.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.set_window_size(500, 100)
</code></pre>">sol.video.set_window_size(<span class="hljs-number">500</span>, <span class="hljs-number">100</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_12_images/Chapter_12_4_window_size.png" alt="Chapter_12_4_window_size.png"></p><h5 id="default-window"><a name="default-window" href="#default-window"></a>Default Window</h5><p>This defaults the window to normal size.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.video.reset_window_size()
</code></pre>">sol.video.reset_window_size()
</code></pre><h3 id="menu"><a name="menu" href="#menu"></a>Menu</h3><p>Making a menu is quite simple. Menus are needed because one cannot call same parameter or context at the same time from different scripts. The first parameter or context would simply overwrite the newly called parameter or context. That is why menus are needed.</p><p><code>Context/parameter (game, sol.main, etc)</code></p><p><strong>In chapter_12.lua:</strong></p><p>All the functions use the menu name instead of sol.main or game. In this case the menu is called, â€œmenu.â€</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  function menu:on_draw(screen)

  end -- end of draw function
</code></pre>">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:on_draw</span><span class="hljs-params">(screen)</span></span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>
</code></pre><p>Instead of:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  function sol.main:on_draw(screen)

  end -- end of draw function
</code></pre>">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>
</code></pre><p>or</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  function game:on_draw(screen)

  end -- end of draw function
</code></pre>">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_draw</span><span class="hljs-params">(screen)</span></span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>
</code></pre><p>Example:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--A table or the require loading function
local menu = {}

function menu:button_menu(game)

  --Function menu for drawing or showing images
  function menu:on_draw(screen)

  end -- end of draw function
end

return menu
</code></pre>"><span class="hljs-comment">--A table or the require loading function</span>
<span class="hljs-keyword">local</span> menu = {}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:button_menu</span><span class="hljs-params">(game)</span></span>

  <span class="hljs-comment">--Function menu for drawing or showing images</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:on_draw</span><span class="hljs-params">(screen)</span></span>

  <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> menu
</code></pre><h3 id="menu-function"><a name="menu-function" href="#menu-function"></a>Menu function</h3><p>As you saw in the example above there is a function called <code>menu:button_menu(game)</code>. That function will be placed in the <code>game_manger.lua</code>. </p><p>You can name the function any way you want after â€œmenu:â€ <code>menu:name_you_want(pass parameter)</code>.</p><h3 id="menu:-starting-and-stopping"><a name="menu:-starting-and-stopping" href="#menu:-starting-and-stopping"></a>Menu: Starting and Stopping</h3><h5 id="starting-menu"><a name="starting-menu" href="#starting-menu"></a>Starting Menu</h5><pre><code data-origin="<pre><code>sol.menu.start(context/parameter, menu_name, on_top(true/false))
</code></pre>">sol.menu.start(context/parameter, menu_name, on_top(true/false))
</code></pre><p>Context/parameter (map, game or table)</p><p>Example:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.menu.start(game, menu, true)
</code></pre>">sol.menu.start(game, menu, <span class="hljs-keyword">true</span>)
</code></pre><h5 id="stopping-menu"><a name="stopping-menu" href="#stopping-menu"></a>Stopping Menu</h5><pre><code data-origin="<pre><code>sol.menu.stop(menu_name)
</code></pre>">sol.menu.stop(menu_name)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.menu.stop(menu)
</code></pre>">sol.menu.stop(menu)
</code></pre><p><strong>Game_manger.lua - Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local menu = require(&quot;scripts/chapter_12.lua&quot;)

function game_manager:start_game()

--Starting required script
menu:button_menu(game)

function game:on_key_pressed(key)
  if key == &quot;m&quot; then  
    sol.menu.start(game, menu)
    print(&quot;m&quot;)
  end

  if key == &quot;s&quot; then
    sol.menu.stop(menu)
  end
end
  game:start()
end
</code></pre>"><span class="hljs-keyword">local</span> menu = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/chapter_12.lua"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:start_game</span><span class="hljs-params">()</span></span>

<span class="hljs-comment">--Starting required script</span>
menu:button_menu(game)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"m"</span> <span class="hljs-keyword">then</span>  
    sol.menu.start(game, menu)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"m"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"s"</span> <span class="hljs-keyword">then</span>
    sol.menu.stop(menu)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
  game:start()
<span class="hljs-keyword">end</span>
</code></pre><h5 id="menu-script-example"><a name="menu-script-example" href="#menu-script-example"></a>Menu Script Example</h5><p><code>Game_manager.lua</code></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local game_manager = {}
local on = true

local menu = require(&quot;scripts/chapter_12.lua&quot;)
local initial_game = require(&quot;scripts/initial_game&quot;)
require(&quot;scripts/menus/alttp_dialog_box&quot;)

-- Starts the game from the given savegame file,
-- initializing it if necessary.

function game_manager:start_game()
  local exists = sol.game.exists(&quot;save1.dat&quot;)
  local game = sol.game.load(&quot;save1.dat&quot;)
  if not exists then
    -- Initialize a new savegame.
    game:set_max_life(12)
    game:set_life(game:get_max_life())
    game:set_ability(&quot;lift&quot;, 2)
    game:set_ability(&quot;sword&quot;, 1)
  end

menu:button_menu(game)

function game:on_key_pressed(key)
  if key == &quot;m&quot; then  

    if on == true then
      sol.menu.start(game, menu)
      print(&quot;m&quot;)
      on = false
    end
  end

  if key == &quot;s&quot; then
    sol.menu.stop(menu)
    on = true
  end
end


  game:start()

  local hero = game:get_hero()
  hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
end

return game_manager
</code></pre>"><span class="hljs-keyword">local</span> game_manager = {}
<span class="hljs-keyword">local</span> on = <span class="hljs-keyword">true</span>

<span class="hljs-keyword">local</span> menu = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/chapter_12.lua"</span>)
<span class="hljs-keyword">local</span> initial_game = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/initial_game"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/alttp_dialog_box"</span>)

<span class="hljs-comment">-- Starts the game from the given savegame file,</span>
<span class="hljs-comment">-- initializing it if necessary.</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:start_game</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">local</span> exists = sol.game.exists(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">local</span> game = sol.game.<span class="hljs-built_in">load</span>(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exists <span class="hljs-keyword">then</span>
    <span class="hljs-comment">-- Initialize a new savegame.</span>
    game:set_max_life(<span class="hljs-number">12</span>)
    game:set_life(game:get_max_life())
    game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">2</span>)
    game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">1</span>)
  <span class="hljs-keyword">end</span>

menu:button_menu(game)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"m"</span> <span class="hljs-keyword">then</span>  

    <span class="hljs-keyword">if</span> on == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
      sol.menu.start(game, menu)
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"m"</span>)
      on = <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"s"</span> <span class="hljs-keyword">then</span>
    sol.menu.stop(menu)
    on = <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>


  game:start()

  <span class="hljs-keyword">local</span> hero = game:get_hero()
  hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> game_manager
</code></pre><p><code>Chapter_12.lua</code></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--[[
-------------
Instructions:
-------------
==================================================================================
Press keys &quot;up&quot; and &quot;down&quot;
==================================================================================
--]]

local menu = {}

function menu:button_menu(game)

--Creating surfaces for the images and loading in the images.
local overlay = sol.surface.create (&quot;overlay.png&quot;)
local button_menu = sol.surface.create (&quot;menu.png&quot;)
local down_up = 0
local direction = 0

--Function for drawing or showing images
function menu:on_draw(screen)
   overlay:draw(screen,0,down_up)
   button_menu:draw(screen)
end -- end of draw function

--Solarus key pressing function
function menu:on_key_pressed(key)
--Pause the game
game:set_paused(true)

if key == &quot;up&quot; then
  if direction &amp;gt; 0 then
    direction = direction - 1
    down_up = down_up - 27 - 0.7
    print(&quot;UP: &quot;..direction..&quot; down_up: &quot;..down_up)
  end
end

if key == &quot;down&quot; then
  if direction &amp;lt; 6 then
    direction = direction + 1
    down_up = down_up + 27 + 0.7
    print(&quot;Down: &quot;..direction..&quot; down_up: &quot;..down_up)
  end
end

if key == &quot;e&quot; then
  if direction == 0 then
    print(&quot;Item Menu ON!&quot;)
  end

  if direction == 1 then
    print(&quot;Skills Menu ON!&quot;)
  end

  if direction == 2 then
    print(&quot;Equipment Menu ON!&quot;)
  end

  if direction == 3 then
    print(&quot;Status Menu ON!&quot;)
  end

  if direction == 4 then
    print(&quot;Formation Menu ON!&quot;)
  end

  if direction == 5 then
    print(&quot;Save Menu ON!&quot;)
  end

  if direction == 6 then
    print(&quot;Logout Menu ON!&quot;)
  end
end

end -- end of key press function



end --end of button menu function

return menu
</code></pre>"><span class="hljs-comment">--[[
-------------
Instructions:
-------------
==================================================================================
Press keys "up" and "down"
==================================================================================
--]]</span>

<span class="hljs-keyword">local</span> menu = {}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:button_menu</span><span class="hljs-params">(game)</span></span>

<span class="hljs-comment">--Creating surfaces for the images and loading in the images.</span>
<span class="hljs-keyword">local</span> overlay = sol.surface.create (<span class="hljs-string">"overlay.png"</span>)
<span class="hljs-keyword">local</span> button_menu = sol.surface.create (<span class="hljs-string">"menu.png"</span>)
<span class="hljs-keyword">local</span> down_up = <span class="hljs-number">0</span>
<span class="hljs-keyword">local</span> direction = <span class="hljs-number">0</span>

<span class="hljs-comment">--Function for drawing or showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:on_draw</span><span class="hljs-params">(screen)</span></span>
   overlay:draw(screen,<span class="hljs-number">0</span>,down_up)
   button_menu:draw(screen)
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of draw function</span>

<span class="hljs-comment">--Solarus key pressing function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">menu:on_key_pressed</span><span class="hljs-params">(key)</span></span>
<span class="hljs-comment">--Pause the game</span>
game:set_paused(<span class="hljs-keyword">true</span>)

<span class="hljs-keyword">if</span> key == <span class="hljs-string">"up"</span> <span class="hljs-keyword">then</span>
  <span class="hljs-keyword">if</span> direction &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    direction = direction - <span class="hljs-number">1</span>
    down_up = down_up - <span class="hljs-number">27</span> - <span class="hljs-number">0.7</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"UP: "</span>..direction..<span class="hljs-string">" down_up: "</span>..down_up)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> key == <span class="hljs-string">"down"</span> <span class="hljs-keyword">then</span>
  <span class="hljs-keyword">if</span> direction &lt; <span class="hljs-number">6</span> <span class="hljs-keyword">then</span>
    direction = direction + <span class="hljs-number">1</span>
    down_up = down_up + <span class="hljs-number">27</span> + <span class="hljs-number">0.7</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Down: "</span>..direction..<span class="hljs-string">" down_up: "</span>..down_up)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> key == <span class="hljs-string">"e"</span> <span class="hljs-keyword">then</span>
  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Item Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Skills Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Equipment Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Status Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">4</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Formation Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">5</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Save Menu ON!"</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">6</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Logout Menu ON!"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of key press function</span>



<span class="hljs-keyword">end</span> <span class="hljs-comment">--end of button menu function</span>

<span class="hljs-keyword">return</span> menu
</code></pre><p><strong>Documentation:</strong></p><p>Check the <a href="http://www.solarus-games.org/doc/latest/">documentation</a> for more information on menus.</p><p><strong>Menu Project Sample:</strong><br><code>Lessons &gt; Chapter_12 &gt; Chapter_12_menu.zip</code></p><h2 id="chapter-13:-entities"><a name="chapter-13:-entities" href="#chapter-13:-entities"></a>Chapter 13: Entities</h2><p>You may use the <code>inside_store</code> map in the samples (<code>Lessons &gt; Chapter_13_Entities &gt; inside_store.zip</code>) to help you with this learning process. </p><p>The inside store contains pre-made maps. These can be selected, copied, and pasted to your maps to help you do the entity chapter. Also, there are graphics included in the samples.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/1_inside_store_to_Map_2.png" alt="1_inside_store_to_Map.png"></p><h3 id="get_()-&amp;-related"><a name="get_()-&amp;-related" href="#get_()-&amp;-related"></a>get_() &amp; related</h3><p>If you have not already noticed, then there are ways to get certain functions in scripts.</p><p>For a map script to use map functions it needs <code>local map = ...</code> and the map can get game functions with <code>map:get_game()</code>.</p><p>When simply loading external scripts one needs <code>local game = ...</code>to use game functions in it, but it is better to use <code>require()</code> for external scripts and pass the game through a function like <code>function game_over_menu:start(game)</code>. One can use  <code>local map = game:get_map()</code>to get the map functions in external scripts.</p><p>I will use the map script as an example .</p><p><strong>Some ways to get certain functions are:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>get_map()
get_sprite()
get_game()
get_hero()
</code></pre>">get_map()
get_sprite()
get_game()
get_hero()
</code></pre><h5 id="map:get_game()"><a name="map:get_game()" href="#map:get_game()"></a>map:get_game()</h5><p>If you wanted to use game functions on a map, then you use the following line of code.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local game = map:get_game()
</code></pre>"><span class="hljs-keyword">local</span> game = map:get_game()
</code></pre><p>You can then use a function like:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_starting_location(&quot;Map_4&quot;, &quot;starting_destination&quot;) -- Starting location.`
</code></pre>">game:set_starting_location(<span class="hljs-string">"Map_4"</span>, <span class="hljs-string">"starting_destination"</span>) <span class="hljs-comment">-- Starting location.`</span>
</code></pre><h5 id="map:get_hero()"><a name="map:get_hero()" href="#map:get_hero()"></a>map:get_hero()</h5><p>If you wanted to use hero functions on a map, then you use the following line of code.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local hero = map:get_hero()
</code></pre>"><span class="hljs-keyword">local</span> hero = map:get_hero()
</code></pre><p>You can then use a function like:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hero:set_animation(&quot;dead&quot;) -- calls an animation you made for the hero.
</code></pre>">hero:set_animation(<span class="hljs-string">"dead"</span>) <span class="hljs-comment">-- calls an animation you made for the hero.</span>
</code></pre><h5 id="entity:get_sprite()"><a name="entity:get_sprite()" href="#entity:get_sprite()"></a>entity:get_sprite()</h5><p><code>entity:get_sprite()</code> is a little different. You mostly use it when using <a href="http://www.solarus-games.org/doc/latest/lua_api_sprite.html#lua_api_sprite_methods">sprites methods</a>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>entity_name:get_sprite():set_animation(&quot;animation_name&quot;)
</code></pre>">entity_name:get_sprite():set_animation(<span class="hljs-string">"animation_name"</span>)
</code></pre><h3 id="entity-position-&amp;-name"><a name="entity-position-&amp;-name" href="#entity-position-&amp;-name"></a>Entity Position &amp; Name</h3><p>You can hover over entities to see their names and position.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/Chapter_13_hover_entity_name.png" alt="Chapter_13_hover_entity_name.png"></p><h3 id="types-of-entities"><a name="types-of-entities" href="#types-of-entities"></a>Types of entities</h3><p>Here are the existing types of entities.</p><table>
<thead>
<tr>
<th>Entity</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hero</td>
<td style="text-align:left">The character controlled by the player.</td>
</tr>
<tr>
<td>Tile</td>
<td style="text-align:left">A small brick that composes a piece of the map, with a pattern picked from the tileset.</td>
</tr>
<tr>
<td>Dynamic tile</td>
<td style="text-align:left">A special tile that can be enabled or disabled dynamically (usual tiles are optimized away at runtime).</td>
</tr>
<tr>
<td>Teletransporter</td>
<td style="text-align:left">When walking on it, the hero is transported somewhere, possibly on the same map or another map.</td>
</tr>
<tr>
<td>Destination</td>
<td style="text-align:left">A possible destination place for teletransporters.</td>
</tr>
<tr>
<td>Pickable treasure</td>
<td style="text-align:left">A treasure placed on the ground and that the hero can pick up.</td>
</tr>
<tr>
<td>Destructible object</td>
<td style="text-align:left">An entity that can be cut or lifted by hero, and that may hide a pickable treasure.</td>
</tr>
<tr>
<td>Carried object</td>
<td style="text-align:left">A destructible object lifted and carried by the hero.</td>
</tr>
<tr>
<td>Chest</td>
<td style="text-align:left">A chest that contains a treasure.</td>
</tr>
<tr>
<td>Shop treasure</td>
<td style="text-align:left">A treasure that the hero can buy for a price.</td>
</tr>
<tr>
<td>Enemy</td>
<td style="text-align:left">A bad guy (possibly a boss) who may also drop a pickable treasure when killed.</td>
</tr>
<tr>
<td>Non-playing character (NPC)</td>
<td style="text-align:left">Somebody or something the hero can interact with.</td>
</tr>
<tr>
<td>Block</td>
<td style="text-align:left">An entity that the hero can push or pull.</td>
</tr>
<tr>
<td>Jumper</td>
<td style="text-align:left">When walking on it, the hero jumps into a direction.</td>
</tr>
<tr>
<td>Switch</td>
<td style="text-align:left">A button or another mechanism that the hero can activate.</td>
</tr>
<tr>
<td>Sensor</td>
<td style="text-align:left">An invisible detector that detects the presence of the hero.</td>
</tr>
<tr>
<td>Separator</td>
<td style="text-align:left">An horizontal or vertical separation between two parts of the map.</td>
</tr>
<tr>
<td>Wall</td>
<td style="text-align:left">An invisible object that stops some kinds of entities.</td>
</tr>
<tr>
<td>Crystal</td>
<td style="text-align:left">A switch that lowers or raises crystal blocks.</td>
</tr>
<tr>
<td>Crystal block</td>
<td style="text-align:left">A low wall that can be lowered (travserable) or raised (obstacle) using a crystal.</td>
</tr>
<tr>
<td>Stream</td>
<td style="text-align:left">When walking on it, the hero automatically moves into a direction.</td>
</tr>
<tr>
<td>Door</td>
<td style="text-align:left">A door to open with an equipment item or another condition.</td>
</tr>
<tr>
<td>Stairs</td>
<td style="text-align:left">Stairs between two maps or to a platform of a single map.</td>
</tr>
<tr>
<td>Bomb</td>
<td style="text-align:left">A bomb that will explode after a few seconds and that may be lifted by the hero.</td>
</tr>
<tr>
<td>Explosion</td>
<td style="text-align:left">An explosion that can hurt the hero and the enemies.</td>
</tr>
<tr>
<td>Fire</td>
<td style="text-align:left">A flame that can hurt enemies and interact with other entities.</td>
</tr>
<tr>
<td>Arrow</td>
<td style="text-align:left">An arrow shot by the bow.</td>
</tr>
<tr>
<td>Hookshot</td>
<td style="text-align:left">A hookshot shot by the hero.</td>
</tr>
<tr>
<td>Boomerang</td>
<td style="text-align:left">A boomerang shot by the hero.</td>
</tr>
<tr>
<td>Camera</td>
<td style="text-align:left">A rectangle that determines the visible area of the map.</td>
</tr>
<tr>
<td>Custom entity</td>
<td style="text-align:left">An entity fully controlled by your Lua scripts.</td>
</tr>
</tbody>
</table><h3 id="destination-entity"><a name="destination-entity" href="#destination-entity"></a>Destination Entity</h3><h5 id="setting-up-maps-and-starting-location"><a name="setting-up-maps-and-starting-location" href="#setting-up-maps-and-starting-location"></a>Setting up Maps and Starting Location</h5><p>In <code>game_manager.lua</code> there is a game script for the starting location. It is set to <code>Map_1</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    game:set_starting_location(&quot;Map_1&quot;) -- Starting location.
</code></pre>">    game:set_starting_location(<span class="hljs-string">"Map_1"</span>) <span class="hljs-comment">-- Starting location.</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/0_Strating_location.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/0_Starting_location.png"></p><p><code>Map_1</code> is a map that I created. You can name it that or something else.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/2_New_map.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/2_New_map.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/3_map_name_1-2.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/3_map_name_1-2.png"></p><p>Make a map called <code>Map_2</code> as well.</p><h5 id="inside-store"><a name="inside-store" href="#inside-store"></a>Inside Store</h5><ol>
<li>Copy the red mat floor room to <code>Map_1</code>.</li><li>Copy the gray tiled floor room to <code>Map_2</code>.</li></ol><p>You copy it by holding down the left mouse button and dragging or moving the mouse to highlight.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/4_inside_store_L-click_drag_copy_map_1-2.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/4_inside_store_L-click_drag_copy_map_1-2.png"></p><h5 id="add-destination-entity"><a name="add-destination-entity" href="#add-destination-entity"></a>Add Destination Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/5_add_Destination_entity.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/5_add_Destination_entity.png"></p><h5 id="edit-destination-entity-options"><a name="edit-destination-entity-options" href="#edit-destination-entity-options"></a>Edit Destination Entity Options</h5><p>Double click on the destination entity in order to bring up the edit menu.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/6_double_click_name_layer_pos_direction_update_default.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/6_double_click_name_layer_pos_direction_update_default.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons and for Teletransporters.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Direction</td>
<td style="text-align:left">The direction is important because it tells Solarus which way you want the player character to face when teletransporting to a new map. <br><br>The options are: <br><br>- Up <br><br>- Down <br><br> - Left <br><br> - Right</td>
</tr>
<tr>
<td style="text-align:left">Sprite</td>
<td style="text-align:left">You can pick a sprite for the Destination Entity.</td>
</tr>
<tr>
<td style="text-align:left">Update Starting Location</td>
<td style="text-align:left">You can set when the destination entity updates and it is only possible when the destination entity has a name. You can leave it default, â€œWhen the world changes,â€ it is fine most of the time. â€œNeverâ€ works too, but for scripting reasons you might want to update the destination entity. <br><br>There are three options: <br><br>- When the world changes <br><br> - Always <br><br> - Never</td>
</tr>
<tr>
<td style="text-align:left">Default</td>
<td style="text-align:left">If there are more than one destination entity on the map, then the default one is where the player will begin at.</td>
</tr>
</tbody>
</table><h3 id="teletransporter-entity"><a name="teletransporter-entity" href="#teletransporter-entity"></a>Teletransporter Entity</h3><h5 id="add-teletransporter"><a name="add-teletransporter" href="#add-teletransporter"></a>Add Teletransporter</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/7_Teletransporter_add.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/7_Teletransporter_add.png"></p><h5 id="edit-teletransporter-entity-options"><a name="edit-teletransporter-entity-options" href="#edit-teletransporter-entity-options"></a>Edit Teletransporter Entity Options</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/8_teletransporter_name_pos_layer_size_sprite_play_fade_Desination.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/8_teletransporter_name_pos_layer_size_sprite_play_fade_Desination.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Size</td>
<td style="text-align:left">You can resize the Teletransporter with the <code>r</code> key. This is use for when there is a long gate entrance. You can resize it instead of adding many teletransporters. <br><br><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/12_resize_teletransporter.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/12_resize_teletransporter.png"></td>
</tr>
<tr>
<td style="text-align:left">Sprite</td>
<td style="text-align:left">You can pick a sprite for the Teletransporter Entity.</td>
</tr>
<tr>
<td style="text-align:left">Play a Sound</td>
<td style="text-align:left">When the Teletransporter is touched a sound is played.</td>
</tr>
<tr>
<td style="text-align:left">Transition</td>
<td style="text-align:left">A movement, development, or evolution from one form, stage, or style to another.<br><br>There are 3 transition options: <br><br> - Immediate: No fade or anything. Straight to next map. <br><br> - Fade in/out: Turns black and slowing  vanishes on next map. <br><br> - Scrolling: Rolling to the next map.</td>
</tr>
<tr>
<td style="text-align:left">Destination Map</td>
<td style="text-align:left">Destination map is the map that you are going to next. In the sample it is <code>Map_2</code>.</td>
</tr>
<tr>
<td style="text-align:left">Destination</td>
<td style="text-align:left">This is the Destination Entity name. In the sample it is <code>Map_2_destination</code> for <code>Map_2</code>. Also, it is <code>destination_1</code> for <code>Map_1</code>.</td>
</tr>
</tbody>
</table><p><code>Map_1</code> to <code>Map_2</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/9_Map_destination.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/9_Map_destination.png"></p><p><code>Map_2</code> destination entity name</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/10_Name_map_2_destination_entity.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/10_Name_map_2_destination_entity.png"></p><p><code>Map_1</code> to <code>Map_2_destination</code> entity name</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/1_Destination_Teletransporter%20entities/11_Teletransporter_map1_pick_map2_destination_name.png" alt="Chapter_13_images/1_Destination_Teletransporter%20entities/11_Teletransporter_map1_pick_map2_destination_name.png"></p><h3 id="pickable-entity"><a name="pickable-entity" href="#pickable-entity"></a>Pickable Entity</h3><h5 id="add-pickable-entity"><a name="add-pickable-entity" href="#add-pickable-entity"></a>Add Pickable Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/2_pickable_entity/1_pickable_entity_add.png" alt="Chapter_13_images/2_pickable_entity/1_pickable_entity_add.png"></p><h5 id="edit-pickable-entity-options"><a name="edit-pickable-entity-options" href="#edit-pickable-entity-options"></a>Edit Pickable Entity Options</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/2_pickable_entity/2_double_click_gem.png" alt="Chapter_13_images/2_pickable_entity/2_double_click_gem.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Treasure</td>
<td style="text-align:left">This is an item made in the item directory. <br><br> <img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/2_pickable_entity/5_item_script_fix.png" alt="Chapter_13_images/2_pickable_entity/5_item_script_fix.png"></td>
</tr>
<tr>
<td style="text-align:left">Variant</td>
<td style="text-align:left">A variant is the type. Most of the time the type is a different color and worth a higher value. For example, a blue gem for variant 2. <br><br> <img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/2_pickable_entity/3_gem_variant_2.png" alt="Chapter_13_images/2_pickable_entity/3_gem_variant_2.png"></td>
</tr>
<tr>
<td style="text-align:left">Save State</td>
<td style="text-align:left">You can save whether the item has been picked up or not. Otherwise, it would appear again.</td>
</tr>
</tbody>
</table><h5 id="name-connection"><a name="name-connection" href="#name-connection"></a>Name Connection</h5><p>The name of the animation is connected to the item connected to the name of the animation. In this case the name is <code>gem</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/2_pickable_entity/4_gem_variants.png" alt="Chapter_13_images/2_pickable_entity/4_gem_variants.png"></p><h5 id="item-script"><a name="item-script" href="#item-script"></a>Item Script</h5><p>Double click on the item gem and the script will appear in a tab.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local item = ...

function item:on_created()

  -- Define the properties of rupees.
  self:set_shadow(&quot;small&quot;)
  self:set_can_disappear(true)
  self:set_brandish_when_picked(false)
  self:set_sound_when_picked(&quot;picked_rupee&quot;)
end

function item:on_obtaining(variant, savegame_variable)

  local amounts = { 1, 5, 20, 50, 100, 300 }
  local amount = amounts[variant]

  item:get_game():add_money(amount)
end
</code></pre>"><span class="hljs-keyword">local</span> item = ...

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_shadow(<span class="hljs-string">"small"</span>)
  self:set_can_disappear(<span class="hljs-keyword">true</span>)
  self:set_brandish_when_picked(<span class="hljs-keyword">false</span>)
  self:set_sound_when_picked(<span class="hljs-string">"picked_rupee"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">(variant, savegame_variable)</span></span>

  <span class="hljs-keyword">local</span> amounts = { <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">300</span> }
  <span class="hljs-keyword">local</span> amount = amounts[variant]

  item:get_game():add_money(amount)
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Breaking down the Script:</strong></p><p>Most of this I do not have to explain because it is obvious. I will explain it all later though in a table.</p><p><code>self</code> refers to the item. For example, <code>Self(Gem):set_shadow("small")</code>.</p><p><code>Brandish</code> is the sound that is normally made when opening a chest. For example, Da da ta daa! You know what I am talking about if you have played Zelda.</p><h3 id="destructible-entity"><a name="destructible-entity" href="#destructible-entity"></a>Destructible Entity</h3><h5 id="inside-store-to-map"><a name="inside-store-to-map" href="#inside-store-to-map"></a>Inside Store to Map</h5><p>Create a map called <code>Map_3</code> and copy this room from the inside store to the map.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/3_Destructible/0_inside_store_to_map3.png" alt="Chapter_13_images/3_Destructible/0_inside_store_to_map3.png"></p><h5 id="add-destructible-entity"><a name="add-destructible-entity" href="#add-destructible-entity"></a>Add Destructible Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/3_Destructible/1_Destructible_entity_add.png" alt="Chapter_13_images/3_Destructible/1_Destructible_entity_add.png"></p><h5 id="edit-destructible-entity-options"><a name="edit-destructible-entity-options" href="#edit-destructible-entity-options"></a>Edit Destructible Entity Options</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/3_Destructible/2_Double_click_destructible_entity.png" alt="Chapter_13_images/3_Destructible/2_Double_click_destructible_entity.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Sprite</td>
<td style="text-align:left">Add the sprite that you want the entity to look like.</td>
</tr>
<tr>
<td style="text-align:left">Treasure</td>
<td style="text-align:left">A treasure appears When the destructible entity is lifted.</td>
</tr>
<tr>
<td style="text-align:left">Variant</td>
<td style="text-align:left">A variant is the type. Most of the time the type is a different color and worth a higher value.</td>
</tr>
<tr>
<td style="text-align:left">Save State</td>
<td style="text-align:left">You can save whether the item has been picked up or not. Otherwise, it would appear again.</td>
</tr>
<tr>
<td style="text-align:left">Play a sound when destroyed</td>
<td style="text-align:left">A sound you want to be played when the entity breaks.</td>
</tr>
<tr>
<td style="text-align:left">Weight</td>
<td style="text-align:left">The weight is related to a game type. <br><br> <code>game:set_ability(ability_name, level)</code> <br><br> The level and ability can be set from there. In this case it would be the â€œliftâ€ ability. More information about this will be added in the game type chapter. It will include an example of this.</td>
</tr>
<tr>
<td style="text-align:left">Cutting</td>
<td style="text-align:left">It can be cut with the sword if the check box is checked.</td>
</tr>
<tr>
<td style="text-align:left">Exploding</td>
<td style="text-align:left">The destructible will explode like a bomb if thrown if the check box is checked.</td>
</tr>
<tr>
<td style="text-align:left">Regeneration</td>
<td style="text-align:left">The entity will appear again after like 5 seconds by default if the check box is checked.</td>
</tr>
<tr>
<td style="text-align:left">Damage on enemies</td>
<td style="text-align:left">Cause damage to enemies. Enter te damage amount.</td>
</tr>
<tr>
<td style="text-align:left">Set a special ground</td>
<td style="text-align:left">The destructible entity can become a special ground. For example, picking â€œpricklesâ€ will hurt the hero when bumping into the entity.</td>
</tr>
</tbody>
</table><h5 id="destructible-entity-sprite"><a name="destructible-entity-sprite" href="#destructible-entity-sprite"></a>Destructible Entity Sprite</h5><p>You can pick up and throw the entity by just adding the sprite and not changing any options.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/3_Destructible/3_stone.png" alt="Chapter_13_images/3_Destructible/3_stone.png"></p><h3 id="chest-entity"><a name="chest-entity" href="#chest-entity"></a>Chest Entity</h3><h5 id="add-a-chest-entity"><a name="add-a-chest-entity" href="#add-a-chest-entity"></a>Add a Chest Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/4_Chest/1_add_chest.png" alt="Chapter_13_images/4_Chest/1_add_chest.png"></p><h5 id="edit-chest-entity-options"><a name="edit-chest-entity-options" href="#edit-chest-entity-options"></a>Edit Chest Entity Options</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/4_Chest/2_edit_chest.png" alt="Chapter_13_images/4_Chest/2_edit_chest.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Sprite</td>
<td style="text-align:left">Add the sprite that you want the entity to look like.</td>
</tr>
<tr>
<td style="text-align:left">Treasure</td>
<td style="text-align:left">A treasure appears When the destructible entity is lifted.</td>
</tr>
<tr>
<td style="text-align:left">Variant</td>
<td style="text-align:left">A variant is the type. Most of the time the type is a different color and worth a higher value.</td>
</tr>
<tr>
<td style="text-align:left">Save State</td>
<td style="text-align:left">You can save whether the item has been picked up or not. Otherwise, it would appear again.</td>
</tr>
<tr>
<td style="text-align:left">Opening Mode</td>
<td style="text-align:left">You can save an item in a variable and you can require an item to open the chest. For example, a key.</td>
</tr>
<tr>
<td style="text-align:left">Reset/decrement</td>
<td style="text-align:left">Decreases an item amount instead of increasing.</td>
</tr>
<tr>
<td style="text-align:left">Show a dialog</td>
<td style="text-align:left">Add a dialog for when the chest fails to open. For example, when you do not have the key.</td>
</tr>
</tbody>
</table><h3 id="jumper-entity"><a name="jumper-entity" href="#jumper-entity"></a>Jumper Entity</h3><h5 id="add-jumper-entity"><a name="add-jumper-entity" href="#add-jumper-entity"></a>Add Jumper Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/5_Jumper/1_add_jumper.png" alt="Chapter_13_images/5_Jumper/1_add_jumper.png"></p><h5 id="resize-jumper"><a name="resize-jumper" href="#resize-jumper"></a>Resize Jumper</h5><p>Use the <code>r</code> key to resize the jumper.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/5_Jumper/2_resize_jumper.png" alt="Chapter_13_images/5_Jumper/2_resize_jumper.png"></p><h5 id="edit-jumper-entity-options"><a name="edit-jumper-entity-options" href="#edit-jumper-entity-options"></a>Edit Jumper Entity Options</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/5_Jumper/3_edit_jumper.png" alt="Chapter_13_images/5_Jumper/3_edit_jumper.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Option</th>
<th style="text-align:left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:left">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:left">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:left">Size</td>
<td style="text-align:left">The jumper Entity can be resized with the <code>r</code> key or manually from the edit menu.</td>
</tr>
<tr>
<td style="text-align:left">Direction</td>
<td style="text-align:left">As you can see in the image, the jumper can be set in many directions. <br><br>They are: <br><br>- Up <br><br>- Down <br><br>- Left <br><br>- Right <br><br>- Left-down <br><br>- Right-down <br><br>- Left-up <br><br>- Right-up</td>
</tr>
<tr>
<td style="text-align:left">Jump length</td>
<td style="text-align:left">This is how far the sprite can jump. A common mistake is that the player gets stuck in a wall when jumping. Most of the time the jump distance is not long enough in those cases.</td>
</tr>
</tbody>
</table><h5 id="jump-walls"><a name="jump-walls" href="#jump-walls"></a>Jump Walls</h5><p>The player character now can jump over the wall at the four jumper entity locations.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/5_Jumper/4_4_edges.png" alt="Chapter_13_images/5_Jumper/4_4_edges.png"></p><h5 id="jump-preview"><a name="jump-preview" href="#jump-preview"></a>Jump Preview</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/5_Jumper/5_jump.png" alt="Chapter_13_images/5_Jumper/5_jump.png"></p><h3 id="enemy-entity"><a name="enemy-entity" href="#enemy-entity"></a>Enemy Entity</h3><p>The <a href="http://www.solarus-games.org/doc/latest/lua_api_enemy.html">documentation</a> for more entity functions.</p><h5 id="inside-store"><a name="inside-store" href="#inside-store"></a>Inside Store</h5><p>First of all, copy the inside store room to a map name of your choosing. I named the map <code>map_4</code>. You will have to download or update your current inside store. You can find it in the directory <code>Lessons &gt; Chapter_13_Entities &gt; inside_store.zip</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/1_inside_store_to_Map_2.png" alt="1_inside_store_to_Map.png"></p><h5 id="enemy-breed-script"><a name="enemy-breed-script" href="#enemy-breed-script"></a>Enemy Breed Script</h5><p>Create a breed called <code>skeleton.</code> The name should be the same for the enemy sprite. One can make the description anything. I picked skeletor.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/2_New_enemy_breed_script.png" alt="2_New_enemy_breed_script.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/3_name_skeleton.png" alt="3_name_skeleton.pn"></p><h5 id="enemy-script-generated"><a name="enemy-script-generated" href="#enemy-script-generated"></a>Enemy Script Generated</h5><p>Making this breed or any new breed generates a basic enemy script. The enemy does not change directions. For instance, it will face one way and not up, down, left, and right. This is useful for basic enemies, but it is simple to add a 4 way direction movement.</p><p>Double click on the breed <code>skeleton</code> to show the script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Lua script of enemy skeleton.
-- This script is executed every time an enemy with this model is created.

-- Feel free to modify the code below.
-- You can add more events and remove the ones you don't need.

-- See the Solarus Lua API documentation for the full specification
-- of types, events and methods:
-- http://www.solarus-games.org/doc/latest

local enemy = ...
local game = enemy:get_game()
local map = enemy:get_map()
local hero = map:get_hero()
local sprite
local movement

-- Event called when the enemy is initialized.
function enemy:on_created()

  -- Initialize the properties of your enemy here,
  -- like the sprite, the life and the damage.
  sprite = enemy:create_sprite(&quot;enemies/&quot; .. enemy:get_breed())
  enemy:set_life(1)
  enemy:set_damage(1)
end

-- Event called when the enemy should start or restart its movements.
-- This is called for example after the enemy is created or after
-- it was hurt or immobilized.
function enemy:on_restarted()

  movement = sol.movement.create(&quot;target&quot;)
  movement:set_target(hero)
  movement:set_speed(48)
  movement:start(enemy)
end
</code></pre>"><span class="hljs-comment">-- Lua script of enemy skeleton.</span>
<span class="hljs-comment">-- This script is executed every time an enemy with this model is created.</span>

<span class="hljs-comment">-- Feel free to modify the code below.</span>
<span class="hljs-comment">-- You can add more events and remove the ones you don't need.</span>

<span class="hljs-comment">-- See the Solarus Lua API documentation for the full specification</span>
<span class="hljs-comment">-- of types, events and methods:</span>
<span class="hljs-comment">-- http://www.solarus-games.org/doc/latest</span>

<span class="hljs-keyword">local</span> enemy = ...
<span class="hljs-keyword">local</span> game = enemy:get_game()
<span class="hljs-keyword">local</span> map = enemy:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()
<span class="hljs-keyword">local</span> sprite
<span class="hljs-keyword">local</span> movement

<span class="hljs-comment">-- Event called when the enemy is initialized.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Initialize the properties of your enemy here,</span>
  <span class="hljs-comment">-- like the sprite, the life and the damage.</span>
  sprite = enemy:create_sprite(<span class="hljs-string">"enemies/"</span> .. enemy:get_breed())
  enemy:set_life(<span class="hljs-number">1</span>)
  enemy:set_damage(<span class="hljs-number">1</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- Event called when the enemy should start or restart its movements.</span>
<span class="hljs-comment">-- This is called for example after the enemy is created or after</span>
<span class="hljs-comment">-- it was hurt or immobilized.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_restarted</span><span class="hljs-params">()</span></span>

  movement = sol.movement.create(<span class="hljs-string">"target"</span>)
  movement:set_target(hero)
  movement:set_speed(<span class="hljs-number">48</span>)
  movement:start(enemy)
<span class="hljs-keyword">end</span>
</code></pre><p>Everything is pretty simple and the documentation can be checked for more options. I would like to point out two things.</p><p><code>function enemy:on_restarted()</code> is basically a reset for the sprite. If the enemy is hit, then it will reset or restart to this.</p><p><code>sprite = enemy:create_sprite("enemies/" .. enemy:get_breed())</code> is creating the sprite for the enemy. The <code>enemy:get_breed())</code>  gets the name of the enemy and since the image filename is the same as the enemy breed. That sprite is created.</p><h5 id="enemy-four-way-direction"><a name="enemy-four-way-direction" href="#enemy-four-way-direction"></a>Enemy Four Way Direction</h5><p>This can simply be added to the bottom of the script for the sprite to look in all four directions.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function enemy:on_movement_changed()
  sprite:set_direction(movement:get_direction4())
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_movement_changed</span><span class="hljs-params">()</span></span>
  sprite:set_direction(movement:get_direction4())
<span class="hljs-keyword">end</span>
</code></pre><h5 id="enemy-animation"><a name="enemy-animation" href="#enemy-animation"></a>Enemy Animation</h5><p>There are four basic animation for an enemy.</p><table>
<thead>
<tr>
<th style="text-align:center">Animation</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Hurt</td>
<td style="text-align:left">The player will blink when hurt or any animation you want for damage.</td>
</tr>
<tr>
<td style="text-align:center">Immobilized</td>
<td style="text-align:left">The enemy will not be able to move for a few seconds.</td>
</tr>
<tr>
<td style="text-align:center">Shaking</td>
<td style="text-align:left">The enemy can be set up to do a shake effect, but another animation can be used.</td>
</tr>
<tr>
<td style="text-align:center">Walking</td>
<td style="text-align:left">The enemy will travel as it walks.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/4_sprite_enemy_add_skeleton_default_animations.png" alt="4_sprite_enemy_add_skeleton_default_animations.png"></p><h5 id="add-enemy"><a name="add-enemy" href="#add-enemy"></a>Add Enemy</h5><p>Select the bomb entity icon and add it to the map.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/5_add_enemy.png" alt="5_add_enemy.png"></p><h5 id="edit-enemy"><a name="edit-enemy" href="#edit-enemy"></a>Edit Enemy</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. One can leave it blank.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">The direction the enemy faces at start.</td>
</tr>
<tr>
<td style="text-align:center">Breed</td>
<td style="text-align:left">The type of enemy.</td>
</tr>
<tr>
<td style="text-align:center">Save Enemy State</td>
<td style="text-align:left">You do not really need this for basic enemies, but if you do not want bosses or mini bosses appearing again, then it is best to save their state in a variable.</td>
</tr>
<tr>
<td style="text-align:center">Treasure</td>
<td style="text-align:left">A treasure will appear when the enemy is defeated. A heart or money is normal.</td>
</tr>
<tr>
<td style="text-align:center">Variant</td>
<td style="text-align:left">A variant is the type. Most of the time the type is a different color and worth a higher value.</td>
</tr>
<tr>
<td style="text-align:center">Save Treasure State</td>
<td style="text-align:left">If you do not want treasures like keys to appear again, then it is best to save their state in a variable.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/6_Enemy/6_edit_enemy.png" alt="6_edit_enemy.png"></p><h3 id="npc-entity"><a name="npc-entity" href="#npc-entity"></a>NPC Entity</h3><h5 id="add-npc"><a name="add-npc" href="#add-npc"></a>Add NPC</h5><p>Select the green upper body person icon entity to add a NPC. It is right next to the bomb enemy entity.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/1_add_NPC.png" alt="1_add_NPC.png"></p><h5 id="usual-npc"><a name="usual-npc" href="#usual-npc"></a>Usual NPC</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">The direction the NPC faces at start.</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the NPC.</td>
</tr>
<tr>
<td style="text-align:center">Subtype</td>
<td style="text-align:left">There are two subtypes. Usual NPC and Generalized.</td>
</tr>
<tr>
<td style="text-align:center">Action</td>
<td style="text-align:left">From here one can call a dialog, map script, and/or item script.</td>
</tr>
</tbody>
</table><p>A Usual NPC will automatically change direction depending on what angle one tries to interact at. For instance, if one talks to the NPC from behind, then it will turn towards the player character. It will be the same for all other directions. A Usual  NPC is used normally for somebody and not something.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/3_usual_NPC_any_direction_not_destructible.png" alt="3_usual_NPC_any_direction_not_destructible.png"></p><h5 id="set-up-dialog-box"><a name="set-up-dialog-box" href="#set-up-dialog-box"></a>Set Up Dialog Box</h5><p>First off, you need to set up Christophoâ€™s Dialog box. Go to <code>chapter 7</code> if you forgot how to set it up. You can grab the sample to copy and paste that.<br><code>Lessons &gt; chapter_7_Dialog_Mouse_control_fix.zip</code></p><h5 id="sample"><a name="sample" href="#sample"></a>Sample</h5><p>You can find the sample for this lesson in the following directory.<br><code>Lessons &gt; Chapter_13_Entities &gt; C_Enemy_NPC_Block_updated.zip</code></p><h5 id="usual-npc-call-map-script"><a name="usual-npc-call-map-script" href="#usual-npc-call-map-script"></a>Usual NPC Call Map Script</h5><p>The first thing that needs to be done is to name the NPC. A name is required for scripting. I named the NPC <code>big_boss.</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/1_Name_npc_big_boss.png" alt="1_Name_npc_big_boss.png"></p><p>You can see the NPC name in the status bar.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/0_NPC_Name_Status_Bar.png" alt="0_NPC_Name_Status_Bar.png"></p><p>Next is to select, â€œ<code>call the map script</code>â€œ</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/2_call_map_script.png" alt="usual_npc/2_call_map_script.png"></p><p>Open up the map script.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/3_right_click_open_map_script.png" alt="3_right_click_open_map_script.png"></p><h5 id="showing-npc-script"><a name="showing-npc-script" href="#showing-npc-script"></a>Showing NPC Script</h5><p>I like showing the full script before breaking it down. This script is an example of a basic quest conversation. The player character needs to find a hammer, but in this case there is no need to actually find the hammer. The <code>big_boss</code> gives the player a gem as a reward.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()

function big_boss:on_interaction()

  if game:get_value(&quot;hammer_quest_started&quot;)then
    game:start_dialog(&quot;hammer.done&quot;)
  else
    game:start_dialog(&quot;hammer.hello&quot;, function(answer)
      if answer == 3 then --No
        game:start_dialog(&quot;hammer.no&quot;) 
      else
        game:start_dialog(&quot;hammer.yes&quot;, function()
          hero:start_treasure(&quot;gem&quot;, 1, &quot;hammer_quest_started&quot;,function()
            game:start_dialog(&quot;hammer.wonderful_day&quot;)
          end)
        end)
      end
    end)
  end
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"hammer_quest_started"</span>)<span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"hammer.done"</span>)
  <span class="hljs-keyword">else</span>
    game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
        game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
      <span class="hljs-keyword">else</span>
        game:start_dialog(<span class="hljs-string">"hammer.yes"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
          hero:start_treasure(<span class="hljs-string">"gem"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"hammer_quest_started"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
            game:start_dialog(<span class="hljs-string">"hammer.wonderful_day"</span>)
          <span class="hljs-keyword">end</span>)
        <span class="hljs-keyword">end</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="setting-up-a-simple-npc-dialog"><a name="setting-up-a-simple-npc-dialog" href="#setting-up-a-simple-npc-dialog"></a>Setting up a Simple NPC dialog</h5><p>The <code>hammer.hello</code> dialog states that big_boss needs help, and he is offering a reward.</p><pre><code data-origin="<pre><code>I lost my hammer!



Help me find it? I will give you a reward.
     $? Yes
     $? No
</code></pre>">I lost my hammer!



Help me find it? I will give you a reward.
     $? Yes
     $? No
</code></pre><p>As you can see, there is a big space after, â€œI lost my hammer!â€ That is because I wanted the second part of text to begin on its own line. See the two following images to understand.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/4_hello_step_1.png" alt="4_hello_step_1.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/5_hello_yes_no.png" alt="5_hello_yes_no.png"></p><p>Above is a very simple script. We use the name of the NPC in the map script with a solarus function called <code>NPC:on_interaction</code>.</p><p><code>Documentation &gt; map entities &gt; non-playing character &gt; NPC:on_interaction()</code></p><p>NPC_Name:on_interaction = big_boss:on_interaction</p><p><strong>EX:</strong> </p><p>If you wanted a sound to play when interacting or talking to the NPC, then you would do the following.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()
  sol.audio.play_sound(&quot;audio_name&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"audio_name"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>In the map script this would be it for the dialog above.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()
  game:start_dialog(&quot;hammer.hello&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>
  game:start_dialog(<span class="hljs-string">"hammer.hello"</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="npc-dialog-yes_no"><a name="npc-dialog-yes_no" href="#npc-dialog-yes_no"></a>NPC Dialog Yes_No</h5><p>Now we have to set up a simple dialog. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()
  game:start_dialog(&quot;hammer.hello&quot;, function(answer)
    if answer == 3 then --No
      game:start_dialog(&quot;hammer.no&quot;) 
    else
      game:start_dialog(&quot;hammer.yes&quot;)
  end)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>
  game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
    <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
      game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
    <span class="hljs-keyword">else</span>
      game:start_dialog(<span class="hljs-string">"hammer.yes"</span>)
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The answer 3 is â€œnoâ€ because it is the 3rd row on the next line.</p><p><strong>Example:</strong></p><pre><code data-origin="<pre><code>I lost my hammer!(1) - line 1



Help me find it? I will give you a reward. (1)
     $? Yes(2)
     $? No(3)
</code></pre>">I lost my hammer!(1) - line 1



Help me find it? I will give you a reward. (1)
     $? Yes(2)
     $? No(3)
</code></pre><h5 id="npc-answer-no"><a name="npc-answer-no" href="#npc-answer-no"></a>NPC Answer No</h5><p>The dialog, â€œWhat will I do with this shiny reward now?â€ is shown when the player chooses <code>No</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/6_no_fix.png" alt="6_no.png"></p><h5 id="npc-answer-yes"><a name="npc-answer-yes" href="#npc-answer-yes"></a>NPC Answer Yes</h5><p>The dialog, â€œTook you long enough! Here is your reward.â€ is shown when the player chooses <code>Yes</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/7_yes.png" alt="7_yes.png"></p><h5 id="npc-treasure"><a name="npc-treasure" href="#npc-treasure"></a>NPC Treasure</h5><p>The reward or treasure is a gem. In order to have the hero (player) receive a reward is by using the <code>hero:start_treasure("Treasure_name")</code> function. </p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  hero:start_treasure(&quot;gem&quot;)
</code></pre>">  hero:start_treasure(<span class="hljs-string">"gem"</span>)
</code></pre><p>  The script would look like this.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()
  game:start_dialog(&quot;hammer.hello&quot;, function(answer)
    if answer == 3 then --No
      game:start_dialog(&quot;hammer.no&quot;) 
    else
      game:start_dialog(&quot;hammer.yes&quot;)
        hero:start_treasure(&quot;gem&quot;)
      end)
    end
  end)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>
  game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
    <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
      game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
    <span class="hljs-keyword">else</span>
      game:start_dialog(<span class="hljs-string">"hammer.yes"</span>)
        hero:start_treasure(<span class="hljs-string">"gem"</span>)
      <span class="hljs-keyword">end</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The dialog, â€œyou got a gem!,â€ will automatically display if you put the dialog in <code>_treasure</code>. The number â€œ1â€ is the variant.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/1_treasure_gem_1.png" alt="1_treasure_gem_1.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/8_treasure.png" alt="8_treasure.png"></p><h5 id="prevent-repeating-npc-dialog-with-boolean"><a name="prevent-repeating-npc-dialog-with-boolean" href="#prevent-repeating-npc-dialog-with-boolean"></a>Prevent Repeating NPC Dialog With Boolean</h5><p>Now we do not want the NPC to say the same thing over and over again. This could result in the player getting lots of gems too fast.</p><p>We can use a boolean to stop the repeating. This will only work if the player never returns to this map again after getting a reward. If <code>hammer_started</code> is <code>true</code>, then the dialog <code>hammer.done</code> will appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hammer_started = true
</code></pre>">hammer_started = <span class="hljs-keyword">true</span>
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local hammer_started = false

function big_boss:on_interaction()

  if hammer_started then
    game:start_dialog(&quot;hammer.done&quot;)
  else
    game:start_dialog(&quot;hammer.hello&quot;, function(answer)
      if answer == 3 then --No
        game:start_dialog(&quot;hammer.no&quot;) 
      else
        game:start_dialog(&quot;hammer.yes&quot;, function()
          hero:start_treasure(&quot;gem&quot;)
          hammer_started = true
        end)
      end
    end)
  end
end
</code></pre>"><span class="hljs-keyword">local</span> hammer_started = <span class="hljs-keyword">false</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">if</span> hammer_started <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"hammer.done"</span>)
  <span class="hljs-keyword">else</span>
    game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
        game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
      <span class="hljs-keyword">else</span>
        game:start_dialog(<span class="hljs-string">"hammer.yes"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
          hero:start_treasure(<span class="hljs-string">"gem"</span>)
          hammer_started = <span class="hljs-keyword">true</span>
        <span class="hljs-keyword">end</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="prevent-repeating-npc-dialog-with-get-value"><a name="prevent-repeating-npc-dialog-with-get-value" href="#prevent-repeating-npc-dialog-with-get-value"></a>Prevent Repeating NPC Dialog With Get Value</h5><p>Now we do not want the NPC to say the same thing over and over again. This could result in the player getting lots of gems too fast.</p><p>The game function <code>game:get_value("name_of_quest")</code> will work the same way as the boolean, but the dialog will not appear again when the player leaves and returns to the map. If the <code>get_value</code> hammer quest is <code>true</code>, then the dialog <code>hammer.done</code> will appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:get_value(&quot;hammer_quest_started&quot;, true)
</code></pre>">game:get_value(<span class="hljs-string">"hammer_quest_started"</span>, <span class="hljs-keyword">true</span>)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()

  if game:get_value(&quot;hammer_quest_started&quot;) then
    game:start_dialog(&quot;hammer.done&quot;)
  else
    game:start_dialog(&quot;hammer.hello&quot;, function(answer)
      if answer == 3 then --No
        game:start_dialog(&quot;hammer.no&quot;) 
      else
        game:start_dialog(&quot;hammer.yes&quot;, function()
          hero:start_treasure(&quot;gem&quot;)
          game:get_value(&quot;hammer_quest_started&quot;, true)
        end)
      end
    end)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"hammer_quest_started"</span>) <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"hammer.done"</span>)
  <span class="hljs-keyword">else</span>
    game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
        game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
      <span class="hljs-keyword">else</span>
        game:start_dialog(<span class="hljs-string">"hammer.yes"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
          hero:start_treasure(<span class="hljs-string">"gem"</span>)
          game:get_value(<span class="hljs-string">"hammer_quest_started"</span>, <span class="hljs-keyword">true</span>)
        <span class="hljs-keyword">end</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/10_done.png" alt="10_done.png"></p><h5 id="npc-shortening-the-script"><a name="npc-shortening-the-script" href="#npc-shortening-the-script"></a>NPC Shortening the Script</h5><p>There is a way to shorten the script. A few lines of script can be combined. </p><p><strong>Example:</strong></p><p>This line of code,</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>          hero:start_treasure(&quot;gem&quot;)
          game:get_value(&quot;hammer_quest_started&quot;, true)
</code></pre>">          hero:start_treasure(<span class="hljs-string">"gem"</span>)
          game:get_value(<span class="hljs-string">"hammer_quest_started"</span>, <span class="hljs-keyword">true</span>)
</code></pre><p>can be the following line. The â€œ1â€ is the variant. The quest will automatically return true.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>          hero:start_treasure(&quot;gem&quot;, 1, &quot;hammer_quest_started&quot;,function()
</code></pre>">          hero:start_treasure(<span class="hljs-string">"gem"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"hammer_quest_started"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
</code></pre><p>Below would result in our completed script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function big_boss:on_interaction()

  if game:get_value(&quot;hammer_quest_started&quot;) then
    game:start_dialog(&quot;hammer.done&quot;)
  else
    game:start_dialog(&quot;hammer.hello&quot;, function(answer)
      if answer == 3 then --No
        game:start_dialog(&quot;hammer.no&quot;) 
      else
        game:start_dialog(&quot;hammer.yes&quot;, function()
          hero:start_treasure(&quot;gem&quot;, 1, &quot;hammer_quest_started&quot;,function()
            game:start_dialog(&quot;hammer.wonderful_day&quot;)
          end)
        end)
      end
    end)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">big_boss:on_interaction</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"hammer_quest_started"</span>) <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"hammer.done"</span>)
  <span class="hljs-keyword">else</span>
    game:start_dialog(<span class="hljs-string">"hammer.hello"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
        game:start_dialog(<span class="hljs-string">"hammer.no"</span>) 
      <span class="hljs-keyword">else</span>
        game:start_dialog(<span class="hljs-string">"hammer.yes"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
          hero:start_treasure(<span class="hljs-string">"gem"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"hammer_quest_started"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
            game:start_dialog(<span class="hljs-string">"hammer.wonderful_day"</span>)
          <span class="hljs-keyword">end</span>)
        <span class="hljs-keyword">end</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="npc-wonderful-day"><a name="npc-wonderful-day" href="#npc-wonderful-day"></a>NPC Wonderful Day</h5><p>As one can see below, the NPC says something right after you get your reward. This is the dialog <code>hammer.wonderful_day</code>. This is a temporary reply by the NPC. Any other time the <code>hammer.done</code> will show.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/usual_npc/9_wonderful_day.png" alt="9_wonderful_day.png"></p><h5 id="npc-dialogs"><a name="npc-dialogs" href="#npc-dialogs"></a>NPC Dialogs</h5><p>One can check <a href="https://www.youtube.com/watch?v=KyF4LB1YOSY&amp;index=18&amp;list=PLzJ4jb-Y0ufxwkj7IlfURcvCxaDCSecJY">Christophoâ€™s tutorial</a> for more ways of setting up dialog near the end of the video. I explained the less error prone method.</p><h5 id="generalized-npc"><a name="generalized-npc" href="#generalized-npc"></a>Generalized NPC</h5><p>A Generalized NPC can only be interacted based on its starting direction. Down is common for a Generalized NPC. An example of a Generalized NPC is a sign post. You would interact with it from the front, but one is able to pick up the sign by default and throw it from other directions. There is a special direction called,â€any.â€ This will allow the player character to interact from all four directions of the sign. Generalized NPC(s) are used normally for something and not somebody, but there are a few exceptions.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/2_generalized_NPC_pick_direction.png" alt="2_generalized_NPC_pick_direction.png"></p><h5 id="generalized-npc-desk-method"><a name="generalized-npc-desk-method" href="#generalized-npc-desk-method"></a>Generalized NPC Desk Method</h5><p>Generalized NPC(s) are useful for not only signs or other objects. They can be used to talk to a person across a table.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/general_npc/1_general_table_npc.png" alt="1_general_table_npc.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/general_npc/2_funny_chat.png" alt="2_funny_chat.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/general_npc/3_funny_chat.png" alt="3_funny_chat.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/7_NPC/general_npc/4_funny_chat.png" alt="4_funny_chat.png"></p><p>Now this isnâ€™t in the sample, but what if both NPC(s) are not a generalized NPC? If I talk to the magician from the right, then that makes him turn to the right. If the hero interact with the desk, then the magician will still be facing the wrong direction. In this case we use a function called, â€œ<code>NPC:get_sprite():set_direction(Number)</code>.â€</p><table>
<thead>
<tr>
<th style="text-align:left">Number</th>
<th style="text-align:center">Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Direction(0)</td>
<td style="text-align:center">Right</td>
</tr>
<tr>
<td style="text-align:left">Direction(1)</td>
<td style="text-align:center">Up</td>
</tr>
<tr>
<td style="text-align:left">Direction(2)</td>
<td style="text-align:center">Left</td>
</tr>
<tr>
<td style="text-align:left">Direction(3)</td>
<td style="text-align:center">Down</td>
</tr>
</tbody>
</table><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>magician:get_sprite():set_direction(3)
</code></pre>">magician:get_sprite():set_direction(<span class="hljs-number">3</span>)
</code></pre><p>The Magician will look  down(3) in this case.</p><h3 id="movable-block-entity"><a name="movable-block-entity" href="#movable-block-entity"></a>Movable Block Entity</h3><h5 id="add-block"><a name="add-block" href="#add-block"></a>Add Block</h5><p>The block entity is right by the green NPC person entity. A block can be moved around.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/8_Block/1_add_block.png" alt="1_add_block.png"></p><h5 id="block-properties"><a name="block-properties" href="#block-properties"></a>Block Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">The direction you are allowed to push the block.</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the block.</td>
</tr>
<tr>
<td style="text-align:center">Max Moves</td>
<td style="text-align:left">The options are <code>cannot move</code>, <code>1 move only</code>, and <code>unlimited</code>.</td>
</tr>
<tr>
<td style="text-align:center">Interactions</td>
<td style="text-align:left">There are 2 ways to interact with a block. It can be <code>pushed</code> or <code>pulled</code>.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/8_Block/2_block_properties_none_one%20way_unlimited.png" alt="2_block_properties_none_one%20way_unlimited.png"></p><p>The block entity is that simple. There will be more customization for the block entity in Solarus 1.6 version.</p><h3 id="switch-entity"><a name="switch-entity" href="#switch-entity"></a>Switch Entity</h3><h5 id="add-switch"><a name="add-switch" href="#add-switch"></a>Add Switch</h5><p>The switch is the button with the red dot next to the block entity. You can step on the switch to activate certain events and there are a few other ways to activate it.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/1_add%20switch.png" alt="1_add%20switch.png"></p><h5 id="switch-properties"><a name="switch-properties" href="#switch-properties"></a>Switch Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the switch.</td>
</tr>
<tr>
<td style="text-align:center">Subtype</td>
<td style="text-align:left"><strong>Walkable:</strong> Ability to walk on the switch. <br><br> <strong>Solid:</strong> You can hit the switch with the â€˜câ€™ key to activate it. Usually, that is a weapon like a sword. <br><br> <strong>Arrow Target:</strong> You can shoot an arrow at it. There is a built in bow and arrow.</td>
</tr>
<tr>
<td style="text-align:center">Play Sound</td>
<td style="text-align:left">Pick a sound that you want played when the switch activates.</td>
</tr>
<tr>
<td style="text-align:center">Activation</td>
<td style="text-align:left">You can require a block to be on the switch for it to be activated.</td>
</tr>
<tr>
<td style="text-align:center">Leaving switch</td>
<td style="text-align:left">The switch can be deactivated if this option is checked.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/2_Click_switch_properties.png" alt="2_Click_switch_properties.png"></p><h5 id="walkable-switch-coding"><a name="walkable-switch-coding" href="#walkable-switch-coding"></a>Walkable Switch Coding</h5><p>In order to code a script one much give it a name. I gave it the name <code>chest_button</code>. In the following example I use the <code>on_activated()</code> function. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/2_button_chest_name.png" alt="2_button_chest_name.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function chest_button:on_activated()
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button:on_activated</span><span class="hljs-params">()</span></span>
</code></pre><p><code>on_activated</code> means that something will happen when the switch is stepped on. In this case a sound will be played and a chest will appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--chest_1
function chest_button:on_activated()
  sol.audio.play_sound(&quot;chest_appears&quot;)
  chest:set_enabled(true)
end
</code></pre>"><span class="hljs-comment">--chest_1</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button:on_activated</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
  chest:set_enabled(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>I named the chest the name <code>chest</code>. The function <code>Set_enabled(true/false</code> is used to make it appear or not appear.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/1_chest_name.png" alt="1_chest_name.png"></p><p>The first thing that needs to be carried out is that the chest needs a save value because we will be using this to see if the chest has been opened. I used the save value name <code>Map_4_gem_treasure</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  if game:get_value(&quot;Map_4_gem_treasure&quot;) then
</code></pre>">  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"Map_4_gem_treasure"</span>) <span class="hljs-keyword">then</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/1_chest_name_2.png" alt="1_chest_name_2.png"></p><p>Next we want to show the button as activated and not deactivated. The <code>set_activated(true/false)</code> function is used in order to achieve this.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    chest_button:set_activated(true)
</code></pre>">    chest_button:set_activated(<span class="hljs-keyword">true</span>)
</code></pre><p>Now we want the chest to be invisible if the switch is not activated yet.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  else
    chest:set_enabled(false)
  end
end
</code></pre>">  <span class="hljs-keyword">else</span>
    chest:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The result is the following script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --chest_1
function map:on_started()
  if game:get_value(&quot;Map_4_gem_treasure&quot;) then
    chest_button:set_activated(true)
  else
    chest:set_enabled(false)
  end
end

--chest_1
function chest_button:on_activated()
  sol.audio.play_sound(&quot;chest_appears&quot;)
  chest:set_enabled(true)
end
</code></pre>"> <span class="hljs-comment">--chest_1</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"Map_4_gem_treasure"</span>) <span class="hljs-keyword">then</span>
    chest_button:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    chest:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--chest_1</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button:on_activated</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
  chest:set_enabled(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="block-switch-coding"><a name="block-switch-coding" href="#block-switch-coding"></a>Block Switch Coding</h5><p>The block coding is almost exactly the same, so I will not be typing everything over again. I will cover the parts that are different.</p><p>Name the block. I named it <code>block</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/block%20switch/1_block_name.png" alt="1_block_name.png"></p><p>Name the switch. I named it <code>chest_button_2</code>. Check <code>require a block to be activated</code> and <code>deactivate when leaving</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/block%20switch/2_switch_name.png" alt="2_switch_name.png"></p><p>Name the chest. I named it <code>chest_2</code>. I gave it the save state name <code>Map_4_gem_treasure_2</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/block%20switch/3_chest_name.png" alt="3_chest_name.png"></p><p>The script. The switch and chest will activate/deactivated if the block is moved on/off it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_started()  
  --chest_2
  if game:get_value(&quot;Map_4_gem_treasure_2&quot;) then
    chest_button_2:set_activated(true)
  else
    chest_2:set_enabled(false)
  end
end

 --chest_2
function chest_button_2:on_activated()
  sol.audio.play_sound(&quot;chest_appears&quot;)
  chest_2:set_enabled(true)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>  
  <span class="hljs-comment">--chest_2</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"Map_4_gem_treasure_2"</span>) <span class="hljs-keyword">then</span>
    chest_button_2:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

 <span class="hljs-comment">--chest_2</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button_2:on_activated</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
  chest_2:set_enabled(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>Now we want the chest to vanish when the block leaves the button. We want this to happen only when the chest is not opened. </p><p>We need to check when the button is inactivated and will use the function <code>on_inactivated()</code> for this.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function chest_button_2:on_inactivated()
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button_2:on_inactivated</span><span class="hljs-params">()</span></span>
</code></pre><p>After that we need to check if the chest is open or not. We use the function <code>is_open()</code>. The chest needs to be <code>set_enabled(false)</code> because we do not want the chest to appear if the button is inactive.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  if not chest_2:is_open() then
    chest_2:set_enabled(false)
  end
end
</code></pre>">  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chest_2:is_open() <span class="hljs-keyword">then</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The script will look like this.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function chest_button_2:on_inactivated()
  if not chest_2:is_open() then
    chest_2:set_enabled(false)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button_2:on_inactivated</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chest_2:is_open() <span class="hljs-keyword">then</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Now we need to check the block position. We want the block to still be on the switch when we leave and come back to the map.</p><p>Check if the chest is open.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  if chest_2:is_open() then
</code></pre>">  <span class="hljs-keyword">if</span> chest_2:is_open() <span class="hljs-keyword">then</span>
</code></pre><p>If the chest is open, then set button activated to true, otherwise set the chest to false.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    chest_button_2:set_activated(true)
  else
    chest_2:set_enabled(false)
</code></pre>">    chest_button_2:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
</code></pre><p>Set the position of the block. Use the function <code>set_position(x,y)</code>.</p><p>Hover over the location of switch and set the block to that position. Adjust it if you have to.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/block%20switch/4_position_switch_status_bar.png" alt="4_position_switch_status_bar.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    block:set_position(216,308)
</code></pre>">    block:set_position(<span class="hljs-number">216</span>,<span class="hljs-number">308</span>)
</code></pre><p>The result.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_started()
  if chest_2:is_open() then
    chest_button_2:set_activated(true)
    block:set_position(216,308)
  else
    chest_2:set_enabled(false)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> chest_2:is_open() <span class="hljs-keyword">then</span>
    chest_button_2:set_activated(<span class="hljs-keyword">true</span>)
    block:set_position(<span class="hljs-number">216</span>,<span class="hljs-number">308</span>)
  <span class="hljs-keyword">else</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The full script.</p><p>Tip: When I say the chest is false, that means the chest does not appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_started()  
  --chest_2
--Save chest state if chest is opened and set button activation to true. Otherwise, the chest is set to false.
  if game:get_value(&quot;Map_4_gem_treasure_2&quot;) then
    chest_button_2:set_activated(true)
  else
    chest_2:set_enabled(false)
  end

--if chest is open, then have the button activated and set block position. Otherwise, the chest is false.
  if chest_2:is_open() then
    chest_button_2:set_activated(true)
    block:set_position(216,308)
  else
    chest_2:set_enabled(false)
  end
end

--Set chest_2 to activate if the block is on the button
function chest_button_2:on_activated()
  sol.audio.play_sound(&quot;chest_appears&quot;)
  chest_2:set_enabled(true)
end

--Set chest_2 to deactivated if the block is not on or move off the button and if the chest is not open.
function chest_button_2:on_inactivated()
  if not chest_2:is_open() then
    chest_2:set_enabled(false)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>  
  <span class="hljs-comment">--chest_2</span>
<span class="hljs-comment">--Save chest state if chest is opened and set button activation to true. Otherwise, the chest is set to false.</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"Map_4_gem_treasure_2"</span>) <span class="hljs-keyword">then</span>
    chest_button_2:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--if chest is open, then have the button activated and set block position. Otherwise, the chest is false.</span>
  <span class="hljs-keyword">if</span> chest_2:is_open() <span class="hljs-keyword">then</span>
    chest_button_2:set_activated(<span class="hljs-keyword">true</span>)
    block:set_position(<span class="hljs-number">216</span>,<span class="hljs-number">308</span>)
  <span class="hljs-keyword">else</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Set chest_2 to activate if the block is on the button</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button_2:on_activated</span><span class="hljs-params">()</span></span>
  sol.audio.play_sound(<span class="hljs-string">"chest_appears"</span>)
  chest_2:set_enabled(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Set chest_2 to deactivated if the block is not on or move off the button and if the chest is not open.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chest_button_2:on_inactivated</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chest_2:is_open() <span class="hljs-keyword">then</span>
    chest_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="solid-switch-coding"><a name="solid-switch-coding" href="#solid-switch-coding"></a>Solid Switch Coding</h5><p>The same as the walkable switch. Just set it to <code>solid</code> and press <code>c</code> to activate it. There will be an example in the dynamic Tile section.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/9_switch/3_solid_switch.png" alt=""></p><h3 id="dynamic-tile"><a name="dynamic-tile" href="#dynamic-tile"></a>Dynamic Tile</h3><p>Dynamic tiles are entities, and they can be manipulated like an entity once a name is given to them. You can script it and all that jazz. Tiles are originally static meaning they cannot be used with scripts until converted to Dynamic.</p><h5 id="convert-to-dynamic"><a name="convert-to-dynamic" href="#convert-to-dynamic"></a>Convert to Dynamic</h5><p>Right click &gt; Convert to dynamic tile</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/10_dynamic_tile/1_convert_dynamic.png" alt="1_convert_dynamic.png"></p><h5 id="convert-to-static"><a name="convert-to-static" href="#convert-to-static"></a>Convert to Static</h5><p>Right click &gt; Convert to static tile</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/10_dynamic_tile/2_convert_static.png" alt="2_convert_static.png"></p><h5 id="dynamic-properties"><a name="dynamic-properties" href="#dynamic-properties"></a>Dynamic Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the tile is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Size</td>
<td style="text-align:left">The dimension size of the tile.</td>
</tr>
<tr>
<td style="text-align:center">Initial State</td>
<td style="text-align:left">Display or do not display at start of game.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/10_dynamic_tile/3_Dynamic_properties.png" alt="3_Dynamic_properties.png"></p><h5 id="dynamic-scripting"><a name="dynamic-scripting" href="#dynamic-scripting"></a>Dynamic Scripting</h5><p>Dynamic scripting is not really different from scripting with entities.</p><p>Give a name to a switch. I am using a solid switch in this case and gave it the name <code>solid_switch</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/10_dynamic_tile/dynamic_scripting/1_dynamic_solid_switch.png" alt="1_dynamic_solid_switch.png"></p><p>The next step is to convert a normal tile to dynamic, so we can script it. Make sure that <code>enabled at start</code> is unchecked.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/10_dynamic_tile/dynamic_scripting/2_dynamic_bridge.png" alt="2_dynamic_bridge.png"></p><p>Now we will make the bridge to appear when the solid switch is hit. We will do this with the following script. Not really anything to explain because we already covered these functions.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Solid Switch bridge
function solid_switch:on_activated()
   bridge:set_enabled(true)
end
</code></pre>"><span class="hljs-comment">--Solid Switch bridge</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solid_switch:on_activated</span><span class="hljs-params">()</span></span>
   bridge:set_enabled(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><h3 id="wall-entity"><a name="wall-entity" href="#wall-entity"></a>Wall Entity</h3><h5 id="add-wall-entity"><a name="add-wall-entity" href="#add-wall-entity"></a>Add Wall Entity</h5><p>Click on the stop sign like image by the switch entity to add the wall entity. It can be stretched to fit a large area and blocks paths for certain obstacles.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/11_Wall/1_add_wall.png" alt="1_add_wall.png"></p><h5 id="wall-entity-properties"><a name="wall-entity-properties" href="#wall-entity-properties"></a>Wall Entity Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Size</td>
<td style="text-align:left">The dimension size of the entity.</td>
</tr>
<tr>
<td style="text-align:center">Obstacles</td>
<td style="text-align:left"><strong>Hero</strong> - Prevents the hero from passing. <br><br> <strong>Enemies</strong> - Prevents the enemies from passing. <br><br> <strong>NPCs</strong> - Prevents the NPCs from passing. <br><br> <strong>Blocks</strong> - Prevents the blocks from passing. <br><br> <strong>Projectiles</strong> - Prevents the projectiles from passing.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/11_Wall/2_wall_properties.png" alt="2_wall_properties.png"></p><h5 id="wall-entity-scripting"><a name="wall-entity-scripting" href="#wall-entity-scripting"></a>Wall Entity Scripting</h5><p>The scripting is no different from any other entity. There will be an example in the sensor section, but let me cover another function before that. </p><p>The function is <code>remove()</code>. This function deletes or erases an entity from the map. One must be really careful when using this function because annoying messages can appear if not taken care of properly.</p><p>The reason why I am covering this function is that one will want the wall to vanish at a certain point.</p><p>Let us pretend that the wall is blocking the enemy. On some condition, like stepping on a switch, the wall can be removed.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>      enemy_wall:remove()
</code></pre>">      enemy_wall:remove()
</code></pre><p>Now every time that switch is activated an annoying message will appear in the terminal because the entity was removed and no longer exists (nil).</p><p>The following script is a way to avoid the annoying message. Of course, there are many other ways and this way may not be very professional. One could just show an entity as activated instead of leaving the space blank or remove the entity too. Removing the switch avoids the error message all together.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  if enemy_wall == nil then
--nothing happens
    else
      enemy_wall:remove()
    end
</code></pre>">  <span class="hljs-keyword">if</span> enemy_wall == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
<span class="hljs-comment">--nothing happens</span>
    <span class="hljs-keyword">else</span>
      enemy_wall:remove()
    <span class="hljs-keyword">end</span>
</code></pre><h3 id="sensor-entity"><a name="sensor-entity" href="#sensor-entity"></a>Sensor Entity</h3><h5 id="add-sensor-entity"><a name="add-sensor-entity" href="#add-sensor-entity"></a>Add Sensor Entity</h5><p>The sensor entity is right next to the wall Entity. It is a green circle with a question mark on it. It can be stretched to fit a large area and can detect the hero when it gets into the boundary.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/1_add_sensor.png" alt="1_add_sensor.png"></p><h5 id="sensor-properties"><a name="sensor-properties" href="#sensor-properties"></a>Sensor Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Size</td>
<td style="text-align:left">The dimension size of the entity.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/2_sensor_properties.png" alt="2_sensor_properties.png"></p><h5 id="sensor-scripting"><a name="sensor-scripting" href="#sensor-scripting"></a>Sensor Scripting</h5><p>This is an example of wall and sensor scripting. First off, do not name your sensor entity the name <code>sensor</code>. You can, but it will interfere with a shortcut, at least when I tried it. Instead, we will be using the name <code>ground_sensor_</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/1_sensor.png" alt="1_sensor.png"></p><p>Name the wall <code>enemy_wall</code> or any name you want.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/2_sensor_wall.png" alt="2_sensor_wall.png"></p><p>Now let us go over the scripting part. There is a good function that goes good with sensors. The function is <code>hero:save_solid_ground</code>. This function teleports the hero back to the sensor in this case. That means if the hero falls into a hole he/she/it will go back to the sensor instead of near the falling point.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function ground_sensor_1:on_activated()
    hero:save_solid_ground()
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ground_sensor_1:on_activated</span><span class="hljs-params">()</span></span>
    hero:save_solid_ground()
</code></pre><p>Enable the bridge with the following script. Make sure that <code>enabled at start</code> is unchecked.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/6_bridge_2_sensor.png" alt="6_bridge_2_sensor.pn"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    bridge_2:set_enabled(true)
</code></pre>">    bridge_2:set_enabled(<span class="hljs-keyword">true</span>)
</code></pre><p>Remove the wall when the sensor is touched and prevent annoying message because the wall entity will no longer exists (nil).</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    if enemy_wall == nil then
--nothing happens
    else
      enemy_wall:remove()
    end
</code></pre>">    <span class="hljs-keyword">if</span> enemy_wall == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
<span class="hljs-comment">--nothing happens</span>
    <span class="hljs-keyword">else</span>
      enemy_wall:remove()
    <span class="hljs-keyword">end</span>
</code></pre><p>The final script:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Bridge sensor
function ground_sensor_1:on_activated()
    hero:save_solid_ground()
    bridge_2:set_enabled(true)

    if enemy_wall == nil then
--nothing happens
    else
      enemy_wall:remove()
    end
end
</code></pre>"><span class="hljs-comment">--Bridge sensor</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ground_sensor_1:on_activated</span><span class="hljs-params">()</span></span>
    hero:save_solid_ground()
    bridge_2:set_enabled(<span class="hljs-keyword">true</span>)

    <span class="hljs-keyword">if</span> enemy_wall == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
<span class="hljs-comment">--nothing happens</span>
    <span class="hljs-keyword">else</span>
      enemy_wall:remove()
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Tip: There is a shortcut for <code>hero:save_solid_ground()</code>. Instead of typing <code>hero:save_solid_ground()</code> over and over again for each new sensor, you could use the following script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Do not name your sensor, &quot;sensor.&quot; Do not give it the same name. Use a unique name like &quot;ground_sensor.&quot;
for sensor in map:get_entities(&quot;ground_sensor_&quot;) do

   function sensor:on_activated()
     hero:save_solid_ground()
   end
end
</code></pre>"><span class="hljs-comment">--Do not name your sensor, "sensor." Do not give it the same name. Use a unique name like "ground_sensor."</span>
<span class="hljs-keyword">for</span> sensor <span class="hljs-keyword">in</span> map:get_entities(<span class="hljs-string">"ground_sensor_"</span>) <span class="hljs-keyword">do</span>

   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sensor:on_activated</span><span class="hljs-params">()</span></span>
     hero:save_solid_ground()
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>To start, the â€œfor sensorâ€ part refers to the sensors on the map. The <code>get_entities()</code> function refers to the names of the sensors. The names are all <code>ground_sensor_</code> with some number index. For example, <code>ground_sensor_1</code>. The <code>get_entities()</code> functions grabs or gets the sensors with the same name, but with a number difference (number index).</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>for sensor in map:get_entities(&quot;ground_sensor_&quot;) do
</code></pre>"><span class="hljs-keyword">for</span> sensor <span class="hljs-keyword">in</span> map:get_entities(<span class="hljs-string">"ground_sensor_"</span>) <span class="hljs-keyword">do</span>
</code></pre><p>Now we will make a function for the sensors on the map. We will <code>save_solid_ground()</code>with this function. The â€œsensorâ€ in the on_activated function refers to all the sensors on the map.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>   function sensor:on_activated()
     hero:save_solid_ground()
   end
</code></pre>">   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sensor:on_activated</span><span class="hljs-params">()</span></span>
     hero:save_solid_ground()
   <span class="hljs-keyword">end</span>
</code></pre><p>The resulting script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Do not name your sensor, &quot;sensor.&quot; Do not give it the same name. Use a unique name like &quot;ground_sensor.&quot;
for sensor in map:get_entities(&quot;ground_sensor_&quot;) do

   function sensor:on_activated()
     hero:save_solid_ground()
   end
end
</code></pre>"><span class="hljs-comment">--Do not name your sensor, "sensor." Do not give it the same name. Use a unique name like "ground_sensor."</span>
<span class="hljs-keyword">for</span> sensor <span class="hljs-keyword">in</span> map:get_entities(<span class="hljs-string">"ground_sensor_"</span>) <span class="hljs-keyword">do</span>

   <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sensor:on_activated</span><span class="hljs-params">()</span></span>
     hero:save_solid_ground()
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="sensor-get-position"><a name="sensor-get-position" href="#sensor-get-position"></a>Sensor Get Position</h5><p>We covered the <code>set_position</code> function, but we can get the position of an entity as well. The function for getting an entity is <code>get_position()</code>.</p><p>Using the <code>get_position()</code> function is quite easy. For example, if you wanted the hero to teleport to an entity to trick or torture the person playing your game, then you could have the player go to a destination entity. I used the name <code>up_stairs_2</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/7_destination_sensor.png" alt="7_destination_sensor.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  hero:set_position(up_stairs_2:get_position())
</code></pre>">  hero:set_position(up_stairs_2:get_position())
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/3_destination_sensor.png" alt="3_destination_sensor.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function ground_sensor_2:on_activated()
  hero:set_position(up_stairs_2:get_position())
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ground_sensor_2:on_activated</span><span class="hljs-params">()</span></span>
  hero:set_position(up_stairs_2:get_position())
<span class="hljs-keyword">end</span>
</code></pre><h5 id="sensor-multiple-dynamic-tiles"><a name="sensor-multiple-dynamic-tiles" href="#sensor-multiple-dynamic-tiles"></a>Sensor Multiple Dynamic Tiles</h5><p>This a shortcut for bulk numbers of dynamic tiles with the same name. The first thing we will do is add a sensor. I named it <code>ground_sensor_3</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/4_sensor_multiple_dynamic.png" alt="4_sensor_multiple_dynamic.png"></p><p>The next step is to add a dynamic tile and name it. Make sure to set up the properties before copying. The number index in the name will change as you copy it. We do not want the dynamic tiles enabled at start, so uncheck <code>enabled at start</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/5_sensor_multiple_dynamic_2.png" alt="5_sensor_multiple_dynamic_2.png"></p><p>We will use a timer for a delay with each dynamic tile. One will appear after the other. You could shorten the timer for an instant result.</p><p>The first thing that needs to be done is to make a variable called <code>tile_index</code>. We will be concatenating this with the name of the dynamic tiles, <code>tile_</code> with some number index. We will assign the value <code>1</code> to <code>tile_index</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local tile_index = 1
</code></pre>"><span class="hljs-keyword">local</span> tile_index = <span class="hljs-number">1</span>
</code></pre><p>The second step is to make a timer. You can assign the time delay you want.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  sol.timer.start(400, function()
</code></pre>">  sol.timer.start(<span class="hljs-number">400</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
</code></pre><p>The third step is to male a variable called <code>previous_tile</code>. This will activate the first tile. </p><p>Now let us set up the <code>previous_tile</code> variable.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local previous_tile =
</code></pre>"><span class="hljs-keyword">local</span> previous_tile =
</code></pre><p>We will assign it to a function called <code>map:get_entity</code>. We will use this to get the times of all the dynamic tiles we want. One wants the names of all the <code>tile_</code> dynamic tiles with some number index. For example, <code>tile_1</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local previous_tile = map:get_entity(&quot;tile_&quot;
</code></pre>"><span class="hljs-keyword">local</span> previous_tile = map:get_entity(<span class="hljs-string">"tile_"</span>
</code></pre><p>Lastly, we will concatenate the <code>tile_index</code>. That will name it <code>tile_1</code> because the value of <code>tile_index</code> is <code>1</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local previous_tile = map:get_entity(&quot;tile_&quot; .. tile_index)
</code></pre>"><span class="hljs-keyword">local</span> previous_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. tile_index)
</code></pre><p>The fourth step <code>next_tile</code> is almost the same as <code>previous_tile</code>. The only difference is that we will be adding <code>1</code> to the <code>tile_index</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    local next_tile = map:get_entity(&quot;tile_&quot; .. (tile_index + 1))
</code></pre>">    <span class="hljs-keyword">local</span> next_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. (tile_index + <span class="hljs-number">1</span>))
</code></pre><p>The fifth step is to set up an increment for <code>next_tile</code>. This is needed for <code>tile_</code>  indexes 2, 3, 4, and 5.</p><p>Tip: Increment is adding a value to itself.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    tile_index = tile_index + 1
</code></pre>">    tile_index = tile_index + <span class="hljs-number">1</span>
</code></pre><p>The seventh step is to enable the <code>previous_tile</code>. If it is set to false, then the tiles will vanish one after the other. That could be useful for timed puzzles.</p><p><strong>False example</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    previous_tile:set_enabled(false)
</code></pre>">    previous_tile:set_enabled(<span class="hljs-keyword">false</span>)
</code></pre><p>However, we want it to be true.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    previous_tile:set_enabled(true)
</code></pre>">    previous_tile:set_enabled(<span class="hljs-keyword">true</span>)
</code></pre><p>Step 8 will be to stop the index from going beyond the number of tiles we have. The number of dynamic tiles is five for me. We will return <code>next_tile</code> false if it becomes nil. For instance, <code>tile_6</code> will be nil because it does not exist.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    if next_tile == nil then
      --finished
      return false
    end
</code></pre>">    <span class="hljs-keyword">if</span> next_tile == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">--finished</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>
</code></pre><p>The 9th step is to set <code>next_tile</code> to true, but in this case it really does not matter if it is true or false. There may be transition differences.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    next_tile:set_enabled(true)
    --Return true or it will stop after the second tile.
    return true
  end)
end
</code></pre>">    next_tile:set_enabled(<span class="hljs-keyword">true</span>)
    <span class="hljs-comment">--Return true or it will stop after the second tile.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The final script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function ground_sensor_3:on_activated()
  hero:save_solid_ground()

  local tile_index = 1
  sol.timer.start(400, function()
    local previous_tile = map:get_entity(&quot;tile_&quot; .. tile_index)
    local next_tile = map:get_entity(&quot;tile_&quot; .. (tile_index + 1))
    tile_index = tile_index + 1
    previous_tile:set_enabled(true)
    if next_tile == nil then
      --finished
      return false
    end
    next_tile:set_enabled(true)
    --Return true or it will stop after the second tile.
    return true
  end)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ground_sensor_3:on_activated</span><span class="hljs-params">()</span></span>
  hero:save_solid_ground()

  <span class="hljs-keyword">local</span> tile_index = <span class="hljs-number">1</span>
  sol.timer.start(<span class="hljs-number">400</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">local</span> previous_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. tile_index)
    <span class="hljs-keyword">local</span> next_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. (tile_index + <span class="hljs-number">1</span>))
    tile_index = tile_index + <span class="hljs-number">1</span>
    previous_tile:set_enabled(<span class="hljs-keyword">true</span>)
    <span class="hljs-keyword">if</span> next_tile == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">--finished</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>
    next_tile:set_enabled(<span class="hljs-keyword">true</span>)
    <span class="hljs-comment">--Return true or it will stop after the second tile.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>Lastly, if you check <code>enabled at start</code> for the initial state of all the <code>tile_</code> dynamic tiles, then set <code>previous_tile</code> and <code>next_tile</code> enabled to false, the dynamic tiles will vanish one after the other instead of appearing on after another.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    previous_tile:set_enabled(false)
    next_tile:set_enabled(false)
</code></pre>">    previous_tile:set_enabled(<span class="hljs-keyword">false</span>)
    next_tile:set_enabled(<span class="hljs-keyword">false</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/12_Sensor/Sensor_scripting/8_sensor_dynamic_enabled_checked.png" alt="8_sensor_dynamic_enabled_checked.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function ground_sensor_3:on_activated()
  hero:save_solid_ground()

  local tile_index = 1
  sol.timer.start(400, function()
    local previous_tile = map:get_entity(&quot;tile_&quot; .. tile_index)
    local next_tile = map:get_entity(&quot;tile_&quot; .. (tile_index + 1))
    tile_index = tile_index + 1
    previous_tile:set_enabled(false)
    if next_tile == nil then
      --finished
      return false
    end
    next_tile:set_enabled(false)
    --Return true or it will stop after the second tile.
    return true
  end)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ground_sensor_3:on_activated</span><span class="hljs-params">()</span></span>
  hero:save_solid_ground()

  <span class="hljs-keyword">local</span> tile_index = <span class="hljs-number">1</span>
  sol.timer.start(<span class="hljs-number">400</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">local</span> previous_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. tile_index)
    <span class="hljs-keyword">local</span> next_tile = map:get_entity(<span class="hljs-string">"tile_"</span> .. (tile_index + <span class="hljs-number">1</span>))
    tile_index = tile_index + <span class="hljs-number">1</span>
    previous_tile:set_enabled(<span class="hljs-keyword">false</span>)
    <span class="hljs-keyword">if</span> next_tile == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
      <span class="hljs-comment">--finished</span>
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>
    next_tile:set_enabled(<span class="hljs-keyword">false</span>)
    <span class="hljs-comment">--Return true or it will stop after the second tile.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>
</code></pre><h3 id="crystal-switch-entity"><a name="crystal-switch-entity" href="#crystal-switch-entity"></a>Crystal Switch Entity</h3><h5 id="add-crystal-switch"><a name="add-crystal-switch" href="#add-crystal-switch"></a>Add Crystal Switch</h5><p>The crystal switch works with the crystal block. A crystal block rises or lowers when a crystal switch is hit with key <code>c</code>. For example, the block will lower if the initial state of the block is set to lowered.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/13_crystal_switch/1_Add_crystal_switch_fix.png" alt="1_Add_crystal_switch.png"></p><h5 id="crystal-switch-properties"><a name="crystal-switch-properties" href="#crystal-switch-properties"></a>Crystal Switch Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/13_crystal_switch/2_crystal_switch_properties.png" alt="2_crystal_switch_properties.png"></p><h5 id="default-crystal-switch-graphic-names"><a name="default-crystal-switch-graphic-names" href="#default-crystal-switch-graphic-names"></a>Default Crystal Switch Graphic Names</h5><p>As far as I know the animation keywords for switches are <code>blue_lowered</code> and <code>orange_lowered</code>. The default animation is the color that one wants to see first.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/13_crystal_switch/3_default_entities_crystal.png" alt="3_default_entities_crystal.png"></p><h3 id="crystal-block-entities"><a name="crystal-block-entities" href="#crystal-block-entities"></a>Crystal Block Entities</h3><p>The crystal block works with the crystal switch. A crystal block rises or lowers when a crystal switch is hit with key <code>c</code>. For example, the block will lower if the initial state of the block is set to lowered.</p><h5 id="add-crystal-block"><a name="add-crystal-block" href="#add-crystal-block"></a>Add Crystal Block</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/14_crystal_block/1_add_crystal_block_lowered_raised_fix.png" alt="1_add_crystal_block_lowered_raised.png"></p><h5 id="crystal-block-properties"><a name="crystal-block-properties" href="#crystal-block-properties"></a>Crystal Block Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Size</td>
<td style="text-align:left">The dimension size of the entity.</td>
</tr>
<tr>
<td style="text-align:center">Subtype</td>
<td style="text-align:left">Initially lowered or raised. Basically, start the block lowered or raised at the start of the map.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/14_crystal_block/2_crystal_block_properties.png" alt="2_crystal_block_properties.png"></p><h5 id="default-crystal-block-graphic-names"><a name="default-crystal-block-graphic-names" href="#default-crystal-block-graphic-names"></a>Default Crystal Block Graphic Names</h5><p>As far as I know the keywords are <code>blue_lowered</code>, <code>blue_raised</code>, <code>orange_lowered</code>, and <code>orange_raised</code>. I tried different keywords for the animations, but the blocked failed to show up on the map when playtesting the game.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/14_crystal_block/3_block_set_up.png" alt="3_block_set_up.png"></p><h3 id="stream-entity"><a name="stream-entity" href="#stream-entity"></a>Stream Entity</h3><p>The stream entity pushes the player or moves him/her/it in the desired direction. It can also be used to slow the player down. For example, gravity, spinning wheel, and/or a sandstorm. A developer might want to have some force to slow down the player.</p><h5 id="add-stream"><a name="add-stream" href="#add-stream"></a>Add Stream</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/16_stream/1_add_streamer_fix.png" alt="16_stream/1_add_streamer.png"></p><h5 id="stream-properties"><a name="stream-properties" href="#stream-properties"></a>Stream Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">You can pick the direction you want the stream to go or push the player. Up, down, left, left-up, right-up, and right.</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the switch.</td>
</tr>
<tr>
<td style="text-align:center">Movement</td>
<td style="text-align:left">Allow the player to move when on the stream.</td>
</tr>
<tr>
<td style="text-align:center">Sword</td>
<td style="text-align:left">Allow the player to use the sword during movement.</td>
</tr>
<tr>
<td style="text-align:center">Items</td>
<td style="text-align:left">Allow the usage of items when on the stream.</td>
</tr>
<tr>
<td style="text-align:center">Speed</td>
<td style="text-align:left">The speed at which the stream will move the player.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/16_stream/2_stream_properties.png" alt="2_stream_properties.png"></p><h3 id="hud"><a name="hud" href="#hud"></a>HUD</h3><p>HUD stands for <code>heads up display</code>. It is the health bar, money counter, etc.</p><p>There are many scripts from Christophoâ€™s games that can be used. You can check his <a href="https://www.youtube.com/watch?v=RvV2rU75WmA">YouTube Tutorial</a> for that information. I will be covering the heart display and money counter.</p><h5 id="setup-hud-scripts"><a name="setup-hud-scripts" href="#setup-hud-scripts"></a>Setup HUD Scripts</h5><p>The 1st step will be to add the HUD scripts folder (Get them from sample &gt; <code>E_Crystal_switch-Block_Shop_stream.zip</code>.) and remove the current HUD in the menu directory or rename the scrips to <code>.old</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/18_hud/1_add_hud_folder.png" alt="1_add_hud_folder.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/18_hud/2_old.png" alt="2_old.png"></p><p>Remember to comment out the old hud in the <code>game_manager.lua</code> and require the HUD from the manager.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/hud/hud&quot;)
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/hud/hud"</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/18_hud/4_game_manager.png" alt="4_game_manager.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/18_hud/3_comment_out_old_hud.png" alt="3_comment_out_old_hud.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/menus/alttp_dialog_box&quot;)
require(&quot;scripts/multi_events&quot;)
require(&quot;scripts/hud/hud&quot;)

local game_manager = {}
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/alttp_dialog_box"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/multi_events"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/hud/hud"</span>)

<span class="hljs-keyword">local</span> game_manager = {}
</code></pre><p>Add the <code>green_digits</code> and <code>white_digits</code> fonts to the font directory. Get them from sample &gt; <code>E_Crystal_switch-Block_Shop_stream.zip</code>. Remember to add them in the manager too.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/18_hud/5_fonts.png" alt="5_fonts.png"></p><h5 id="hud-configurations-`hud_config.lua`"><a name="hud-configurations-`hud_config.lua`" href="#hud-configurations-`hud_config.lua`"></a>Hud Configurations <code>hud_config.lua</code></h5><p>You can change the coordinates of the counter and heart health display from this script. Change the x,y coordinates until you like what you see.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  -- Hearts meter.
  {
    menu_script = &quot;scripts/hud/hearts&quot;,
    x = -88,
    y = 0,
  },

  -- Rupee counter.
  {
    menu_script = &quot;scripts/hud/rupees&quot;,
    x = 121,
    y = 10,
  }
</code></pre>">  <span class="hljs-comment">-- Hearts meter.</span>
  {
    menu_script = <span class="hljs-string">"scripts/hud/hearts"</span>,
    x = -<span class="hljs-number">88</span>,
    y = <span class="hljs-number">0</span>,
  },

  <span class="hljs-comment">-- Rupee counter.</span>
  {
    menu_script = <span class="hljs-string">"scripts/hud/rupees"</span>,
    x = <span class="hljs-number">121</span>,
    y = <span class="hljs-number">10</span>,
  }
</code></pre><h5 id="health-heart-display-`hearts.lua`"><a name="health-heart-display-`hearts.lua`" href="#health-heart-display-`hearts.lua`"></a>Health Heart Display <code>hearts.lua</code></h5><p>Health is the life points the player has until he dies or faints. The way this script works is that it draws a surface of your heart image. The image will have full, half empty, and empty graphics. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/17_Health_system/0_heart.png" alt="0_heart.png"></p><p>You might have to adjust the surface for your image if you have super huge hearts or other graphics related to this system. This part can be found at the beginning of the <code>hearts.lua</code> script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  hearts.surface = sol.surface.create(80, 16)
</code></pre>">  hearts.surface = sol.surface.create(<span class="hljs-number">80</span>, <span class="hljs-number">16</span>)
</code></pre><p>If your hearts or graphics are like mine (beyond 8x8 in dimensions), then you will have to adjust them. At first mine turned out like this.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/17_Health_system/1_heart.png" alt="1_heart.png"></p><p>The script is currently set up for 8x8 hearts, but mine is 16x16 hearts. You will have to adjust the <code>function hearts:rebuild_surface()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> function hearts:rebuild_surface()

    hearts.surface:clear()

    local life = hearts.current_life_displayed
    local max_life = hearts.max_life_displayed
    for j = 1, max_life do
      if j % 2 == 0 then
        local x, y
        if j &amp;lt;= 20 then
          x = 4 * (j - 2)
          y = 0
        else
          x = 4 * (j - 22)
          y = 8
        end
        if life &amp;gt;= j then
          hearts_img:draw_region(0, 0, 8, 8, hearts.surface, x, y)
        else
          hearts_img:draw_region(16, 0, 8, 8, hearts.surface, x, y)
        end
      end
    end
    if life % 2 == 1 then
      local x, y
      if life &amp;lt;= 20 then
        x = 4 * (life - 1)
        y = 0
      else
        x = 4 * (life - 21)
        y = 8
      end
      hearts_img:draw_region(8, 0, 8, 8, hearts.surface, x, y)
    end
  end
</code></pre>"> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hearts:rebuild_surface</span><span class="hljs-params">()</span></span>

    hearts.surface:clear()

    <span class="hljs-keyword">local</span> life = hearts.current_life_displayed
    <span class="hljs-keyword">local</span> max_life = hearts.max_life_displayed
    <span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span>, max_life <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">if</span> j % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">local</span> x, y
        <span class="hljs-keyword">if</span> j &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">2</span>)
          y = <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">22</span>)
          y = <span class="hljs-number">8</span>
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
          hearts_img:draw_region(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, hearts.surface, x, y)
        <span class="hljs-keyword">else</span>
          hearts_img:draw_region(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, hearts.surface, x, y)
        <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> life % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">local</span> x, y
      <span class="hljs-keyword">if</span> life &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">1</span>)
        y = <span class="hljs-number">0</span>
      <span class="hljs-keyword">else</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">21</span>)
        y = <span class="hljs-number">8</span>
      <span class="hljs-keyword">end</span>
      hearts_img:draw_region(<span class="hljs-number">8</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, hearts.surface, x, y)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
</code></pre><p>  To be specific this part:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>      if j &amp;lt;= 20 then
          x = 4 * (j - 2)
          y = 0
        else
          x = 4 * (j - 22)
          y = 8
        end
        if life &amp;gt;= j then
          hearts_img:draw_region(0, 0, 8, 8, hearts.surface, x, y)
        else
          hearts_img:draw_region(16, 0, 8, 8, hearts.surface, x, y)
        end
      end
    end
    if life % 2 == 1 then
      local x, y
      if life &amp;lt;= 20 then
        x = 4 * (life - 1)
        y = 0
      else
        x = 4 * (life - 21)
        y = 8
      end
</code></pre>">      <span class="hljs-keyword">if</span> j &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">2</span>)
          y = <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">22</span>)
          y = <span class="hljs-number">8</span>
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
          hearts_img:draw_region(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, hearts.surface, x, y)
        <span class="hljs-keyword">else</span>
          hearts_img:draw_region(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">8</span>, hearts.surface, x, y)
        <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> life % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">local</span> x, y
      <span class="hljs-keyword">if</span> life &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">1</span>)
        y = <span class="hljs-number">0</span>
      <span class="hljs-keyword">else</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">21</span>)
        y = <span class="hljs-number">8</span>
      <span class="hljs-keyword">end</span>
</code></pre><p>In order to fix this I have to adjust <code>draw_region</code> functions. Draw_region draws certain locations on a surface.</p><p>Note: You can set up your graphics in the sprite editor to get coordinates easier.</p><p>Location 1 is at <code>(0, 0, 16, 16,)</code>. The 2 zeros are the positions. The y position does not change (px,<code>py</code>,sx,sy,) and the next 2 spots <code>16,16</code> are the sprite dimensions.</p><p>px,py = position</p><p>sx,sy = sprite dimensions</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hearts_img:draw_region(0, 0, 16, 16, hearts.surface, x, y)
</code></pre>">hearts_img:draw_region(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
</code></pre><p>Location 2 is at <code>(16, 0, 16, 16,)</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hearts_img:draw_region(16, 0, 16, 16, hearts.surface, x, y)
</code></pre>">hearts_img:draw_region(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
</code></pre><p>Location 3 is at <code>(32, 0, 16, 16,)</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hearts_img:draw_region(32, 0, 16, 16, hearts.surface, x, y)
</code></pre>">hearts_img:draw_region(<span class="hljs-number">32</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
</code></pre><p>The script result is the hearts are almost fixed. Notice that spacing issue?</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/17_Health_system/2_heart.png" alt="2_heart.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>if life &amp;gt;= j then
    for j = 1, max_life do
      if j % 2 == 0 then
        local x, y
        if j &amp;lt;= 20 then
          x = 4 * (j - 2)
          y = 0
        else
          x = 4 * (j - 22)
          y = 8
        end
        if life &amp;gt;= j then
          hearts_img:draw_region(0, 0, 16, 16, hearts.surface, x, y)
        else
          hearts_img:draw_region(32, 0, 16, 16, hearts.surface, x, y)
        end
      end
    end
    if life % 2 == 1 then
      local x, y
      if life &amp;lt;= 20 then
        x = 4 * (life - 1)
        y = 0
      else
        x = 4 * (life - 21)
        y = 8
      end
      hearts_img:draw_region(16, 0, 16, 16, hearts.surface, x, y)
    end
</code></pre>"><span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span>, max_life <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">if</span> j % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">local</span> x, y
        <span class="hljs-keyword">if</span> j &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">2</span>)
          y = <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span>
          x = <span class="hljs-number">4</span> * (j - <span class="hljs-number">22</span>)
          y = <span class="hljs-number">8</span>
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
          hearts_img:draw_region(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
        <span class="hljs-keyword">else</span>
          hearts_img:draw_region(<span class="hljs-number">32</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
        <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> life % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">local</span> x, y
      <span class="hljs-keyword">if</span> life &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">1</span>)
        y = <span class="hljs-number">0</span>
      <span class="hljs-keyword">else</span>
        x = <span class="hljs-number">4</span> * (life - <span class="hljs-number">21</span>)
        y = <span class="hljs-number">8</span>
      <span class="hljs-keyword">end</span>
      hearts_img:draw_region(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
    <span class="hljs-keyword">end</span>
</code></pre><p>One must adjust the variable <code>x</code> to fix the spacing issue. I changed them all to<br><code>x = 5</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/17_Health_system/3_heart.png" alt="3_heart.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>if life &amp;gt;= j then
    for j = 1, max_life do
      if j % 2 == 0 then
        local x, y
        if j &amp;lt;= 20 then
          x = 5 * (j - 2)
          y = 0
        else
          x = 5 * (j - 22)
          y = 8
        end
        if life &amp;gt;= j then
          hearts_img:draw_region(0, 0, 16, 16, hearts.surface, x, y)
        else
          hearts_img:draw_region(32, 0, 16, 16, hearts.surface, x, y)
        end
      end
    end
    if life % 2 == 1 then
      local x, y
      if life &amp;lt;= 20 then
        x = 5 * (life - 1)
        y = 0
      else
        x = 5 * (life - 21)
        y = 8
      end
      hearts_img:draw_region(16, 0, 16, 16, hearts.surface, x, y)
    end
</code></pre>"><span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">for</span> j = <span class="hljs-number">1</span>, max_life <span class="hljs-keyword">do</span>
      <span class="hljs-keyword">if</span> j % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">local</span> x, y
        <span class="hljs-keyword">if</span> j &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
          x = <span class="hljs-number">5</span> * (j - <span class="hljs-number">2</span>)
          y = <span class="hljs-number">0</span>
        <span class="hljs-keyword">else</span>
          x = <span class="hljs-number">5</span> * (j - <span class="hljs-number">22</span>)
          y = <span class="hljs-number">8</span>
        <span class="hljs-keyword">end</span>
        <span class="hljs-keyword">if</span> life &gt;= j <span class="hljs-keyword">then</span>
          hearts_img:draw_region(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
        <span class="hljs-keyword">else</span>
          hearts_img:draw_region(<span class="hljs-number">32</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
        <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> life % <span class="hljs-number">2</span> == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">local</span> x, y
      <span class="hljs-keyword">if</span> life &lt;= <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
        x = <span class="hljs-number">5</span> * (life - <span class="hljs-number">1</span>)
        y = <span class="hljs-number">0</span>
      <span class="hljs-keyword">else</span>
        x = <span class="hljs-number">5</span> * (life - <span class="hljs-number">21</span>)
        y = <span class="hljs-number">8</span>
      <span class="hljs-keyword">end</span>
      hearts_img:draw_region(<span class="hljs-number">16</span>, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>, <span class="hljs-number">16</span>, hearts.surface, x, y)
    <span class="hljs-keyword">end</span>
</code></pre><h5 id="money-system-rupee-style"><a name="money-system-rupee-style" href="#money-system-rupee-style"></a>Money System Rupee Style</h5><p>I will explain on how to adjust it to different size hearts and coordinate changes. You can change the counterâ€™s location from <code>hud_config.lua</code>.</p><p>The HUD uses an image file called <code>rupee_icon.png</code>. I made up a simple gem for this purpose. This needs to be added to <code>sprites &gt; hud</code> directory.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/1_rupee_icon.png" alt="1_rupee_icon.png"></p><p>The counter should just show up after adding the scripts. You can adjust the gemâ€™s location in <code>rupees.lua</code>. Look for <code>function rupees:on_draw</code>.</p><p>This line changes the x-axis. The <code>-2</code> location.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    rupee_icon_img:draw(dst_surface, x + -2, y)
</code></pre>">    rupee_icon_img:draw(dst_surface, x + -<span class="hljs-number">2</span>, y)
</code></pre><p>This line changes the y-axis. The <code>11</code> location.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    digits_text:draw(dst_surface, x, y + 11)
</code></pre>">    digits_text:draw(dst_surface, x, y + <span class="hljs-number">11</span>)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  function rupees:on_draw(dst_surface)

    local x, y = dst_x, dst_y
    local width, height = dst_surface:get_size()
    if x &amp;lt; 0 then
      x = width + x
    end
    if y &amp;lt; 0 then
      y = height + y
    end

    rupee_icon_img:draw(dst_surface, x + -2, y)
    digits_text:draw(dst_surface, x, y + 11)
  end
</code></pre>">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rupees:on_draw</span><span class="hljs-params">(dst_surface)</span></span>

    <span class="hljs-keyword">local</span> x, y = dst_x, dst_y
    <span class="hljs-keyword">local</span> width, height = dst_surface:get_size()
    <span class="hljs-keyword">if</span> x &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      x = width + x
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">if</span> y &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      y = height + y
    <span class="hljs-keyword">end</span>

    rupee_icon_img:draw(dst_surface, x + -<span class="hljs-number">2</span>, y)
    digits_text:draw(dst_surface, x, y + <span class="hljs-number">11</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>The counter shows up green and nothing happens. In order to use the counter one must set the limit. By default, it is set to 0. That means it is full. Green font means the counter is full.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/2_green_full.png" alt="2_green_full.png"></p><p>In <code>game_manager.lua</code> under function <code>function game_manager:start_game()</code> add the following line of code.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    game:set_max_money(100)
</code></pre>">    game:set_max_money(<span class="hljs-number">100</span>)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function game_manager:start_game()

  local exists = sol.game.exists(&quot;save1.dat&quot;)
  local game = sol.game.load(&quot;save1.dat&quot;)
  if not exists then
    -- Initialize a new savegame.
    game:set_max_life(12)
    game:set_life(game:get_max_life())
    game:set_ability(&quot;lift&quot;, 2)
    game:set_max_money(100)
    game:set_ability(&quot;sword&quot;, 1)
    game:set_starting_location(&quot;Map_4&quot;) -- Starting location.
  end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:start_game</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> exists = sol.game.exists(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">local</span> game = sol.game.<span class="hljs-built_in">load</span>(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exists <span class="hljs-keyword">then</span>
    <span class="hljs-comment">-- Initialize a new savegame.</span>
    game:set_max_life(<span class="hljs-number">12</span>)
    game:set_life(game:get_max_life())
    game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">2</span>)
    game:set_max_money(<span class="hljs-number">100</span>)
    game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">1</span>)
    game:set_starting_location(<span class="hljs-string">"Map_4"</span>) <span class="hljs-comment">-- Starting location.</span>
  <span class="hljs-keyword">end</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/3_white_not_full.png" alt="3_white_not_full.png"></p><h3 id="money-(gem)-setup"><a name="money-(gem)-setup" href="#money-(gem)-setup"></a>Money (Gem) Setup</h3><p>The gem already exists for you. You can thank Diarandor for that, but I will explain how to set up the gem. This script is a little cleaner.</p><ol>
<li>Make an item script called <code>gem</code>. You probably want to delete the old one first or use the name <code>gem2</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/Rupee_scripting/1_Create_gem_item.png" alt="1_Create_gem_item.png"></p><ol>
<li>Go to <code>sprites &gt; entities &gt; items</code>. The item script name must match, the item animation game.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/Rupee_scripting/2_entities_items.png" alt="2_entities_items.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/Rupee_scripting/3_animation_variants_in_items.png" alt="3_animation_variants_in_items.png"></p><ol>
<li>By default, a script template is made when making an item.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Lua script of item gem.
-- This script is executed only once for the whole game.

-- Feel free to modify the code below.
-- You can add more events and remove the ones you don't need.

-- See the Solarus Lua API documentation for the full specification
-- of types, events and methods:
-- http://www.solarus-games.org/doc/latest

local item = ...
local game = item:get_game()

-- Event called when the game is initialized.
function item:on_started()

  -- Initialize the properties of your item here,
  -- like whether it can be saved, whether it has an amount
  -- and whether it can be assigned.
end

-- Event called when the hero is using this item.
function item:on_using()

  -- Define here what happens when using this item
  -- and call item:set_finished() to release the hero when you have finished.
  item:set_finished()
end

-- Event called when a pickable treasure representing this item
-- is created on the map.
function item:on_pickable_created(pickable)

  -- You can set a particular movement here if you don't like the default one.
end
</code></pre>"><span class="hljs-comment">-- Lua script of item gem.</span>
<span class="hljs-comment">-- This script is executed only once for the whole game.</span>

<span class="hljs-comment">-- Feel free to modify the code below.</span>
<span class="hljs-comment">-- You can add more events and remove the ones you don't need.</span>

<span class="hljs-comment">-- See the Solarus Lua API documentation for the full specification</span>
<span class="hljs-comment">-- of types, events and methods:</span>
<span class="hljs-comment">-- http://www.solarus-games.org/doc/latest</span>

<span class="hljs-keyword">local</span> item = ...
<span class="hljs-keyword">local</span> game = item:get_game()

<span class="hljs-comment">-- Event called when the game is initialized.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_started</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Initialize the properties of your item here,</span>
  <span class="hljs-comment">-- like whether it can be saved, whether it has an amount</span>
  <span class="hljs-comment">-- and whether it can be assigned.</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- Event called when the hero is using this item.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_using</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define here what happens when using this item</span>
  <span class="hljs-comment">-- and call item:set_finished() to release the hero when you have finished.</span>
  item:set_finished()
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- Event called when a pickable treasure representing this item</span>
<span class="hljs-comment">-- is created on the map.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_pickable_created</span><span class="hljs-params">(pickable)</span></span>

  <span class="hljs-comment">-- You can set a particular movement here if you don't like the default one.</span>
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>The function<code>function item:on_using()</code> will not be used because you buy things with money (gems), but if you plan to attack with gems, then you would use this function. That means you can delete this part.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Event called when the hero is using this item.
function item:on_using()

  -- Define here what happens when using this item
  -- and call item:set_finished() to release the hero when you have finished.
  item:set_finished()
end
</code></pre>"><span class="hljs-comment">-- Event called when the hero is using this item.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_using</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define here what happens when using this item</span>
  <span class="hljs-comment">-- and call item:set_finished() to release the hero when you have finished.</span>
  item:set_finished()
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>The function<code>function item:on_pickable_created(pickable)</code> is used for when an item is created on a map. The movement animation can be changed. For example, have it spin differently (default one works fine in my opinion) or have the gem move slowly away from the player. That means you can delete this part of the script as well.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Event called when a pickable treasure representing this item
-- is created on the map.
function item:on_pickable_created(pickable)

  -- You can set a particular movement here if you don't like the default one.
end
</code></pre>"><span class="hljs-comment">-- Event called when a pickable treasure representing this item</span>
<span class="hljs-comment">-- is created on the map.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_pickable_created</span><span class="hljs-params">(pickable)</span></span>

  <span class="hljs-comment">-- You can set a particular movement here if you don't like the default one.</span>
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>We are left with one function <code>function item:on_started()</code>. This function is used to set up the properties for your item. For example, shadow size, and sound when picked up. There are a lot of functions that can be used and I will cover the basic ones.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local item = ...
local game = item:get_game()

-- Event called when the game is initialized.
function item:on_started()

  -- Initialize the properties of your item here,
  -- like whether it can be saved, whether it has an amount
  -- and whether it can be assigned.
end
</code></pre>"><span class="hljs-keyword">local</span> item = ...
<span class="hljs-keyword">local</span> game = item:get_game()

<span class="hljs-comment">-- Event called when the game is initialized.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_started</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Initialize the properties of your item here,</span>
  <span class="hljs-comment">-- like whether it can be saved, whether it has an amount</span>
  <span class="hljs-comment">-- and whether it can be assigned.</span>
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Set the shadow size with the function <code>self:set_shadow("animation_name")</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/19_rupee/Rupee_scripting/4_big_small_shadow.png" alt="Rupee_scripting/4_big_small_shadow.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  -- Define the properties of rupees.
  self:set_shadow(&quot;small&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_shadow(<span class="hljs-string">"small"</span>)
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Set whether it can disappear or not with the function <code>self:set_can_disappear(true/false)</code>.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  -- Define the properties of rupees.
  self:set_can_disappear(true)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_can_disappear(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Set the â€œta da da daaâ€ brandish sound when picking up the item. This will be false because it would be strange for this to happen on a simple gem. Normally, this happens when a chest is open. The function for that is <code>self:set_brandish_when_picked(false/true)</code>.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  -- Define the properties of rupees.
  self:set_brandish_when_picked(false)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_brandish_when_picked(<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Set the sound for when the item is picked up with function <code>self:set_sound_when_picked("name_of_sound")</code>.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  -- Define the properties of rupees.
  self:set_sound_when_picked(&quot;picked_rupee&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_sound_when_picked(<span class="hljs-string">"picked_rupee"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The result:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  -- Define the properties of rupees.
  self:set_shadow(&quot;small&quot;)
  self:set_can_disappear(true)
  self:set_brandish_when_picked(false)
  self:set_sound_when_picked(&quot;picked_rupee&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_shadow(<span class="hljs-string">"small"</span>)
  self:set_can_disappear(<span class="hljs-keyword">true</span>)
  self:set_brandish_when_picked(<span class="hljs-keyword">false</span>)
  self:set_sound_when_picked(<span class="hljs-string">"picked_rupee"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Function item:on_obtaining</strong></p><p>The last function will be for setting up the value for all the variants and so that money can be added to the counter. We do this with the function <code>function item:on_obtaining(variant, savegame_variable)</code>.</p><ol>
<li>It is best to start this with a table. The table will hole the money amount for 3 variants. For example, value 2 = variant 1, value 10 = variant 3, etc.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_obtaining(variant, savegame_variable)

  local amounts = { 2, 6, 10 }
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">(variant, savegame_variable)</span></span>

  <span class="hljs-keyword">local</span> amounts = { <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span> }
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Next we will use the function <code>game:add_money()</code>. This is used to add value to the money counter. We will use the variable <code>amounts</code> and <code>variant</code> from the function item:on_obtaining(<code>variant</code>, savegame_variable) to add values for the gem <code>amounts[variant]</code>.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_obtaining(variant, savegame_variable)

  local amounts = { 2, 6, 10 }
  game:add_money(amounts[variant])
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">(variant, savegame_variable)</span></span>

  <span class="hljs-keyword">local</span> amounts = { <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span> }
  game:add_money(amounts[variant])
<span class="hljs-keyword">end</span>
</code></pre><p>The result is the gem script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local item = ...
local game = item:get_game()

function item:on_created()

  -- Define the properties of rupees.
  self:set_shadow(&quot;small&quot;)
  self:set_can_disappear(true)
  self:set_brandish_when_picked(false)
  self:set_sound_when_picked(&quot;picked_rupee&quot;)
end

function item:on_obtaining(variant, savegame_variable)

  local amounts = { 2, 6, 10 }
  game:add_money(amounts[variant])
end
</code></pre>"><span class="hljs-keyword">local</span> item = ...
<span class="hljs-keyword">local</span> game = item:get_game()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  <span class="hljs-comment">-- Define the properties of rupees.</span>
  self:set_shadow(<span class="hljs-string">"small"</span>)
  self:set_can_disappear(<span class="hljs-keyword">true</span>)
  self:set_brandish_when_picked(<span class="hljs-keyword">false</span>)
  self:set_sound_when_picked(<span class="hljs-string">"picked_rupee"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">(variant, savegame_variable)</span></span>

  <span class="hljs-keyword">local</span> amounts = { <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">10</span> }
  game:add_money(amounts[variant])
<span class="hljs-keyword">end</span>
</code></pre><h3 id="shop-entity"><a name="shop-entity" href="#shop-entity"></a>Shop Entity</h3><p>The shop entity is a quick shop setup. The shop entity shows the price, an icon, and the treasure. It uses an image file called <code>rupee_icon.png</code>.</p><h5 id="add-shop-entity"><a name="add-shop-entity" href="#add-shop-entity"></a>Add Shop Entity</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/1_Add_shop_fix.png" alt="1_Add_shop.png"></p><h5 id="shop-entity-properties"><a name="shop-entity-properties" href="#shop-entity-properties"></a>Shop Entity Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Treasure</td>
<td style="text-align:left">The treasure item to choose. You can pick a variant and save state.</td>
</tr>
<tr>
<td style="text-align:center">Price</td>
<td style="text-align:left">The cost of the item.</td>
</tr>
<tr>
<td style="text-align:center">Price font</td>
<td style="text-align:left">The font for the shop.</td>
</tr>
<tr>
<td style="text-align:center">Description dialog id</td>
<td style="text-align:left">Dialog to use when buying the item.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/2_shop_properties.png" alt="2_shop_properties.png"></p><h5 id="shop-setup"><a name="shop-setup" href="#shop-setup"></a>Shop Setup</h5><p>This is what the basic shop set up looks like.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/3_shop_set_up.png" alt="3_shop_set_up.png"></p><h5 id="shop-entity-dialogs"><a name="shop-entity-dialogs" href="#shop-entity-dialogs"></a>Shop Entity Dialogs</h5><p>The shop requires some dialogs. </p><p>The first is in the dialog properties. The name can be whatever you want in this case.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/shop_dialog-save_state/1_dialog_call.png" alt="shop_dialog-save_state/1_dialog_call.png"></p><p><code>shop.gem</code></p><pre><code data-origin="<pre><code>Do you want to buy a gem?
</code></pre>">Do you want to buy a gem?
</code></pre><p>The rest of the dialog go by default built in names. They will all be under, â€œ_shop.â€</p><p><code>_shop.amount_full</code></p><pre><code data-origin="<pre><code>You can't carry any more!
</code></pre>">You can't carry any more!
</code></pre><p><code>_shop.not_enough_money</code></p><pre><code data-origin="<pre><code>Sorry, you don't have enough Rupees!
</code></pre>">Sorry, you don't have enough Rupees!
</code></pre><p><code>_shop.question</code></p><pre><code data-origin="<pre><code>Price: $v Rupees.
        $? Buy
        $? Don't Buy
</code></pre>">Price: $v Rupees.
        $? Buy
        $? Don't Buy
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/shop_dialog-save_state/2_dialogs_shop.png" alt="shop_dialog-save_state/2_dialogs_shop.png"></p><p>Lastly, if you save the state of the treasure from the shop, then you will only be able to buy that item once.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/15_shop/shop_dialog-save_state/3_save_shop_item_state.png" alt="shop_dialog-save_state/3_save_shop_item_state.png"></p><h3 id="door-entity"><a name="door-entity" href="#door-entity"></a>Door Entity</h3><p>The purpose of this entity is for opening doors. </p><p>You can find the sample for this section in the directory <code>Lessons &gt; Chapter_13_Entities &gt; F_door_stairs_seperator_custom.zip</code>.</p><h5 id="add-door"><a name="add-door" href="#add-door"></a>Add Door</h5><p>The door entity is by the stream entity.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/1_add_door.png" alt="1_add_door.png"></p><h5 id="door-properties"><a name="door-properties" href="#door-properties"></a>Door Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">You can pick the sprite direction of the door if that graphic exists in an animation setup. The options are up, down, left, and right.</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the door.</td>
</tr>
<tr>
<td style="text-align:center">Door State</td>
<td style="text-align:left">If you want the door to stay open when leaving the map, then you much check the <code>save the door state</code>.</td>
</tr>
<tr>
<td style="text-align:center">Opening mode</td>
<td style="text-align:left">There are bunches of opening modes for a door. <br> <strong>By script</strong> - That means a script is required for opening a door. <br> <strong>By hero</strong> - The hero opens the door. <br> <strong>By hero, savegame variable</strong> - This means the hero can open this door if the savegame variable exists. <br> <strong>By hero, item</strong> - An item is required for the hero to open the door. <br> <strong>By explosion</strong> - A bomb can open the door or some other item with an explosion ability.</td>
</tr>
<tr>
<td style="text-align:center">Dialog</td>
<td style="text-align:left">If the door fails to open, then a dialog can be shown. For example, â€œyou need a small key to open this door.â€</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/2_door_properties.png" alt="2_door_properties.png"></p><h5 id="door-graphic-setup"><a name="door-graphic-setup" href="#door-graphic-setup"></a>Door Graphic Setup</h5><p>For a door to work 3 default animation keywords are needed.</p><ul>
<li>closed - Door is closed. Not open.</li><li>closing - Door is opening or closing</li><li>opening - Door is open.</li></ul><p>The closing time determines whether the graphic shows or not. Give the door entity a frame delay of <code>0 ms</code> for animation <code>closed</code> if you do not want the door graphic to vanish when playtesting.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/3_door_closing_opening_closed.png" alt=""></p><h5 id="door-script"><a name="door-script" href="#door-script"></a>Door Script</h5><p>We are going to open two doors at the same time with a switch entity.</p><ol>
<li>Add a switch entity. I named the switch <code>door_trigger</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/1_door_switch.png" alt="1_door_switch.png"></p><ol>
<li>Add a door entity. I named it <code>switch_door</code>. </li><li>You can save the state of the door.</li><li>Select the opening mode <code>By script</code>. </li><li>You can add a dialog as well.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/2_door_script.png" alt="2_door_script.png"></p><ol>
<li>Copy the door entity you just made and set it somewhere. Do not rename it because the number index at the end is needed to open both doors at the same time.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/3_name_index.png" alt="door_scripting/3_name_index.png"></p><ol>
<li>The function <code>map:open_doors("name_without_number_index")</code> will open both doors at the same time.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()

function door_trigger:on_activated()
  map:open_doors(&quot;switch_door&quot;)
  sol.audio.play_sound(&quot;door_open&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">door_trigger:on_activated</span><span class="hljs-params">()</span></span>
  map:open_doors(<span class="hljs-string">"switch_door"</span>)
  sol.audio.play_sound(<span class="hljs-string">"door_open"</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="opening-door-with-key"><a name="opening-door-with-key" href="#opening-door-with-key"></a>Opening Door With Key</h5><ol>
<li>Create an item named <code>key</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/5_key_must_exist.png" alt="5_key_must_exist.png"></p><ol>
<li>Make an animation for the key in <code>sprites &gt; entities &gt; items</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/6_key_entities_items.png" alt="6_key_entities_items.png"></p><ol>
<li>Setup the door and require the key.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/4_door_key.png" alt="door_scripting/4_door_key.png"></p><ol>
<li>Make sure to create a dialog for the item <code>key</code>.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/8_item_dialog_variant.png" alt="8_item_dialog_variant.png"></p><ol>
<li>Saving the item <code>key</code>. The item must be saved in order for it to work. Double click on the item <code>key</code> to open its item script. On creating the key use the function <code>self:set_savegame_variable("name_of_item")</code>.</li></ol><h5 id="door-key"><a name="door-key" href="#door-key"></a>Door Key</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local item = ...
local game = item:get_game()


function item:on_created()
  -- Define the properties of key.
  self:set_savegame_variable(&quot;map_4_key&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> item = ...
<span class="hljs-keyword">local</span> game = item:get_game()


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>
  <span class="hljs-comment">-- Define the properties of key.</span>
  self:set_savegame_variable(<span class="hljs-string">"map_4_key"</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="door-opening-by-hero"><a name="door-opening-by-hero" href="#door-opening-by-hero"></a>Door Opening By Hero</h5><p>The hero is able to open the door.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/20_door/door_scripting/7_by_hero.png" alt="7_by_hero.png"></p><h3 id="stairs-entity"><a name="stairs-entity" href="#stairs-entity"></a>Stairs Entity</h3><p>The purpose of the stair entity is to create stair walking animation.</p><h5 id="add-stairs"><a name="add-stairs" href="#add-stairs"></a>Add Stairs</h5><p>The stair entity is by the door entity.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/21_stairs/1_add_stairs.png" alt="1_add_stairs.png)"></p><h5 id="stairs-properties"><a name="stairs-properties" href="#stairs-properties"></a>Stairs Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">You can pick the hero direction for when the hero goes up the stairs. The options are up, down, left, and right.</td>
</tr>
<tr>
<td style="text-align:center">Subtype</td>
<td style="text-align:left">The subtypes are: <br><strong>Spiral staircase (going upstairs)</strong> - Upward spiral stairs walking animation.<br><strong>Spiral staircase (going downstairs)</strong> - Downward spiral stairs walking animation.<br><strong>Straight staircase (going upstairs)</strong> - Straight upstairs walking animation.<br><strong>Straight staircase (going downstairs)</strong>  - Straight down stairs walking animation.<br><strong>Platform stairs (same map)</strong> - Walking up platform animation. It basically walks up a layer. Trying the â€œStraight staircaseâ€ would make the hero go behind the layer.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/21_stairs/2_stairs_properties.png" alt="2_stairs_properties.png"></p><h5 id="stairs-setup"><a name="stairs-setup" href="#stairs-setup"></a>Stairs Setup</h5><p>Set the destination and teletransporter onto the stair entity. The player will do a walking stair animation and teleport to the desired destination.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/21_stairs/stairs_setup/1_stairs_teletransporter_destination_on.png" alt="1_stairs_teletransporter_destination_on.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/21_stairs/stairs_setup/2_put_on_top.png" alt="stairs_setup/2_put_on_top.png"></p><h3 id="separator-entity"><a name="separator-entity" href="#separator-entity"></a>Separator Entity</h3><p>The purpose of this is block the view of the player or enemy. For example, if you have many sections in a room and do not want to see the other sections, then use the separator to block the view. The blocking has to be reasonable though. The sections should all be even or the separator will not work properly.</p><h5 id="add-separator"><a name="add-separator" href="#add-separator"></a>Add Separator</h5><p>The separator entity is by the stair entity. It is the purple icon.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/22_seperator/1_add_seperator.png" alt="1_add_seperator.png1_add_seperator.png"></p><h5 id="separator-properties"><a name="separator-properties" href="#separator-properties"></a>Separator Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">size</td>
<td style="text-align:left">One is able to expand, stretch, and/or resize the separator.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/22_seperator/2_seperator_properties.png" alt="2_seperator_properties.png"></p><h5 id="separator-viewpoint"><a name="separator-viewpoint" href="#separator-viewpoint"></a>Separator viewpoint</h5><ol>
<li>View without separator.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/22_seperator/Seperator_view_points/1_with_out_seperator.png" alt="Seperator_view_points/1_with_out_seperator.png"></p><ol>
<li>Adding separator.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/22_seperator/Seperator_view_points/2_place_seperator.png" alt="Seperator_view_points/2_place_seperator.png"></p><ol>
<li>View with separator.</li></ol><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/22_seperator/Seperator_view_points/3_with_seperator.png" alt="3_with_seperator.png"></p><h3 id="custom-entities"><a name="custom-entities" href="#custom-entities"></a>Custom Entities</h3><p>The custom entity is for custom scripts. </p><h5 id="add-custom-entity"><a name="add-custom-entity" href="#add-custom-entity"></a>Add Custom Entity</h5><p>The custom entity is by the purple separator entity. It is the green puzzle piece icon.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/23_custom/1_add_custom_entity.png" alt="1_add_custom_entity.png"></p><h5 id="custom-entity-properties"><a name="custom-entity-properties" href="#custom-entity-properties"></a>Custom Entity Properties</h5><table>
<thead>
<tr>
<th style="text-align:center">Type</th>
<th style="text-align:left">Option</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Name</td>
<td style="text-align:left">A name is needed for scripting reasons. You can leave it blank, but unless you plan to have it there just for show, then a name is needed.</td>
</tr>
<tr>
<td style="text-align:center">Layer</td>
<td style="text-align:left">The layer you want the entity on.</td>
</tr>
<tr>
<td style="text-align:center">Position</td>
<td style="text-align:left">The coordinates the entity is at. You can manually change them or move the entity with the cursor.</td>
</tr>
<tr>
<td style="text-align:center">size</td>
<td style="text-align:left">One is able to expand, stretch, and/or resize the custom entity.</td>
</tr>
<tr>
<td style="text-align:center">Direction</td>
<td style="text-align:left">The direction of the sprite if it exists in an animation. <br> - Up <br> - Down <br> - Left <br> - Right</td>
</tr>
<tr>
<td style="text-align:center">Sprite</td>
<td style="text-align:left">Pick the sprite image for the entity.</td>
</tr>
<tr>
<td style="text-align:center">Custom entity script</td>
<td style="text-align:left">Call a custom entity from the entity folder from the resource manager. You will notice the green puzzle icon. <br> <img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/23_custom/4_resource_custom_puzzle.png" alt="4_resource_custom_puzzle.png"></td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/23_custom/2_custom_properties.png" alt="2_custom_properties.png"></p><h5 id="create-custom-entity-script"><a name="create-custom-entity-script" href="#create-custom-entity-script"></a>Create Custom Entity Script</h5><p>Go to entities and right click to add an entity script.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/23_custom/3_make_custom_entity_script.png" alt="3_make_custom_entity_script.png"></p><p>You can pick an entity script from the custom entity.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/23_custom/custom_entity_scripting/1_custom_entity.png" alt="1_custom_entity.png"></p><h5 id="trick-chest-entity-scripting"><a name="trick-chest-entity-scripting" href="#trick-chest-entity-scripting"></a>Trick Chest Entity Scripting</h5><p>We are going to script a chest that hurts the player. </p><ol>
<li><p>Double click on the <code>trick_chest</code> entity.</p>
</li><li><p>Erase everything, but the <code>function entity:on_created()</code> and the entity signifier <code>local entity = ...</code>. By signifier, I mean it just tells that its entity related.</p>
</li><li><p>Setup the entity, so it works on the map. <code>local map = entity:get_map()</code>.</p>
</li><li><p>Setup the entity, so it affects the hero <code>local hero = map:get_hero()</code>.</p>
</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local map = entity:get_map()
local hero = map:get_hero()
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()
</code></pre><ol>
<li><p>Okay, we got the basics set up. Now we can give the entity <code>trick_chest</code> properties when it is created <code>function entity:on_created()</code>. These properties are not really needed if you set it up in the editor. </p>
</li><li><p>The only function that is truly needed is <code>self:set_traversable_by(true/false)</code>. You will not go through the entity if the is set to false. Furthermore, I demonstrated how to set the size and origin, but, you can do this in the editor.</p>
</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function entity:on_created()
  self:set_size(16, 16)
  self:set_origin(8, 13)
  self:set_traversable_by(false)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  self:set_size(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
  self:set_origin(<span class="hljs-number">8</span>, <span class="hljs-number">13</span>)
  self:set_traversable_by(<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Now we get to find out why we needed to <code>local hero = map:get_hero()</code>. We needed to get the hero in order to cause damage using the function <code>on_interaction()</code>. There are a few ways to cause damage. </li></ol><p>One can use game function <code>game:remove_life(total_life - damage_amount)</code>. That would require one to get the game <code>local game = entity:get_game()</code>, but there is not indication that damage was caused.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local map = entity:get_map()
local hero = map:get_hero()
local game = entity:get_game()

function entity:on_created()
  self:set_traversable_by(false)
end

function entity:on_interaction()
  game:remove_life(12 - 6)
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()
<span class="hljs-keyword">local</span> game = entity:get_game()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  self:set_traversable_by(<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_interaction</span><span class="hljs-params">()</span></span>
  game:remove_life(<span class="hljs-number">12</span> - <span class="hljs-number">6</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>Another way is to use the function <code>hero:start_hurt(x,y,damage_amount)</code>. The hero will be thrown back and damage will be inflicted. The <code>x</code> and <code>y</code> are the positions of the entity.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/c1e03d749f44bbf6868295d237f141911615a2ec/Lesson_images/Chapter_13_images/23_custom/custom_entity_scripting/2_entity_position.png" alt="2_entity_position.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local map = entity:get_map()
local hero = map:get_hero()

function entity:on_created()
  self:set_traversable_by(false)
end

function entity:on_interaction()
  hero:start_hurt(240,277,6)
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  self:set_traversable_by(<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_interaction</span><span class="hljs-params">()</span></span>
  hero:start_hurt(<span class="hljs-number">240</span>,<span class="hljs-number">277</span>,<span class="hljs-number">6</span>)
<span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Lastly, you can remove the entity if you want after it causes damage. I mentioned the <code>remove()</code> before.</li></ol><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local map = entity:get_map()
local hero = map:get_hero()


function entity:on_created()
  self:set_size(16, 16)
  self:set_origin(8, 13)
  self:set_traversable_by(false)
end

function entity:on_interaction()
  --game:remove_life(12 - 6)
  hero:start_hurt(240,277,6)
  entity:remove()
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()


<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  self:set_size(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
  self:set_origin(<span class="hljs-number">8</span>, <span class="hljs-number">13</span>)
  self:set_traversable_by(<span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_interaction</span><span class="hljs-params">()</span></span>
  <span class="hljs-comment">--game:remove_life(12 - 6)</span>
  hero:start_hurt(<span class="hljs-number">240</span>,<span class="hljs-number">277</span>,<span class="hljs-number">6</span>)
  entity:remove()
<span class="hljs-keyword">end</span>
</code></pre><h4 id="custom-entity-switch"><a name="custom-entity-switch" href="#custom-entity-switch"></a>Custom Entity Switch</h4><p>There is no function for <code>on_activated</code> with a custom entity, but one can easily make one with Lua using a timer.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local hero = map:get_hero()

--Create on_activated
sol.timer.start(500, function()
  if entity.on_activated ~= nil then
    entity:on_activated()
   return true 
  end
end)
</code></pre>"><span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-comment">--Create on_activated</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> entity.on_activated ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    entity:on_activated()
   <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)
</code></pre><p>The easiest way to detect an entity overlapping another is with the <code>overlaps</code> function. </p><p><code>entity:overlaps(other_entity, [collision_mode])</code></p><table>
<thead>
<tr>
<th>Collision mode</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œoverlappingâ€</td>
<td style="text-align:left">Collision if the bounding box of both entities overlap. This is the default value.</td>
</tr>
<tr>
<td>â€œcontainingâ€</td>
<td style="text-align:left">Collision if the bounding box of the other entity is fully inside the bounding box of this entity.</td>
</tr>
<tr>
<td>â€œoriginâ€</td>
<td style="text-align:left">Collision if the origin point or the other entity is inside the bounding box of this entity.</td>
</tr>
<tr>
<td>â€œcenterâ€</td>
<td style="text-align:left">Collision if the center point of the other entity is inside the bounding box of this entity.</td>
</tr>
<tr>
<td>â€œfacingâ€</td>
<td style="text-align:left">Collision if the facing position of the other entityâ€™s bounding box is touching this entityâ€™s bounding box. Bounding boxes donâ€™t necessarily overlap, but they are in contact: there is no space between them. When you consider the bounding box of an entity, which is a rectangle with four sides, the facing point is the middle point of the side the entity is oriented to. This â€œfacingâ€ collision test is useful when the other entity cannot traverse your custom entity. For instance, if the other entity has direction â€œeastâ€, there is a collision if the middle of the east side of its bounding box touches (but does not necessarily overlap) this entityâ€™s bounding box. This is typically what you need to let the hero interact with this entity when he is looking at it.</td>
</tr>
<tr>
<td>â€œtouchingâ€</td>
<td style="text-align:left">Like â€œfacingâ€, but accepts all four sides of the other entityâ€™s bounding box, no matter its direction.</td>
</tr>
<tr>
<td>â€œspriteâ€</td>
<td style="text-align:left">Collision if a sprite of the other entity overlaps a sprite of this entity. The collision test is pixel precise.</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local hero = map:get_hero()

function entity:on_activated()
  if hero:overlaps(entity) then
    sol.audio.play_sound(&quot;secret&quot;)
    hero:start_hurt(240,277,6)
  end
end
</code></pre>"><span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_activated</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> hero:overlaps(entity) <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
    hero:start_hurt(<span class="hljs-number">240</span>,<span class="hljs-number">277</span>,<span class="hljs-number">6</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Another way to detect the hero is by doing it manually with the <code>get_position()</code> function, but overlaps function is easier.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--if hero's position is equal to entity's position, then hero is damaged when stepping on entity.
function entity:on_activated()
local x1,y1 = hero:get_position()
print(&quot;Hero: &quot;..x1..&quot;,&quot;..y1)
  if (x1 &amp;gt; 240 and x1 &amp;lt; 256) and (y1 &amp;gt; 272 and y1 &amp;lt; 288) then
    sol.audio.play_sound(&quot;secret&quot;)
    hero:start_hurt(240,277,6)
  end
end
</code></pre>"><span class="hljs-comment">--if hero's position is equal to entity's position, then hero is damaged when stepping on entity.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_activated</span><span class="hljs-params">()</span></span>
<span class="hljs-keyword">local</span> x1,y1 = hero:get_position()
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hero: "</span>..x1..<span class="hljs-string">","</span>..y1)
  <span class="hljs-keyword">if</span> (x1 &gt; <span class="hljs-number">240</span> <span class="hljs-keyword">and</span> x1 &lt; <span class="hljs-number">256</span>) <span class="hljs-keyword">and</span> (y1 &gt; <span class="hljs-number">272</span> <span class="hljs-keyword">and</span> y1 &lt; <span class="hljs-number">288</span>) <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
    hero:start_hurt(<span class="hljs-number">240</span>,<span class="hljs-number">277</span>,<span class="hljs-number">6</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h4 id="custom-animation"><a name="custom-animation" href="#custom-animation"></a>Custom Animation</h4><p>You can change the animation for the custom entity. Let us say you want to do a sword swing animation. All you would have to do is the following line of code.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>entity:get_sprite():set_animation(&quot;sword_swing&quot;)
</code></pre>">entity:get_sprite():set_animation(<span class="hljs-string">"sword_swing"</span>)
</code></pre><p>You must make the <code>sword_swing</code> animation in the sprite editor.</p><p>For the hero you will not have to <code>get_sprite()</code> because the function exists for the hero and it does not have to be retrieved from the sprites methods, so it would be like the following line of code.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>hero:set_animation(&quot;dead&quot;)
</code></pre>">hero:set_animation(<span class="hljs-string">"dead"</span>)
</code></pre><h4 id="get-distance-to-entity"><a name="get-distance-to-entity" href="#get-distance-to-entity"></a>Get Distance to Entity</h4><p>The function <code>entity:get_distance(other_entity)</code> checks the distance in pixels to another entity. It is super useful.</p><p><strong>Example:</strong></p><p>If the entities distance is less that 20 pixels, then print â€œEntity encounters hero!â€</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local hero = map:get_hero()

--Create on_activated
sol.timer.start(500, function()
  if map.on_activated ~= nil then
    map:on_activated()
 return true 
  end
end)

function map:on_activated()
 print(&quot;------------&quot;,hero:get_distance(sprite))
local distance_between = hero:get_distance(sprite)
  if distance_between &amp;lt; 20 then
    print(&quot;Entity encounters hero!&quot;)
  end
end
</code></pre>"><span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-comment">--Create on_activated</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> map.on_activated ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    map:on_activated()
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_activated</span><span class="hljs-params">()</span></span>
 <span class="hljs-built_in">print</span>(<span class="hljs-string">"------------"</span>,hero:get_distance(sprite))
<span class="hljs-keyword">local</span> distance_between = hero:get_distance(sprite)
  <span class="hljs-keyword">if</span> distance_between &lt; <span class="hljs-number">20</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Entity encounters hero!"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h4 id="make-entity-turn-to-entity"><a name="make-entity-turn-to-entity" href="#make-entity-turn-to-entity"></a>Make Entity Turn to Entity</h4><p>Then function <code>set_direction</code> and <code>entity:get_direction4_to(other_entity)</code> are needed for this to work. </p><p>The <code>entity:get_direction4_to(other_entity)</code> function gets the direction of another entity and <code>set_direction</code> makes an entity face a direction.</p><p>The following code makes the two sprites look at each other.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--set_direction
npc_2:get_sprite():set_direction(npc_2:get_direction4_to(npc))
npc:get_sprite():set_direction(npc:get_direction4_to(npc_2))
</code></pre>"><span class="hljs-comment">--set_direction</span>
npc_2:get_sprite():set_direction(npc_2:get_direction4_to(npc))
npc:get_sprite():set_direction(npc:get_direction4_to(npc_2))
</code></pre><h4 id="obstacle-detection"><a name="obstacle-detection" href="#obstacle-detection"></a>Obstacle Detection</h4><p>Let us say a sprite is using the <code>target</code> movement and gets stuck. The best way to solve this is with the function <code>entity:on_obstacle_reached()</code>. Basically, if the entity hits an obstacle, then something happens.</p><p><strong>Example:</strong></p><p>In the following script the entity uses the <code>path_finding</code> movement until the distance to the hero is less than 25 pixels. At that time it uses the <code>target</code> movement again.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function entity:on_obstacle_reached()

   movement = sol.movement.create(&quot;path_finding&quot;)
   movement:set_target(hero)
   movement:set_speed(60)
   movement:start(entity)

local distance_between = hero:get_distance(entity)
  if distance_between &amp;lt; 25 then
     movement = sol.movement.create(&quot;target&quot;)
     movement:set_target(hero)
     movement:set_speed(60)
     movement:start(entity)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_obstacle_reached</span><span class="hljs-params">()</span></span>

   movement = sol.movement.create(<span class="hljs-string">"path_finding"</span>)
   movement:set_target(hero)
   movement:set_speed(<span class="hljs-number">60</span>)
   movement:start(entity)

<span class="hljs-keyword">local</span> distance_between = hero:get_distance(entity)
  <span class="hljs-keyword">if</span> distance_between &lt; <span class="hljs-number">25</span> <span class="hljs-keyword">then</span>
     movement = sol.movement.create(<span class="hljs-string">"target"</span>)
     movement:set_target(hero)
     movement:set_speed(<span class="hljs-number">60</span>)
     movement:start(entity)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h4 id="on-hero-state"><a name="on-hero-state" href="#on-hero-state"></a>On Hero State</h4><p>The hero has many built in states.</p><table>
<thead>
<tr>
<th style="text-align:left">States</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">â€œback to solid groundâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œboomerangâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œbowâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcarryingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œfallingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œforced walkingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œfreeâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œfrozenâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œgrabbingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œhookshotâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œhurtâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œjumpingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œliftingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œplungingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpullingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpushingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œrunningâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œstairsâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œstreamâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œswimmingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsword loadingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsword spin attackâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsword swingingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsword tappingâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œtreasureâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œusing itemâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œvictoryâ€</td>
</tr>
</tbody>
</table><p>The following script print â€œspin attackâ€ when the hero does a sword spin attack.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function hero:on_state_changed(state)

  if state == &quot;sword spin attack&quot; then
    print(&quot;spin attack&quot;)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hero:on_state_changed</span><span class="hljs-params">(state)</span></span>

  <span class="hljs-keyword">if</span> state == <span class="hljs-string">"sword spin attack"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"spin attack"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Samples:</strong></p><p>You can find samples of <code>custom switch</code> to <code>on hero state</code> in:</p><p><code>Lessons &gt; Chapter_13_14_custom_entity_game_over.zip</code></p><h3 id="hero-entity"><a name="hero-entity" href="#hero-entity"></a>Hero Entity</h3><p>This section is about â€œsomeâ€ hero methods examples and you can check the documentation for them all. I have already demonstrated some throughout the book and will not repeat those. You can check chapter 14 section â€œabilitiesâ€ for more and everything is in the <a href="http://www.solarus-games.org/doc/latest/lua_api_hero.html#lua_api_hero_methods">Solarus documentation</a>.</p><h4 id="hero-teleport"><a name="hero-teleport" href="#hero-teleport"></a>Hero Teleport</h4><p>Teleports the hero to a destination with a transition.</p><p><code>hero:teleport(map_id, [destination_name, [transition_style]])</code></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

function map:on_started()
  hero:teleport(&quot;first_map&quot;, &quot;first_location&quot;, &quot;fade&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  hero:teleport(<span class="hljs-string">"first_map"</span>, <span class="hljs-string">"first_location"</span>, <span class="hljs-string">"fade"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_13_images/24_hero/1_hero_entity_teleport.png" alt="24_hero/1_hero_entity_teleport.png"></p><table>
<thead>
<tr>
<th style="text-align:left">transition_style</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">â€œimmediateâ€</td>
<td>No transition effect.</td>
</tr>
<tr>
<td style="text-align:left">â€œfadeâ€</td>
<td>fade-out and fade-in effect.</td>
</tr>
<tr>
<td style="text-align:left">â€œscrollingâ€</td>
<td>It scrolls.</td>
</tr>
</tbody>
</table><h4 id="hero-get-animation"><a name="hero-get-animation" href="#hero-get-animation"></a>Hero Get Animation</h4><p>Gets the animation the hero is currently doing.</p><p><code>hero:get_animation()</code></p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

-- Call a function every second.
sol.timer.start(1000, function()
    if hero:get_animation() == &quot;walking&quot; then
      print(&quot;walking&quot;)
    end
  return true  -- To call the timer again (with the same delay).
end)
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-comment">-- Call a function every second.</span>
sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> hero:get_animation() == <span class="hljs-string">"walking"</span> <span class="hljs-keyword">then</span>
      <span class="hljs-built_in">print</span>(<span class="hljs-string">"walking"</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>  <span class="hljs-comment">-- To call the timer again (with the same delay).</span>
<span class="hljs-keyword">end</span>)
</code></pre><h4 id="hero-set-animation"><a name="hero-set-animation" href="#hero-set-animation"></a>Hero Set Animation</h4><p>Sets the animation you made for the hero in the sprite editor.</p><p><code>hero:set_animation(animation, [callback])</code></p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

-- Call a function every second.
sol.timer.start(1000, function()
    if hero:get_animation() == &quot;walking&quot; then
      hero:set_animation(&quot;stopped&quot;)
    else
      hero:set_animation(&quot;walking&quot;)
    end
  return true  -- To call the timer again (with the same delay).
end)
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-comment">-- Call a function every second.</span>
sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> hero:get_animation() == <span class="hljs-string">"walking"</span> <span class="hljs-keyword">then</span>
      hero:set_animation(<span class="hljs-string">"stopped"</span>)
    <span class="hljs-keyword">else</span>
      hero:set_animation(<span class="hljs-string">"walking"</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>  <span class="hljs-comment">-- To call the timer again (with the same delay).</span>
<span class="hljs-keyword">end</span>)
</code></pre><h4 id="set-sword-sound"><a name="set-sword-sound" href="#set-sword-sound"></a>Set Sword Sound</h4><p>The sound the sword makes. By default, the sound is <code>sword1</code>.</p><p><code>hero:set_sword_sound_id(sound_id)</code></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

function map:on_started()
  hero:set_sword_sound_id(&quot;bomb&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  hero:set_sword_sound_id(<span class="hljs-string">"bomb"</span>)
<span class="hljs-keyword">end</span>
</code></pre><h4 id="hero-walk"><a name="hero-walk" href="#hero-walk"></a>Hero Walk</h4><p>The hero walk function moves the hero along a path. It can loop or ignore obstacles.</p><p><code>hero:walk(path, loop, ignore_obstacles)</code></p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

function map:on_started()
  hero:walk(&quot;6446600222&quot;,false,true)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  hero:walk(<span class="hljs-string">"6446600222"</span>,<span class="hljs-keyword">false</span>,<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><table>
<thead>
<tr>
<th style="text-align:center">Number</th>
<th style="text-align:center">Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">right</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">up right </td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">up</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">up left</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">left</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">down left </td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">down</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">down right</td>
</tr>
</tbody>
</table><h4 id="hero-jump"><a name="hero-jump" href="#hero-jump"></a>Hero Jump</h4><p>Makes the hero jump in a direction.</p><p><code>hero:start_jumping(direction8, distance, [ignore_obstacles])</code></p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

function map:on_started()
  hero:start_jumping(2, 100, false)
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  hero:start_jumping(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>, <span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>
</code></pre><table>
<thead>
<tr>
<th style="text-align:center">Number</th>
<th style="text-align:center">Direction8</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">right</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">up right </td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">up</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">up left</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">left</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">down left </td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">down</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">down right</td>
</tr>
</tbody>
</table><h2 id="chapter-14:-abilities,-save-game,-quest-launcher,-and-game-over"><a name="chapter-14:-abilities,-save-game,-quest-launcher,-and-game-over" href="#chapter-14:-abilities,-save-game,-quest-launcher,-and-game-over"></a>Chapter 14: Abilities, Save Game, Quest Launcher, and Game Over</h2><p>The sample for this lesson is in the following directory:</p><p><code>Lessons &gt; Chapter_14_Abilities_Quest-launcher_savegame</code></p><h3 id="abilities:-swim,-lift,-sword,-run,-etc"><a name="abilities:-swim,-lift,-sword,-run,-etc" href="#abilities:-swim,-lift,-sword,-run,-etc"></a>Abilities: Swim, Lift, Sword, Run, etc</h3><p>Built-in ability levels indicate whether the hero can perform some built-in actions like attacking, swimming, and running.</p><table>
<thead>
<tr>
<th>Ability</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sword</td>
<td>Ability to use the sword and with which sprite.</td>
</tr>
<tr>
<td>sword_knowledge</td>
<td>Ability to make the super spin-attack.</td>
</tr>
<tr>
<td>tunic</td>
<td>Tunic (determines the sprite used for the heroâ€™s body).</td>
</tr>
<tr>
<td>shield</td>
<td>Protection against enemies. Determines whether the hero can avoid some kinds of attacks.</td>
</tr>
<tr>
<td>lift</td>
<td>Ability to lift heavy objects.</td>
</tr>
<tr>
<td>jump_over_water</td>
<td>Automatically jump when arriving into water without the â€œswimâ€ ability.</td>
</tr>
<tr>
<td>swim</td>
<td>Ability to swim in deep water.</td>
</tr>
<tr>
<td>run</td>
<td>Ability to run when pressing the action command.</td>
</tr>
<tr>
<td>detect_weak_walls</td>
<td>Notifies the player with a sound when a weak wall is nearby.</td>
</tr>
</tbody>
</table><h5 id="set-ability"><a name="set-ability" href="#set-ability"></a>Set Ability</h5><p>You can set an ability with the game function <code>game:set_ability</code>. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;Ability&quot;, level)
</code></pre>">game:set_ability(<span class="hljs-string">"Ability"</span>, level)
</code></pre><p><strong>Example:</strong></p><p>The player would gain the <code>sword1</code> ability.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;sword&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">1</span>)
</code></pre><p>The level at 0 turns off the ability.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;sword&quot;, 0)
</code></pre>">game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">0</span>)
</code></pre><p>In my opinion, I think it would be best to activate abilities in the game manager, with an NPC, and/or when obtaining an item.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_obtaining()
  game:set_ability(&quot;sword&quot;, 1)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">()</span></span>
  game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">1</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>One can deactivate an ability on different maps.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_started()
  game:set_ability(&quot;sword&quot;, 0)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">0</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="get-ability"><a name="get-ability" href="#get-ability"></a>Get Ability</h5><p>This function will get the level of the ability.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:get_ability(&quot;Ability&quot;)
</code></pre>">game:get_ability(<span class="hljs-string">"Ability"</span>)
</code></pre><h5 id="has-ability"><a name="has-ability" href="#has-ability"></a>Has Ability</h5><p>This function will return true if the hero has the ability or false if the hero does not have it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:has_ability(&quot;Ability&quot;)
</code></pre>">game:has_ability(<span class="hljs-string">"Ability"</span>)
</code></pre><h5 id="tunic-ability-setup"><a name="tunic-ability-setup" href="#tunic-ability-setup"></a>Tunic Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;tunic&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"tunic"</span>, <span class="hljs-number">1</span>)
</code></pre><p>There are some default names that will need to be known for setting up the hero. The hero sprite animation is called <code>tunic1</code> by default. Many levels or variants of a tunic can be used by adding another number.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/1_tunic.png" alt="Chapter_14_images/Abilities/1_tunic.png"></p><p><strong>Example:</strong></p><p>To make a second tunic all someone has to do is create an animation file called <code>tunic2</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;tunic&quot;, 2)
</code></pre>">game:set_ability(<span class="hljs-string">"tunic"</span>, <span class="hljs-number">2</span>)
</code></pre><p>One can use a custom animation name and directory for the tunic as well.</p><p>The function <code>hero:set_tunic_sprite_id("directory/animation_name")</code> can be used to change the hero sprite.</p><p><strong>Example:</strong></p><p>Diarandor uses the following line of code for his hero sprite Eldran.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
</code></pre>">    hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/2_tunic.png" alt="Chapter_14_images/Abilities/2_tunic.png"></p><p><strong>Tip:</strong></p><p>By default, the â€œwalkingâ€ animation will disable any animation. To change the default walking one could use <code>hero:set_tunic_sprite_id(sprite_id)</code> and have the animation for â€œwalkingâ€ be â€œstopped.â€ That way the hero will walk around using the â€œstoppedâ€ animation. Another way to do this is with the drawable sprite functions.</p><p><strong>Tunic Animation List:</strong></p><p>The tunic has the following default animations and probably more. They are needed for the hero abilities.</p><ul>
<li>boomerang1</li><li>boomerang2</li><li>bow</li><li>brandish</li><li>carrying_stopped</li><li>carrying_walking</li><li>dying</li><li>falling</li><li>grabbing</li><li>hookshot</li><li>hurt</li><li>jumping</li><li>lifting</li><li>plunging_lava</li><li>plunging_water</li><li>pulling</li><li>pushing</li><li>running</li><li>spin_attack</li><li>super_spin_attack</li><li>stopped</li><li>stopped_with_shield</li><li>swimming_fast</li><li>swimming_slow</li><li>swimming_stopped</li><li>sword</li><li>sword_loading_stopped</li><li>sword_loading_walking</li><li>victory</li><li>walking</li><li>walking_diagonal</li><li>walking_with_shield</li></ul><h5 id="sword-ability-setup"><a name="sword-ability-setup" href="#sword-ability-setup"></a>Sword Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;sword&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">1</span>)
</code></pre><p>There are some default names that will need to be known for setting up the sword. The sword sprite animation is called <code>sword1</code> by default. Many levels or variants of a sword can be used by adding another number.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/1_sword.png" alt="Chapter_14_images/Abilities/1_sword.png"></p><p><strong>Example:</strong></p><p>To make a second sword all someone has to do is create an animation file called <code>sword2</code>. The sword will take away 2 life points at level 2.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;sword&quot;, 2)
</code></pre>">game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">2</span>)
</code></pre><p>One can use a custom animation name and directory for the sword as well.</p><p>The function <code>hero:set_sword_sprite_id("directory/animation_name")</code> can be used to change the sword sprite.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    hero:set_sword_sprite_id(&quot;sword/red_sword&quot;)
</code></pre>">    hero:set_sword_sprite_id(<span class="hljs-string">"sword/red_sword"</span>)
</code></pre><p>The sword has the following default animations and probably more.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/2_sword.png" alt="Chapter_14_images/Abilities/2_sword.png"></p><ul>
<li>spin_attack</li><li>super_spin_attack</li><li>sword</li><li>sword_loading_stopped</li><li>sword_loading_walking</li><li>sword_running</li><li>sword_tapping</li><li>victory</li></ul><p>An animation called <code>sword_stars1</code> is needed for the charging animation during the spin attack. The <code>sword_stars2</code> and so on are needed for the other swords if they have charged attacks.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/3_sword.png" alt="Chapter_14_images/Abilities/3_sword.png"></p><h5 id="sword-knowledge"><a name="sword-knowledge" href="#sword-knowledge"></a>Sword Knowledge</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;sword_knowledge&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"sword_knowledge"</span>, <span class="hljs-number">1</span>)
</code></pre><p>The <code>sword_knowledge</code> ability allows the player to do a super spin attack.</p><p>An animation called <code>super_spin_attack</code> is needed in <code>tunic1</code> and <code>sword1</code> for this to work.</p><h5 id="shield-ability-setup"><a name="shield-ability-setup" href="#shield-ability-setup"></a>Shield Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;shield&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"shield"</span>, <span class="hljs-number">1</span>)
</code></pre><p>There are some default names that will need to be known for setting up the shield. The shield sprite animation is called <code>shield1</code> by default. Many levels or variants of a shield can be used by adding another number.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/1_shield.png" alt="Chapter_14_images/Abilities/1_shield.png"></p><p><strong>Example:</strong></p><p>To make a second shield all someone has to do is create an animation file called <code>shield2</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;shield&quot;, 2)
</code></pre>">game:set_ability(<span class="hljs-string">"shield"</span>, <span class="hljs-number">2</span>)
</code></pre><p>One can use a custom animation name and directory for the shield as well.</p><p>The function <code>hero:set_shield_sprite_id("directory/animation_name")</code> can be used to change the shield sprite.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    hero:set_shield_sprite_id(&quot;shield/red_shield&quot;)
</code></pre>">    hero:set_shield_sprite_id(<span class="hljs-string">"shield/red_shield"</span>)
</code></pre><p>The shield has the following default animations. They follow when a sword is used.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/2_shield.png" alt="Chapter_14_images/Abilities/2_shield.png"></p><ul>
<li>stopped</li><li>sword</li><li>sword_loading_stopped</li><li>sword_loading_walking</li><li>sword_tapping</li><li>walking</li></ul><h5 id="lift-ability-setup"><a name="lift-ability-setup" href="#lift-ability-setup"></a>Lift Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;lift&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">1</span>)
</code></pre><p>The lift ability connects directly with the destructible entity weight.</p><p>The following would require lift ability level 3.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;lift&quot;, 3)
</code></pre>">game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">3</span>)
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/1_lift.png" alt="Chapter_14_images/Abilities/1_lift.png"></p><p>The <code>lifting</code>, <code>carrying_stopped</code>, and <code>carrying walking</code> animations are required in the tunic sprite animation.</p><h5 id="water-jump-ability-setup"><a name="water-jump-ability-setup" href="#water-jump-ability-setup"></a>Water Jump Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;jump_over_water&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"jump_over_water"</span>, <span class="hljs-number">1</span>)
</code></pre><p>The player drowns instantly when touching deep water unless they have the swim ability. This allows the player to jump before drowning.</p><p>The <code>plunging_water</code> animation is required in the tunic sprite animation.</p><h5 id="run-ability-setup"><a name="run-ability-setup" href="#run-ability-setup"></a>Run Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;run&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"run"</span>, <span class="hljs-number">1</span>)
</code></pre><p>One must press and hold the space bar for this ability to activate.</p><p>The <code>running</code> animation is required in the tunic sprite animation.</p><p>I have encountered issues when jumping. For example, it crashes with the <code>jump_over_water</code> ability and with the jumper entity.</p><p>A solution can be a key <a href="http://www.solarus-games.org/doc/latest/lua_api_game.html#lua_api_game_on_key_pressed">pressed/released</a> function and activate/deactivate <a href="http://www.solarus-games.org/doc/latest/lua_api_hero.html#lua_api_hero_set_walking_speed">walking speed</a>. Maybe one just wants to change the hero speed anyway. The default walking speed is 88 pixels per second.</p><p>I think 150 pixels per second makes a very quick run.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  hero:set_walking_speed(150)
</code></pre>">  hero:set_walking_speed(<span class="hljs-number">150</span>)
</code></pre><h5 id="swim-ability-setup"><a name="swim-ability-setup" href="#swim-ability-setup"></a>Swim Ability Setup</h5><p>An ability needs to be set or activated before it can work.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_ability(&quot;swim&quot;, 1)
</code></pre>">game:set_ability(<span class="hljs-string">"swim"</span>, <span class="hljs-number">1</span>)
</code></pre><p>The hero can swim in deep water once this ability is activated. One might want to change the hero tunic to a boat or something simple if one does not want a complex swim motion.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/1_swim.png" alt="Chapter_14_images/Abilities/1_swim.png"></p><p>The <code>swimming_fast</code> and <code>swimming_slow</code> animations are required in the tunic sprite animation. You can press the action key <code>c</code> to swim faster.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Abilities/2_swim.png" alt="Chapter_14_images/Abilities/2_swim.png"></p><h3 id="quest-launcher"><a name="quest-launcher" href="#quest-launcher"></a>Quest Launcher</h3><p>The quest launcher is a place where all Solarus games can be played from.</p><h5 id="activate-quest-launcher"><a name="activate-quest-launcher" href="#activate-quest-launcher"></a>Activate Quest Launcher</h5><p>Activating the quest launcher.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/1_solarus_exe.png" alt="chapter_14_quest_launcher_images/1_solarus_exe.png"></p><p><strong>Preview</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/2_quest_launcher.png" alt="chapter_14_quest_launcher_images/2_quest_launcher.png"></p><h5 id="play-game"><a name="play-game" href="#play-game"></a>Play Game</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/3_play_quest.png" alt="chapter_14_quest_launcher_images/3_play_quest.png"></p><h5 id="game---add-&amp;-remove"><a name="game---add-&amp;-remove" href="#game---add-&amp;-remove"></a>Game - Add &amp; Remove</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/4_add_remove_quest.png" alt="chapter_14_quest_launcher_images/4_add_remove_quest.png"></p><h5 id="video->-fullscreen,-2d-acceleration,-window-size,-&amp;-zoom"><a name="video->-fullscreen,-2d-acceleration,-window-size,-&amp;-zoom" href="#video-&gt;-fullscreen,-2d-acceleration,-window-size,-&amp;-zoom"></a>Video &gt; Fullscreen, 2D Acceleration, Window Size, &amp; Zoom</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/6_full_acceleration_window-size.png" alt="chapter_14_quest_launcher_images/6_full_acceleration_window-size.png"></p><h5 id="quest-launcher->-file->-add,-remove,-&amp;-exit"><a name="quest-launcher->-file->-add,-remove,-&amp;-exit" href="#quest-launcher-&gt;-file-&gt;-add,-remove,-&amp;-exit"></a>Quest Launcher &gt; File &gt; Add, Remove, &amp; Exit</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/7_file_add_remove_quit.png" alt="chapter_14_quest_launcher_images/7_file_add_remove_quit.png"></p><h5 id="game---play-&amp;-stop"><a name="game---play-&amp;-stop" href="#game---play-&amp;-stop"></a>Game - Play &amp; Stop</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/8_Quest_play_stop.png" alt="chapter_14_quest_launcher_images/8_Quest_play_stop.png"></p><h5 id="help->-about"><a name="help->-about" href="#help-&gt;-about"></a>Help &gt; About</h5><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/9_about.png" alt="chapter_14_quest_launcher_images/9_about.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/10_about_info.png" alt="chapter_14_quest_launcher_images/10_about_info.png"></p><h3 id="about-logo-&amp;-icons:"><a name="about-logo-&amp;-icons:" href="#about-logo-&amp;-icons:"></a>About Logo &amp; Icons:</h3><p>The <code>logos/</code> directory can contain logos and icons to represent your game in the <code>Quest launcher</code>.</p><h5 id="quest-logo"><a name="quest-logo" href="#quest-logo"></a>Quest Logo</h5><p>Christopho says, â€œThe logo of your quest should be a PNG image of size 200x140 called <code>logos/logo.png"</code> The logo is optional.â€</p><h5 id="quest-icons"><a name="quest-icons" href="#quest-icons"></a>Quest Icons</h5><p>An icon can also represent your game or quest. The icon is optional as well. Many icon sizes are allowed and every icon needs to be on a separate png. Icon sizes 16  x 16 to 1024x1024 pixels are allowed.</p><p>â€œlogos/icon_16.pngâ€,<br>â€œlogos/icon_24.pngâ€,<br>â€œlogos/icon_32.pngâ€,<br>â€œlogos/icon_48.pngâ€,<br>â€œlogos/icon_64.pngâ€,<br>â€œlogos/icon_128.pngâ€,<br>â€œlogos/icon_256.pngâ€,<br>â€œlogos/icon_512.pngâ€,<br>â€œlogos/icon_1024.pngâ€.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_quest_launcher_images/11_logo_images.png" alt="chapter_14_quest_launcher_images/11_logo_images.png"></p><p>The Solarus GUI will automatically choose the best size.</p><h3 id="save-game"><a name="save-game" href="#save-game"></a>Save Game</h3><p>Saving the game is quite simple. The game saves at the destination entity on the maps. There are two functions that need to be known. They are <code>sol.game.exists(file_name)</code> and <code>sol.game.load(file_name)</code>. One checks if the save file exists and the other loads the save file. The best place to put the save script is in the <code>game_manager.lua</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local exists = sol.game.exists(file_name)
local game = sol.game.load(file_name)

--check if save exists and if not, then create a save file with the following default data.
if not exists then
  --Initialize a new savegame
  --Default game data
end
</code></pre>"><span class="hljs-keyword">local</span> exists = sol.game.exists(file_name)
<span class="hljs-keyword">local</span> game = sol.game.<span class="hljs-built_in">load</span>(file_name)

<span class="hljs-comment">--check if save exists and if not, then create a save file with the following default data.</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exists <span class="hljs-keyword">then</span>
  <span class="hljs-comment">--Initialize a new savegame</span>
  <span class="hljs-comment">--Default game data</span>
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> local exists = sol.game.exists(&quot;save1.dat&quot;)
  local game = sol.game.load(&quot;save1.dat&quot;)
  if not exists then
    --Initialize a new savegame

    game:set_max_life(12)
    game:set_life(game:get_max_life())
    game:set_ability(&quot;lift&quot;, 2)
    game:set_max_money(100)
    game:set_ability(&quot;sword&quot;, 2)
    game:set_ability(&quot;sword_knowledge&quot;, 1)
    game:set_ability(&quot;shield&quot;, 1)
    game:set_ability(&quot;swim&quot;, 1)
    game:set_ability(&quot;jump_over_water&quot;, 1)
    game:set_starting_location(&quot;Map_4&quot;, &quot;starting_destination&quot;) -- Starting location.
  end
</code></pre>"> <span class="hljs-keyword">local</span> exists = sol.game.exists(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">local</span> game = sol.game.<span class="hljs-built_in">load</span>(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exists <span class="hljs-keyword">then</span>
    <span class="hljs-comment">--Initialize a new savegame</span>

    game:set_max_life(<span class="hljs-number">12</span>)
    game:set_life(game:get_max_life())
    game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">2</span>)
    game:set_max_money(<span class="hljs-number">100</span>)
    game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">2</span>)
    game:set_ability(<span class="hljs-string">"sword_knowledge"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"shield"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"swim"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"jump_over_water"</span>, <span class="hljs-number">1</span>)
    game:set_starting_location(<span class="hljs-string">"Map_4"</span>, <span class="hljs-string">"starting_destination"</span>) <span class="hljs-comment">-- Starting location.</span>
  <span class="hljs-keyword">end</span>
</code></pre><p>The best way to save the game is by using the <code>d</code> key and a simple dialog. By now you know that by default the <code>d</code> key pauses the game. The function <code>game:save()</code> saves the game by making a save file called <code>save1.dat</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function game:on_paused()
  game:start_dialog(&quot;pause.save_question&quot;, function(answer)
    if answer == 2 then
      game:save()
    end
    game:set_paused(false)
  end)
 end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
  game:start_dialog(<span class="hljs-string">"pause.save_question"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
    <span class="hljs-keyword">if</span> answer == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
      game:save()
    <span class="hljs-keyword">end</span>
    game:set_paused(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>)
 <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Save_game/1_save_game_question.png" alt="Chapter_14_images/Save_game/1_save_game_question.png"></p><p><strong>game_manager.lua</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/menus/alttp_dialog_box&quot;)
require(&quot;scripts/multi_events&quot;)
require(&quot;scripts/hud/hud&quot;)

local game_manager = {}

-- Starts the game from the given savegame file,
-- initializing it if necessary.
function game_manager:start_game()

  local exists = sol.game.exists(&quot;save1.dat&quot;)
  local game = sol.game.load(&quot;save1.dat&quot;)
  if not exists then
    --Initialize a new savegame

    game:set_max_life(12)
    game:set_life(game:get_max_life())
    game:set_ability(&quot;lift&quot;, 2)
    game:set_max_money(100)
    game:set_ability(&quot;sword&quot;, 2)
    game:set_ability(&quot;sword_knowledge&quot;, 1)
    game:set_ability(&quot;shield&quot;, 1)
    game:set_ability(&quot;swim&quot;, 1)
    game:set_ability(&quot;jump_over_water&quot;, 1)
    game:set_starting_location(&quot;Map_4&quot;, &quot;starting_destination&quot;) -- Starting location.
  end


 game:register_event(&quot;on_started&quot;, function()

    local hero = game:get_hero()
    hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
 end)
  game:start()

function game:on_paused()
  game:start_dialog(&quot;pause.save_question&quot;, function(answer)
    if answer == 2 then
      game:save()
    end
    game:set_paused(false)
  end)
 end
end

return game_manager
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/alttp_dialog_box"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/multi_events"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/hud/hud"</span>)

<span class="hljs-keyword">local</span> game_manager = {}

<span class="hljs-comment">-- Starts the game from the given savegame file,</span>
<span class="hljs-comment">-- initializing it if necessary.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:start_game</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> exists = sol.game.exists(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">local</span> game = sol.game.<span class="hljs-built_in">load</span>(<span class="hljs-string">"save1.dat"</span>)
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> exists <span class="hljs-keyword">then</span>
    <span class="hljs-comment">--Initialize a new savegame</span>

    game:set_max_life(<span class="hljs-number">12</span>)
    game:set_life(game:get_max_life())
    game:set_ability(<span class="hljs-string">"lift"</span>, <span class="hljs-number">2</span>)
    game:set_max_money(<span class="hljs-number">100</span>)
    game:set_ability(<span class="hljs-string">"sword"</span>, <span class="hljs-number">2</span>)
    game:set_ability(<span class="hljs-string">"sword_knowledge"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"shield"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"swim"</span>, <span class="hljs-number">1</span>)
    game:set_ability(<span class="hljs-string">"jump_over_water"</span>, <span class="hljs-number">1</span>)
    game:set_starting_location(<span class="hljs-string">"Map_4"</span>, <span class="hljs-string">"starting_destination"</span>) <span class="hljs-comment">-- Starting location.</span>
  <span class="hljs-keyword">end</span>


 game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

    <span class="hljs-keyword">local</span> hero = game:get_hero()
    hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
 <span class="hljs-keyword">end</span>)
  game:start()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
  game:start_dialog(<span class="hljs-string">"pause.save_question"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
    <span class="hljs-keyword">if</span> answer == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
      game:save()
    <span class="hljs-keyword">end</span>
    game:set_paused(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>)
 <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> game_manager
</code></pre><p>You can find the save file in a folder called <code>.solarus</code> in your <code>users</code> directory. The engine creates a file called <code>save1.dat</code> by default when the game is saved. The file can be found in folder that is set in the Engine properties write directory. In my case the name is <code>sample_quest</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Save_game/3_save_game.png" alt="Chapter_14_images/Save_game/3_save_game.png"></p><p><code>users/user_name/.solarus/sample_quest</code></p><p><strong>Example:</strong></p><p><code>users/zefk/.solarus/sample_quest</code></p><p>The names in <code>save1.dat</code> that have an underscore before it are automatically created by the engine. </p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Save_game/2_save_game.png" alt="Chapter_14_images/Save_game/2_save_game.png"></p><p>Other save values are created by entities or with the function <code>game:set_value(savegame_variable_name, value)</code>. The value can be a string, boolean, or a number. <a href="http://www.solarus-games.org/doc/latest/lua_api_game.html#lua_api_game_set_value">game:set_value()</a> is very useful when making custom scripts.</p><p>You can check the documentation for more information on <a href="http://www.solarus-games.org/doc/latest/lua_api_game.html#lua_api_game_overview_save">save data</a>.</p><h3 id="game-over"><a name="game-over" href="#game-over"></a>Game Over</h3><p>In this section we will be covering gameover. I will be using a quick simple script I made for this purpose. You can check out <a href="https://github.com/solarus-games/children-of-solarus/blob/master/data/menus/game_over.lua">Christophoâ€™s gameover script</a> for something more complex. He creates a hero sprite that he unpauses and sets an animation.</p><p>Here is the script we will be covering.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_14_images/Game_over.png" alt="Chapter_14_images/Game_over.png"></p><p><strong>game_over.lua</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
local game_over_menu = {}

--Function to go under game:start() in save_menu.lua
function game_over_menu:start(game)

local gameover = {

  browse = 0,

  yes_hover_img = sol.surface.create(&quot;game_over/yes_hover.png&quot;),
  no_hover_img = sol.surface.create(&quot;game_over/no_hover.png&quot;),
  idle_bg_img = sol.surface.create(&quot;game_over/idle_bg.png&quot;),

  yes_hover = true,
  no_hover = false,
    idle_bg = true,

  up = true,
  down = true,

  up_sound = &quot;none&quot;,
  down_sound = &quot;none&quot;,

}

--Set up and down sound
gameover.up_sound = &quot;cursor&quot;
gameover.down_sound =&quot;cursor&quot;



--The draw function for showing images
function game_over_menu:on_draw(screen)

--Show idle-bg-hover image when conditions are true
   if gameover.idle_bg == true then
     gameover.idle_bg_img:draw(screen)
   end

--Show yes-hover image when conditions are true
   if gameover.yes_hover == true then
     gameover.yes_hover_img:draw(screen)
   end

--Show no-hover image when conditions are true
   if gameover.no_hover == true then
     gameover.no_hover_img:draw(screen)
   end

end -- end draw function

--key function for pressing buttons
function game_over_menu:on_key_pressed(key)

--Go down
  if key == &quot;down&quot; and gameover.up == true then
    sol.audio.play_sound(gameover.up_sound)
    if gameover.browse &amp;lt; 1 then
      gameover.browse = gameover.browse + 1
    end
  end

--Go up
  if key == &quot;up&quot; and gameover.down == true then
    sol.audio.play_sound(gameover.down_sound)
    if gameover.browse &amp;gt; 0 then
      gameover.browse = gameover.browse - 1
    end
  end

--Yes hover
  if gameover.browse == 0 then
    print(&quot;up&quot;)
    gameover.yes_hover = true
    gameover.no_hover = false

    local map = game:get_map()

    if key == &quot;a&quot; then

      game:set_starting_location(map:get_id()) -- Starting location.
      game:start()
      game:stop_game_over()
      sol.menu.stop(self, game_over_menu)
    end
  end

--No hover
  if gameover.browse == 1 then
    print(&quot;down&quot;)
    gameover.no_hover = true
    gameover.yes_hover = false

    if key == &quot;a&quot; then
          sol.main.reset()
    end
  end
 end -- end key pressed function
end -- end of function game_over_menu:start(game)


return game_over_menu --return menu
</code></pre>">
<span class="hljs-keyword">local</span> game_over_menu = {}

<span class="hljs-comment">--Function to go under game:start() in save_menu.lua</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_over_menu:start</span><span class="hljs-params">(game)</span></span>

<span class="hljs-keyword">local</span> gameover = {

  browse = <span class="hljs-number">0</span>,

  yes_hover_img = sol.surface.create(<span class="hljs-string">"game_over/yes_hover.png"</span>),
  no_hover_img = sol.surface.create(<span class="hljs-string">"game_over/no_hover.png"</span>),
  idle_bg_img = sol.surface.create(<span class="hljs-string">"game_over/idle_bg.png"</span>),

  yes_hover = <span class="hljs-keyword">true</span>,
  no_hover = <span class="hljs-keyword">false</span>,
    idle_bg = <span class="hljs-keyword">true</span>,

  up = <span class="hljs-keyword">true</span>,
  down = <span class="hljs-keyword">true</span>,

  up_sound = <span class="hljs-string">"none"</span>,
  down_sound = <span class="hljs-string">"none"</span>,

}

<span class="hljs-comment">--Set up and down sound</span>
gameover.up_sound = <span class="hljs-string">"cursor"</span>
gameover.down_sound =<span class="hljs-string">"cursor"</span>



<span class="hljs-comment">--The draw function for showing images</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_over_menu:on_draw</span><span class="hljs-params">(screen)</span></span>

<span class="hljs-comment">--Show idle-bg-hover image when conditions are true</span>
   <span class="hljs-keyword">if</span> gameover.idle_bg == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     gameover.idle_bg_img:draw(screen)
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Show yes-hover image when conditions are true</span>
   <span class="hljs-keyword">if</span> gameover.yes_hover == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     gameover.yes_hover_img:draw(screen)
   <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Show no-hover image when conditions are true</span>
   <span class="hljs-keyword">if</span> gameover.no_hover == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     gameover.no_hover_img:draw(screen)
   <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end draw function</span>

<span class="hljs-comment">--key function for pressing buttons</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_over_menu:on_key_pressed</span><span class="hljs-params">(key)</span></span>

<span class="hljs-comment">--Go down</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"down"</span> <span class="hljs-keyword">and</span> gameover.up == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    sol.audio.play_sound(gameover.up_sound)
    <span class="hljs-keyword">if</span> gameover.browse &lt; <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
      gameover.browse = gameover.browse + <span class="hljs-number">1</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Go up</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"up"</span> <span class="hljs-keyword">and</span> gameover.down == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    sol.audio.play_sound(gameover.down_sound)
    <span class="hljs-keyword">if</span> gameover.browse &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
      gameover.browse = gameover.browse - <span class="hljs-number">1</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Yes hover</span>
  <span class="hljs-keyword">if</span> gameover.browse == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"up"</span>)
    gameover.yes_hover = <span class="hljs-keyword">true</span>
    gameover.no_hover = <span class="hljs-keyword">false</span>

    <span class="hljs-keyword">local</span> map = game:get_map()

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>

      game:set_starting_location(map:get_id()) <span class="hljs-comment">-- Starting location.</span>
      game:start()
      game:stop_game_over()
      sol.menu.stop(self, game_over_menu)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--No hover</span>
  <span class="hljs-keyword">if</span> gameover.browse == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"down"</span>)
    gameover.no_hover = <span class="hljs-keyword">true</span>
    gameover.yes_hover = <span class="hljs-keyword">false</span>

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>
          sol.main.reset()
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
 <span class="hljs-keyword">end</span> <span class="hljs-comment">-- end key pressed function</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of function game_over_menu:start(game)</span>


<span class="hljs-keyword">return</span> game_over_menu <span class="hljs-comment">--return menu</span>
</code></pre><p>The script is called from the <code>game_manger.lua</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local game_over_menu = require(&quot;scripts/game_over.lua&quot;)

game:register_event(&quot;on_started&quot;, function()

   local hero = game:get_hero()

  --Game over
  print(&quot;life&quot;..game:get_life())

     function game:on_game_over_started()
        local life = game:get_life()
        if life == 0 then
          hero:set_animation(&quot;dead&quot;)
          sol.audio.play_sound(&quot;hero_dying&quot;)
          sol.menu.start(self, game_over_menu)
        end
     end
  end) -- end of game:register_event
</code></pre>"><span class="hljs-keyword">local</span> game_over_menu = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/game_over.lua"</span>)

game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

   <span class="hljs-keyword">local</span> hero = game:get_hero()

  <span class="hljs-comment">--Game over</span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"life"</span>..game:get_life())

     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_game_over_started</span><span class="hljs-params">()</span></span>
        <span class="hljs-keyword">local</span> life = game:get_life()
        <span class="hljs-keyword">if</span> life == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
          hero:set_animation(<span class="hljs-string">"dead"</span>)
          sol.audio.play_sound(<span class="hljs-string">"hero_dying"</span>)
          sol.menu.start(self, game_over_menu)
        <span class="hljs-keyword">end</span>
     <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of game:register_event</span>
</code></pre><p>The game parameter is passed through the <code>save_menu.lua</code> after <code>game:start()</code> just like the <code>game_manger.lua</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:start()

local game_manager = require(&quot;scripts/game_manager&quot;)
local game_over_menu = require(&quot;scripts/game_over.lua&quot;)

game_manager:manage(game)
game_over_menu:start(game)
</code></pre>">game:start()

<span class="hljs-keyword">local</span> game_manager = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/game_manager"</span>)
<span class="hljs-keyword">local</span> game_over_menu = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/game_over.lua"</span>)

game_manager:manage(game)
game_over_menu:start(game)
</code></pre><p>The important functions in this script are <code>game:stop_game_over()</code> and <code>function game:on_game_over_started()</code>.</p><p><code>game:stop_game_over()</code> stops the <code>function game:on_game_over_started()</code> function. By default, the game starts over and restores health, but <code>function game:on_game_over_started()</code> is needed to make a custom death. </p><p>I set an animation called <code>hero:set_animation("dead")</code> and the animation <code>dead</code> is only one frame. The reason for this is that the <code>game_over_started</code> function suspends the game and it will stop any complex animation before it finishes. That is why it is best to use a <a href="http://www.solarus-games.org/doc/latest/lua_api_sprite.html#lua_api_sprite_methods">sprite method</a> because a sprite method can be <a href="http://www.solarus-games.org/doc/latest/lua_api_sprite.html#lua_api_sprite_set_paused">unpaused</a>. That is what Christopho does in his <a href="https://github.com/solarus-games/children-of-solarus/blob/master/data/menus/game_over.lua">script</a>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>     function game:on_game_over_started()
        local life = game:get_life()
        if life == 0 then
          hero:set_animation(&quot;dead&quot;)
          sol.audio.play_sound(&quot;hero_dying&quot;)
          sol.menu.start(self, game_over_menu)
        end
     end
</code></pre>">     <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_game_over_started</span><span class="hljs-params">()</span></span>
        <span class="hljs-keyword">local</span> life = game:get_life()
        <span class="hljs-keyword">if</span> life == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
          hero:set_animation(<span class="hljs-string">"dead"</span>)
          sol.audio.play_sound(<span class="hljs-string">"hero_dying"</span>)
          sol.menu.start(self, game_over_menu)
        <span class="hljs-keyword">end</span>
     <span class="hljs-keyword">end</span>
</code></pre><p>Okay, after starting the animation the death sound occurs and the <code>game_over.lua</code> menu is started. In the game over script you can start the game again <code>game:start()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Yes hover
  if gameover.browse == 0 then
    print(&quot;up&quot;)
    gameover.yes_hover = true
    gameover.no_hover = false

    local map = game:get_map()

    if key == &quot;a&quot; then

      game:set_starting_location(map:get_id()) -- Starting location.
      game:start()
      game:stop_game_over()
      sol.menu.stop(self, game_over_menu)
    end
  end
</code></pre>"><span class="hljs-comment">--Yes hover</span>
  <span class="hljs-keyword">if</span> gameover.browse == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"up"</span>)
    gameover.yes_hover = <span class="hljs-keyword">true</span>
    gameover.no_hover = <span class="hljs-keyword">false</span>

    <span class="hljs-keyword">local</span> map = game:get_map()

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>

      game:set_starting_location(map:get_id()) <span class="hljs-comment">-- Starting location.</span>
      game:start()
      game:stop_game_over()
      sol.menu.stop(self, game_over_menu)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
</code></pre><p><strong>Sample:</strong></p><p>You can check out the sample in:<br><code>Lessons &gt; Chapter_13_14_custom_entity_game_over.zip</code></p><h2 id="chapter-15:-title-screen,-save-menu,-movements,-map-types,-camera,-i/o"><a name="chapter-15:-title-screen,-save-menu,-movements,-map-types,-camera,-i/o" href="#chapter-15:-title-screen,-save-menu,-movements,-map-types,-camera,-i/o"></a>Chapter 15: Title Screen, Save menu, Movements, Map Types, Camera, I/O</h2><p>This chapter is mostly about the remaining basics that need to be covered. You can get the sample <code>Chapter_15_Sample.zip</code> in the <code>Lessons &gt; Chapter_15</code> directory.</p><h3 id="title-screen"><a name="title-screen" href="#title-screen"></a>Title Screen</h3><p>Almost every game has a title screen. A place to start the game. The title screen I scripted for the section is fairly simple. The script can be found in the sample mentioned above because it is too long for the book.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_15_images/Title_screen.png" alt="Chapter_15_images/Title_screen.png"></p><p><strong>About Script:</strong></p><p>This is a three (3) slot load save menu script. The player can make newgames and select the save slot they wish.</p><p><strong>Features:</strong></p><ol>
<li>Change the action keys, music, and sounds in the change area(s)</li><li>Load saved game</li><li>Makes newgames</li></ol><p><strong>Install Instructions: Part 1</strong></p><ol>
<li>Put the <code>save_menu.lua</code> script in the directory <code>scripts/</code> (get it from the chapter 15 sample).</li><li>Go to <code>main.lua</code> and add the following under the title screen <code>on_finished</code> function.</li></ol><p><strong>Example</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  -- Start the game when the Solarus logo menu is finished.
  solarus_logo.on_finished = function()
    -- Show the title screen after the Solarus Logo
    local title_screen_menu = require(&quot;scripts/title_screen&quot;)
    sol.menu.start(self, title_screen_menu)

    title_screen_menu.on_finished = function()

    local save_load_menu = sol.main.load_file(&quot;scripts/save_menu.lua&quot;)(game)
    sol.menu.start(self, save_load_menu)

      game_manager:start_game()
    end
  end
</code></pre>">  <span class="hljs-comment">-- Start the game when the Solarus logo menu is finished.</span>
  solarus_logo.on_finished = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-comment">-- Show the title screen after the Solarus Logo</span>
    <span class="hljs-keyword">local</span> title_screen_menu = <span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/title_screen"</span>)
    sol.menu.start(self, title_screen_menu)

    title_screen_menu.on_finished = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

    <span class="hljs-keyword">local</span> save_load_menu = sol.main.load_file(<span class="hljs-string">"scripts/save_menu.lua"</span>)(game)
    sol.menu.start(self, save_load_menu)

      game_manager:start_game()
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
</code></pre><ol>
<li>Put the folder â€œsave_menuâ€ that contains images for the menu in the directory <code>sprites/</code></li></ol><p><strong>Install Instructions: Part 2</strong></p><ol>
<li>Add the following in the game manager. </li></ol><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/menus/alttp_dialog_box&quot;)
require(&quot;scripts/multi_events&quot;)
require(&quot;scripts/hud/hud&quot;)
local save_load_menu = sol.main.load_file(&quot;scripts/save_menu.lua&quot;)(game)

local game_manager = {}

-- Starts the game from the given savegame file,
-- initializing it if necessary.
function game_manager:manage(game)

  --Change hero sprite ID
  game:register_event(&quot;on_started&quot;, function()

  local hero = game:get_hero()
     hero:set_tunic_sprite_id(&quot;main_heroes/eldrina/eldrina&quot;)
  end)

  --This happens when the game is paused with the default pause key &quot;D&quot;
  --Save the game
  function game:on_paused()
   game:start_dialog(&quot;pause.save_question&quot;, function(answer)
    if answer == 2 then
       game:save()
    end
      game:set_paused(false)
   end)
  end

  function sol.main:on_key_pressed(key)

    if key == &quot;l&quot; then
       sol.menu.start(self, save_load_menu)
       game:set_suspended(true)
    end
  end
end

return game_manager
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/menus/alttp_dialog_box"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/multi_events"</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/hud/hud"</span>)
<span class="hljs-keyword">local</span> save_load_menu = sol.main.load_file(<span class="hljs-string">"scripts/save_menu.lua"</span>)(game)

<span class="hljs-keyword">local</span> game_manager = {}

<span class="hljs-comment">-- Starts the game from the given savegame file,</span>
<span class="hljs-comment">-- initializing it if necessary.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:manage</span><span class="hljs-params">(game)</span></span>

  <span class="hljs-comment">--Change hero sprite ID</span>
  game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> hero = game:get_hero()
     hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldrina/eldrina"</span>)
  <span class="hljs-keyword">end</span>)

  <span class="hljs-comment">--This happens when the game is paused with the default pause key "D"</span>
  <span class="hljs-comment">--Save the game</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_paused</span><span class="hljs-params">()</span></span>
   game:start_dialog(<span class="hljs-string">"pause.save_question"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
    <span class="hljs-keyword">if</span> answer == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
       game:save()
    <span class="hljs-keyword">end</span>
      game:set_paused(<span class="hljs-keyword">false</span>)
   <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"l"</span> <span class="hljs-keyword">then</span>
       sol.menu.start(self, save_load_menu)
       game:set_suspended(<span class="hljs-keyword">true</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> game_manager
</code></pre><ol>
<li>I suggest making a menu with the default <code>d</code> pause key. The menu would be where the player would load and save the game. At the moment the <code>d</code> key saves the game in the sample.</li></ol><p><strong>Usage Instructions:</strong></p><ol>
<li>Use the up and down keys</li><li>Change the action key to what you desire in the change area. By default, it is key <code>a</code>, reset with <code>s</code>, and in game clear with <code>q</code>.</li><li>Key <code>L</code> activates the save menu in game and key <code>q</code> can clear it. </li></ol><p><strong>Breaking Down The Script:</strong></p><p>The comments in the script cover everything in the script. There are a few functions I will go over.</p><p>The function <code>sol.file.remove("file_name.dat")</code> removes a file in the write directory. For this lesson the write directory is <code>.users/your_name/solarus/sample_quest/</code>. I used this function to remove the save file for a new game.</p><p>The function <code>sol.game.exists("file_name.dat")</code> checks if a file exists in the write directory. This is normally used to check if a save files exits and if not, then set default hero settings. For example, the heroâ€™s health, item, abilities, and etc.</p><p>The function <code>sol.game.load("file_name.dat")</code> loads a saved file or creates one if none exist. It will not save it.</p><p>The function <code>game:start()</code> runs the game. Only one game can run at a time.</p><p>I do not know if I covered this, but let us say your hero dies. He will by default use the tunic animation instead of the <code>tunic_sprite_id</code> you set. You can use the function <code>game:register_event("on_started", function()</code> after starting the game to prevent this from ever happening.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:register_event(&quot;on_started&quot;, function()

    local hero = game:get_hero()
    hero:set_tunic_sprite_id(&quot;main_heroes/eldran&quot;)
end)
</code></pre>">game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

    <span class="hljs-keyword">local</span> hero = game:get_hero()
    hero:set_tunic_sprite_id(<span class="hljs-string">"main_heroes/eldran"</span>)
<span class="hljs-keyword">end</span>)
</code></pre><h3 id="movements"><a name="movements" href="#movements"></a>Movements</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_15_images/Movements_1.png" alt="Chapter_15_images/Movements_1.png"></p><table>
<thead>
<tr>
<th style="text-align:center">Movement</th>
<th style="text-align:left">Description</th>
<th style="text-align:center">String</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Straight movement:</td>
<td style="text-align:left">Straight trajectory in any direction.</td>
<td style="text-align:center">â€œstraightâ€</td>
</tr>
<tr>
<td style="text-align:center">Random movement:</td>
<td style="text-align:left">A straight movement whose direction changes randomly from time to time.</td>
<td style="text-align:center">â€œrandomâ€</td>
</tr>
<tr>
<td style="text-align:center">Target movement:</td>
<td style="text-align:left">Straight trajectory towards a possibly moving target.</td>
<td style="text-align:center">â€œtargetâ€</td>
</tr>
<tr>
<td style="text-align:center">Path movement:</td>
<td style="text-align:left">Predetermined path composed of steps in the 8 main directions.</td>
<td style="text-align:center">â€œpathâ€</td>
</tr>
<tr>
<td style="text-align:center">Random path movement:</td>
<td style="text-align:left">Like a path movement, but with random steps.</td>
<td style="text-align:center">â€œrandom_pathâ€</td>
</tr>
<tr>
<td style="text-align:center">Path finding movement:</td>
<td style="text-align:left">Like a path movement, but calculated to reach a possibly moving target.</td>
<td style="text-align:center">â€œpath_findingâ€</td>
</tr>
<tr>
<td style="text-align:center">Circle movement:</td>
<td style="text-align:left">Circular trajectory around a possibly moving center.</td>
<td style="text-align:center">â€œcircleâ€</td>
</tr>
<tr>
<td style="text-align:center">Jump movement:</td>
<td style="text-align:left">An illusion of jump above a baseline.</td>
<td style="text-align:center">â€œjumpâ€</td>
</tr>
<tr>
<td style="text-align:center">Pixel movement:</td>
<td style="text-align:left">A trajectory described pixel by pixel.</td>
<td style="text-align:center">â€œpixelâ€</td>
</tr>
</tbody>
</table><h5 id="create-movement"><a name="create-movement" href="#create-movement"></a>Create Movement</h5><p>This is the basic structure for creating a movement.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local variable = sol.movement.create(&quot;movement_name&quot;)

variable:start(entity_name)
</code></pre>"><span class="hljs-keyword">local</span> variable = sol.movement.create(<span class="hljs-string">"movement_name"</span>)

variable:start(entity_name)
</code></pre><p>There are many movement functions and one should check the documentation for more.</p><h5 id="jump-movement"><a name="jump-movement" href="#jump-movement"></a>Jump Movement</h5><p>An illusion of jump above a baseline.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function map:on_started()

--Jump
 local jump = sol.movement.create(&quot;jump&quot;)

 jump:set_direction8(2)
 jump:set_distance(100)
 jump:start(elf_2)
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>

<span class="hljs-comment">--Jump</span>
 <span class="hljs-keyword">local</span> jump = sol.movement.create(<span class="hljs-string">"jump"</span>)

 jump:set_direction8(<span class="hljs-number">2</span>)
 jump:set_distance(<span class="hljs-number">100</span>)
 jump:start(elf_2)
</code></pre><h5 id="random-path-movement"><a name="random-path-movement" href="#random-path-movement"></a>Random Path Movement</h5><p>Like a path movement, but with random steps.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Random_Path
 local random_path = sol.movement.create(&quot;random_path&quot;)
 random_path:start(elf)
</code></pre>"> <span class="hljs-comment">--Random_Path</span>
 <span class="hljs-keyword">local</span> random_path = sol.movement.create(<span class="hljs-string">"random_path"</span>)
 random_path:start(elf)
</code></pre><h5 id="target-movement"><a name="target-movement" href="#target-movement"></a>Target Movement</h5><p>Straight trajectory towards a possibly moving target.</p><p>The default target is the hero. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Target
 --Default target is hero
 local target = sol.movement.create(&quot;target&quot;)
 target:set_speed(32) -- set speed
 target:start(elf_4)
</code></pre>"> <span class="hljs-comment">--Target</span>
 <span class="hljs-comment">--Default target is hero</span>
 <span class="hljs-keyword">local</span> target = sol.movement.create(<span class="hljs-string">"target"</span>)
 target:set_speed(<span class="hljs-number">32</span>) <span class="hljs-comment">-- set speed</span>
 target:start(elf_4)
</code></pre><p>If one wants to target a different entity, then one has to use the function <code>:set_target(entity_name)</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Follow sprite &quot;elf&quot;
 local target2 = sol.movement.create(&quot;target&quot;)

 target2:set_speed(32)
 target2:start(elf_5)
 target2:set_target(elf)
</code></pre>"> <span class="hljs-comment">--Follow sprite "elf"</span>
 <span class="hljs-keyword">local</span> target2 = sol.movement.create(<span class="hljs-string">"target"</span>)

 target2:set_speed(<span class="hljs-number">32</span>)
 target2:start(elf_5)
 target2:set_target(elf)
</code></pre><h5 id="path-finding-movement"><a name="path-finding-movement" href="#path-finding-movement"></a>Path Finding Movement</h5><p>Like a path movement, but calculated to reach a possibly moving target.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Path finding (Go around obstacles)
 local path = sol.movement.create(&quot;path_finding&quot;)

 path:set_speed(69)
 path:start(elf_6)
 path:set_target(hero)
</code></pre>"> <span class="hljs-comment">--Path finding (Go around obstacles)</span>
 <span class="hljs-keyword">local</span> path = sol.movement.create(<span class="hljs-string">"path_finding"</span>)

 path:set_speed(<span class="hljs-number">69</span>)
 path:start(elf_6)
 path:set_target(hero)
</code></pre><h5 id="random-movement"><a name="random-movement" href="#random-movement"></a>Random Movement</h5><p>A straight movement whose direction changes randomly from time to time.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Random
 local straight_random = sol.movement.create(&quot;random&quot;)

 straight_random:start(elf_7)
</code></pre>"> <span class="hljs-comment">--Random</span>
 <span class="hljs-keyword">local</span> straight_random = sol.movement.create(<span class="hljs-string">"random"</span>)

 straight_random:start(elf_7)
</code></pre><h5 id="straight-movement"><a name="straight-movement" href="#straight-movement"></a>Straight Movement</h5><p>Straight trajectory in any direction. </p><p>You can set the angle to the following values to get basic directions, but you can use negatives and other values. I used 3 in <code>straight:set_angle(3)</code>.</p><table>
<thead>
<tr>
<th style="text-align:center">Angle</th>
<th style="text-align:center">Value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">East</td>
<td style="text-align:center">0 </td>
</tr>
<tr>
<td style="text-align:center">North</td>
<td style="text-align:center">math.pi / 2 </td>
</tr>
<tr>
<td style="text-align:center">West</td>
<td style="text-align:center">math.pi</td>
</tr>
<tr>
<td style="text-align:center">South</td>
<td style="text-align:center">3 * math.pi / 2</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Straight
 local straight = sol.movement.create(&quot;straight&quot;)
 straight:set_angle(3)
 straight:start(elf_3)
</code></pre>"> <span class="hljs-comment">--Straight</span>
 <span class="hljs-keyword">local</span> straight = sol.movement.create(<span class="hljs-string">"straight"</span>)
 straight:set_angle(<span class="hljs-number">3</span>)
 straight:start(elf_3)
</code></pre><h5 id="path-movement"><a name="path-movement" href="#path-movement"></a>Path Movement</h5><p>Predetermined path composed of steps in the 8 main directions.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Path
 local path = sol.movement.create(&quot;path&quot;)

 path:set_path{3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3}
 path:set_speed(80)
 path:set_loop(true)
 path:set_ignore_obstacles(true)
 path:start(elf_8)
</code></pre>"> <span class="hljs-comment">--Path</span>
 <span class="hljs-keyword">local</span> path = sol.movement.create(<span class="hljs-string">"path"</span>)

 path:set_path{<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>}
 path:set_speed(<span class="hljs-number">80</span>)
 path:set_loop(<span class="hljs-keyword">true</span>)
 path:set_ignore_obstacles(<span class="hljs-keyword">true</span>)
 path:start(elf_8)
</code></pre><h5 id="pixel-movement"><a name="pixel-movement" href="#pixel-movement"></a>Pixel Movement</h5><p>A trajectory described pixel by pixel.</p><p>Pixel Movement needs a transition array.</p><p><strong>Transition Example:</strong></p><pre><code data-origin="<pre><code>For 1 translation: table1 = {{244,270}}
For 2 translations: table1 = {{244,270}, {244,270}}
</code></pre>">For 1 translation: table1 = {{244,270}}
For 2 translations: table1 = {{244,270}, {244,270}}
</code></pre><p><strong>Pixel Movement Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Pixel movement
 local pixel = sol.movement.create(&quot;pixel&quot;)

 pixel:set_trajectory{{5,-5},{0,-1}}
 pixel:set_loop(true)
 pixel:set_ignore_obstacles(true)
 pixel:start(elf_9)
</code></pre>"> <span class="hljs-comment">--Pixel movement</span>
 <span class="hljs-keyword">local</span> pixel = sol.movement.create(<span class="hljs-string">"pixel"</span>)

 pixel:set_trajectory{{<span class="hljs-number">5</span>,-<span class="hljs-number">5</span>},{<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>}}
 pixel:set_loop(<span class="hljs-keyword">true</span>)
 pixel:set_ignore_obstacles(<span class="hljs-keyword">true</span>)
 pixel:start(elf_9)
</code></pre><h5 id="circle-movement"><a name="circle-movement" href="#circle-movement"></a>Circle Movement</h5><p>Circular trajectory around a possibly moving center.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --Circle movement
 local circle = sol.movement.create(&quot;circle&quot;)
 circle:set_center(test)
 circle:set_loop_delay(1000)
 circle:set_angle_speed(100)
 circle:set_duration(1000000)
 circle:set_max_rotations(100)
 circle:set_initial_angle(100)
 circle:set_clockwise(true)
 circle:set_radius(22)
 circle:set_radius_speed(1)
 circle:set_ignore_obstacles(false)
 circle:start(elf_10)
</code></pre>"> <span class="hljs-comment">--Circle movement</span>
 <span class="hljs-keyword">local</span> circle = sol.movement.create(<span class="hljs-string">"circle"</span>)
 circle:set_center(test)
 circle:set_loop_delay(<span class="hljs-number">1000</span>)
 circle:set_angle_speed(<span class="hljs-number">100</span>)
 circle:set_duration(<span class="hljs-number">1000000</span>)
 circle:set_max_rotations(<span class="hljs-number">100</span>)
 circle:set_initial_angle(<span class="hljs-number">100</span>)
 circle:set_clockwise(<span class="hljs-keyword">true</span>)
 circle:set_radius(<span class="hljs-number">22</span>)
 circle:set_radius_speed(<span class="hljs-number">1</span>)
 circle:set_ignore_obstacles(<span class="hljs-keyword">false</span>)
 circle:start(elf_10)
</code></pre><h5 id="walk-through-entity"><a name="walk-through-entity" href="#walk-through-entity"></a>Walk through Entity</h5><p>Instead of bumping into entities and getting trapped. I think it is best the walk through them. You can use the function <code>entity:set_traversable(true/false)</code> to walk through NPC, etc.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>elf_4:set_traversable(true)
elf_6:set_traversable(true)
</code></pre>">elf_4:set_traversable(<span class="hljs-keyword">true</span>)
elf_6:set_traversable(<span class="hljs-keyword">true</span>)
</code></pre><h3 id="moving-image"><a name="moving-image" href="#moving-image"></a>Moving Image</h3><p>Moving an image is almost the same as moving an entity. Let us use a 320x240 Solarus logo. </p><p>You can find everything in the sample in the following directory. </p><p><code>Lessons &gt; Chapter_15 &gt; Chapter_15_Movements_on_image.zip</code></p><p><img src="https://raw.githubusercontent.com/Zefk/Solarus-ARPG-Game-Development-Book_2/24d7491aceab7cd220d95e85fd00057568cc1f92/Lesson_images/Chapter_15_images/solarus_logo.png" alt="Chapter_15_images/solarus_logo.png"></p><p><strong>Tip:</strong><br>The Solarus screen zooms to 640x480, so the logo will enlarge.</p><p><strong>Make Menu</strong></p><p>An easy way to set this up is with a menu.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local solarus_logo_menu = {}

return solarus_logo_menu
</code></pre>"><span class="hljs-keyword">local</span> solarus_logo_menu = {}

<span class="hljs-keyword">return</span> solarus_logo_menu
</code></pre><p><strong>Setup Image &amp; Make Movement:</strong></p><p>Next we need to load/create the image and movement. We apply a movement to an image by starting the movement on the created surface variable.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  movement:start(logo_img)
</code></pre>">  movement:start(logo_img)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local solarus_logo_menu = {}

local logo_img = sol.surface.create(&quot;menus/solarus_logo.png&quot;)

function solarus_logo_menu:on_started()
  local movement = sol.movement.create(&quot;straight&quot;)
  movement:start(logo_img)
end

function solarus_logo_menu:on_draw(screen)
  logo_img:draw(screen)
end

return solarus_logo_menu
</code></pre>"><span class="hljs-keyword">local</span> solarus_logo_menu = {}

<span class="hljs-keyword">local</span> logo_img = sol.surface.create(<span class="hljs-string">"menus/solarus_logo.png"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_started</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
  movement:start(logo_img)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_draw</span><span class="hljs-params">(screen)</span></span>
  logo_img:draw(screen)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> solarus_logo_menu
</code></pre><p><strong>Movement properties:</strong></p><p>We want: </p><ul>
<li>The image to move at a decent speed.</li></ul><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  movement:set_speed(128)
</code></pre>">  movement:set_speed(<span class="hljs-number">128</span>)
</code></pre><ul>
<li>The image angle to go south. South is <code>3 * math.pi / 2</code>.</li></ul><table>
<thead>
<tr>
<th style="text-align:left">4 Directions</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">East</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td style="text-align:left">North</td>
<td style="text-align:left">math.pi / 2</td>
</tr>
<tr>
<td style="text-align:left">West</td>
<td style="text-align:left">math.pi</td>
</tr>
<tr>
<td style="text-align:left">South</td>
<td style="text-align:left">3 * math.pi / 2</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  movement:set_angle(3 * math.pi / 2)
</code></pre>">  movement:set_angle(<span class="hljs-number">3</span> * <span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
</code></pre><ul>
<li>The image to not run off the screen, so we set the max distance.</li></ul><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  movement:set_max_distance(240)
</code></pre>">  movement:set_max_distance(<span class="hljs-number">240</span>)
</code></pre><ul>
<li>To draw the image off screen because it is an easy way to calculate max distance. We change the imageâ€™s y coordinates to -240 because we set the max distance to go down by 240. The image is 320x240.</li></ul><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  logo_img:draw(screen, 0, -240)
</code></pre>">  logo_img:draw(screen, <span class="hljs-number">0</span>, -<span class="hljs-number">240</span>)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local solarus_logo_menu = {}

local logo_img = sol.surface.create(&quot;menus/solarus_logo.png&quot;)

function solarus_logo_menu:on_started()

  local movement = sol.movement.create(&quot;straight&quot;)
  movement:set_speed(128)
  movement:set_angle(3 * math.pi / 2)
  movement:set_max_distance(240)
  movement:start(logo_img)
end

function solarus_logo_menu:on_draw(screen)
  logo_img:draw(screen, 0, -240)
end

return solarus_logo_menu
</code></pre>"><span class="hljs-keyword">local</span> solarus_logo_menu = {}

<span class="hljs-keyword">local</span> logo_img = sol.surface.create(<span class="hljs-string">"menus/solarus_logo.png"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_started</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
  movement:set_speed(<span class="hljs-number">128</span>)
  movement:set_angle(<span class="hljs-number">3</span> * <span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
  movement:set_max_distance(<span class="hljs-number">240</span>)
  movement:start(logo_img)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_draw</span><span class="hljs-params">(screen)</span></span>
  logo_img:draw(screen, <span class="hljs-number">0</span>, -<span class="hljs-number">240</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> solarus_logo_menu
</code></pre><p><strong>Stop Menu On Key Press</strong></p><ul>
<li>Setup a key press function with the key being <code>space</code> and stop the menu inside.</li><li>Return true to activate function or you could change the order of your function. </li><li>Return false to not activate the key press function for other keys, but not really needed.</li><li>Return false and true are not really needed, but it is good practice programming wise.</li></ul><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function solarus_logo_menu:on_key_pressed(key)
  if key == &quot;space&quot; then
    sol.menu.stop(solarus_logo_menu)
    return true
  end
  return false
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"space"</span> <span class="hljs-keyword">then</span>
    sol.menu.stop(solarus_logo_menu)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Now the menu will move down and pressing the <code>space</code> key will stop it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local solarus_logo_menu = {}

local logo_img = sol.surface.create(&quot;menus/solarus_logo.png&quot;)

function solarus_logo_menu:on_started()

  local movement = sol.movement.create(&quot;straight&quot;)
  movement:set_speed(128)
  movement:set_angle(3 * math.pi / 2)
  movement:set_max_distance(240)
  movement:start(logo_img)
end

function solarus_logo_menu:on_draw(screen)
  logo_img:draw(screen, 0, -240)
end

function solarus_logo_menu:on_key_pressed(key)
  if key == &quot;space&quot; then
    sol.menu.stop(solarus_logo_menu)
  end
end

return solarus_logo_menu
</code></pre>"><span class="hljs-keyword">local</span> solarus_logo_menu = {}

<span class="hljs-keyword">local</span> logo_img = sol.surface.create(<span class="hljs-string">"menus/solarus_logo.png"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_started</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
  movement:set_speed(<span class="hljs-number">128</span>)
  movement:set_angle(<span class="hljs-number">3</span> * <span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
  movement:set_max_distance(<span class="hljs-number">240</span>)
  movement:start(logo_img)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_draw</span><span class="hljs-params">(screen)</span></span>
  logo_img:draw(screen, <span class="hljs-number">0</span>, -<span class="hljs-number">240</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"space"</span> <span class="hljs-keyword">then</span>
    sol.menu.stop(solarus_logo_menu)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> solarus_logo_menu
</code></pre><p><strong>Callback Instead of Key Press:</strong></p><p>One can remove the key press function and use a callback to stop the menu if you want the game to just start after the logo finishes.</p><pre><code data-origin="<pre><code> movement:start(logo_img, callback())
</code></pre>"> movement:start(logo_img, callback())
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>  movement:start(logo_img, function()
    sol.menu.stop(solarus_logo_menu)
  end)
</code></pre>">  movement:start(logo_img, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    sol.menu.stop(solarus_logo_menu)
  <span class="hljs-keyword">end</span>)
</code></pre><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local solarus_logo_menu = {}

local logo_img = sol.surface.create(&quot;menus/solarus_logo.png&quot;)

function solarus_logo_menu:on_started()

  local movement = sol.movement.create(&quot;straight&quot;)
  movement:set_speed(128)
  movement:set_angle(3 * math.pi / 2)
  movement:set_max_distance(240)
  movement:start(logo_img, function()
    sol.menu.stop(solarus_logo_menu)
  end)
end

function solarus_logo_menu:on_draw(screen)
  logo_img:draw(screen, 0, -240)
end

return solarus_logo_menu
</code></pre>"><span class="hljs-keyword">local</span> solarus_logo_menu = {}

<span class="hljs-keyword">local</span> logo_img = sol.surface.create(<span class="hljs-string">"menus/solarus_logo.png"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_started</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
  movement:set_speed(<span class="hljs-number">128</span>)
  movement:set_angle(<span class="hljs-number">3</span> * <span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
  movement:set_max_distance(<span class="hljs-number">240</span>)
  movement:start(logo_img, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    sol.menu.stop(solarus_logo_menu)
  <span class="hljs-keyword">end</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">solarus_logo_menu:on_draw</span><span class="hljs-params">(screen)</span></span>
  logo_img:draw(screen, <span class="hljs-number">0</span>, -<span class="hljs-number">240</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">return</span> solarus_logo_menu
</code></pre><h3 id="map-types"><a name="map-types" href="#map-types"></a>Map Types</h3><p>I have covered a few map types already, but here are some more useful ones that I did not cover.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Name of the map
map:get_id()

--Name of the world
map:get_world()

--Floor number
map:get_floor()

--Coorndinates in the world
map:get_location()

--Name of tileset
map:get_tileset()

--Name of music playing
map:get_music()
</code></pre>"><span class="hljs-comment">--Name of the map</span>
map:get_id()

<span class="hljs-comment">--Name of the world</span>
map:get_world()

<span class="hljs-comment">--Floor number</span>
map:get_floor()

<span class="hljs-comment">--Coorndinates in the world</span>
map:get_location()

<span class="hljs-comment">--Name of tileset</span>
map:get_tileset()

<span class="hljs-comment">--Name of music playing</span>
map:get_music()
</code></pre><p><strong>Example:</strong></p><p>This example comes directory from the sample. Press key 5 and key 6 to try it out.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_15_images/Map_types_1.png" alt="Chapter_15_images/Map_types_1.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local example = {}
local test = {}
local map_functions = false

--Name of the map
example[1] = &quot;Map: &quot;..map:get_id()

--Name of the world
example[2] = &quot;World: &quot;..map:get_world()

--Floor number
example[3] = &quot;Floor: &quot;..map:get_floor()

--coorndinates in the world
example[4] = &quot;Location: &quot;..map:get_location()

--Name of tileset
example[5] = &quot;Tieset: &quot;..map:get_tileset()

--Name of music playing
example[6] = &quot;Music playing: &quot;..map:get_music()

--Display text
for rep = 1,6 do
--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html
      test[rep] = sol.text_surface.create({ -- name a local variable something and assign it to the sol.text_surface
      font = &quot;minecraftia&quot;, -- font name
      text = example[rep], -- text you want to show
      font_size = 12, -- font size obviously
      rendering_mode = &quot;antialiasing&quot;, -- &quot;solid&quot; (faster) and default
      color = {240,248,255}, -- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)
    })
end

--Draw text to screen
function sol.main:on_draw(screen)

  if map_functions == true then
     test[1]:draw(screen,10, 15)
     test[2]:draw(screen,10,30)
     test[3]:draw(screen,10,45)
     test[4]:draw(screen,10,60)
     test[5]:draw(screen,10,75)
     test[6]:draw(screen,10,90)
  end

end --end of draw function

--Display map types using key 5 and key 6.
function map:on_key_pressed(key)    

    if key == &quot;5&quot; then
        map_functions = true
    end

    if key == &quot;6&quot; then
        map_functions = false
    end
end
</code></pre>"><span class="hljs-keyword">local</span> example = {}
<span class="hljs-keyword">local</span> test = {}
<span class="hljs-keyword">local</span> map_functions = <span class="hljs-keyword">false</span>

<span class="hljs-comment">--Name of the map</span>
example[<span class="hljs-number">1</span>] = <span class="hljs-string">"Map: "</span>..map:get_id()

<span class="hljs-comment">--Name of the world</span>
example[<span class="hljs-number">2</span>] = <span class="hljs-string">"World: "</span>..map:get_world()

<span class="hljs-comment">--Floor number</span>
example[<span class="hljs-number">3</span>] = <span class="hljs-string">"Floor: "</span>..map:get_floor()

<span class="hljs-comment">--coorndinates in the world</span>
example[<span class="hljs-number">4</span>] = <span class="hljs-string">"Location: "</span>..map:get_location()

<span class="hljs-comment">--Name of tileset</span>
example[<span class="hljs-number">5</span>] = <span class="hljs-string">"Tieset: "</span>..map:get_tileset()

<span class="hljs-comment">--Name of music playing</span>
example[<span class="hljs-number">6</span>] = <span class="hljs-string">"Music playing: "</span>..map:get_music()

<span class="hljs-comment">--Display text</span>
<span class="hljs-keyword">for</span> rep = <span class="hljs-number">1</span>,<span class="hljs-number">6</span> <span class="hljs-keyword">do</span>
<span class="hljs-comment">--http://www.solarus-games.org/doc/latest/lua_api_text_surface.html</span>
      test[rep] = sol.text_surface.create({ <span class="hljs-comment">-- name a local variable something and assign it to the sol.text_surface</span>
      font = <span class="hljs-string">"minecraftia"</span>, <span class="hljs-comment">-- font name</span>
      text = example[rep], <span class="hljs-comment">-- text you want to show</span>
      font_size = <span class="hljs-number">12</span>, <span class="hljs-comment">-- font size obviously</span>
      rendering_mode = <span class="hljs-string">"antialiasing"</span>, <span class="hljs-comment">-- "solid" (faster) and default</span>
      color = {<span class="hljs-number">240</span>,<span class="hljs-number">248</span>,<span class="hljs-number">255</span>}, <span class="hljs-comment">-- color must be in a table RGB (http://www.rapidtables.com/web/color/RGB_Color.htm)</span>
    })
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Draw text to screen</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_draw</span><span class="hljs-params">(screen)</span></span>

  <span class="hljs-keyword">if</span> map_functions == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     test[<span class="hljs-number">1</span>]:draw(screen,<span class="hljs-number">10</span>, <span class="hljs-number">15</span>)
     test[<span class="hljs-number">2</span>]:draw(screen,<span class="hljs-number">10</span>,<span class="hljs-number">30</span>)
     test[<span class="hljs-number">3</span>]:draw(screen,<span class="hljs-number">10</span>,<span class="hljs-number">45</span>)
     test[<span class="hljs-number">4</span>]:draw(screen,<span class="hljs-number">10</span>,<span class="hljs-number">60</span>)
     test[<span class="hljs-number">5</span>]:draw(screen,<span class="hljs-number">10</span>,<span class="hljs-number">75</span>)
     test[<span class="hljs-number">6</span>]:draw(screen,<span class="hljs-number">10</span>,<span class="hljs-number">90</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">--end of draw function</span>

<span class="hljs-comment">--Display map types using key 5 and key 6.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_key_pressed</span><span class="hljs-params">(key)</span></span>    

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"5"</span> <span class="hljs-keyword">then</span>
        map_functions = <span class="hljs-keyword">true</span>
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"6"</span> <span class="hljs-keyword">then</span>
        map_functions = <span class="hljs-keyword">false</span>
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>You can also get the music you set for the map. This is useful for when playing a different music and wanting to go back to the default music for the map. Maybe you do not want to write a long directory name.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.audio.play_music(map:get_music())
</code></pre>">sol.audio.play_music(map:get_music())
</code></pre><h5 id="making-a-map-entity"><a name="making-a-map-entity" href="#making-a-map-entity"></a>Making a Map Entity</h5><p>It is quite easy to make map entities with script. This can be useful for when spawing projectiles.</p><p><strong>Example:</strong></p><p>The following script is placed in a custom entity. If an entity named <code>enemy</code> overlaps it, then an custom entity arrow will spawn or appear.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local game = entity:get_game()
local map = entity:get_map()
local enemy = map:get_entity(&quot;enemy&quot;)

--Create on_activated
sol.timer.start(500, function()
  if entity.on_activated ~= nil then
    entity:on_activated()
 return true 
  end
end)

function entity:on_activated()
   local x,y = entity:get_position()

   if entity:overlaps(enemy)then
     print(&quot;overlap&quot;)
     map:create_custom_entity({
       name = &quot;arrow&quot;,
       direction = 2,
       layer = 0,
       width = 16,
       height = 16,
       x = x,
       y = y,
       sprite = &quot;entities/arrow&quot;,
       })
   end
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> game = entity:get_game()
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> enemy = map:get_entity(<span class="hljs-string">"enemy"</span>)

<span class="hljs-comment">--Create on_activated</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> entity.on_activated ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    entity:on_activated()
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_activated</span><span class="hljs-params">()</span></span>
   <span class="hljs-keyword">local</span> x,y = entity:get_position()

   <span class="hljs-keyword">if</span> entity:overlaps(enemy)<span class="hljs-keyword">then</span>
     <span class="hljs-built_in">print</span>(<span class="hljs-string">"overlap"</span>)
     map:create_custom_entity({
       name = <span class="hljs-string">"arrow"</span>,
       direction = <span class="hljs-number">2</span>,
       layer = <span class="hljs-number">0</span>,
       width = <span class="hljs-number">16</span>,
       height = <span class="hljs-number">16</span>,
       x = x,
       y = y,
       sprite = <span class="hljs-string">"entities/arrow"</span>,
       })
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h3 id="camera-entity"><a name="camera-entity" href="#camera-entity"></a>Camera Entity</h3><p>The camera is an entity like a NPC. You can check the Documentation for the functions for all entity types. You need to get the camera before you can use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local camera = map:get_camera()
</code></pre>"><span class="hljs-keyword">local</span> camera = map:get_camera()
</code></pre><h5 id="camera-size"><a name="camera-size" href="#camera-size"></a>Camera Size</h5><p>The camera size is what you can see on the screen. A size of (96,96) would be quite small compared to the default size of (320,240). The camera size function goes by 8 (8,16,24,32,40,48,56,64,72,80,88,96)</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>camera:set_size(96, 96)
</code></pre>">camera:set_size(<span class="hljs-number">96</span>, <span class="hljs-number">96</span>)
</code></pre><p> You can set your screen back to normal with:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> --That is the default quest screen size.
 camera:set_size(320, 240)
</code></pre>"> <span class="hljs-comment">--That is the default quest screen size.</span>
 camera:set_size(<span class="hljs-number">320</span>, <span class="hljs-number">240</span>)
</code></pre><h5 id="camera-tracking"><a name="camera-tracking" href="#camera-tracking"></a>Camera Tracking</h5><p>Changing the screen size can help with camera tracking when it comes to sprites.</p><p>The function <code>camera:start_tracking(entity_name)</code> is used for camera tracking. By default, the camera tracks where the hero goes.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>        camera:set_size(96, 96)
        camera:start_tracking(elf_6)
</code></pre>">        camera:set_size(<span class="hljs-number">96</span>, <span class="hljs-number">96</span>)
        camera:start_tracking(elf_6)
</code></pre><h5 id="camera-position"><a name="camera-position" href="#camera-position"></a>Camera Position</h5><p>Normally, the camera position is centered at <code>(0,0)</code>. You can change the position of the screen with the function <code>camera:set_position_on_screen(x,y)</code>.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>        camera:set_position_on_screen(120,60)
</code></pre>">        camera:set_position_on_screen(<span class="hljs-number">120</span>,<span class="hljs-number">60</span>)
</code></pre><p>You can change it back to normal like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>        camera:set_position_on_screen(0,0)
</code></pre>">        camera:set_position_on_screen(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
</code></pre><h5 id="camera-&amp;-movements"><a name="camera-&amp;-movements" href="#camera-&amp;-movements"></a>Camera &amp; Movements</h5><p>You can apply movements to the camera. The camera entity name is <code>map:get_camera()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    local path = sol.movement.create(&quot;path&quot;)

    path:set_path{2,0,2,0,3,0,3,0,3,0,3,0,3,0,3,0,3}
    path:set_speed(80)
    path:set_loop(false)
    path:set_ignore_obstacles(true)

    path:start(map:get_camera())
</code></pre>">    <span class="hljs-keyword">local</span> path = sol.movement.create(<span class="hljs-string">"path"</span>)

    path:set_path{<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>}
    path:set_speed(<span class="hljs-number">80</span>)
    path:set_loop(<span class="hljs-keyword">false</span>)
    path:set_ignore_obstacles(<span class="hljs-keyword">true</span>)

    path:start(map:get_camera())
</code></pre><h5 id="camera-example-script"><a name="camera-example-script" href="#camera-example-script"></a>Camera Example Script</h5><p>Press the keys <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code> to test the camera. Key <code>2</code> sets everything back to default.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()
local camera = map:get_camera()

function map:on_key_pressed(key)   

   if key == &quot;1&quot; then
    --Camera size goes by 8
        camera:set_size(96, 96)
        camera:start_tracking(elf_6)
        camera:set_position_on_screen(0,0)
    end

    if key == &quot;2&quot; then
        camera:set_size(320, 240)
        camera:set_position_on_screen(0,0)
        camera:start_tracking(hero)
    end

    if key == &quot;3&quot; then
        camera:set_size(320, 240)
        --Camera default position is 0,0
        camera:set_position_on_screen(120,60)
        camera:start_tracking(hero)
    end

    local path = sol.movement.create(&quot;path&quot;)

    path:set_path{2,0,2,0,3,0,3,0,3,0,3,0,3,0,3,0,3}
    path:set_speed(80)
    path:set_loop(false)
    path:set_ignore_obstacles(true)

    if key == &quot;4&quot; then
     --Use movements on camera
        path:start(map:get_camera())
        camera:set_position_on_screen(0,0)
    end
end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()
<span class="hljs-keyword">local</span> camera = map:get_camera()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_key_pressed</span><span class="hljs-params">(key)</span></span>   

   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"1"</span> <span class="hljs-keyword">then</span>
    <span class="hljs-comment">--Camera size goes by 8</span>
        camera:set_size(<span class="hljs-number">96</span>, <span class="hljs-number">96</span>)
        camera:start_tracking(elf_6)
        camera:set_position_on_screen(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"2"</span> <span class="hljs-keyword">then</span>
        camera:set_size(<span class="hljs-number">320</span>, <span class="hljs-number">240</span>)
        camera:set_position_on_screen(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
        camera:start_tracking(hero)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"3"</span> <span class="hljs-keyword">then</span>
        camera:set_size(<span class="hljs-number">320</span>, <span class="hljs-number">240</span>)
        <span class="hljs-comment">--Camera default position is 0,0</span>
        camera:set_position_on_screen(<span class="hljs-number">120</span>,<span class="hljs-number">60</span>)
        camera:start_tracking(hero)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">local</span> path = sol.movement.create(<span class="hljs-string">"path"</span>)

    path:set_path{<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>}
    path:set_speed(<span class="hljs-number">80</span>)
    path:set_loop(<span class="hljs-keyword">false</span>)
    path:set_ignore_obstacles(<span class="hljs-keyword">true</span>)

    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"4"</span> <span class="hljs-keyword">then</span>
     <span class="hljs-comment">--Use movements on camera</span>
        path:start(map:get_camera())
        camera:set_position_on_screen(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h3 id="i/o---input/output"><a name="i/o---input/output" href="#i/o---input/output"></a>I/O - Input/Output</h3><p>The I/O is writing and reading text from a file. The easiest way to do this is to just use the engineâ€™s functions <code>game:get_value</code> and <code>game:set_value</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:set_value(&quot;variable_name&quot;, value/string)
</code></pre>">game:set_value(<span class="hljs-string">"variable_name"</span>, value/<span class="hljs-built_in">string</span>)
</code></pre><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--It might be easier to just store your values and strings in a save file. 
--value
game:set_value(&quot;coordinate_z&quot;, 50)
print(&quot;Coordinate Z is: &quot;..game:get_value(&quot;coordinate_z&quot;))

--String
game:set_value(&quot;coordinate_question&quot;, &quot;what&quot;)
print(&quot;Coordinate Question is: &quot;..game:get_value(&quot;coordinate_question&quot;))
</code></pre>"><span class="hljs-comment">--It might be easier to just store your values and strings in a save file. </span>
<span class="hljs-comment">--value</span>
game:set_value(<span class="hljs-string">"coordinate_z"</span>, <span class="hljs-number">50</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Coordinate Z is: "</span>..game:get_value(<span class="hljs-string">"coordinate_z"</span>))

<span class="hljs-comment">--String</span>
game:set_value(<span class="hljs-string">"coordinate_question"</span>, <span class="hljs-string">"what"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Coordinate Question is: "</span>..game:get_value(<span class="hljs-string">"coordinate_question"</span>))
</code></pre><p>However, you can write to files in other ways. You can use the function:</p><p><code>sol.file.open("file_name", "mode")</code></p><table>
<thead>
<tr>
<th style="text-align:center">Modes:</th>
<th style="text-align:left">Decription:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">â€œrâ€</td>
<td style="text-align:left">read mode (the default)</td>
</tr>
<tr>
<td style="text-align:center">â€œwâ€</td>
<td style="text-align:left">write mode</td>
</tr>
<tr>
<td style="text-align:center">â€œaâ€</td>
<td style="text-align:left">append mode</td>
</tr>
<tr>
<td style="text-align:center">â€œr+â€</td>
<td style="text-align:left">update mode, all previous data is preserved</td>
</tr>
<tr>
<td style="text-align:center">â€œw+â€</td>
<td style="text-align:left">update mode, all previous data is erased</td>
</tr>
<tr>
<td style="text-align:center">â€œa+â€</td>
<td style="text-align:left">append update mode, previous data is preserved writing is only allowed at the end of file.</td>
</tr>
</tbody>
</table><h5 id="opening,-writing,-and-closing-file"><a name="opening,-writing,-and-closing-file" href="#opening,-writing,-and-closing-file"></a>Opening, writing, and closing file</h5><p>Writing by default creates the file. You must always remember to close a file with the function <code>file_variable_name:close()</code> or you risk memory leaks. You use the mode <code>"w"</code> to write and the function <code>file_variable_name:write("text to show or", variable_value_to_show)</code>. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local file_variable_name = sol.file.open(&quot;example.txt&quot;, &quot;w&quot;)

file_variable_name:write(&quot;blah&quot;)
file_variable_name:close()
</code></pre>"><span class="hljs-keyword">local</span> file_variable_name = sol.file.open(<span class="hljs-string">"example.txt"</span>, <span class="hljs-string">"w"</span>)

file_variable_name:write(<span class="hljs-string">"blah"</span>)
file_variable_name:close()
</code></pre><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local coordinate_x = 50
local coordinate_y = 40
local file_write = sol.file.open(&quot;example.txt&quot;, &quot;w&quot;)
file_write:write(&quot;x:&quot;,coordinate_x, &quot;y:&quot;, coordinate_y)
file_write:close()
</code></pre>"><span class="hljs-keyword">local</span> coordinate_x = <span class="hljs-number">50</span>
<span class="hljs-keyword">local</span> coordinate_y = <span class="hljs-number">40</span>
<span class="hljs-keyword">local</span> file_write = sol.file.open(<span class="hljs-string">"example.txt"</span>, <span class="hljs-string">"w"</span>)
file_write:write(<span class="hljs-string">"x:"</span>,coordinate_x, <span class="hljs-string">"y:"</span>, coordinate_y)
file_write:close()
</code></pre><h5 id="reading,-searching,-and-outputting"><a name="reading,-searching,-and-outputting" href="#reading,-searching,-and-outputting"></a>Reading, searching, and outputting</h5><p>You can use the mode <code>"r"</code> to read a file and the function <code>string.find(file_variable_name, "string_to_look_for")</code> to check if the string exists in the file.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local file_read = sol.file.open(&quot;example.txt&quot;, &quot;r&quot;)
local line = file_read:read()
print(line)

        if string.find(line,&quot;0&quot;) then
                print(&quot;zero&quot;)
        end
file_read:close()
</code></pre>"><span class="hljs-keyword">local</span> file_read = sol.file.open(<span class="hljs-string">"example.txt"</span>, <span class="hljs-string">"r"</span>)
<span class="hljs-keyword">local</span> line = file_read:read()
<span class="hljs-built_in">print</span>(line)

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">string</span>.find(line,<span class="hljs-string">"0"</span>) <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"zero"</span>)
        <span class="hljs-keyword">end</span>
file_read:close()
</code></pre><h5 id="making-new-lines"><a name="making-new-lines" href="#making-new-lines"></a>Making New Lines</h5><p>You can use sequences when writing to a file.</p><table>
<thead>
<tr>
<th style="text-align:center">Sequence</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\a</td>
<td style="text-align:left">bell</td>
</tr>
<tr>
<td style="text-align:center">\b</td>
<td style="text-align:left">back space</td>
</tr>
<tr>
<td style="text-align:center">\f</td>
<td style="text-align:left">form feed</td>
</tr>
<tr>
<td style="text-align:center">\n</td>
<td style="text-align:left">newline</td>
</tr>
<tr>
<td style="text-align:center">\r</td>
<td style="text-align:left">carriage return</td>
</tr>
<tr>
<td style="text-align:center">\t</td>
<td style="text-align:left">horizontal tab</td>
</tr>
<tr>
<td style="text-align:center">\v</td>
<td style="text-align:left">vertical tab</td>
</tr>
<tr>
<td style="text-align:center">\</td>
<td style="text-align:left">backslash</td>
</tr>
<tr>
<td style="text-align:center">\â€</td>
<td style="text-align:left">double quote</td>
</tr>
<tr>
<td style="text-align:center">\â€™</td>
<td style="text-align:left">single quote</td>
</tr>
<tr>
<td style="text-align:center">[</td>
<td style="text-align:left">left square bracket</td>
</tr>
<tr>
<td style="text-align:center">]</td>
<td style="text-align:left">right square bracket</td>
</tr>
</tbody>
</table><p>You can use formats for the function <code>file_variable_name:read("Format")</code>. I use the format <code>"*a"</code> in the example below to read all the text in the file. </p><table>
<thead>
<tr>
<th style="text-align:center">Formats:</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">â€œ*nâ€</td>
<td style="text-align:left">reads a number; this is the only format that returns a number instead of a string.</td>
</tr>
<tr>
<td style="text-align:center">â€œ*aâ€</td>
<td style="text-align:left">reads the whole file, starting at the current position. On end of file, it returns the empty string.</td>
</tr>
<tr>
<td style="text-align:center">â€œ*lâ€</td>
<td style="text-align:left">reads the next line (skipping the end of line), returning nil on end of file. This is the default format.</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local file_make_file2 = sol.file.open(&quot;file2.txt&quot;, &quot;w&quot;)

file_make_file2:write(&quot;The apple\nThe orange.\nThe limon.\nThe pear.\n&quot;)
file_make_file2:close()

local file_read_all = sol.file.open(&quot;file2.txt&quot;, &quot;r&quot;)

local line2 = file_read_all:read(&quot;*a&quot;)
print(line2)
file_read_all:close()
</code></pre>"><span class="hljs-keyword">local</span> file_make_file2 = sol.file.open(<span class="hljs-string">"file2.txt"</span>, <span class="hljs-string">"w"</span>)

file_make_file2:write(<span class="hljs-string">"The apple\nThe orange.\nThe limon.\nThe pear.\n"</span>)
file_make_file2:close()

<span class="hljs-keyword">local</span> file_read_all = sol.file.open(<span class="hljs-string">"file2.txt"</span>, <span class="hljs-string">"r"</span>)

<span class="hljs-keyword">local</span> line2 = file_read_all:read(<span class="hljs-string">"*a"</span>)
<span class="hljs-built_in">print</span>(line2)
file_read_all:close()
</code></pre><h5 id="file-seek:-grab-a-variable"><a name="file-seek:-grab-a-variable" href="#file-seek:-grab-a-variable"></a>File Seek: Grab a Variable</h5><p>You can use <code>file:seek</code> to grab a variable or string, but this is not really the best way to do it. It is probably the easiest way without custom functions.</p><p><code>file_variable_name:seek (whence, offset)</code></p><table>
<thead>
<tr>
<th style="text-align:center">Whence</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">â€œsetâ€</td>
<td style="text-align:left">base is position 0 (beginning of the file);</td>
</tr>
<tr>
<td style="text-align:center">â€œcurâ€</td>
<td style="text-align:left">base is current position;</td>
</tr>
<tr>
<td style="text-align:center">â€œendâ€</td>
<td style="text-align:left">base is end of file;</td>
</tr>
</tbody>
</table><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local file_seek = sol.file.open(&quot;example.txt&quot;, &quot;r&quot;)

--x:50y:40 in example.txt. -2 would be two from the end. (40)
file_seek:seek(&quot;end&quot;,-2)

local value = file_seek:read()

--Convert string &quot;40&quot; to the number value 40
print(&quot;The variable is:&quot;..tonumber(value))

--Add 5 onto the value
print(&quot;The variable is:&quot;..value + 5)

file_seek:close()
</code></pre>"><span class="hljs-keyword">local</span> file_seek = sol.file.open(<span class="hljs-string">"example.txt"</span>, <span class="hljs-string">"r"</span>)

<span class="hljs-comment">--x:50y:40 in example.txt. -2 would be two from the end. (40)</span>
file_seek:seek(<span class="hljs-string">"end"</span>,-<span class="hljs-number">2</span>)

<span class="hljs-keyword">local</span> value = file_seek:read()

<span class="hljs-comment">--Convert string "40" to the number value 40</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The variable is:"</span>..<span class="hljs-built_in">tonumber</span>(value))

<span class="hljs-comment">--Add 5 onto the value</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"The variable is:"</span>..value + <span class="hljs-number">5</span>)

file_seek:close()
</code></pre><h5 id="read-&amp;-write-functions-script"><a name="read-&amp;-write-functions-script" href="#read-&amp;-write-functions-script"></a>Read &amp; Write Functions Script</h5><p>This script will be very useful for managing read/write,  but the easiest way to do this is to just use the engineâ€™s functions <code>game:get_value</code> and <code>game:set_value</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Read line function
local function readLines(sPath)
  local file = sol.file.open(sPath, &quot;r&quot;)
  if file then
        local tLines = {}
        local sLine = file:read()
        while sLine do
          table.insert(tLines, sLine)
          sLine = file:read()
        end
        file.close()
        return tLines
  end
  return nil
end

--Write line function
local function writeLines(sPath, tLines)
  local file = sol.file.open(sPath, &quot;w&quot;)
  if file then
        for _, sLine in ipairs(tLines) do
          file:write(sLine)
        end
        file:close()
  end
end

local file_make_test = sol.file.open(&quot;test.txt&quot;, &quot;w&quot;)
file_make_test:close()


local tLines = readLines(&quot;test.txt&quot;) -- Read/open this file
table.insert(tLines, &quot;This is the first line!\n&quot;) -- Line 1
tLines[2] = &quot;This is line 2!\n&quot; -- Line 2
tLines[3] = &quot;This is line 3!\n&quot; -- Line 3
tLines[4] = 50 -- Line 4

table.remove(tLines, 2) -- Remove line 2
writeLines(&quot;test.txt&quot;, tLines) --Write lines to this file
print(&quot;Lines in the file: &quot;, #tLines) --Print number of lines

--Open file. You must open the file to get the value
local tLines = readLines(&quot;test.txt&quot;) -- Read this file

--Print line 3. Line 4 will not be 50 because we removed line 2. That means line 3 will be 50.
print(&quot;Line 4 value is: &quot;..tLines[3])
</code></pre>"><span class="hljs-comment">--Read line function</span>
<span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">readLines</span><span class="hljs-params">(sPath)</span></span>
  <span class="hljs-keyword">local</span> file = sol.file.open(sPath, <span class="hljs-string">"r"</span>)
  <span class="hljs-keyword">if</span> file <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">local</span> tLines = {}
        <span class="hljs-keyword">local</span> sLine = file:read()
        <span class="hljs-keyword">while</span> sLine <span class="hljs-keyword">do</span>
          <span class="hljs-built_in">table</span>.insert(tLines, sLine)
          sLine = file:read()
        <span class="hljs-keyword">end</span>
        file.close()
        <span class="hljs-keyword">return</span> tLines
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">nil</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Write line function</span>
<span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">writeLines</span><span class="hljs-params">(sPath, tLines)</span></span>
  <span class="hljs-keyword">local</span> file = sol.file.open(sPath, <span class="hljs-string">"w"</span>)
  <span class="hljs-keyword">if</span> file <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">for</span> _, sLine <span class="hljs-keyword">in</span> <span class="hljs-built_in">ipairs</span>(tLines) <span class="hljs-keyword">do</span>
          file:write(sLine)
        <span class="hljs-keyword">end</span>
        file:close()
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> file_make_test = sol.file.open(<span class="hljs-string">"test.txt"</span>, <span class="hljs-string">"w"</span>)
file_make_test:close()


<span class="hljs-keyword">local</span> tLines = readLines(<span class="hljs-string">"test.txt"</span>) <span class="hljs-comment">-- Read/open this file</span>
<span class="hljs-built_in">table</span>.insert(tLines, <span class="hljs-string">"This is the first line!\n"</span>) <span class="hljs-comment">-- Line 1</span>
tLines[<span class="hljs-number">2</span>] = <span class="hljs-string">"This is line 2!\n"</span> <span class="hljs-comment">-- Line 2</span>
tLines[<span class="hljs-number">3</span>] = <span class="hljs-string">"This is line 3!\n"</span> <span class="hljs-comment">-- Line 3</span>
tLines[<span class="hljs-number">4</span>] = <span class="hljs-number">50</span> <span class="hljs-comment">-- Line 4</span>

<span class="hljs-built_in">table</span>.remove(tLines, <span class="hljs-number">2</span>) <span class="hljs-comment">-- Remove line 2</span>
writeLines(<span class="hljs-string">"test.txt"</span>, tLines) <span class="hljs-comment">--Write lines to this file</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Lines in the file: "</span>, #tLines) <span class="hljs-comment">--Print number of lines</span>

<span class="hljs-comment">--Open file. You must open the file to get the value</span>
<span class="hljs-keyword">local</span> tLines = readLines(<span class="hljs-string">"test.txt"</span>) <span class="hljs-comment">-- Read this file</span>

<span class="hljs-comment">--Print line 3. Line 4 will not be 50 because we removed line 2. That means line 3 will be 50.</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Line 4 value is: "</span>..tLines[<span class="hljs-number">3</span>])
</code></pre><p>You can ignore the functions, but it would be best to try to understand them. The only important part is after the functions.</p><p>Make the file <code>test.txt</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--This makes the file `test.txt`.
local file_make_test = sol.file.open(&quot;test.txt&quot;, &quot;w&quot;)
file_make_test:close()
</code></pre>"><span class="hljs-comment">--This makes the file `test.txt`.</span>
<span class="hljs-keyword">local</span> file_make_test = sol.file.open(<span class="hljs-string">"test.txt"</span>, <span class="hljs-string">"w"</span>)
file_make_test:close()
</code></pre><p>The comments in the script below tell you how to use it.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local file_make_test = sol.file.open(&quot;test.txt&quot;, &quot;w&quot;)
file_make_test:close()


local tLines = readLines(&quot;test.txt&quot;) -- Read/open this file
table.insert(tLines, &quot;This is the first line!\n&quot;) -- Line 1
tLines[2] = &quot;This is line 2!\n&quot; -- Line 2
tLines[3] = &quot;This is line 3!\n&quot; -- Line 3
tLines[4] = 50 -- Line 4

table.remove(tLines, 2) -- Remove line 2
writeLines(&quot;test.txt&quot;, tLines) --Write lines to this file
print(&quot;Lines in the file: &quot;, #tLines) --Print number of lines

--Open file. You must open the file to get the value
local tLines = readLines(&quot;test.txt&quot;) -- Read this file

--Print line 3. Line 4 will not be 50 because we removed line 2. That means line 3 will be 50.
print(&quot;Line 4 value is: &quot;..tLines[3])
</code></pre>"><span class="hljs-keyword">local</span> file_make_test = sol.file.open(<span class="hljs-string">"test.txt"</span>, <span class="hljs-string">"w"</span>)
file_make_test:close()


<span class="hljs-keyword">local</span> tLines = readLines(<span class="hljs-string">"test.txt"</span>) <span class="hljs-comment">-- Read/open this file</span>
<span class="hljs-built_in">table</span>.insert(tLines, <span class="hljs-string">"This is the first line!\n"</span>) <span class="hljs-comment">-- Line 1</span>
tLines[<span class="hljs-number">2</span>] = <span class="hljs-string">"This is line 2!\n"</span> <span class="hljs-comment">-- Line 2</span>
tLines[<span class="hljs-number">3</span>] = <span class="hljs-string">"This is line 3!\n"</span> <span class="hljs-comment">-- Line 3</span>
tLines[<span class="hljs-number">4</span>] = <span class="hljs-number">50</span> <span class="hljs-comment">-- Line 4</span>

<span class="hljs-built_in">table</span>.remove(tLines, <span class="hljs-number">2</span>) <span class="hljs-comment">-- Remove line 2</span>
writeLines(<span class="hljs-string">"test.txt"</span>, tLines) <span class="hljs-comment">--Write lines to this file</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Lines in the file: "</span>, #tLines) <span class="hljs-comment">--Print number of lines</span>

<span class="hljs-comment">--Open file. You must open the file to get the value</span>
<span class="hljs-keyword">local</span> tLines = readLines(<span class="hljs-string">"test.txt"</span>) <span class="hljs-comment">-- Read this file</span>

<span class="hljs-comment">--Print line 3. Line 4 will not be 50 because we removed line 2. That means line 3 will be 50.</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Line 4 value is: "</span>..tLines[<span class="hljs-number">3</span>])
</code></pre><h2 id="chapter-16:-make-a-chain-quest,-bow,-boomerang,-and-hookshot"><a name="chapter-16:-make-a-chain-quest,-bow,-boomerang,-and-hookshot" href="#chapter-16:-make-a-chain-quest,-bow,-boomerang,-and-hookshot"></a>Chapter 16: Make a Chain Quest, Bow, Boomerang, and Hookshot</h2><h3 id="chain-quest"><a name="chain-quest" href="#chain-quest"></a>Chain Quest</h3><p>The chain quest is putting together what you have learned, some new functions, and scripts are introduced. It is more like a demo than anything else.</p><h3 id="sola-house"><a name="sola-house" href="#sola-house"></a>Sola House</h3><p>Sola house is the starting point of the game. Sola has woken in a world with no memories of her past and sets out on a journey to figure out who she is.</p><h3 id="sola-house->-f1"><a name="sola-house->-f1" href="#sola-house-&gt;-f1"></a>Sola House &gt; F1</h3><p>On the first floor there are some blockades that must be passed to exit the house. Also, an optional quest with the female armor. You will be able to perform spin attacks and have extra speed when the spirit gem is obtained.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/1_chapter_16_sola_house_f1.png" alt="1_chapter_16_sola_house_f1.png"></p><h5 id="disabling-spin-attack"><a name="disabling-spin-attack" href="#disabling-spin-attack"></a>Disabling Spin Attack</h5><p>There are no function or method as of Solarus 1.5.3 that disables the spin attack, but there is a quick hack for it that I learned from MetalZelda.</p><p>This is accomplished by registering an event using the <code>multi_events.lua</code> script. What the script does is add a callback kinda like with timers.</p><p><strong>Register event way:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- local multi_events = require(&quot;scripts/multi_events&quot;)
-- Register two callbacks for the game:on_started() event:
game:register_event(&quot;on_started&quot;, function()
   -- Some code.
end)
</code></pre>"><span class="hljs-comment">-- local multi_events = require("scripts/multi_events")</span>
<span class="hljs-comment">-- Register two callbacks for the game:on_started() event:</span>
game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
   <span class="hljs-comment">-- Some code.</span>
<span class="hljs-keyword">end</span>)
</code></pre><p><strong>Normal way:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function game:on_started()
   -- Some code.
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_started</span><span class="hljs-params">()</span></span>
   <span class="hljs-comment">-- Some code.</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The following code disables the spin attack until the save variable â€œskill_spin_attackâ€ is set. It should be put in the game manager.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function game_manager:manage(game)

game:register_event(&quot;on_started&quot;, function()

  local hero = game:get_hero()

  hero:register_event(&quot;on_state_changed&quot;, function(hero, state)
    if state == &quot;sword loading&quot; then
      if not game:get_value(&quot;skill_spin_attack&quot;) then
        game:simulate_command_released(&quot;attack&quot;)
      end
    end
  end) -- end of hero:register
 end) -- end of game:register
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game_manager:manage</span><span class="hljs-params">(game)</span></span>

game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> hero = game:get_hero()

  hero:register_event(<span class="hljs-string">"on_state_changed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(hero, state)</span></span>
    <span class="hljs-keyword">if</span> state == <span class="hljs-string">"sword loading"</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"skill_spin_attack"</span>) <span class="hljs-keyword">then</span>
        game:simulate_command_released(<span class="hljs-string">"attack"</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of hero:register</span>
 <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of game:register</span>
<span class="hljs-keyword">end</span>
</code></pre><p>First off, the register event with the function on_started:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:register_event(&quot;on_started&quot;, function()
end) -- end of game:register
</code></pre>">game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
<span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of game:register</span>
</code></pre><p>Secondly, we get the hero and register it with the function on_state_changed:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:register_event(&quot;on_started&quot;, function()

  local hero = game:get_hero()

  hero:register_event(&quot;on_state_changed&quot;, function(hero, state)

  end) -- end of hero:register
end) -- end of game:register
</code></pre>">game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> hero = game:get_hero()

  hero:register_event(<span class="hljs-string">"on_state_changed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(hero, state)</span></span>

  <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of hero:register</span>
<span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of game:register</span>
</code></pre><p>Thirdly, we want to apply it to the state â€œsword_loadingâ€ and simulate a release on â€œattackâ€.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>game:register_event(&quot;on_started&quot;, function()

  local hero = game:get_hero()

  hero:register_event(&quot;on_state_changed&quot;, function(hero, state)
    if state == &quot;sword loading&quot; then
      if not game:get_value(&quot;skill_spin_attack&quot;) then
        game:simulate_command_released(&quot;attack&quot;)
      end
    end
  end) -- end of hero:register
 end) -- end of game:register
</code></pre>">game:register_event(<span class="hljs-string">"on_started"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> hero = game:get_hero()

  hero:register_event(<span class="hljs-string">"on_state_changed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(hero, state)</span></span>
    <span class="hljs-keyword">if</span> state == <span class="hljs-string">"sword loading"</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"skill_spin_attack"</span>) <span class="hljs-keyword">then</span>
        game:simulate_command_released(<span class="hljs-string">"attack"</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of hero:register</span>
 <span class="hljs-keyword">end</span>) <span class="hljs-comment">-- end of game:register</span>
</code></pre><p>To enable the spin attack as I said above, just set the save variable. I normally do it in items. I put it in the spirit gem script in the chain quest.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_obtained()
  game:set_value(&quot;skill_spin_attack&quot;,true)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtained</span><span class="hljs-params">()</span></span>
  game:set_value(<span class="hljs-string">"skill_spin_attack"</span>,<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The optional quest is just a bunch of save variable, elseif, and dialogs. I explained this in a previous chapter. Chapter 13 NPC Entity section.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Event called at initialization time, as soon as this map becomes is loaded.
function map:on_started()

--Spirit quest
function woman_armor:on_interaction()

  if game:get_value(&quot;sola_house_gem_quest_finished&quot;)then
    game:start_dialog(&quot;sola_gem.done.1&quot;)
  elseif game:get_value(&quot;sola_house_yes&quot;) and not game:get_value(&quot;sola_house_gem&quot;) then
    game:start_dialog(&quot;sola_gem.find.1&quot;)
  elseif game:get_value(&quot;sola_house_yes&quot;) and game:get_value(&quot;sola_house_gem&quot;) then
    game:start_dialog(&quot;sola_gem.yes.1&quot;, function()
      hero:start_treasure(&quot;spirit_gem&quot;, 1, &quot;sola_house_gem_quest_finished&quot;,function()
        game:start_dialog(&quot;sola_gem.wonderful_day.1&quot;)
      end)
    end)
  else
    game:start_dialog(&quot;sola_gem.hello.1&quot;, function(answer)
      if answer == 4 then --No
        game:start_dialog(&quot;sola_gem.no.1&quot;) 
      elseif answer == 3  then
        game:start_dialog(&quot;sola_gem.find.1&quot;)  
        game:set_value(&quot;sola_house_yes&quot;,true)
      end
    end)
  end
end
</code></pre>"><span class="hljs-comment">-- Event called at initialization time, as soon as this map becomes is loaded.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>

<span class="hljs-comment">--Spirit quest</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">woman_armor:on_interaction</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_gem_quest_finished"</span>)<span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"sola_gem.done.1"</span>)
  <span class="hljs-keyword">elseif</span> game:get_value(<span class="hljs-string">"sola_house_yes"</span>) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"sola_house_gem"</span>) <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"sola_gem.find.1"</span>)
  <span class="hljs-keyword">elseif</span> game:get_value(<span class="hljs-string">"sola_house_yes"</span>) <span class="hljs-keyword">and</span> game:get_value(<span class="hljs-string">"sola_house_gem"</span>) <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"sola_gem.yes.1"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
      hero:start_treasure(<span class="hljs-string">"spirit_gem"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"sola_house_gem_quest_finished"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
        game:start_dialog(<span class="hljs-string">"sola_gem.wonderful_day.1"</span>)
      <span class="hljs-keyword">end</span>)
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">else</span>
    game:start_dialog(<span class="hljs-string">"sola_gem.hello.1"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(answer)</span></span>
      <span class="hljs-keyword">if</span> answer == <span class="hljs-number">4</span> <span class="hljs-keyword">then</span> <span class="hljs-comment">--No</span>
        game:start_dialog(<span class="hljs-string">"sola_gem.no.1"</span>) 
      <span class="hljs-keyword">elseif</span> answer == <span class="hljs-number">3</span>  <span class="hljs-keyword">then</span>
        game:start_dialog(<span class="hljs-string">"sola_gem.find.1"</span>)  
        game:set_value(<span class="hljs-string">"sola_house_yes"</span>,<span class="hljs-keyword">true</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The spirit gem was hidden in a pot by a demon. I use a npc entity above the pot tile and use on_interaction, then start_treasure. I set the save variable, so the hero can only get the treasure once. Very basic.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Get spirit gem
function pot:on_interaction()
  if not game:get_value(&quot;sola_house_gem&quot;) then
    hero:start_treasure(&quot;spirit_gem&quot;, 1, &quot;sola_house_gem&quot;)
  end
end
</code></pre>">
<span class="hljs-comment">--Get spirit gem</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pot:on_interaction</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"sola_house_gem"</span>) <span class="hljs-keyword">then</span>
    hero:start_treasure(<span class="hljs-string">"spirit_gem"</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"sola_house_gem"</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>I use a save variable again here, but with string instead of a true/false boolean.<br>block_pot is the NPC and flower wall is the dynamic tile. I set the skeleton disabled because I do not want the enemy to come back or respawn.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--The pot vanishes if the skeleton save string is &quot;dead&quot;.
sol.timer.start(1000, function()
  if game:get_value(&quot;sola_house_skeleton&quot;) == &quot;dead&quot; then
     flower_wall:set_enabled(false)
     block_pot:set_enabled(false)
     skeleton:set_enabled(false)
  end
  return true  -- To call the timer again (with the same delay).
end)
</code></pre>">
<span class="hljs-comment">--The pot vanishes if the skeleton save string is "dead".</span>
sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_skeleton"</span>) == <span class="hljs-string">"dead"</span> <span class="hljs-keyword">then</span>
     flower_wall:set_enabled(<span class="hljs-keyword">false</span>)
     block_pot:set_enabled(<span class="hljs-keyword">false</span>)
     skeleton:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>  <span class="hljs-comment">-- To call the timer again (with the same delay).</span>
<span class="hljs-keyword">end</span>)
</code></pre><p>The enemy called skeleton will be disabled until the switch on the second floor is activated.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Skeleton disabled until save variable is set
  if game:get_value(&quot;sola_house_switch_off&quot;) == nil then
    skeleton:set_enabled(false)
  end
</code></pre>">
<span class="hljs-comment">--Skeleton disabled until save variable is set</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_switch_off"</span>) == <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    skeleton:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>The skeleton enemy is enabled and now can attack the hero. The wall entity and the table blockade is also disabled.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Skeleton is enabled. Table and wall entity are disabled. 
  if game:get_value(&quot;sola_house_switch_off&quot;) == true then
    skeleton:set_enabled(true)
    table_wall:set_enabled(false)
    wall:set_enabled(false)
  end
</code></pre>">
<span class="hljs-comment">--Skeleton is enabled. Table and wall entity are disabled. </span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_switch_off"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    skeleton:set_enabled(<span class="hljs-keyword">true</span>)
    table_wall:set_enabled(<span class="hljs-keyword">false</span>)
    wall:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>For when the enemy dies the script sets the â€œsola_house_switch_offâ€ to false from the skeleton enemy script. This is to make sure that nothing respawns when the player leaves the map and returns.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Disables everything
  if game:get_value(&quot;sola_house_switch_off&quot;) == false then
    skeleton:set_enabled(false)
    table_wall:set_enabled(false)
    wall:set_enabled(false)
    flower_wall:set_enabled(false)
  end
end -- end of map on started
</code></pre>">
<span class="hljs-comment">--Disables everything</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_switch_off"</span>) == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    skeleton:set_enabled(<span class="hljs-keyword">false</span>)
    table_wall:set_enabled(<span class="hljs-keyword">false</span>)
    wall:set_enabled(<span class="hljs-keyword">false</span>)
    flower_wall:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of map on started</span>
</code></pre><h5 id="skeleton.lua"><a name="skeleton.lua" href="#skeleton.lua"></a>Skeleton.lua</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function enemy:on_dead()
  game:set_value(&quot;sola_house_skeleton&quot;, &quot;dead&quot;)
  game:set_value(&quot;sola_house_switch_off&quot;, false)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_dead</span><span class="hljs-params">()</span></span>
  game:set_value(<span class="hljs-string">"sola_house_skeleton"</span>, <span class="hljs-string">"dead"</span>)
  game:set_value(<span class="hljs-string">"sola_house_switch_off"</span>, <span class="hljs-keyword">false</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>A timer checking if the enemy is dead. It uses the method <code>enemy:get_life()</code>, but to be honest it would be better to use the functions <code>entity:on_removed()</code> or <code>enemy:on_dead()</code>. The timer in this case can effect the enemyâ€™s explosion death animation.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Create on_activated timer
sol.timer.start(2000, function()
  if map.on_activated ~= nil then
    map:on_activated()
 return true 
  end
end)

--Timer that checks every 2 seconds
function map:on_activated()  

  --when the skeleton's life reaches zero, the skeleton save string is set.
  if skeleton:get_life() == 0 then
     game:set_value(&quot;sola_house_skeleton&quot;,&quot;dead&quot;)
  end

   --The pot vanishes if the skeleton save string is &quot;dead&quot;.
  if game:get_value(&quot;sola_house_skeleton&quot;) == &quot;dead&quot; then
     flower_wall:set_enabled(false)
     block_pot:set_enabled(false)
  end

end -- end of on_activated
</code></pre>">
<span class="hljs-comment">--Create on_activated timer</span>
sol.timer.start(<span class="hljs-number">2000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> map.on_activated ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    map:on_activated()
 <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-comment">--Timer that checks every 2 seconds</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_activated</span><span class="hljs-params">()</span></span>  

  <span class="hljs-comment">--when the skeleton's life reaches zero, the skeleton save string is set.</span>
  <span class="hljs-keyword">if</span> skeleton:get_life() == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
     game:set_value(<span class="hljs-string">"sola_house_skeleton"</span>,<span class="hljs-string">"dead"</span>)
  <span class="hljs-keyword">end</span>

   <span class="hljs-comment">--The pot vanishes if the skeleton save string is "dead".</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_skeleton"</span>) == <span class="hljs-string">"dead"</span> <span class="hljs-keyword">then</span>
     flower_wall:set_enabled(<span class="hljs-keyword">false</span>)
     block_pot:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span> <span class="hljs-comment">-- end of on_activated</span>
</code></pre><h3 id="sola-house->-f2"><a name="sola-house->-f2" href="#sola-house-&gt;-f2"></a>Sola House &gt; F2</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/2_chapter_16_sola_house_f2.png" alt="1_chapter_16_sola_house_f2.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/2-1_chapter_16_sola_house_f2.png" alt="2-1_chapter_16_sola_house_f2.png"></p><p>Sets npc dialog â€œwall_switch_2â€ disabled and makes the wall switch active on return to the map because you do not want the player to activate it again.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Event called at initialization time, as soon as this map becomes is loaded.
function map:on_started()
--Set npc dialog &quot;wall_switch_2&quot; disabled and makes the switch active on return
  if game:get_value(&quot;sola_house_switch_off&quot;,true) then
    wall_switch_2:set_enabled(false)
    wall_switch:set_activated(true)
  end
</code></pre>"><span class="hljs-comment">-- Event called at initialization time, as soon as this map becomes is loaded.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
<span class="hljs-comment">--Set npc dialog "wall_switch_2" disabled and makes the switch active on return</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"sola_house_switch_off"</span>,<span class="hljs-keyword">true</span>) <span class="hljs-keyword">then</span>
    wall_switch_2:set_enabled(<span class="hljs-keyword">false</span>)
    wall_switch:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>Sets npc dialog â€œwall_switch_2â€ disabled and removed the blockages on the first floor by setting the save variable.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--disables npc and sets a save variable
  function wall_switch:on_activated()
    game:set_value(&quot;sola_house_switch_off&quot;,true)
    wall_switch_2:set_enabled(false)
  end
end
</code></pre>">
<span class="hljs-comment">--disables npc and sets a save variable</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wall_switch:on_activated</span><span class="hljs-params">()</span></span>
    game:set_value(<span class="hljs-string">"sola_house_switch_off"</span>,<span class="hljs-keyword">true</span>)
    wall_switch_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h3 id="soulia-forest->-part-1"><a name="soulia-forest->-part-1" href="#soulia-forest-&gt;-part-1"></a>Soulia Forest &gt; Part 1</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/3_chapter_16_soulia_forest_part_1.png" alt="3_chapter_16_soulia_forest_part_1.png"></p><h5 id="hidden-switch"><a name="hidden-switch" href="#hidden-switch"></a>Hidden Switch</h5><p>The switch is hidden under the trees with a flower on top to give a hint to its location. A sound is played when the switch is activated and the stump vanishes. Also, the check makes sure the switch cannot be activated again and to insure the stump does not respawn.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/3-1_chapter_16_soulia_forest_hidden_switch.png" alt="3-1_chapter_16_soulia_forest_hidden_switch.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Flower stump
  function flower_switch:on_activated()
    flower_stump:set_enabled(false)
    sol.audio.play_sound(&quot;secret&quot;)
    game:set_value(&quot;flower_stump&quot;,true)
  end

--Flower stump check
  if game:get_value(&quot;flower_stump&quot;) == true then
    flower_stump:set_enabled(false)
    flower_switch:set_activated(true)
  end
</code></pre>"><span class="hljs-comment">--Flower stump</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flower_switch:on_activated</span><span class="hljs-params">()</span></span>
    flower_stump:set_enabled(<span class="hljs-keyword">false</span>)
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
    game:set_value(<span class="hljs-string">"flower_stump"</span>,<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Flower stump check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"flower_stump"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    flower_stump:set_enabled(<span class="hljs-keyword">false</span>)
    flower_switch:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>
</code></pre><h5 id="bomb-stump"><a name="bomb-stump" href="#bomb-stump"></a>Bomb Stump</h5><p>The bomb is assigned to the <code>x</code> command slot by default in this script <code>game:set_item_assigned(1, self)</code>. Although, one could just assign it to a key press function <code>game:on_key_pressed(key, modifiers)</code>. The following script is simple and it creates a bomb at the playerâ€™s location for the heroâ€™s facing direction.</p><p><strong>items &gt; bomb.lua</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/3-2_chapter_16_soulia_forest_bomb_chest.png" alt="3-2_chapter_16_soulia_forest_bomb_chest.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function item:on_created()

  self:set_savegame_variable(&quot;bomb&quot;)
  self:set_assignable(true)
end

function item:on_obtaining()
  -- Automatically assign the item to a command slot
  -- because it is the only existing item for now.
  -- And we have no HUD.
  game:set_item_assigned(1, self)
end

-- Called when the player uses the bombs of his inventory by pressing
-- the corresponding item key.
function item:on_using()

  local hero = self:get_map():get_entity(&quot;hero&quot;)
  local x, y, layer = hero:get_position()
  local direction = hero:get_direction()
  if direction == 0 then
    x = x + 16
  elseif direction == 1 then
    y = y - 16
  elseif direction == 2 then
    x = x - 16
  elseif direction == 3 then
    y = y + 16
  end

  self:get_map():create_bomb{
    name = &quot;bomb&quot;,
    x = x,
    y = y,
    layer = layer
  }
  self:set_finished()
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_created</span><span class="hljs-params">()</span></span>

  self:set_savegame_variable(<span class="hljs-string">"bomb"</span>)
  self:set_assignable(<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_obtaining</span><span class="hljs-params">()</span></span>
  <span class="hljs-comment">-- Automatically assign the item to a command slot</span>
  <span class="hljs-comment">-- because it is the only existing item for now.</span>
  <span class="hljs-comment">-- And we have no HUD.</span>
  game:set_item_assigned(<span class="hljs-number">1</span>, self)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- Called when the player uses the bombs of his inventory by pressing</span>
<span class="hljs-comment">-- the corresponding item key.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">item:on_using</span><span class="hljs-params">()</span></span>

  <span class="hljs-keyword">local</span> hero = self:get_map():get_entity(<span class="hljs-string">"hero"</span>)
  <span class="hljs-keyword">local</span> x, y, layer = hero:get_position()
  <span class="hljs-keyword">local</span> direction = hero:get_direction()
  <span class="hljs-keyword">if</span> direction == <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    x = x + <span class="hljs-number">16</span>
  <span class="hljs-keyword">elseif</span> direction == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
    y = y - <span class="hljs-number">16</span>
  <span class="hljs-keyword">elseif</span> direction == <span class="hljs-number">2</span> <span class="hljs-keyword">then</span>
    x = x - <span class="hljs-number">16</span>
  <span class="hljs-keyword">elseif</span> direction == <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
    y = y + <span class="hljs-number">16</span>
  <span class="hljs-keyword">end</span>

  self:get_map():create_bomb{
    name = <span class="hljs-string">"bomb"</span>,
    x = x,
    y = y,
    layer = layer
  }
  self:set_finished()
<span class="hljs-keyword">end</span>
</code></pre><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/3-3_chapter_16_soulia_forest_bomb_stump_dynamic.png" alt="3-3_chapter_16_soulia_forest_bomb_stump_dynamic.png)"></p><p>The following script removes any entity that a bomb is placed on, but the entity has to be specified in the script. In this case it checks if a bomb is overlapping an entity â€œbomb_stumpâ€. It uses the function <code>map:get_entities_by_type()</code> to check a list of strings with bomb name prefixes. Bombs are placed with a prefix if there is more than one on a map.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Bomb stump
  sol.timer.start(1000, function()
  for bomb in map:get_entities_by_type(&quot;bomb&quot;) do
    if bomb:overlaps(bomb_stump) then
      function bomb:on_removed()
        bomb_stump:set_enabled(false)
        sol.audio.play_sound(&quot;secret&quot;)
        game:set_value(&quot;bomb_stump&quot;,true)
      end
    end
  end
  return true 
  end)

--Bomb stump check
  if game:get_value(&quot;bomb_stump&quot;) == true then
    bomb_stump:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Bomb stump</span>
  sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">for</span> bomb <span class="hljs-keyword">in</span> map:get_entities_by_type(<span class="hljs-string">"bomb"</span>) <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> bomb:overlaps(bomb_stump) <span class="hljs-keyword">then</span>
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bomb:on_removed</span><span class="hljs-params">()</span></span>
        bomb_stump:set_enabled(<span class="hljs-keyword">false</span>)
        sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
        game:set_value(<span class="hljs-string">"bomb_stump"</span>,<span class="hljs-keyword">true</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
  <span class="hljs-keyword">end</span>)

<span class="hljs-comment">--Bomb stump check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"bomb_stump"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    bomb_stump:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>Furthermore, it is good to check if the<code>bomb_stump</code>or any other entity still exists when using the<code>entity:on_removed()</code>function or you could get an annoying error message. I will explain that in more detail later.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>      function bomb:on_removed()
        if bomb_stump ~= nil and bomb_stump:exists() then
          bomb_stump:set_enabled(false)
        end
        sol.audio.play_sound(&quot;secret&quot;)
        game:set_value(&quot;bomb_stump&quot;,true)
     end
</code></pre>">      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bomb:on_removed</span><span class="hljs-params">()</span></span>
        <span class="hljs-keyword">if</span> bomb_stump ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">and</span> bomb_stump:exists() <span class="hljs-keyword">then</span>
          bomb_stump:set_enabled(<span class="hljs-keyword">false</span>)
        <span class="hljs-keyword">end</span>
        sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
        game:set_value(<span class="hljs-string">"bomb_stump"</span>,<span class="hljs-keyword">true</span>)
     <span class="hljs-keyword">end</span>
</code></pre><h5 id="trick-chest"><a name="trick-chest" href="#trick-chest"></a>Trick Chest</h5><p>I previously presented the trick chest script in a previous chapter, but it is a pain to get the coordinates the previous way. This time I use the<code>hero:start_hurt([source_entity, damage)</code>method. All one has to do is get the entity from the map with its name<code>map:get_entity("trick_chest")</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/3-4_chapter_16_soulia_forest_trick_chest.png" alt="3-4_chapter_16_soulia_forest_trick_chest.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local map = entity:get_map()
local game = entity:get_game()
local hero = map:get_hero()

function entity:on_created()
 self:set_traversable_by(false)
 entity:get_sprite():set_animation(&quot;closed&quot;)
end

local trick_chest = map:get_entity(&quot;trick_chest&quot;)

function entity:on_interaction()
 hero:start_hurt(trick_chest, 6)
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> game = entity:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
 self:set_traversable_by(<span class="hljs-keyword">false</span>)
 entity:get_sprite():set_animation(<span class="hljs-string">"closed"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> trick_chest = map:get_entity(<span class="hljs-string">"trick_chest"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_interaction</span><span class="hljs-params">()</span></span>
 hero:start_hurt(trick_chest, <span class="hljs-number">6</span>)
<span class="hljs-keyword">end</span>
</code></pre><h3 id="soulia-forest->-part-2"><a name="soulia-forest->-part-2" href="#soulia-forest-&gt;-part-2"></a>Soulia Forest &gt; Part 2</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/4_chapter_16_soulia_forest_part_2.png" alt="4_chapter_16_soulia_forest_part_2.png"></p><h5 id="key-stump"><a name="key-stump" href="#key-stump"></a>Key Stump</h5><p>Since, making a door entity for a dynamic tile would be a total pain. I simply used a NPC to check if the chest that contain the key is open. Remember to set a save variable for the chest.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/4-1_chapter_16_soulia_forest_key_chest.png" alt="/4-1_chapter_16_soulia_forest_key_chest.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/4-2_chapter_16_soulia_forest_key_stump_npc.png" alt="4-2_chapter_16_soulia_forest_key_stump_npc.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Key stump
  function key:on_interaction()
    if key_chest:is_open() then
      key_stump:set_enabled(false)
      key_stump_hole:set_enabled(false)
      game:set_value(&quot;key_stump&quot;,true)
      key:set_enabled(false)
      sol.audio.play_sound(&quot;open_lock&quot;)
    end
  end

--Key stump check
  if game:get_value(&quot;key_stump&quot;) == true then
    key_stump:set_enabled(false)
    key_stump_hole:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Key stump</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">key:on_interaction</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> key_chest:is_open() <span class="hljs-keyword">then</span>
      key_stump:set_enabled(<span class="hljs-keyword">false</span>)
      key_stump_hole:set_enabled(<span class="hljs-keyword">false</span>)
      game:set_value(<span class="hljs-string">"key_stump"</span>,<span class="hljs-keyword">true</span>)
      key:set_enabled(<span class="hljs-keyword">false</span>)
      sol.audio.play_sound(<span class="hljs-string">"open_lock"</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Key stump check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"key_stump"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    key_stump:set_enabled(<span class="hljs-keyword">false</span>)
    key_stump_hole:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><h5 id="block-switch"><a name="block-switch" href="#block-switch"></a>Block Switch</h5><p>This is simply moving a block on a switch. Nothing special. Remember to check the blockâ€™s coordinates when returning to the map.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/4-3_chapter_16_soulia_forest_switch_block.png" alt="4-3_chapter_16_soulia_forest_switch_block.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--block switch
  function hole_block_switch:on_activated()
    game:set_value(&quot;hole_block_switch&quot;,true)
    hole:set_enabled(false)
    sol.audio.play_sound(&quot;secret&quot;)
  end

--block switch check
  if game:get_value(&quot;hole_block_switch&quot;) == true then
    switch_block:set_position(856,668)
    hole_block_switch:set_activated(true)
    hole:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--block switch</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hole_block_switch:on_activated</span><span class="hljs-params">()</span></span>
    game:set_value(<span class="hljs-string">"hole_block_switch"</span>,<span class="hljs-keyword">true</span>)
    hole:set_enabled(<span class="hljs-keyword">false</span>)
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--block switch check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"hole_block_switch"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    switch_block:set_position(<span class="hljs-number">856</span>,<span class="hljs-number">668</span>)
    hole_block_switch:set_activated(<span class="hljs-keyword">true</span>)
    hole:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><h3 id="chain-village"><a name="chain-village" href="#chain-village"></a>Chain Village</h3><p>Chain village is where almost all of its people have fallen to death due to a strange power coming over the mountains. The heroine must get a heart shield to show the mage that she is worthy of entering Zark house. The reason is that there is a slime enemy in there. Afterwards, thee heroine finds the water shield after defeating the slime and is able to cross the lake to the Water house and get the spirit shield to enter Elfa House. This is where the mini dungeon resides.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/5_chapter_16_chain_village.png" alt="5_chapter_16_chain_village.png"></p><p><strong>chain_village.lua</strong></p><p>This is a check for leaving the map after the heroine shows that she is a true hero and removes the magic barrier from Zark house. This is so the door will not close up again.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Shows that she is a true hero check
  if game:get_value(&quot;shows_heroism&quot;) then
    heart_door:set_enabled(true)
  else
    heart_door:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Shows that she is a true hero check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"shows_heroism"</span>) <span class="hljs-keyword">then</span>
    heart_door:set_enabled(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    heart_door:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>This is a check for when the heroine gets the spirit shield and is able to enter Elfa house. This is so the door will not close up again.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Obtains the spriti shield check
  if game:get_value(&quot;spirit_shield&quot;) then
    elfa_house_door:set_enabled(true)
  else
    elfa_house_door:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Obtains the spriti shield check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"spirit_shield"</span>) <span class="hljs-keyword">then</span>
    elfa_house_door:set_enabled(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">else</span>
    elfa_house_door:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>This is for when the hero tries to enter a blocked door. In this case when the hero enters the door she is damaged and sent back by a evil spirit. An animation with stars over head and sound is played.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>-- Call a function every half second
-- Damaged when overlapping elfa house doorway
sol.timer.start(500, function()
  if hero:overlaps(elfa_house_door) and elfa_house_door:is_enabled() == false then
    sol.audio.play_sound(&quot;danger&quot;)
    hero:start_hurt(elfa_house_door, 1)
    game:start_dialog(&quot;evil_spirit&quot;)
    hero:walk(&quot;66&quot;,false,true)
    hero:set_animation(&quot;bubble_stars&quot;)
  end
  return true 
end)
</code></pre>"><span class="hljs-comment">-- Call a function every half second</span>
<span class="hljs-comment">-- Damaged when overlapping elfa house doorway</span>
sol.timer.start(<span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> hero:overlaps(elfa_house_door) <span class="hljs-keyword">and</span> elfa_house_door:is_enabled() == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"danger"</span>)
    hero:start_hurt(elfa_house_door, <span class="hljs-number">1</span>)
    game:start_dialog(<span class="hljs-string">"evil_spirit"</span>)
    hero:walk(<span class="hljs-string">"66"</span>,<span class="hljs-keyword">false</span>,<span class="hljs-keyword">true</span>)
    hero:set_animation(<span class="hljs-string">"bubble_stars"</span>)
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
<span class="hljs-keyword">end</span>)
</code></pre><p>The hero interacts with the mage NPC and she checks if the heroine has a heart shield. I use the <code>game:has_item()</code>method to check this without a need for a save variable.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> local has_heart_shield = game:has_item(&quot;heart_shield&quot;)

--Checks if the her has a heart_shield and diables the barrier is she does.
  function sprite:on_interaction()
    if has_heart_shield and not game:get_value(&quot;magic_gone&quot;) == true then
     game:start_dialog(&quot;heart_shown&quot;, function()
        game:set_value(&quot;shows_heroism&quot;,true)
        heart_door:set_enabled(true)
        game:set_value(&quot;magic_gone&quot;,true)
        sol.audio.play_sound(&quot;teleporter&quot;)
     end)
    elseif not has_heart_shield then
      game:start_dialog(&quot;show_heart&quot;)
    end

--A check for when the barrier is removed. A new dialog.
    if game:get_value(&quot;magic_gone&quot;) == true then
      game:start_dialog(&quot;heart_luck&quot;)
    end
  end
</code></pre>"> <span class="hljs-keyword">local</span> has_heart_shield = game:has_item(<span class="hljs-string">"heart_shield"</span>)

<span class="hljs-comment">--Checks if the her has a heart_shield and diables the barrier is she does.</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sprite:on_interaction</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> has_heart_shield <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"magic_gone"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
     game:start_dialog(<span class="hljs-string">"heart_shown"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
        game:set_value(<span class="hljs-string">"shows_heroism"</span>,<span class="hljs-keyword">true</span>)
        heart_door:set_enabled(<span class="hljs-keyword">true</span>)
        game:set_value(<span class="hljs-string">"magic_gone"</span>,<span class="hljs-keyword">true</span>)
        sol.audio.play_sound(<span class="hljs-string">"teleporter"</span>)
     <span class="hljs-keyword">end</span>)
    <span class="hljs-keyword">elseif</span> <span class="hljs-keyword">not</span> has_heart_shield <span class="hljs-keyword">then</span>
      game:start_dialog(<span class="hljs-string">"show_heart"</span>)
    <span class="hljs-keyword">end</span>

<span class="hljs-comment">--A check for when the barrier is removed. A new dialog.</span>
    <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"magic_gone"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
      game:start_dialog(<span class="hljs-string">"heart_luck"</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
</code></pre><p>The heroine is pushed back if she tries to enter before the barrier is vanquished.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
-- Call a function every second.
--If the heroine tries to enter zark house if barrier is active, then she is flung back with a suprise bubble.
sol.timer.start(100, function()
    if hero:overlaps(magic_info) and not game:get_value(&quot;magic_gone&quot;) == true then
      hero:walk(&quot;66&quot;,false,true)
      hero:set_animation(&quot;bubble_surprise&quot;)
      game:start_dialog(&quot;magic_barrier&quot;)
    else
      magic_info:set_enabled(false)
    end
  return true 
end)
</code></pre>">
<span class="hljs-comment">-- Call a function every second.</span>
<span class="hljs-comment">--If the heroine tries to enter zark house if barrier is active, then she is flung back with a suprise bubble.</span>
sol.timer.start(<span class="hljs-number">100</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> hero:overlaps(magic_info) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"magic_gone"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
      hero:walk(<span class="hljs-string">"66"</span>,<span class="hljs-keyword">false</span>,<span class="hljs-keyword">true</span>)
      hero:set_animation(<span class="hljs-string">"bubble_surprise"</span>)
      game:start_dialog(<span class="hljs-string">"magic_barrier"</span>)
    <span class="hljs-keyword">else</span>
      magic_info:set_enabled(<span class="hljs-keyword">false</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span> 
<span class="hljs-keyword">end</span>)
</code></pre><h3 id="chain-village->-shop"><a name="chain-village->-shop" href="#chain-village-&gt;-shop"></a>Chain Village &gt; Shop</h3><p>The shop is the only place where the heroine can obtain the heart shield. It costs 20 gems.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/6_chapter_16_chain_village_shop.png" alt="6_chapter_16_chain_village_shop.png"></p><h3 id="chain-village->-zark-house"><a name="chain-village->-zark-house" href="#chain-village-&gt;-zark-house"></a>Chain Village &gt; Zark House</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/7_chapter_16_chain_village_zark_house.png" alt="7_chapter_16_chain_village_zark_house.png"></p><p>Okay, I menttioned above in soulia forest that I would explain more about the function<code>entity:on_removed()</code>. One must check if it is nil or exists if an entity is placed in the function<code>entity:on_removed()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--When slime is removed
--Bookcase vanishes and chest is revealed behind it
  function slime:on_removed()
    if bookcase ~= nil and bookcase:exists() then
      bookcase:set_enabled(false)
    end

    if chest ~= nil and chest:exists() then
      if not chest:is_open() then
        sol.audio.play_sound(&quot;secret&quot;)
      end
    end

    game:set_value(&quot;zark_house_enemy_defeated&quot;,true)
  end
</code></pre>"><span class="hljs-comment">--When slime is removed</span>
<span class="hljs-comment">--Bookcase vanishes and chest is revealed behind it</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">slime:on_removed</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">if</span> bookcase ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">and</span> bookcase:exists() <span class="hljs-keyword">then</span>
      bookcase:set_enabled(<span class="hljs-keyword">false</span>)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> chest ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">and</span> chest:exists() <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chest:is_open() <span class="hljs-keyword">then</span>
        sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

    game:set_value(<span class="hljs-string">"zark_house_enemy_defeated"</span>,<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>Otherwise, you will get an errors like when leaving the map. For instance:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>Error: In on_removed: [string &quot;maps/chain_village/zark_house.lua&quot;]:21: attempt to index global 'chest' (a nil value)

Error: In on_removed: [string &quot;maps/chain_village/zark_house.lua&quot;]:17: attempt to index global 'bookcase' (a nil value)
</code></pre>">Error: In on_removed: [<span class="hljs-built_in">string</span> <span class="hljs-string">"maps/chain_village/zark_house.lua"</span>]:<span class="hljs-number">21</span>: attempt to index global <span class="hljs-string">'chest'</span> (a <span class="hljs-keyword">nil</span> value)

Error: In on_removed: [<span class="hljs-built_in">string</span> <span class="hljs-string">"maps/chain_village/zark_house.lua"</span>]:<span class="hljs-number">17</span>: attempt to index global <span class="hljs-string">'bookcase'</span> (a <span class="hljs-keyword">nil</span> value)
</code></pre><p>A better soultion in this case would be function <code>enemy:on_dead()</code> because in this case the script is working with a slime enemy.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--When slime is dead
--Bookcase vanishes and chest is revealed behind it
function enemy:on_dead()
  bookcase:set_enabled(false)

  if not chest:is_open() then
    sol.audio.play_sound(&quot;secret&quot;)
  end

  game:set_value(&quot;zark_house_enemy_defeated&quot;,true)
end
</code></pre>"><span class="hljs-comment">--When slime is dead</span>
<span class="hljs-comment">--Bookcase vanishes and chest is revealed behind it</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_dead</span><span class="hljs-params">()</span></span>
  bookcase:set_enabled(<span class="hljs-keyword">false</span>)

  <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chest:is_open() <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
  <span class="hljs-keyword">end</span>

  game:set_value(<span class="hljs-string">"zark_house_enemy_defeated"</span>,<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>This is to just check to make sure the bookcase and sline do not return.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Slime and bookcase return check
  if game:get_value(&quot;zark_house_enemy_defeated&quot;) == true then
    bookcase:set_enabled(false)
    slime:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Slime and bookcase return check</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"zark_house_enemy_defeated"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    bookcase:set_enabled(<span class="hljs-keyword">false</span>)
    slime:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><h3 id="chain-village->-water-house"><a name="chain-village->-water-house" href="#chain-village-&gt;-water-house"></a>Chain Village &gt; Water House</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/8_chapter_16_chain_village_water_house.png" alt="8_chapter_16_chain_village_water_house.png"></p><p>Interacting with the book makes the bookcase vanish.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Interacting with the book npc makes bookcase vanish and reveal wall switch
  function book:on_interaction()
   if not game:get_value(&quot;water_house_book&quot;) then
    game:start_dialog(&quot;water_house.book&quot;, function() 
      bookcase:set_enabled(false)
      sol.audio.play_sound(&quot;open_lock&quot;)
      game:set_value(&quot;water_house_book&quot;,true)
    end)
   end
  end

--Checks if book is active and makes sure the bookcase stays gone when returning to the map.
  if game:get_value(&quot;water_house_book&quot;) == true then
    bookcase:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Interacting with the book npc makes bookcase vanish and reveal wall switch</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">book:on_interaction</span><span class="hljs-params">()</span></span>
   <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"water_house_book"</span>) <span class="hljs-keyword">then</span>
    game:start_dialog(<span class="hljs-string">"water_house.book"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> 
      bookcase:set_enabled(<span class="hljs-keyword">false</span>)
      sol.audio.play_sound(<span class="hljs-string">"open_lock"</span>)
      game:set_value(<span class="hljs-string">"water_house_book"</span>,<span class="hljs-keyword">true</span>)
    <span class="hljs-keyword">end</span>)
   <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Checks if book is active and makes sure the bookcase stays gone when returning to the map.</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"water_house_book"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    bookcase:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>Removed the wall blockade and the shadowing belonging to it, which is just a dynamic tile shadow.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Removes wall and its shadow
--Sets wall switch save variable
  function wall_switch:on_activated()
    blockage:set_enabled(false)
    blockage_shadow:set_enabled(false)
    game:set_value(&quot;water_house_wall_switch&quot;,true)
  end

--Checks to make sure the blockage and shadow is disabled when returning to the map.
  if game:get_value(&quot;water_house_wall_switch&quot;) == true then
    wall_switch:set_activated(true)
    blockage:set_enabled(false)
    blockage_shadow:set_enabled(false)
  end
</code></pre>"><span class="hljs-comment">--Removes wall and its shadow</span>
<span class="hljs-comment">--Sets wall switch save variable</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">wall_switch:on_activated</span><span class="hljs-params">()</span></span>
    blockage:set_enabled(<span class="hljs-keyword">false</span>)
    blockage_shadow:set_enabled(<span class="hljs-keyword">false</span>)
    game:set_value(<span class="hljs-string">"water_house_wall_switch"</span>,<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Checks to make sure the blockage and shadow is disabled when returning to the map.</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"water_house_wall_switch"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    wall_switch:set_activated(<span class="hljs-keyword">true</span>)
    blockage:set_enabled(<span class="hljs-keyword">false</span>)
    blockage_shadow:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
</code></pre><p>A series of switches and checks to make sure the chest appears to obtain the spirit shield. The comments say everything.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--switch 1 enables switch 2 and it appears
  function switch_1:on_activated()
    switch_2:set_enabled(true)
  end

--switch 2 makes a chest appear and plays a sound.
  function switch_2:on_activated()
    chest:set_enabled(true)
    sol.audio.play_sound(&quot;secret&quot;)
    game:set_value(&quot;water_house_floor_switch&quot;,true)
  end

--Checks to make sure the chest and switch_2 are not visible when entering the map
  if switch_1:is_activated() == false and switch_2:is_activated() == false then
    chest:set_enabled(false)
    switch_2:set_enabled(false)
  end

--Checks to make sure the switches stay active and the chest/switch_2 is visible on returning to the map
  if game:get_value(&quot;water_house_floor_switch&quot;) == true then
    switch_1:set_activated(true)
    switch_2:set_activated(true)
    chest:set_enabled(true)
    switch_2:set_enabled(true)
  end
</code></pre>"><span class="hljs-comment">--switch 1 enables switch 2 and it appears</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switch_1:on_activated</span><span class="hljs-params">()</span></span>
    switch_2:set_enabled(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--switch 2 makes a chest appear and plays a sound.</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switch_2:on_activated</span><span class="hljs-params">()</span></span>
    chest:set_enabled(<span class="hljs-keyword">true</span>)
    sol.audio.play_sound(<span class="hljs-string">"secret"</span>)
    game:set_value(<span class="hljs-string">"water_house_floor_switch"</span>,<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Checks to make sure the chest and switch_2 are not visible when entering the map</span>
  <span class="hljs-keyword">if</span> switch_1:is_activated() == <span class="hljs-keyword">false</span> <span class="hljs-keyword">and</span> switch_2:is_activated() == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    chest:set_enabled(<span class="hljs-keyword">false</span>)
    switch_2:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Checks to make sure the switches stay active and the chest/switch_2 is visible on returning to the map</span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"water_house_floor_switch"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    switch_1:set_activated(<span class="hljs-keyword">true</span>)
    switch_2:set_activated(<span class="hljs-keyword">true</span>)
    chest:set_enabled(<span class="hljs-keyword">true</span>)
    switch_2:set_enabled(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>
</code></pre><h3 id="chain-village->-elfa-house"><a name="chain-village->-elfa-house" href="#chain-village-&gt;-elfa-house"></a>Chain Village &gt; Elfa House</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/9_chapter_16_chain_village_elfa_house.png" alt="9_chapter_16_chain_village_elfa_house.png"></p><h5 id="cutscene"><a name="cutscene" href="#cutscene"></a>Cutscene</h5><p>A cut scene is just a series of movements and dialogs. Commonly, the player cannot move during these events and pictures scenes are displayed.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/9-1_chapter_16_chain_village_elfa_house.png" alt="9-1_chapter_16_chain_village_elfa_house.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/9-2_chapter_16_chain_village_elfa_house.png" alt="9-2_chapter_16_chain_village_elfa_house.png"></p><p>In this case a NPC named Elfa runs toward the hero. At the same time the hero runs toward Elfa. The <code>hero:walk</code> method freezes the hero until the movement is over. Once the <code>hero:walk</code> function is finished the hero can move again, so we must freeze her with the method <code>hero:freeze()</code>. Usually, one would not want the HUD to show when the image appears during a cut scene. In that case, we would set our HUD to false and we are using christophoâ€™s hud, so it would be <code>game:set_hud_enabled(false)</code>. It will not be found in the documentation. Once the cut scene is over we want to unfreeze the hero using the method <code>hero:unfreeze()</code> and set a save variable because we do not want the cut scene to repeat.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
local map = ...
local game = map:get_game()

--Set a boolean for image
local elfa_separate_cutscene = false

--Load image
local night_background = sol.surface.create(&quot;background/fantasy_background.png&quot;)

-- Event called at initialization time, as soon as this map becomes is loaded.
function map:on_started()

--Cutscene
 if not game:get_value(&quot;end_of_cutscene&quot;) then
   hero:walk(&quot;22222222222&quot;)
    local elfa_movement = sol.movement.create(&quot;path&quot;)
    elfa_movement:set_path({6,6,6,6,6,6,6,6,6,6})
    elfa_movement:set_speed(88)
    elfa_movement:start(elfa, function()
      sol.timer.start(map, 500, function()
        hero:freeze()
        game:start_dialog(&quot;elfa_house.elfa&quot;, function()
          game:set_hud_enabled(false)
          elfa_separate_cutscene = true
          sol.timer.start(map, 1000, function()
            game:start_dialog(&quot;elfa_house.night_background&quot;, function()
              sol.timer.start(map, 1000, function()
                game:set_hud_enabled(true)
                elfa_separate_cutscene = false
                hero:unfreeze()
                game:set_value(&quot;end_of_cutscene&quot;,true)
              end)
            end)
          end)
        end)
      end)
    end)
  end

--Display image
function map:on_draw(dst_surface)
  if elfa_separate_cutscene then
    night_background:draw(dst_surface)
  end
end
</code></pre>">
<span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-comment">--Set a boolean for image</span>
<span class="hljs-keyword">local</span> elfa_separate_cutscene = <span class="hljs-keyword">false</span>

<span class="hljs-comment">--Load image</span>
<span class="hljs-keyword">local</span> night_background = sol.surface.create(<span class="hljs-string">"background/fantasy_background.png"</span>)

<span class="hljs-comment">-- Event called at initialization time, as soon as this map becomes is loaded.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>

<span class="hljs-comment">--Cutscene</span>
 <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> game:get_value(<span class="hljs-string">"end_of_cutscene"</span>) <span class="hljs-keyword">then</span>
   hero:walk(<span class="hljs-string">"22222222222"</span>)
    <span class="hljs-keyword">local</span> elfa_movement = sol.movement.create(<span class="hljs-string">"path"</span>)
    elfa_movement:set_path({<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>})
    elfa_movement:set_speed(<span class="hljs-number">88</span>)
    elfa_movement:start(elfa, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
      sol.timer.start(map, <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
        hero:freeze()
        game:start_dialog(<span class="hljs-string">"elfa_house.elfa"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
          game:set_hud_enabled(<span class="hljs-keyword">false</span>)
          elfa_separate_cutscene = <span class="hljs-keyword">true</span>
          sol.timer.start(map, <span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
            game:start_dialog(<span class="hljs-string">"elfa_house.night_background"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
              sol.timer.start(map, <span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
                game:set_hud_enabled(<span class="hljs-keyword">true</span>)
                elfa_separate_cutscene = <span class="hljs-keyword">false</span>
                hero:unfreeze()
                game:set_value(<span class="hljs-string">"end_of_cutscene"</span>,<span class="hljs-keyword">true</span>)
              <span class="hljs-keyword">end</span>)
            <span class="hljs-keyword">end</span>)
          <span class="hljs-keyword">end</span>)
        <span class="hljs-keyword">end</span>)
      <span class="hljs-keyword">end</span>)
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--Display image</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_draw</span><span class="hljs-params">(dst_surface)</span></span>
  <span class="hljs-keyword">if</span> elfa_separate_cutscene <span class="hljs-keyword">then</span>
    night_background:draw(dst_surface)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p>The hero must find a secret passage to enter the dungeon and it is heavely hinted in the dialog that it is under a bookcase. A passage will be shown when the hero interacts with the bookcase. In this case, a custom entity is used for the interaction because it can be resized to fit the length of the bookcase.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>
--Dungeon entrance bookcase
  function bookcase:on_interaction()
    game:start_dialog(&quot;elfa_house.bookcase&quot;, function() 
      sol.audio.play_sound(&quot;switch&quot;)
      large_bookcase:set_enabled(false)
    end)
  end
end
</code></pre>">
<span class="hljs-comment">--Dungeon entrance bookcase</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bookcase:on_interaction</span><span class="hljs-params">()</span></span>
    game:start_dialog(<span class="hljs-string">"elfa_house.bookcase"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> 
      sol.audio.play_sound(<span class="hljs-string">"switch"</span>)
      large_bookcase:set_enabled(<span class="hljs-keyword">false</span>)
    <span class="hljs-keyword">end</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h3 id="chain-village->-underground"><a name="chain-village->-underground" href="#chain-village-&gt;-underground"></a>Chain Village &gt; Underground</h3><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/10_chapter_16_chain_village_underground.png" alt="10_chapter_16_chain_village_underground.png"></p><h5 id="green-orc-soldier"><a name="green-orc-soldier" href="#green-orc-soldier"></a>Green Orc Soldier</h5><p>First off, I would like to explain the orc soldier on this map because he is a little unique. The soldier consists of two sprites. The orc and the sword to be precise. The orc is invincible and can only be disabled by hitting his sword. I set it up so when the first orc is tapped 3 times, then the bookcase vanishes.</p><p>Let me break down how I do this. I first make the orc body and sword ignore all attacks with the method <code>enemy:set_invincible_sprite()</code>. Then I gave the sword a custom consequence with the sword using method <code>enemy:set_attack_consequence_sprite(sword_sprite, "sword", "custom")</code> . Afterward, I used the<code>function enemy:on_custom_attack_received(attack, sprite)</code> to set what happens when the sword is hit by the hero. In the <code>green_orc_soldier.lua</code> I use a boolean to check when to immobilize using the method <code>enemy:immobilize()</code>, but one could just use a timer instead.</p><p><strong>Timer example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function enemy:on_custom_attack_received(attack, sprite)

  if attack == &quot;sword&quot; and sprite == sword_sprite then
    sol.audio.play_sound(&quot;sword_tapping&quot;)
    print(&quot;tapped&quot;)

    local hero = enemy:get_map():get_entity(&quot;hero&quot;)
    local angle = hero:get_angle(enemy)
    local movement = sol.movement.create(&quot;straight&quot;)
    movement:set_speed(128)
    movement:set_angle(angle)
    movement:set_max_distance(500)
    movement:set_smooth(true)
    movement:start(enemy)
    --immobilize orc
    sol.timer.start(1000, function()
      enemy:immobilize()
    end)
    tapped = tapped + 1
    print(&quot;tapped: &quot;, tapped)
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_custom_attack_received</span><span class="hljs-params">(attack, sprite)</span></span>

  <span class="hljs-keyword">if</span> attack == <span class="hljs-string">"sword"</span> <span class="hljs-keyword">and</span> sprite == sword_sprite <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"sword_tapping"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"tapped"</span>)

    <span class="hljs-keyword">local</span> hero = enemy:get_map():get_entity(<span class="hljs-string">"hero"</span>)
    <span class="hljs-keyword">local</span> angle = hero:get_angle(enemy)
    <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
    movement:set_speed(<span class="hljs-number">128</span>)
    movement:set_angle(angle)
    movement:set_max_distance(<span class="hljs-number">500</span>)
    movement:set_smooth(<span class="hljs-keyword">true</span>)
    movement:start(enemy)
    <span class="hljs-comment">--immobilize orc</span>
    sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
      enemy:immobilize()
    <span class="hljs-keyword">end</span>)
    tapped = tapped + <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"tapped: "</span>, tapped)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="green_orc_soldier.lua"><a name="green_orc_soldier.lua" href="#green_orc_soldier.lua"></a>green_orc_soldier.lua</h5><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local enemy = ...

local game = enemy:get_game()
local map = enemy:get_map()
local hero = map:get_hero()
local body_sprite
local sword_sprite
local movement
local immobilize = false
local tapped = 0

function enemy:on_created()

  body_sprite = enemy:create_sprite(&quot;enemies/green_orc_soldier&quot;)
  sword_sprite = enemy:create_sprite(&quot;enemies/green_orc_soldier_sword&quot;)
  enemy:set_life(140)
  enemy:set_damage(0)
  enemy:set_size(16, 16)
  enemy:set_origin(8, 13)

  -- Make the sword and body sprite ignore all attacks.
  enemy:set_invincible_sprite(sword_sprite)
  enemy:set_invincible_sprite(body_sprite)

  -- Except the sword.
  enemy:set_attack_consequence_sprite(sword_sprite, &quot;sword&quot;, &quot;custom&quot;)
end

function enemy:on_custom_attack_received(attack, sprite)

  if attack == &quot;sword&quot; and sprite == sword_sprite then
    sol.audio.play_sound(&quot;sword_tapping&quot;)
    print(&quot;tapped&quot;)

    local hero = enemy:get_map():get_entity(&quot;hero&quot;)
    local angle = hero:get_angle(enemy)
    local movement = sol.movement.create(&quot;straight&quot;)
    movement:set_speed(128)
    movement:set_angle(angle)
    movement:set_max_distance(500)
    movement:set_smooth(true)
    movement:start(enemy)
    immobilize = true
    tapped = tapped + 1
    print(&quot;tapped: &quot;, tapped)
  end
end

--Create on_activated
sol.timer.start(2000, function()
  if enemy.on_activated ~= nil then
    enemy:on_activated()
  return true
  end
end)

function enemy:on_activated()

print(&quot;activate&quot;)

if immobilize == true then
  enemy:immobilize()
end

if tapped &amp;gt;= 3 then
  game:set_value(&quot;underground_tapped_3_times&quot;,true)
end

local distance_to_hero = hero:get_distance(enemy)

   if distance_to_hero &amp;lt; 100 then   
     movement = sol.movement.create(&quot;target&quot;)
     movement:set_target(hero)
     movement:set_speed(48)
     movement:start(enemy)
     immobilize = false
   else
     movement = sol.movement.create(&quot;random&quot;)
     movement:start(enemy)
     immobilize = false
   end
end

function enemy:on_movement_changed()

  body_sprite:set_direction(movement:get_direction4())
  sword_sprite:set_direction(movement:get_direction4())
end
</code></pre>"><span class="hljs-keyword">local</span> enemy = ...

<span class="hljs-keyword">local</span> game = enemy:get_game()
<span class="hljs-keyword">local</span> map = enemy:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()
<span class="hljs-keyword">local</span> body_sprite
<span class="hljs-keyword">local</span> sword_sprite
<span class="hljs-keyword">local</span> movement
<span class="hljs-keyword">local</span> immobilize = <span class="hljs-keyword">false</span>
<span class="hljs-keyword">local</span> tapped = <span class="hljs-number">0</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_created</span><span class="hljs-params">()</span></span>

  body_sprite = enemy:create_sprite(<span class="hljs-string">"enemies/green_orc_soldier"</span>)
  sword_sprite = enemy:create_sprite(<span class="hljs-string">"enemies/green_orc_soldier_sword"</span>)
  enemy:set_life(<span class="hljs-number">140</span>)
  enemy:set_damage(<span class="hljs-number">0</span>)
  enemy:set_size(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>)
  enemy:set_origin(<span class="hljs-number">8</span>, <span class="hljs-number">13</span>)

  <span class="hljs-comment">-- Make the sword and body sprite ignore all attacks.</span>
  enemy:set_invincible_sprite(sword_sprite)
  enemy:set_invincible_sprite(body_sprite)

  <span class="hljs-comment">-- Except the sword.</span>
  enemy:set_attack_consequence_sprite(sword_sprite, <span class="hljs-string">"sword"</span>, <span class="hljs-string">"custom"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_custom_attack_received</span><span class="hljs-params">(attack, sprite)</span></span>

  <span class="hljs-keyword">if</span> attack == <span class="hljs-string">"sword"</span> <span class="hljs-keyword">and</span> sprite == sword_sprite <span class="hljs-keyword">then</span>
    sol.audio.play_sound(<span class="hljs-string">"sword_tapping"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"tapped"</span>)

    <span class="hljs-keyword">local</span> hero = enemy:get_map():get_entity(<span class="hljs-string">"hero"</span>)
    <span class="hljs-keyword">local</span> angle = hero:get_angle(enemy)
    <span class="hljs-keyword">local</span> movement = sol.movement.create(<span class="hljs-string">"straight"</span>)
    movement:set_speed(<span class="hljs-number">128</span>)
    movement:set_angle(angle)
    movement:set_max_distance(<span class="hljs-number">500</span>)
    movement:set_smooth(<span class="hljs-keyword">true</span>)
    movement:start(enemy)
    immobilize = <span class="hljs-keyword">true</span>
    tapped = tapped + <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"tapped: "</span>, tapped)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Create on_activated</span>
sol.timer.start(<span class="hljs-number">2000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> enemy.on_activated ~= <span class="hljs-keyword">nil</span> <span class="hljs-keyword">then</span>
    enemy:on_activated()
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_activated</span><span class="hljs-params">()</span></span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">"activate"</span>)

<span class="hljs-keyword">if</span> immobilize == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
  enemy:immobilize()
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> tapped &gt;= <span class="hljs-number">3</span> <span class="hljs-keyword">then</span>
  game:set_value(<span class="hljs-string">"underground_tapped_3_times"</span>,<span class="hljs-keyword">true</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">local</span> distance_to_hero = hero:get_distance(enemy)

   <span class="hljs-keyword">if</span> distance_to_hero &lt; <span class="hljs-number">100</span> <span class="hljs-keyword">then</span>   
     movement = sol.movement.create(<span class="hljs-string">"target"</span>)
     movement:set_target(hero)
     movement:set_speed(<span class="hljs-number">48</span>)
     movement:start(enemy)
     immobilize = <span class="hljs-keyword">false</span>
   <span class="hljs-keyword">else</span>
     movement = sol.movement.create(<span class="hljs-string">"random"</span>)
     movement:start(enemy)
     immobilize = <span class="hljs-keyword">false</span>
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">enemy:on_movement_changed</span><span class="hljs-params">()</span></span>

  body_sprite:set_direction(movement:get_direction4())
  sword_sprite:set_direction(movement:get_direction4())
<span class="hljs-keyword">end</span>
</code></pre><h5 id="underground-map"><a name="underground-map" href="#underground-map"></a>Underground Map</h5><p>I do not present anything new with this map, so nothing to explain. The only difference was with <code>green_orc_soldier.lua</code> because when it is tapped three times a save variable is set when the sword it hit three times.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()
local hero = map:get_hero()

-- Event called at initialization time, as soon as this map becomes is loaded.
function map:on_started()
  game:set_value(&quot;boss_map&quot;,true)
  game:set_value(&quot;scrolling_credits&quot;,true)

  function leaver_1:on_activated()
    wall_1:set_enabled(false)
    game:set_value(&quot;underground_leaver_1&quot;,true)
  end

  if game:get_value(&quot;underground_leaver_1&quot;) == true then
    leaver_1:set_activated(true)
  end
end

function door_1:on_opened()
  print(&quot;opened door&quot;)
  hero:teleport(&quot;chain_village/underground_miniboss&quot;, &quot;boss_destination&quot;, &quot;fade&quot;)
end

sol.timer.start(1000, function()
  if game:get_value(&quot;underground_tapped_3_times&quot;) == true then
    bookcase_1:set_enabled(false)
  end
  if door_1:is_opening() == true then
    --hero:teleport(&quot;chain_village/underground_miniboss&quot;, &quot;boss_destination&quot;, &quot;fade&quot;)
  end
  return true
end)
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()
<span class="hljs-keyword">local</span> hero = map:get_hero()

<span class="hljs-comment">-- Event called at initialization time, as soon as this map becomes is loaded.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>
  game:set_value(<span class="hljs-string">"boss_map"</span>,<span class="hljs-keyword">true</span>)
  game:set_value(<span class="hljs-string">"scrolling_credits"</span>,<span class="hljs-keyword">true</span>)

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leaver_1:on_activated</span><span class="hljs-params">()</span></span>
    wall_1:set_enabled(<span class="hljs-keyword">false</span>)
    game:set_value(<span class="hljs-string">"underground_leaver_1"</span>,<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"underground_leaver_1"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    leaver_1:set_activated(<span class="hljs-keyword">true</span>)
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">door_1:on_opened</span><span class="hljs-params">()</span></span>
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"opened door"</span>)
  hero:teleport(<span class="hljs-string">"chain_village/underground_miniboss"</span>, <span class="hljs-string">"boss_destination"</span>, <span class="hljs-string">"fade"</span>)
<span class="hljs-keyword">end</span>

sol.timer.start(<span class="hljs-number">1000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>
  <span class="hljs-keyword">if</span> game:get_value(<span class="hljs-string">"underground_tapped_3_times"</span>) == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    bookcase_1:set_enabled(<span class="hljs-keyword">false</span>)
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">if</span> door_1:is_opening() == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
    <span class="hljs-comment">--hero:teleport("chain_village/underground_miniboss", "boss_destination", "fade")</span>
  <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>
<span class="hljs-keyword">end</span>)
</code></pre><h3 id="chain-village->-underground-boss"><a name="chain-village->-underground-boss" href="#chain-village-&gt;-underground-boss"></a>Chain Village &gt; Underground Boss</h3><p>The underground boss was originally supposed to be the mini boss, but I decided to make it the boss because the orcs were hard enough. The script uses the <code>map:get_entities()</code> function to grab all the solid switches on the map. Thanks to Max on the Solarus forum. The skeleton boss is immortal and can only be hurt when all switches are active. The hero has 5 seconds to damage the skeleton before he reverts to being immortal.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/11_chapter_16_chain_village_underground_boss.png" alt="11_chapter_16_chain_village_underground_boss.png"></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local map = ...
local game = map:get_game()

-- Event called at initialization time, as soon as this map becomes is loaded.
function map:on_started()

local switches_on= 0

for switch in map:get_entities(&quot;solid&quot;) do
  function switch:on_activated()
    switches_on = switches_on + 1
    if switches_on &amp;gt;= 4 then
      switches_on = 0
      timer_sound = sol.timer.start(5000, function() deactivate_switches() end)
      timer_sound:set_with_sound(true)
    end
  end
end

function deactivate_switches()
   for switch in map:get_entities(&quot;solid&quot;) do
     switch:set_activated(false)
   end
end

end
</code></pre>"><span class="hljs-keyword">local</span> map = ...
<span class="hljs-keyword">local</span> game = map:get_game()

<span class="hljs-comment">-- Event called at initialization time, as soon as this map becomes is loaded.</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map:on_started</span><span class="hljs-params">()</span></span>

<span class="hljs-keyword">local</span> switches_on= <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> switch <span class="hljs-keyword">in</span> map:get_entities(<span class="hljs-string">"solid"</span>) <span class="hljs-keyword">do</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switch:on_activated</span><span class="hljs-params">()</span></span>
    switches_on = switches_on + <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> switches_on &gt;= <span class="hljs-number">4</span> <span class="hljs-keyword">then</span>
      switches_on = <span class="hljs-number">0</span>
      timer_sound = sol.timer.start(<span class="hljs-number">5000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span> deactivate_switches() <span class="hljs-keyword">end</span>)
      timer_sound:set_with_sound(<span class="hljs-keyword">true</span>)
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deactivate_switches</span><span class="hljs-params">()</span></span>
   <span class="hljs-keyword">for</span> switch <span class="hljs-keyword">in</span> map:get_entities(<span class="hljs-string">"solid"</span>) <span class="hljs-keyword">do</span>
     switch:set_activated(<span class="hljs-keyword">false</span>)
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">end</span>
</code></pre><p><strong>Sample:</strong></p><p>Lessons &gt; Chapter_16 &gt; Chapter_16_Chain_Quest.zip</p><h3 id="bow"><a name="bow" href="#bow"></a>Bow</h3><p>The method<code>hero:start_bow()</code>activates the bow and shoots an arrow. The <code>bow</code> animation is needed for your hero and the sounds <code>bow.ogg</code> and <code>arrow_hit.ogg</code>.</p><p><strong>Animation:</strong><br>Bow</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/12_chapter_16_bow.png" alt="Chapter_16_images/12_chapter_16_bow.png"></p><p><strong>Sounds:</strong><br>bow.ogg<br>arrow_hit.ogg</p><p><strong>Script Sample:</strong></p><p>A key press function can be used to activate the bow. In the sample, I put it in the<code>game_manager.lua</code>script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> function game:on_key_pressed(key)

    local hero = game:get_hero()

    --Bow &amp;amp; Arrow
    if key == &quot;a&quot; then
      hero:start_bow()
    end
 end
</code></pre>"> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_key_pressed</span><span class="hljs-params">(key)</span></span>

    <span class="hljs-keyword">local</span> hero = game:get_hero()

    <span class="hljs-comment">--Bow &amp; Arrow</span>
    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"a"</span> <span class="hljs-keyword">then</span>
      hero:start_bow()
    <span class="hljs-keyword">end</span>
 <span class="hljs-keyword">end</span>
</code></pre><h3 id="boomerang"><a name="boomerang" href="#boomerang"></a>Boomerang</h3><p>The boomerang has more detail than the bow. The boomerang will return to the hero or chase the hero if moving away from the boomerang.<br><code>hero:start_boomerang(max_distance, speed, tunic_preparing_animation, sprite_name)</code></p><table>
<thead>
<tr>
<th>Boomerang</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>max_distance (number)</td>
<td>Maximum distance of the boomerangâ€™s movement in pixels.</td>
</tr>
<tr>
<td>speed (number)</td>
<td>Speed of the boomerangâ€™s movement in pixels per second.</td>
</tr>
<tr>
<td>tunic_preparing_animation (string)</td>
<td>Name of the animation that the heroâ€™s tunic sprite should take while preparing the boomerang.</td>
</tr>
<tr>
<td>sprite_name (string)</td>
<td>Sprite animation set to use to draw the boomerang then.</td>
</tr>
<tr>
<td>Source</td>
<td><a href="http://www.solarus-games.org/doc/latest/lua_api_hero.html#lua_api_hero_start_boomerang">http://www.solarus-games.org/doc/latest/lua_api_hero.html#lua_api_hero_start_boomerang</a></td>
</tr>
</tbody>
</table><p><strong>Preparing Animation:</strong></p><p>In the sample, the <code>tunic_preparing_animation</code> is <code>boomerang1</code>.</p><p><code>hero:start_boomerang(60, 50, "boomerang1", "main_heroes/boomerang")</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/14-1_chapter_16_boomerang.png" alt="Chapter_16_images/14-1_chapter_16_boomerang.png"></p><p><strong>Sprite Name:</strong></p><p>The boomerang name in the sample is <code>boomerang</code> and I put it in the <code>main_heroes</code> directory.</p><p><code>hero:start_boomerang(60, 50, "boomerang1", "main_heroes/boomerang")</code></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/14-2_chapter_16_boomerang.png" alt="Chapter_16_images/14-2_chapter_16_boomerang.png"></p><p><strong>Sounds:</strong></p><p>The boomerang needs the sound <code>boomerang.ogg</code> and <code>sword_tapping.ogg</code>.</p><p>The <code>boomerang.ogg</code> sound repeats when it is activates and the <code>sword_tapping.ogg</code> actives when encountering something.</p><p><strong>Script Sample:</strong></p><p>A key press function can be used to activate the boomerang. In the sample, I put it in the<code>game_manager.lua</code>script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> function game:on_key_pressed(key)

    local hero = game:get_hero()

    --Boomerang
    if key == &quot;b&quot; then
      hero:start_boomerang(60, 50, &quot;boomerang1&quot;, &quot;main_heroes/boomerang&quot;)
    end
 end
</code></pre>"> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_key_pressed</span><span class="hljs-params">(key)</span></span>

    <span class="hljs-keyword">local</span> hero = game:get_hero()

    <span class="hljs-comment">--Boomerang</span>
    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"b"</span> <span class="hljs-keyword">then</span>
      hero:start_boomerang(<span class="hljs-number">60</span>, <span class="hljs-number">50</span>, <span class="hljs-string">"boomerang1"</span>, <span class="hljs-string">"main_heroes/boomerang"</span>)
    <span class="hljs-keyword">end</span>
 <span class="hljs-keyword">end</span>
</code></pre><h3 id="hookshot"><a name="hookshot" href="#hookshot"></a>Hookshot</h3><p>The method <code>hero:start_hookshot()</code> can be used to activate the hookshot.</p><p><strong>Animation:</strong></p><p>The hookshot requires a sprite in the sprites entities section. The sprite name needs to be<code>hookshot</code>and needs two animations. Those animations are called <code>hook</code> and <code>link</code> for the chain.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_16_images/13_chapter_16_hookshot.png" alt="Chapter_16_images/13_chapter_16_hookshot.png"></p><p><strong>Sounds:</strong></p><p>The hookshot reqiures the sounds <code>hookshot.ogg</code> and <code>sword_tapping.ogg</code>.</p><p>The <code>hookshot.ogg</code> sound repeats when it is activates and the <code>sword_tapping.ogg</code> actives when encountering something.</p><p><strong>Script Sample:</strong></p><p>A key press function can be used to activate the hookshot. In the sample, I put it in the<code>game_manager.lua</code>script.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;> function game:on_key_pressed(key)

    local hero = game:get_hero()

    --Hookshot
    if key == &quot;h&quot; then
      hero:start_hookshot()
    end
 end
</code></pre>"> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">game:on_key_pressed</span><span class="hljs-params">(key)</span></span>

    <span class="hljs-keyword">local</span> hero = game:get_hero()

    <span class="hljs-comment">--Hookshot</span>
    <span class="hljs-keyword">if</span> key == <span class="hljs-string">"h"</span> <span class="hljs-keyword">then</span>
      hero:start_hookshot()
    <span class="hljs-keyword">end</span>
 <span class="hljs-keyword">end</span>
</code></pre><p><strong>Sample:</strong></p><p>Lessons &gt; Chapter_16 &gt; chapter_16_bow_hookshot_boomerang.zip</p><h2 id="chapter-17:-game-design-walkthrough"><a name="chapter-17:-game-design-walkthrough" href="#chapter-17:-game-design-walkthrough"></a>Chapter 17: Game Design Walkthrough</h2><h5 id="enemy-types"><a name="enemy-types" href="#enemy-types"></a>Enemy Types</h5><table>
<thead>
<tr>
<th>Enemy_Types</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Boss</td>
<td style="text-align:left">A boss is the strongest enemy in a dungeon or any other location. They are difficult to beat and sometimes are cannot be beaten unless their weakness is found.</td>
</tr>
<tr>
<td>Miniboss</td>
<td style="text-align:left">They are basically weak bosses. They are strong, but not really unbeatable. It is common to gain a weapon by defeating them and that allows the player to defeat the boss in that location.</td>
</tr>
<tr>
<td>Enemy</td>
<td style="text-align:left">Simple to defeat. Should not take more that a few projectiles or sword hits to take down.</td>
</tr>
</tbody>
</table><h5 id="enemy-attack-patterns"><a name="enemy-attack-patterns" href="#enemy-attack-patterns"></a>Enemy Attack Patterns</h5><p>These attack patterns are normally used by all enemies. Some foes are only one of these types, but minibosses and bosses normally have more than one type.</p><table>
<thead>
<tr>
<th>Attack_Pattern</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-flation</td>
<td style="text-align:left">This boss either gets bigger after each strike the player inflicts on it or smaller. The hero and boss become easier to hit when the boss inflates. When the boss deflates it takes a longer time to get to the hero and its small size might be hard to hit because it is not a big balloon.</td>
</tr>
<tr>
<td>Item</td>
<td style="text-align:left">This boss is normally impossible to beat as long as he has his special item. (Staff, ring, etc)</td>
</tr>
<tr>
<td>Condition</td>
<td style="text-align:left">This is a normal type of enemy. Requires one weapon to defeat it.</td>
</tr>
<tr>
<td>Multi-condition</td>
<td style="text-align:left">This type of enemy is normally a boss. Sometimes the hero will have attack more than just the boss to do damage. For example, the hero will have to take out the bubbles, hit the enemy with an arrow, and strike it with the sword to make the enemy take damage.</td>
</tr>
<tr>
<td>Wack the Whistle</td>
<td style="text-align:left">This enemy hides in a hole and comes out to attack.</td>
</tr>
<tr>
<td>Terrain</td>
<td style="text-align:left">This type of enemy uses the terrain to attack the hero. For example, falling spikes or rocks. Also, it can spin the terrain or bump up the edges to make the hero go off balance.</td>
</tr>
<tr>
<td>Grab and throw</td>
<td style="text-align:left">This type of enemy grabs and throws the hero.</td>
</tr>
<tr>
<td>One with Terrain</td>
<td style="text-align:left">This type of enemy becomes one with the terrain. For example, an enemy can cover itself with water and attack. A good way to defeat this type would to know where the core is.</td>
</tr>
<tr>
<td>The Phantom</td>
<td style="text-align:left">A enemy that normally floats, becomes invisible, and hides in a shadow. An item is normally needed to see it and/or light based attacks to cause damage. A phantom can use curses to hurt the hero when they try to cause damage. That curse only lasts a few seconds or a condition needs to be met to break it.</td>
</tr>
<tr>
<td>The deflectors</td>
<td style="text-align:left">The projectile attacks need to be deflected and bounced back at the enemy in order for the foe to take damage. The enemy might be able to deflect back.</td>
</tr>
<tr>
<td>Projectile seeker</td>
<td style="text-align:left">This enemy shoots projectiles and sometimes the projectile will follow the hero.</td>
</tr>
<tr>
<td>Hammer</td>
<td style="text-align:left">This type of enemy rises in the air and slams down to the ground like a hammer.</td>
</tr>
<tr>
<td>Clone</td>
<td style="text-align:left">These types of enemies can clone themselves and the only way to defeat them is to take out the original or quickly defeat them all.</td>
</tr>
<tr>
<td>limp-flation</td>
<td style="text-align:left">This enemy either inflates its limps to make them bigger or ejects their limbs like a hookshot. This type of enemy normally protects its limps, so it will not take damage.</td>
</tr>
<tr>
<td>Floor mover</td>
<td style="text-align:left">This type of enemy works with the floors. It can change its location and bounce off the walls at a rapid pace. For example, they can bounce off the walls by bouncing, spinning, climbing, using magic, flipping, and with their blades.</td>
</tr>
<tr>
<td>The magician</td>
<td style="text-align:left">The magician is similar to the Phantom, but it normally uses magic tricks. For example, runs into a mirror, teleport, strikes with magic, turns into objects, protects itself in a hat, etc.</td>
</tr>
<tr>
<td>Dark hero</td>
<td style="text-align:left">This is a dark version of the hero. Normally encountered in other worlds or dimensions.</td>
</tr>
<tr>
<td>Weapon</td>
<td style="text-align:left">This type of enemy fight with weapons.</td>
</tr>
<tr>
<td>Distancer</td>
<td style="text-align:left">This enemy normally hides on the ceiling, jumps on pillars, and/or flys at a distance. That way this flying foe does not take damage until it comes down to attack.</td>
</tr>
<tr>
<td>Duplicator</td>
<td style="text-align:left">This type of enemy divides based on the damage that is being taken.</td>
</tr>
<tr>
<td>Color warning</td>
<td style="text-align:left">This enemy display warnings that tells the hero what kind of attack it will use or how rapid its strikes will be. It does not have to be colors to be honest.</td>
</tr>
<tr>
<td>Monster commander</td>
<td style="text-align:left">This type of enemy can produce weaker enemies to attack the hero.</td>
</tr>
<tr>
<td>Suicide Bomber</td>
<td style="text-align:left">This type of enemy kills itself to harm the hero in an explosion.</td>
</tr>
<tr>
<td>Time traveler</td>
<td style="text-align:left">This enemy can restore its health by time traveling its body. A normal effect is that it gets distorted and weakened as it keeps doing it.</td>
</tr>
<tr>
<td>The eater</td>
<td style="text-align:left">This type of enemy eats the hero for a short time and spits the hero out.</td>
</tr>
<tr>
<td>Damaged by terrain only</td>
<td style="text-align:left">This enemy can only be harmed by something in the terrain. A special root or statue with special powers.</td>
</tr>
<tr>
<td>Drag down</td>
<td style="text-align:left">This type of enemy drags the hero down. Normally resulting in going to a different floor.</td>
</tr>
<tr>
<td>Transformer</td>
<td style="text-align:left">This enemy changes and gets stronger the more it is attacked.</td>
</tr>
</tbody>
</table><p>Check the following link for examples of bosses:</p><p><a href="http://zelda.wikia.com/wiki/Boss">http://zelda.wikia.com/wiki/Boss</a></p><h5 id="puzzles"><a name="puzzles" href="#puzzles"></a>Puzzles</h5><p>Everyone knows that puzzles are very important in any RPG. The wonder of knowing what will happen when solving them or just the wanting to defeat the annoying bugger. </p><table>
<thead>
<tr>
<th>Puzzle_Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Puzzles:</td>
<td style="text-align:left">A puzzle is a game, problem, or toy that tests a personâ€™s ingenuity or knowledge. In a puzzle, one is required to put the pieces together in a logical way, in order to arrive at the correct solution of the puzzle. Many beings can tell puzzles, whether they are magical or not. </td>
</tr>
<tr>
<td>Block Puzzle</td>
<td style="text-align:left">The Block Puzzle involves moving shapes or plain blocks into a certain position, or the rearranging of blocks to form an image/picture. This may be to press a switch, to create a step which can be used to gain high ground, to put blocks color/colour order, move the block into a hole, etc. </td>
</tr>
<tr>
<td>Return Puzzle</td>
<td style="text-align:left">The most common puzzle is the return puzzle, a puzzle in which a player must depart from a room and return again with an extra item or key, making that room passable. This can be the case with dungeon rooms with multiple exits.</td>
</tr>
<tr>
<td>Enemy Puzzle</td>
<td style="text-align:left">The Enemy Puzzle involves a room or area in which one or several enemies must be defeated to move on. There are three common forms. Enemy, miniboss, and boss. <br><br>Multiple foes: This is where the player has to defeat multiple enemies in the same room. They are normally much weaker than the hero and sometimes they must be defeated in a certain order. A rewards can be gained from defeating the enemies in different orders.<br><br>Mini Boss: The mini boss is normally encountered inside dungeons. The common reward is a new weapon or item for their defeat. Sometimes they even use an item similar to what the player will gain. They are often difficult to defeat, but not as hard as a boss.<br><br>The boss: The player must defeat this enemy in order to pass or beat a dungeon. They are normally the most difficult foe in the dungeon to defeat. The hero normally becomes stronger in some way due to defeating them. For example, the strength gain can be more health or stronger strikes against certain types of foes.</td>
</tr>
<tr>
<td>Switch Puzzle</td>
<td style="text-align:left">Switches in the form of levers and buttons are used quite often and many more types can be used. For example, crystals, organic organs, and other things can be used as switches. There is really no limit on the type of switch.</td>
</tr>
<tr>
<td>Lever:</td>
<td style="text-align:left">Needs to be pushed or pulled. Some inaccessible levers require use of the Hookshot (pull), Seed/nut Shooter (push), or Bombs (for timing).</td>
</tr>
<tr>
<td>Button:</td>
<td style="text-align:left">Many types exist, but can be broken down into the form of weight. The weight of a block might need to be removed from a button or weight might need to be put on it, sometimes there is an item to use if the player is not heavy enough to push it. The switches can have a timer on them, meaning the player might need to hurry or the switch will have to be stepped on again.</td>
</tr>
<tr>
<td>Target Puzzle:</td>
<td style="text-align:left">The Target Puzzle is normally used to open a door or in some way to help the hero reach the next floor. For example, shooting an object above a door, with a projectile weapon, can open that door. The puzzle can be made more difficult in a few ways. For example, the target can be moving or the movement might be from a platform the player is standing on. Furthermore, other objects or enemies might be moving in the heroâ€™s way! Another example, can be to activate floating objects in a certain order to reach the next floor. Weapons used are normally slingshot, bow, crossbow, and gun.</td>
</tr>
<tr>
<td>Force of Nature Puzzles:</td>
<td style="text-align:left">I have noticed that wind and other forces of nature can be used to make puzzles as well. The player or objects like a bomb can move to certain points and be shot around due to the forces, like wind or maybe even plant life.</td>
</tr>
<tr>
<td>Torch puzzle:</td>
<td style="text-align:left">This might be considered a force of nature, but this deserves a whole puzzle of its own. The Torch Puzzle involves the lighting of one or more torches by fire in order to receive access to another room, treasure chest, or something similar. </td>
</tr>
<tr>
<td>Riddle Puzzle:</td>
<td style="text-align:left">This is normally a word based puzzle and can require doing a type of action or even wearing certain garment. Sometimes bad occurrences can happen for getting the answer wrong. The player or character can be hurt/killed, or be forced to fight a bunch of enemies. A lot of time there can be more deadly cases, but not many people do this anymore. The playerâ€™s life force can decrease permanently, etc. For example, you could be cursed permanently or for a certain amount of time. The curse could have a good side too, and another riddle might be needed to break it! Do you want to?</td>
</tr>
<tr>
<td>Location Change Puzzle:</td>
<td style="text-align:left">Locations can be used as puzzles. For example, the location might look exactly the same, no matter where the player goes. The player is not â€œalwaysâ€ teleporting to the same spot, but is going to a similar location. The Lost Woods in Zelda is a good example. Also, areas or dungeon rooms can switch in a different order. This might not always be a puzzle because it could be completely random. Another example, time can be used to follow a character in a location and if the player gets too far behind, then the player will not be able to pass the puzzle for getting to the next location.</td>
</tr>
<tr>
<td>Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Puzzle">https://en.wikipedia.org/wiki/Puzzle</a></td>
</tr>
</tbody>
</table><h5 id="quest-types"><a name="quest-types" href="#quest-types"></a>Quest Types</h5><p>One must think of quest types in order to make a proper story. Meeting characters can involve rescue quests, etc. Also, do not think that quests types will make your game unique every time because many characters have something unique about them. It can be a weird personality flaw, a way of living or something different about their body, but we will get more into that later. Let us start with quest types!</p><table>
<thead>
<tr>
<th style="text-align:center">Quest_Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Kill quests</td>
<td style="text-align:left">The character must go out and kill a specific number of creature types, or a particular non-player character and the short way to say that is NPC. These kinds of quests involve bringing back evidence of success, such as trophies or something belonging to the being. (Staff, tusks, head, etc.)</td>
</tr>
<tr>
<td style="text-align:center">Combo quests</td>
<td style="text-align:left">The player will attack certain foes or structures with a combination of attacks until the necessary number of combos has been reached. Foes in these quests are normally either immortal or infinite in amount until the player character is victorious in which the foes would be eliminated or stop appearing.</td>
</tr>
<tr>
<td style="text-align:center">Delivery quests</td>
<td style="text-align:left">A quest type called the delivery quest or fetch-carry quest. This is a situation where the character is sent to deliver or obtain an item from one place to another. In certain cases the character might need to collect the object first instead of being handed the item to deliver when beginning the quest. These quests are created to be difficult by asking the character to journey through different or dangerous terrain, sometimes with a time limit.</td>
</tr>
<tr>
<td style="text-align:center">Gather quests</td>
<td style="text-align:left">Gather quests, also known as collection quests, call for a player character to collect a specific amount of items. These can either be gathered from a place or environment, or need the player to kill creatures to obtain the required items. The quest could also require the character to gather a number of different items. For example, to assemble a device.</td>
</tr>
<tr>
<td style="text-align:center">Escort quests</td>
<td style="text-align:left">The Escort quest is a combination of defeating creatures to protect a non-player character(s) all while investigating an area alongside that Non-player character (NPC). A normal escort quest would have the player defending a NPC as he, it (3rd,4th, etc gender), or she moves through a monster-infested area. Most of the time the quest will force the player to kill many monsters to ensure the well-being of the NPC. Escort quests can be beneficial, in making the playerâ€™s pay attention to a particular spot in order to play out a scene or reveal a section of the plot. They can also be used to transport a character from one location to another, leading the player along a route or path. However, problems with this type of quest can occur if the artificial intelligence controlling the NPC causes them to behave in unexpected or unmanageable ways. Because many of them are often done wrong, they are very unpopular among the gaming community. </td>
</tr>
<tr>
<td style="text-align:center">Syntax quests</td>
<td style="text-align:left">A phenomenon unique to text-based games, syntax quests depend on guessing the correct syntax to use to carry out a (typically simple) operation. For instance, arranging stone tablets in a certain order to make a picture or figuring out how to read the sentence and carrying out a certain action. It mostly involves arranging something in a certain order to figure out the meaning.</td>
</tr>
<tr>
<td style="text-align:center">Hybrids</td>
<td style="text-align:left">Parts of the above quest types can be put together to make more complex quests. For instance, a quest could need that the player locate the pieces needed to assemble a certain weapon or item (Gather Quest) and then use it to defeat a specific foe (Kill quest). Hybrid quests can also involve puzzles and riddles.</td>
</tr>
<tr>
<td style="text-align:center">Quest chains</td>
<td style="text-align:left">A quest chain is a group of quests that are completed in sequence they are also known as quest lines. Completion of each quest is a prerequisite to beginning the next quest in the chain. Quests usually heighten in toughness as a character goes further along the chain. The quests normally shows a single plotline in an order that explains the reason for the quests. Quest chains can also start with the opening or breadcrumb quests, in order to encourage characters to journey to a new area, where further elements of the quest chain are revealed. Through mechanisms like these, the setting of a particular location is explained to the player, with the plot or storyline being unveiled as the character progresses.</td>
</tr>
<tr>
<td style="text-align:center">Source:</td>
<td style="text-align:left"><a href="https://en.wikipedia.org/wiki/Quest_(video_gaming">https://en.wikipedia.org/wiki/Quest_(video_gaming</a>)</td>
</tr>
</tbody>
</table><h5 id="map-design"><a name="map-design" href="#map-design"></a>Map Design</h5><p>Map design can take up a lot of time. It is best to get quick ideas from generators. <a href="http://donjon.bin.sh/fantasy/dungeon/wallpaper.cgi">Donjon Dungeon Generator</a></p><p>Telling you how to design your map is almost impossible because there is no right way, but I will give basic tips.</p><table>
<thead>
<tr>
<th style="text-align:center">Tip</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Cludder</td>
<td style="text-align:left">Do not put too many objects on one map unless it is like a junk yard or something like that.</td>
</tr>
<tr>
<td style="text-align:center">Duplicate objects</td>
<td style="text-align:left">The same objects all over the place would look weird. The same flower pot appearing in a room 10 times would look unnatural.</td>
</tr>
<tr>
<td style="text-align:center">Spacing</td>
<td style="text-align:left">Try to keep decent space when making a map. For example, one will want to get around the chair.</td>
</tr>
<tr>
<td style="text-align:center">Larger Rooms</td>
<td style="text-align:left">Small rooms are okay for houses, but in main locations they should be a bit more complex. For example, a square room after every door might get boring.</td>
</tr>
<tr>
<td style="text-align:center">Outline</td>
<td style="text-align:left">One should outline the map with basic tiles first because if one were to change things later after mapping, then it might look bad or a lot of things might need to be moved around. A complete map redesign can be needed in some cases when a change is decided.</td>
</tr>
<tr>
<td style="text-align:center">Doors</td>
<td style="text-align:left">Doors are always good to have because there is just that wonder of what is on the other side. Having the door locked is even better because it is like a forbidden special place.</td>
</tr>
<tr>
<td style="text-align:center">Plant Life</td>
<td style="text-align:left">Plant life (EX: Vines) around windows and other places can make maps look natural and not so plain.</td>
</tr>
<tr>
<td style="text-align:center">Stairs</td>
<td style="text-align:left">Going up to another level or floor can be as exciting as opening a door. What is up there? A stairway that is blocked can be more interesting.</td>
</tr>
<tr>
<td style="text-align:center">Hidden Floors</td>
<td style="text-align:left">Finding hidden floors can make the hero feel special and enjoy exploring the map more.</td>
</tr>
<tr>
<td style="text-align:center">World Name</td>
<td style="text-align:left">The world having a name can help you with your map organization. You do not want to get lost in over 100 maps.</td>
</tr>
<tr>
<td style="text-align:center">Challenging</td>
<td style="text-align:left">Getting through a map too easily can be a drag! Make it at least a little tough or have some locations that can be seen, so the player will not want to leave the map as soon as possible.</td>
</tr>
<tr>
<td style="text-align:center">Heal Spots</td>
<td style="text-align:left">Having spots to rest and people there to give one information is good way to not make a player mad while playing the game.</td>
</tr>
</tbody>
</table><h5 id="map-examples-legend"><a name="map-examples-legend" href="#map-examples-legend"></a>Map Examples Legend</h5><p>Border:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/border.png" alt="map_design_donjon/legend/border.png)"></p><p>Room:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/walk_way.png" alt="map_design_donjon/legend/walk_way.png"></p><p>Down Stairs:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/down_stairs.png" alt="map_design_donjon/legend/down_stairs.png"></p><p>Up Stairs:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/up_stairs.png" alt="map_design_donjon/legend/up_stairs.png"></p><p>Closed Door:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/locked_door.png" alt="map_design_donjon/legend/locked_door.png"></p><p>Monster door:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/monster_door.png" alt="map_design_donjon/legend/monster_door.png"></p><p>No door way:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/no_door_way.png" alt="map_design_donjon/legend/no_door_way.png"></p><p>One way in door:</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/legend/one_way_door.png" alt="map_design_donjon/legend/one_way_door.png"></p><p><strong>Map Examples:</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/map_examples/Game_Design_1_Chapter_map.png" alt="map_design_donjon/map_examples/Game_Design_1_Chapter_map.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/map_examples/Game_Design_2_Chapter_map.png" alt="map_design_donjon/map_examples/Game_Design_2_Chapter_map.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/map_examples/Game_Design_3_Chapter_map.png" alt="map_design_donjon/map_examples/Game_Design_3_Chapter_map.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/map_examples/Game_Design_4_Chapter_map.png" alt="map_design_donjon/map_examples/Game_Design_4_Chapter_map.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/map_design_donjon/map_examples/Game_Design_5_Chapter_map.png" alt="map_design_donjon/map_examples/Game_Design_5_Chapter_map.png"></p><h5 id="dungeon-layout"><a name="dungeon-layout" href="#dungeon-layout"></a>Dungeon Layout</h5><ul>
<li>In a dungeon you start by finding the key item.</li><li>Paths to the item are blocked by locked doors.</li><li>A hero diverts from the main path to get keys to those locked doors.</li><li>The hero will find obstacles that you cannot pass without the key item.</li><li>Once the hero gets the key items, the hero can get to the boss key and door.</li><li>Some dungeons have places where the hero can get multiple keys at one time or require two keys for a door.</li><li>Dungeon maps are found quite early.</li><li>Dungeons have large areas to explore in a maze like order.</li><li>Dungeons sometimes have optional rooms for other items.</li><li>All other dungeons follow this pattern and repeat this pattern for more complex dungeons.</li></ul><p>You can check the video series <a href="https://youtu.be/fqKGl6exyyY">Boss Keys</a> for more information.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/dungeon%20layout.png" alt="Game_Design_Chapter_images/dungeon%20layout.png"></p><h5 id="sidescroller:-some-information"><a name="sidescroller:-some-information" href="#sidescroller:-some-information"></a>Sidescroller: Some Information</h5><p>Sidescrollers or Platformers are normally constant action and almost no dialog. The movement normally never stops and the player stomps on or fights enemies all the way. This type differs from an ARPG in many ways. An ARPG is normally based on exploration with a top-down view (under a 3/4 perspective) and a platformer is just a straight line most of the time. Sidescroller graphics are always a side camera view. Sidescrollers can be anything someone wants them to be though. Some people mix ARPG and sidescroller or make the sidescroller a journey instead of constant action.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Sidescroll_preview_images/Chapter_Game_design_Sidescroller_example_1.png" alt="Chapter_Game_design_Sidescroller_example_1.png"><br><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Sidescroll_preview_images/Chapter_Game_design_Sidescroller_example_2.png" alt="Chapter_Game_design_Sidescroller_example_2.png"></p><table>
<thead>
<tr>
<th style="text-align:left">Some Movements:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Jump</td>
</tr>
<tr>
<td style="text-align:left">Crouch</td>
</tr>
<tr>
<td style="text-align:left">Hover</td>
</tr>
<tr>
<td style="text-align:left">Run</td>
</tr>
<tr>
<td style="text-align:left">walk</td>
</tr>
<tr>
<td style="text-align:left">Look up</td>
</tr>
<tr>
<td style="text-align:left">Pound</td>
</tr>
<tr>
<td style="text-align:left">Push</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th style="text-align:left">Random Feature Dump:</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Bouncers</td>
<td style="text-align:left">A object that makes the player jump higher when it is jumped on.</td>
</tr>
<tr>
<td style="text-align:left">Speed Objects</td>
<td style="text-align:left">Objects that change speed on impact.</td>
</tr>
<tr>
<td style="text-align:left">Floating Objects</td>
<td style="text-align:left">They are floating objects in the air.</td>
</tr>
<tr>
<td style="text-align:left">Growing Objects</td>
<td style="text-align:left">This object grows when something is planted. Normally a seed that grows a giant plant. That way the player can climb or walk up it.</td>
</tr>
<tr>
<td style="text-align:left">Falling Tile Breaker</td>
<td style="text-align:left">Giant falling objects or NPC that break tiles.</td>
</tr>
<tr>
<td style="text-align:left">Locked Doors</td>
<td style="text-align:left">The player needs to find the key to unlock the door.</td>
</tr>
<tr>
<td style="text-align:left">Blockades</td>
<td style="text-align:left">Objects that slow down the player. For example, spikes along a path. The player would need to jump carefully onto something to avoid damage.</td>
</tr>
<tr>
<td style="text-align:left">Secret Rooms/shortcuts</td>
<td style="text-align:left">A quick shortcut on a hard to get to part of the map that allows all bonuses + beat the level without much effort or a mini game in a secret area.</td>
</tr>
<tr>
<td style="text-align:left">Invisible Sections</td>
<td style="text-align:left">These areas of the map only appear when they are hit or touched.</td>
</tr>
<tr>
<td style="text-align:left">Object Growth</td>
<td style="text-align:left">Objects that get bigger when they are hit or touched.</td>
</tr>
<tr>
<td style="text-align:left">Floating Points</td>
<td style="text-align:left">Objects that float in the air. If they are hit, then the player gets a number point value or some kind of bonus.</td>
</tr>
<tr>
<td style="text-align:left">Flying Mode</td>
<td style="text-align:left">Allows the player to fly.</td>
</tr>
<tr>
<td style="text-align:left">Digging Mode</td>
<td style="text-align:left">Allows the player to dig.</td>
</tr>
<tr>
<td style="text-align:left">Travel Up Wall Mode</td>
<td style="text-align:left">Allows the player to climb up wall.</td>
</tr>
<tr>
<td style="text-align:left">Underwater Mode</td>
<td style="text-align:left">Allows the player to swim and breath under water.</td>
</tr>
<tr>
<td style="text-align:left">Super Mode</td>
<td style="text-align:left">The ability to walk up walls, be immortal, and destroy enemies faster by just walking into them. Super mode does not last long.</td>
</tr>
<tr>
<td style="text-align:left">Animated Backgrounds</td>
<td style="text-align:left">A background that animates.</td>
</tr>
<tr>
<td style="text-align:left">Checkpoints</td>
<td style="text-align:left">The player will go back to this point if the mission is failed or death occurs.</td>
</tr>
<tr>
<td style="text-align:left">Falling Walls</td>
<td style="text-align:left">The walls slam down. Most likely causes damage.</td>
</tr>
<tr>
<td style="text-align:left">Turning Spikes</td>
<td style="text-align:left">Spikes that turn on a wheel. The player normally has to avoid this obstacle by running at the right time.</td>
</tr>
<tr>
<td style="text-align:left">Jumping Enemies</td>
<td style="text-align:left">Enemies that can jump.</td>
</tr>
<tr>
<td style="text-align:left">Hidden Giants</td>
<td style="text-align:left">Giant creatures coming out of liquid like elements.</td>
</tr>
<tr>
<td style="text-align:left">Balance Beam</td>
<td style="text-align:left">This is a platform that the player stands on or jumps on. One edge of a platform will tilt or tilt back if the player goes to the other edge. The platform normally stays balanced when the player stands in the middle.)</td>
</tr>
<tr>
<td style="text-align:left">Projectile Ricochet</td>
<td style="text-align:left">The projectile bounces off walls or other objects.</td>
</tr>
<tr>
<td style="text-align:left">Unlimited Ammo</td>
<td style="text-align:left">No limit for projectiles that can be fired.</td>
</tr>
<tr>
<td style="text-align:left">Scrolling Object/Scene</td>
<td style="text-align:left">The scene follows behind the player preventing the player from going back or if the scene catches up with the player, then death occurs. Furthermore, this scrolling can involve an object that only makes a pass once and it will not come back after the player uses it. This prevents the player from using it again to go back.</td>
</tr>
<tr>
<td style="text-align:left">Wheel On Wire</td>
<td style="text-align:left">A wheel that moves on a wire when it is jumped on. There would normally be edges on the wheel for the player.</td>
</tr>
<tr>
<td style="text-align:left">Falling Platform</td>
<td style="text-align:left">This would be platform or bridges that falls after a certain amount of time standing on it or just by touching it.</td>
</tr>
<tr>
<td style="text-align:left">Enemy Pole Obstacle</td>
<td style="text-align:left">An enemy on an object to prevent the player character from jumping on it.</td>
</tr>
<tr>
<td style="text-align:left">Rollers</td>
<td style="text-align:left">Enemies that turn into balls and roll. Sometimes they can be used to kill other enemies.</td>
</tr>
<tr>
<td style="text-align:left">Zigzag Flayers</td>
<td style="text-align:left">Floating enemies that move in a zigzag pattern.</td>
</tr>
<tr>
<td style="text-align:left">Distort Object</td>
<td style="text-align:left">Enemies or items that make the screen wave, wiggle, and distort.</td>
</tr>
<tr>
<td style="text-align:left">Rubbery platforms</td>
<td style="text-align:left">Platforms that wiggle like rubber.</td>
</tr>
<tr>
<td style="text-align:left">Rolling Tubes</td>
<td style="text-align:left">Tubes that the player can hide in and roll over enemies. Sometimes barrels or logs are used for this.</td>
</tr>
<tr>
<td style="text-align:left">Enemy Platform</td>
<td style="text-align:left">This platform is an enemy. Normally used to trick the player when they are not paying attention.</td>
</tr>
<tr>
<td style="text-align:left">Spiked Platforms</td>
<td style="text-align:left">The platform flips once a switch is hit. Normally the platform is in a position that the player cannot jump on until the switch is flipped or the next platform will not flip.</td>
</tr>
<tr>
<td style="text-align:left">Double Spiked Platforms</td>
<td style="text-align:left">Two platforms flip at the same time once a switch is hit. Normally timed and they have spikes on one side.</td>
</tr>
<tr>
<td style="text-align:left">Point/Bonus Trap</td>
<td style="text-align:left">Objects that have enemies pop out of moving/stationary points.</td>
</tr>
<tr>
<td style="text-align:left">Temporary Flying creatures</td>
<td style="text-align:left">Flying creatures that fall once they are knocked on the head. Normally they do not regain their flight ability.</td>
</tr>
<tr>
<td style="text-align:left">Falling Stones</td>
<td style="text-align:left">Falling stones are a common trap.</td>
</tr>
<tr>
<td style="text-align:left">Falling Block Game</td>
<td style="text-align:left">Kinda like a falling block pattern game, but the blocks are huge and can kill the player.</td>
</tr>
<tr>
<td style="text-align:left">Allied Creature</td>
<td style="text-align:left">A creature that can run down and kill enemies.</td>
</tr>
<tr>
<td style="text-align:left">Projectile Thieves</td>
<td style="text-align:left">These enemies steal projectiles.</td>
</tr>
<tr>
<td style="text-align:left">Enemy Ghosts</td>
<td style="text-align:left">Enemies that sleep when you look at them (immortal at this point)and awake you are not looking. Normally a projectile needs to be bounced off a wall to kill them.</td>
</tr>
<tr>
<td style="text-align:left">Enemy Boo!</td>
<td style="text-align:left">These enemies jump out of hidden locations.</td>
</tr>
<tr>
<td style="text-align:left">Flame Wheels</td>
<td style="text-align:left">Wheels that move and have flames on them.</td>
</tr>
<tr>
<td style="text-align:left">Bombers</td>
<td style="text-align:left">Enemies that drop bombs from the sky.</td>
</tr>
<tr>
<td style="text-align:left">Defenders</td>
<td style="text-align:left">Enemies with shields. The shield has to be destroyed first or another strike is needed.</td>
</tr>
<tr>
<td style="text-align:left">Sign Tips</td>
<td style="text-align:left">Signs to help direct the player.</td>
</tr>
<tr>
<td style="text-align:left">Popping Platforms</td>
<td style="text-align:left">Platforms that blow up after being stood on for a few seconds.</td>
</tr>
<tr>
<td style="text-align:left">Giant Bullets</td>
<td style="text-align:left">Random giant bullets that fly in one direction.</td>
</tr>
<tr>
<td style="text-align:left">Sticky ceiling</td>
<td style="text-align:left">The player gets stuck on the ceiling for a few seconds.</td>
</tr>
<tr>
<td style="text-align:left">Movable Objects</td>
<td style="text-align:left">Objects that can be pushed and moved into ditches or other places to help the player cross.</td>
</tr>
<tr>
<td style="text-align:left">Fancy Exit</td>
<td style="text-align:left">There is a fancy explosion or sparkles when the player passes a level.</td>
</tr>
<tr>
<td style="text-align:left">Multi-jump Switch</td>
<td style="text-align:left">A switch that has to be jumped or slammed on multiple times in order for it to activate.</td>
</tr>
<tr>
<td style="text-align:left">Stomp Enemies</td>
<td style="text-align:left">An enemy that dies when stomped or jumped on.</td>
</tr>
</tbody>
</table><h5 id="basic-story-making\genre"><a name="basic-story-making\genre" href="#basic-story-making\genre"></a>Basic Story Making\Genre</h5><p>Genre is the term for any category of entertainment. Pick the genre you like most. I will only being adding genre I like to the book, so check Wiki for more and greater detail into ones I listed. I will add this to the github. <a href="https://en.wikipedia.org/wiki/List_of_genres">https://en.wikipedia.org/wiki/List_of_genres</a></p><table>
<thead>
<tr>
<th style="text-align:center">Genre</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Action Adventure</td>
<td style="text-align:left">Journeys to places and gets through obstacles along way. Normally fighting enemies, making an escape, and saving people.</td>
</tr>
<tr>
<td style="text-align:center">Fantasy</td>
<td style="text-align:left">A fantasy story is about magic or supernatural forces. </td>
</tr>
<tr>
<td style="text-align:center">Horror</td>
<td style="text-align:left">A horror story is told to scare or frighten the people. Normally with suspense, shock and/or violence.</td>
</tr>
<tr>
<td style="text-align:center">Mystery</td>
<td style="text-align:left">A mystery story is normally about someone attempting to solve a puzzle. </td>
</tr>
<tr>
<td style="text-align:center">Science fiction</td>
<td style="text-align:left">Centered around technology (computers and machines), universes space/time travel, aliens, and genetic manipulation. EX: Steampunk, cyberpunk, and clockpunk. Science fiction is mixed a lot in future eras and time travel.</td>
</tr>
</tbody>
</table><h5 id="the-plot"><a name="the-plot" href="#the-plot"></a>The Plot</h5><p>One has to know what the genre will be and what their hero or villain does. The hero does not always have to be the good guy and can do good or bad deeds in a story. </p><table>
<thead>
<tr>
<th style="text-align:left">Quick Plot Example:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">The hero Froyotay Grayerv sets out to destroys a peaceful advanced alien race because their touch can make humans immortal, but result in a mutated virus that makes humans unable to breed. He must fight to the death and find a way to rid himself of the curse that has been brought on by the mutation or else he will never be able to go home to his planet Dexerath.</td>
</tr>
</tbody>
</table><p><strong>Sample Plots:</strong></p><p>The table of plots below has 36 rows, one for each of Poltiâ€™s canonical plots, and 4 columns. The first column is the plot number. The second column is the plot name. The third column lists the important actors and/or elements in the plot. And the fourth column includes one or more brief plot summaries, of no more than a single paragraph.</p><p><strong>Note:</strong> â€œPC(s)â€ stands for â€œPlayer Character(s).â€</p><table>
<thead>
<tr>
<th style="text-align:center">No.</th>
<th style="text-align:center">Plot Name</th>
<th style="text-align:left">Actors and Elements</th>
<th style="text-align:left">Brief Plot Summary</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">Supplication</td>
<td style="text-align:left">a.Persecutor b.Supplicant c.Power in Authority</td>
<td style="text-align:left">Under persecution, a village sends out emissaries to the local lord, who is not known for his kindness, to beg for relief from bandits. They are harassed by the bandits along the way.</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">Deliverance</td>
<td style="text-align:left">a.Unfortunates b.Threatener c.Rescuer</td>
<td style="text-align:left">Bandits have been preying on a village and threaten to burn its crops. Come save the village and destroy the bandits.</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">Revenge</td>
<td style="text-align:left">a.Righteous-Avenger b.Criminal</td>
<td style="text-align:left">A PCâ€™s sibling has been killed accidentally in a raid. His wife refuses to accept the rule of law, which states that she should accept a weregeld for him. She involves several PCs in her plotting to totally annihilate the family of the killer, including parents, siblings, children, and siblingsâ€™ children.</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">Vengeance by Family upon Family</td>
<td style="text-align:left">a.Avenging-Kinsman b.Guilty Kinsman c.Relative</td>
<td style="text-align:left">One of a PCâ€™s kin killed another in confused circumstances. Whether it was accidental or not is unclear. The head of the family makes the killer responsible for supporting the bereaved spouse and children. But the widowed spouse is unwilling to accept aid from a fratricide, and involves PCs in plots to destroy the new guardian.</td>
</tr>
<tr>
<td style="text-align:center">5</td>
<td style="text-align:center">Pursuit</td>
<td style="text-align:left">a.Fugitive b.Pursuer</td>
<td style="text-align:left">A madman wanders into town, raving about the monsters that pursue him and his poor, lost love. He is obviously high born, and needs to be taken in. A few days later a squad of pursuers arrives, to find and arrest him for crimes against humanity and his own family, led by his advisor whose advice drove him quite mad, to this awful juncture. Imagine this as a sequel to Othello, with a jealous Iago pursuing tragic Othello to bring him back to justice.</td>
</tr>
<tr>
<td style="text-align:center">6</td>
<td style="text-align:center">Victim of Cruelty or Misfortune</td>
<td style="text-align:left">a.Unfortunates b.Indifferent or Cruel Master</td>
<td style="text-align:left">A cruel but effective noble is disgraced after an intrigue and loses his titles, possessions and lands to an equally cruel rival. He has been banished and blinded, and is wandering, alone, without followers, pitiful, when he encounters the PCs.</td>
</tr>
<tr>
<td style="text-align:center">7</td>
<td style="text-align:center">Disaster</td>
<td style="text-align:left">a.Vanquished-Power b.Victorious-Power c.Messenger</td>
<td style="text-align:left">The country has been invaded and the flower of this countryâ€™s knighthood has been slain. The army of the enemy is advancing, burning fields and robbing and murdering the peasants. Run for your lives!</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">Revolt</td>
<td style="text-align:left">a.Tyrant b.One or more Conspirators</td>
<td style="text-align:left">A well-respected noble enlists the PCs to assist in a plot to overthrow his own lord and usurp his position. His intentions seem respectable at first, but grow murkier with time.</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">Daring Enterprise</td>
<td style="text-align:left">a.Goal b.Bold Leader c.Adversary</td>
<td style="text-align:left">Raikiela is an artist, and has promised her masterpiece to the prince. Unfortunately, her friend showed the masterpiece to a foreign noble, who desired it and took it without permission. Without starting a war, the PCs must organize an expedition to get the masterpiece back from the foreigner and to the prince.</td>
</tr>
<tr>
<td style="text-align:center">10</td>
<td style="text-align:center">Abduction</td>
<td style="text-align:left">a.Abductor b.Abducted c.Guardian</td>
<td style="text-align:left">Pitolso is in love with Kareta, and Kareta is in love with Pitolso. Pitolso enlists the PCs to help steal Kareta away from those who would keep Kareta for themselves. They must abduct Kareta without killing anybody and thus rousing the implacable forces of justice. Kidnapping? No, rather liberating the love from those who have imprisoned him/her.</td>
</tr>
<tr>
<td style="text-align:center">11</td>
<td style="text-align:center">Mystery or Enigma</td>
<td style="text-align:left">a.Interrogator b.Seeker c.Problem</td>
<td style="text-align:left">Fandolio has fallen in love with Ilsentosa, the princess and heir to the throne, and she has announced that if he wants to win her love then he must promise to solve her riddle, and if he cannot solve her riddle then he must die. He has accepted the deal, and enlists the PCs to help him find the solution. The riddle isâ€¦</td>
</tr>
<tr>
<td style="text-align:center">12</td>
<td style="text-align:center">Obtaining</td>
<td style="text-align:left">a.Goal b.Several Opposed Groups c.Judge or Referee</td>
<td style="text-align:left"><strong>1.</strong>Itâ€™s time for the Spring Pageant! The maidens engage in contests to see who is the most beautiful, the most religious, the most knowledgeable about lineage, and the most charming speaker. The contest is judged by former Year Queens. The winner is crowned the Year Queen and gets to marry the Great Hunter! <br><br><strong>2.</strong>Itâ€™s time for the Great Hunt! Unmarried men are able to enter the contest. Each contestant must go out into the wild with only a knife, a spear, and a bow and arrow, no armor. Come back with the best catch, alive if possible. The contest will be judged by former winners of the Great Hunt. The winner is crowned the Great Hunter and gets to marry the Year Queen.</td>
</tr>
<tr>
<td style="text-align:center">13</td>
<td style="text-align:center">Familial Hatred</td>
<td style="text-align:left">a.Two or more Family members who hate each other</td>
<td style="text-align:left">A PCâ€™s brother hates his sisterâ€™s husband, whom he sees as a whimpering syncophant. The brother-in-law in turn sees the PCâ€™s brother as a cruel bully. The PCâ€™s brother has told the PC in private, after swearing him to secrecy, that he has taken a vow to kill his brother-in-law.</td>
</tr>
<tr>
<td style="text-align:center">14</td>
<td style="text-align:center">Familial Rivalry</td>
<td style="text-align:left">a.Preferred Kinsman b.Rejected Kinsman c.Object</td>
<td style="text-align:left">One of the player characters and his step-brother Joli, a friendly sort of guy, have both been taken as lovers by the same merchantâ€™s wife, who hides the affairs from her husband, encourages both lovers, and makes them intrigue against each other and her husband, at the same time planting seeds of suspicion in her husband, who is very jealous.</td>
</tr>
<tr>
<td style="text-align:center">15</td>
<td style="text-align:center">Murderous Adultery</td>
<td style="text-align:left">a.Adulterer b.Cuckold c.Adultererâ€™s Lover</td>
<td style="text-align:left">A married friend begins to have an adulterous affair with a mysterious woman. This gives him new zest for life. Then his wife disappears, and the rumors start. A week later, the PCs are accosted by her ghost, demanding proper burial for her missing body (she doesnâ€™t know where it is) and vengeance on the adulterers. Try not to get framed for her murder along the way.</td>
</tr>
<tr>
<td style="text-align:center">16</td>
<td style="text-align:center">Madness</td>
<td style="text-align:left">a.Madman b.Victim</td>
<td style="text-align:left"><strong>1.</strong>The local hospital begins to be the site of strange, horrible, unexplained deaths. Then a PCâ€™s relative dies from a minor ailment. Octara, one of the healers at the hospital has gone mad, and sometimes, for some insane reason, slays her patients instead of healing them. Usually Octara appears to be perfectly normal and sane.<br><br><strong>2.</strong>The Bloody Bull, the PCsâ€™ favorite tavern, and Azracon their favorite tavern-keeper, have been there for years, serving them good food and drink. One day Azracon changes the sign to a Happy Horse and brings two horses in and seats them at tables. Within a week, all the rooms are full of horses that he has purchased. Within another week, you cannot get a place at his tables because the entire tavern is full of horses. Then Azracon announces to everyone on the street that he is going to marry Pythalda, the most beautiful maid in the world, and is looking for a seamstress to sew a horse-sized and horse-shaped wedding dress.<br><br>orâ€¦<br><br><strong>3.</strong>The Bachelor Prince Prophoc has always been a keen horseman. Then one day he decides to seat his favorite horse at the dinner table, displacing a foreign dignitary. This is a terrible scandal. A week or so later, Prophoc holds a dinner at which he serves all sorts of roasted delicacies to over a score of horses, and in a rage he kills a horse trainer who complains that the horses wonâ€™t and canâ€™t eat the food. Soon the princeâ€™s mansion and grounds are filled with horses, and taxes are assessed to pay for the drain on the treasury. The people of the city are about to rise and overthrow him, when he declares that he has fallen in love, and that he will marry. There is much rejoicing, and it seems that things have gotten better, since the number of horses in the princeâ€™s mansion falls to normal levels. Then, on the wedding day, he forces the cityâ€™s high priest, with death the penalty for refusal, to marry him to his favorite white mare.</td>
</tr>
<tr>
<td style="text-align:center">17</td>
<td style="text-align:center">Fatal Imprudence</td>
<td style="text-align:left">a.Imprudent Person b.Lost Object c.Victim</td>
<td style="text-align:left">A character known to the player characters, and which we recommend be one of the PCs, has a famous item, which may or may not be magical. A curious family member was playing with it, took it out of the house, and carried it around for a while, gradually growing bored of it, and after being attracted to some unusual noise and then frightened by seeing something s/he shouldnâ€™t have seen, drops the item and runs home, where s/he is found later, shivering in fear. The guard finds the famous item at the scene of a horrifying murder, and as a result the PC becomes the main suspect.</td>
</tr>
<tr>
<td style="text-align:center">18</td>
<td style="text-align:center">Involuntary Crimes of Love</td>
<td style="text-align:left">a.Lover b.Beloved c.Revealer</td>
<td style="text-align:left">Bonchanto, a friendly but mischievous acquaintance of one of the PCs, introduces him to Demice, a beautiful young woman of respectable family, who has much in common with the PC, but takes some pains to make sure that the PC doesnâ€™t meet Demiceâ€™s parents. At the same time he offers to act as a go-between for the lovers. He arranges for them to meet in secret several times. Soon thereafter he leaves town. Then a letter from Bonchanto arrives at Demiceâ€™s home, and all hell breaks loose. Her parents come down on the PC like a ton of bricks. Hereâ€™s whyâ€¦ Nearly 20 years ago, Demiceâ€™s supposed parents couldnâ€™t bear children of their own, and so they asked the PCâ€™s parents to adopt one of their children. This wish was granted. The PC has taken his own sister as his lover!</td>
</tr>
<tr>
<td style="text-align:center">19</td>
<td style="text-align:center">Kinsman Kills Unrecognised Kinsman</td>
<td style="text-align:left">a.Killer b.Unrecognized Victim c.Revealer</td>
<td style="text-align:left">Politics are getting nasty again, and the loyal opposition have a hooded leader who has been rabble rousing against the main PCâ€™s family interests with some effect. One of the PCs is dispatched to a meeting with the secretive leader to try to negotiate or force a solution. Negotiations are not going well, when the city forces decide on that time to raid the meeting and frame or kill the secret leader. They give the secret signal to the PC, the signal to withdraw, and when this happens the secret leader suddenly starts fighting to reach the PC, shouting loudly with his sword flashing wildly. No matter what the PC does, whether the secret leader is rescued or not, whether he is killed or arrested (if the PC does nothing the masked one will be killed in the fracas), when he is unmasked he will be found to be the PCâ€™s adoring younger brother.</td>
</tr>
<tr>
<td style="text-align:center">20</td>
<td style="text-align:center">Self Sacrifice for an Ideal</td>
<td style="text-align:left">a.Ideal b.Hero c.Person or Thing Sacrificed</td>
<td style="text-align:left">After declaring that only through sacrifice will our land embody IDEAL, a very well respected and loved elderly couple throw themselves onto a bonfire (with spectacular but unclear magical consequences). This would work best if the elders were either priests at a temple the PCs attend, or grandparents or parents of one or more of the PCs. The authorities, ignorant of the planned sacrifice, will have already dispatched troops to break up the gathering and arrest the leaders.</td>
</tr>
<tr>
<td style="text-align:center">21</td>
<td style="text-align:center">Self Sacrifice for Kindred</td>
<td style="text-align:left">a.Hero b.Kinsman c.Person or Thing Sacrificed</td>
<td style="text-align:left">Mideratho has always been a short-breathed, wimpy, genius. He can understand the workings of mechanisms like nobodyâ€™s business, and has even invented his own minor sorcerous cantrip to better play with mechanical creations. To his misfortune his parents wish to have a war hero as a son. In order to make his parents happy, Mideratho joins the most hazardous duty military unit he can, and must now learn to fight. Does he lose his sight or a hand in combat? Does he get killed? Can the PCs train him well enough so he can survive? Will he ever get to work on mechanisms again?</td>
</tr>
<tr>
<td style="text-align:center">22</td>
<td style="text-align:center">All Sacrificed for Passion</td>
<td style="text-align:left">a.Hero b.Object of Passion c.Person or Thing Sacrificed</td>
<td style="text-align:left">The Bachelor Prince Santus, the greatest general the land has had in a generation, has conquered two neighboring states by the age of 18, but has been otherwise sheltered from life. He falls in love with Oclea, a prostitute hired by the terrible King Rometradi to seduce him, and completely loses interest in war and his principality, except as a tool which he will spend freely to capture Oclea (who may like him or may despise him, signals are mixed) from Rometradiâ€™s land. And worse, he declares he will marry her and make her the queen, and if he canâ€™t then he will abdicate his throne to Aelus, his idiot brother.</td>
</tr>
<tr>
<td style="text-align:center">23</td>
<td style="text-align:center">Sacrifice of Loved One</td>
<td style="text-align:left">a.Hero b.Beloved Victim c.Cause for Sacrifice</td>
<td style="text-align:left">Politics are getting nasty again, and the loyal opposition have a hooded leader who has been rabble rousing against the main PCâ€™s family interests with some effect. The PC discovers, perhaps he is told by his parent, that the hooded leader is his own, adoring, younger brother Antigoly. The PC is dispatched to a meeting with Antigoly to try to negotiate or force a solution. After the initial meeting fails, the PC is told to do whatever it takes to stop the enemy movement. At the same time, city officials inquire about the location of the enemy leader, and place a bounty on his head. Antigoly refuses to meet with or speak to his family and their agents, including the PCs.</td>
</tr>
<tr>
<td style="text-align:center">24</td>
<td style="text-align:center">Rivalry Between Superior and Inferior</td>
<td style="text-align:left">a.Superior b.Inferior c.Object</td>
<td style="text-align:left"><strong>1.</strong>Suddenly Stranoc the Guiding Hand, the most learned magical adept of the land, is at magical war with his oldest friend and former student Vulfus the Black Spider over possession of ARTIFACT. The PCs, who have dealt with both, have no choice. They are involved without their own consent, and must deal with all manner of horrible monstrosities as they attempt to survive, save their friends and families, and get out of town.<br><br><strong>2.</strong>Rivalry of Two Peoples: Referring back to plot 10, the land was recently conquered by a foreign people, and the High Lord sees the opportunity to marry Kareta to Frusta, a noble of his own people, as a way to legitimize the conquest. He will not give his approval to Kareta and Pitolso, who has kidnapped Kareta heedless of the consequences. Frusta sees her abduction as an opportunity to rescue her from bandits and thus prove his worth in her eyes.</td>
</tr>
<tr>
<td style="text-align:center">25</td>
<td style="text-align:center">Adultery</td>
<td style="text-align:left">a.Deceived Spouse b.Adulterer c.Adultererâ€™s Lover</td>
<td style="text-align:left"><strong>1.</strong>Thossuleo sends his wife, Fonya, to visit her family, sells most of his stuff, and goes wild buying baubles for a beautiful young girl, Crotia, who may or may not care for him. She is happy to accept his gifts, however.<br><br><strong>2.</strong>Thossuleo loves his wife, Fonya, very much. Then the persecution from Crotiadek, a noble and judge, begins. Thossuleo loses money, status, and finally his freedom. After he is jailed his wife divorces him and moves into Crotiadekâ€™s home.</td>
</tr>
<tr>
<td style="text-align:center">26</td>
<td style="text-align:center">Crimes of Love</td>
<td style="text-align:left">a.Lover b.Beloved c.theme of Dissolution</td>
<td style="text-align:left">Procsoutia falls in love with her twin sons Abon and Aromed, and causes them to lay with her. The results of these matings are monstrous and terrible.</td>
</tr>
<tr>
<td style="text-align:center">27</td>
<td style="text-align:center">Discovery of Dishonor of a Loved One</td>
<td style="text-align:left">a.Guilty Beloved b.Discoverer</td>
<td style="text-align:left"><strong>1.</strong>Lyclus and Lia are very proud of their successful daughter Linbaria. Then evidence is found that she has been an assassin working for an evil noble.<br><br><strong>2.</strong>Linbaria is very proud of her parents Lyclus and Lia. Then she discovers evidence that Lia had once been a prostitute. Even worse, the evidence indicates that Lia has returned to her former profession in secret.</td>
</tr>
<tr>
<td style="text-align:center">28</td>
<td style="text-align:center">Obstacles to Love</td>
<td style="text-align:left">a.Lover 1 b.Obstacles c.Lover 2</td>
<td style="text-align:left"><strong>1.</strong>Nymus and Teropha are terribly in love with each other. However, because of their incompatible temperaments every time they make plans to marry they get in a huge fight and end up calling off the engagement. Every time they do this they involve all their friends and end up getting mad at all of them.<br><br><strong>2.</strong>Nymus and Teropha are terribly in love with each other. However, their parents do not approve, and have both placed very difficult requirements (quests) upon their childrenâ€™s beloved. In order to marry, Nymus must give Terophaâ€™s parents a sieve full of Styx water, and Teropha must produce a wedding dress made of purest starlight.</td>
</tr>
<tr>
<td style="text-align:center">29</td>
<td style="text-align:center">An Enemy Loved</td>
<td style="text-align:left">a.Beloved Enemy b.Lover c.Hateful Kinsman</td>
<td style="text-align:left">Montirkul and Pytha have fallen in love despite their families being at war. The greatest warriors in each of the families are Katal and Shokalmor, whose bitter rivalry will destroy the lovers and tear their families apart.</td>
</tr>
<tr>
<td style="text-align:center">30</td>
<td style="text-align:center">Ambition</td>
<td style="text-align:left">a.Ambitious Person b.Coveted Object c.Adversary</td>
<td style="text-align:left"><strong>1.</strong>Fleon is an ambitious general who desires to rule the city and establish a royal line. His wife, Paria, acts as his conscience and to stay his hand as he spins plots and dispatches troops to bring the mercantile and noble interests under his thumb. Finally, Fleon becomes the city chief consul, and has made enough powerful friends to change the charter of the city from a republic to a dictatorship, and Paria must act now if she would stem his ambition.<br><br><strong>2.</strong>Prince Mepilus wishes to become king, but his father, King Promanast, shows no sign of weakening, and even worse his older brother, Crown Prince Aphorphon, has been declared the heir apparent. Mepilus hatches a plan to have Aphorphon slay Promanast unknowingly, upon which terrible occasion Mepilus will declare martial law, avenge his father upon his brother, and take the crown of the city for his own.</td>
</tr>
<tr>
<td style="text-align:center">31</td>
<td style="text-align:center">Conflict with a God</td>
<td style="text-align:left">a.Mortal b.Immortal</td>
<td style="text-align:left"><strong>1.</strong>General Panmodon has been arrested, and when he is banished for his crimes he swears bloody vengeance on his home city and on the cityâ€™s patron god, Lys. He goes away and begins to gather horrible artifacts with the goal of using them to bring plague, war, and famine to the city and thus weaken Lys, so that he can finally destroy Lysâ€™s temple and slay the god itself.<br><br><strong>2.</strong>The Noble Sturix begins a persecution against the pacifist followers of a new god named Aes. He believes that their religion will lead to disobedience of the civic cult, rebellion against the civil authorities, famine, war, plague, and pestilence, and so he persecutes them vigorously, putting as many of them up on crosses as he can find.</td>
</tr>
<tr>
<td style="text-align:center">32</td>
<td style="text-align:center">Mistaken Jealousy</td>
<td style="text-align:left">a.Jealous One b.Object of Jealousy c.Supposed Accomplice d.Author of Mistake</td>
<td style="text-align:left"><strong>1.</strong>Medarion is baselessly jealous of his wife Clexia, and continues to grow more and more jealous of her. He persuades Hametrea to infiltrate her group of friends and search out her â€œmanyâ€ infidelities. Clexia has two doubles in the populace, one is a poor woman, and the other is a visiting youth who has disguised himself as a woman to hide from pursuers. Medarion himself has also has doubles, a sorceror with the visiting circus and his drooling idiot twin brother.<br><br><strong>2.</strong>Medarion discovers his wife Clexia is having an affair with his best friend, Promurtin. Medarion feigns ignorance, but encourages Promurtin to be jealous of Clexia by talking about how much Clexia speaks of her old friend Nantius, and how little she speaks of Promurtin. At the same time Medarion tells Clexia stories about how Promurtin has been seen about town with Nantius and a prostitute named Hametrea.</td>
</tr>
<tr>
<td style="text-align:center">33</td>
<td style="text-align:center">Faulty Judgement</td>
<td style="text-align:left">a.Mistaken One b.Victim of Mistake c.Author of Mistake d.Guilty Person</td>
<td style="text-align:left">Oulitarth has been consorting with prostitutes and in order to protect him from being disinherited by his very conservative family, his friend Taverion takes the blame. Taverionâ€™s wife, Marnasia, hears of this and leaves him.</td>
</tr>
<tr>
<td style="text-align:center">34</td>
<td style="text-align:center">Remorse</td>
<td style="text-align:left">a.Culprit b.Victim c.Interrogator</td>
<td style="text-align:left">Samarand has led a bad life, and now he is haunted by the ghosts of his misdeeds, which in reminding him of his crimes cause him incredible pain and terror. He finally has remorse, and while still haunted, begins to make some amends to his victims. Please help him with amends, and with the ghosts which terrorize him.</td>
</tr>
<tr>
<td style="text-align:center">35</td>
<td style="text-align:center">Recovery of a Loved One</td>
<td style="text-align:left">a.Seeker b.One Found</td>
<td style="text-align:left"><strong>1.</strong>Mantraeas learns from an oracle that his father, once thought dead, is still alive. Now he will seek his father out.<br><br><strong>2.</strong>Marnady learns from an oracle that she has a twin sister, and that this twin sister is still alive. She must seek her sister out and bring her home.</td>
</tr>
<tr>
<td style="text-align:center">36</td>
<td style="text-align:center">Loss of a Loved One</td>
<td style="text-align:left">a.Kinsman Slain b.Kinsman Witness c.Executioner</td>
<td style="text-align:left">Nyoquilat has taken a vow of chastity, and one day he comes home to the horrible sight of his family being slaughtered like sheep by horned raiders. He runs in to try and save them, and is beaten and left for dead, yet he lives. Now he asks for aid from any who would give it.</td>
</tr>
<tr>
<td style="text-align:center"><strong>Source:</strong></td>
<td style="text-align:center"><a href="https://www.rpglibrary.org/articles/storytelling/36plots.php"></a><a href="https://www.rpglibrary.org/">https://www.rpglibrary.org/</a></td>
<td style="text-align:left">The 36 Plots by Loren J. Miller</td>
<td style="text-align:left"><strong>CC-BY-SA 3.0</strong></td>
</tr>
</tbody>
</table><h5 id="title"><a name="title" href="#title"></a>Title</h5><p>The title should be made around the time of the plot. Most of the time it describes the story in few words. It should be something related to the genre in order to help people know what the story is about. I will take my quick plot from before and make a title.</p><table>
<thead>
<tr>
<th style="text-align:left">Quick Plot Example:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">The hero Froyotay Grayerv sets out to destroys a peaceful advanced alien race because their touch can make humans immortal, but result in a mutated virus that makes humans unable to breed. He must fight to the death and find a way to rid himself of the curse that has been brought on by the mutation or else he will never be able to go home to his planet Dexerath.</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th style="text-align:left">Title:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Froyotayâ€™s Space War: The Battle for Rebirth</td>
</tr>
</tbody>
</table><h5 id="characters"><a name="characters" href="#characters"></a>Characters</h5><p>Describe the hero, allies, and enemies.</p><table>
<thead>
<tr>
<th style="text-align:left">Template:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Name:</td>
</tr>
<tr>
<td style="text-align:left">Nickname:</td>
</tr>
<tr>
<td style="text-align:left">Occupation:</td>
</tr>
<tr>
<td style="text-align:left">Gender:</td>
</tr>
<tr>
<td style="text-align:left">Clothing:</td>
</tr>
<tr>
<td style="text-align:left">Meeting:</td>
</tr>
<tr>
<td style="text-align:left">Description:</td>
</tr>
<tr>
<td style="text-align:left">Birth:</td>
</tr>
<tr>
<td style="text-align:left">BMC (Before Magic Common Era) or MC (Magic Common Era)</td>
</tr>
<tr>
<td style="text-align:left">Age:</td>
</tr>
<tr>
<td style="text-align:left">Race:</td>
</tr>
<tr>
<td style="text-align:left">Audio Theme:</td>
</tr>
<tr>
<td style="text-align:left">Fight Audio:</td>
</tr>
<tr>
<td style="text-align:left">Attacks:</td>
</tr>
<tr>
<td style="text-align:left">Hair Type:</td>
</tr>
<tr>
<td style="text-align:left">Hair Color:</td>
</tr>
<tr>
<td style="text-align:left">Eye color:</td>
</tr>
<tr>
<td style="text-align:left">Ear Type:</td>
</tr>
<tr>
<td style="text-align:left">Skin Color:</td>
</tr>
<tr>
<td style="text-align:left">Handwear:</td>
</tr>
<tr>
<td style="text-align:left">Accessory Type:</td>
</tr>
<tr>
<td style="text-align:left">Accessory Color:</td>
</tr>
<tr>
<td style="text-align:left">Class:</td>
</tr>
<tr>
<td style="text-align:left">Height:</td>
</tr>
<tr>
<td style="text-align:left">Facial hair:</td>
</tr>
<tr>
<td style="text-align:left">Mouth:</td>
</tr>
<tr>
<td style="text-align:left">Skin:</td>
</tr>
<tr>
<td style="text-align:left">Deformities:</td>
</tr>
<tr>
<td style="text-align:left">Special marks:</td>
</tr>
<tr>
<td style="text-align:left">Favorite food:</td>
</tr>
<tr>
<td style="text-align:left">Favorite Drink:</td>
</tr>
<tr>
<td style="text-align:left">Favorite Color:</td>
</tr>
<tr>
<td style="text-align:left">Personality:</td>
</tr>
<tr>
<td style="text-align:left">Associations:</td>
</tr>
</tbody>
</table><h5 id="goals"><a name="goals" href="#goals"></a>Goals</h5><p>What are the characters trying to do? </p><ol>
<li><p>Save a princess? </p>
</li><li><p>Get revenge on the creatures that ate her family? </p>
</li><li><p>Take over the world/universe/galaxy?</p>
</li><li><p>Make the most powerful AI in the known existence?</p>
</li><li><p>Create the strongest genetically modified solder?</p>
</li><li><p>Save a race of aliens on a planet from a cyborg invasion?</p>
</li><li><p>Protect your kingdom from an invasion of spore monsters?</p>
</li><li><p>Be the greatest magic swords master that will ever live?</p>
</li><li><p>Create a dimensional parallel world machine to escape your doomed dimension?</p>
</li></ol><h5 id="story-flow-&amp;-outline"><a name="story-flow-&amp;-outline" href="#story-flow-&amp;-outline"></a>Story Flow &amp; Outline</h5><p>List the events that happen.</p><p>Jetarf family was eaten â€”â€”-&gt; he kills one of the aliens â€”â€”â€”â€”-&gt; gets the alien spaceship remodeled â€”â€”â€”â€”&gt; looks for a ship called, â€œ@#$@#%@@@!.. word in alien tongue.â€ </p><h3 id="outline-styles"><a name="outline-styles" href="#outline-styles"></a>Outline styles</h3><p><strong>Tips before getting into outlines:</strong></p><p>Outlining is a big part of game development. The second would be dialogue, but a lot of time the main character normally does not talk. The main difference between story writing and game writing is outline. What do I mean? The only thing needed to start the creation of a game is an outline and then simple dialogue or almost none at all. (Story writing is way more descriptive.) For example, an outline is needed to know how to make the artwork and what lands or kingdoms to set up. Also, names of the characters are needed and how they will look or what appeal type (Medieval or futuristic clothing?) they need. The type of outline depends on you.</p><h5 id="mind-mapping-software"><a name="mind-mapping-software" href="#mind-mapping-software"></a>Mind Mapping Software</h5><p>Bubble outlining is kinda like mind mapping I would normally do this on paper, but maybe others prefer differently. - Give thanks to Renkineko for mentioning mind mapping.</p><p><a href="https://wisemapping.atlassian.net/wiki/display/WS/Download">Wisemapping</a></p><p><a href="http://freemind.sourceforge.net/wiki/index.php/Main_Page">Freemind</a></p><p><a href="http://www.mindmaple.com/Default.aspx">MindMaple</a></p><h5 id="common-outline-styles"><a name="common-outline-styles" href="#common-outline-styles"></a>Common Outline Styles</h5><ul>
<li>Bubble outline</li></ul><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/Chapter_16_images/Chapter_16_bubble_outlining.png" alt="Chapter_16_images/Chapter_16_bubble_outlining.png"></p><ul>
<li>Cornell Note Style</li></ul><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/Chapter_16_images/Chapter_16_cornell_notes.png" alt="Chapter_16_images/Chapter_16_cornell_notes.png"></p><ul>
<li>Box and Arrow Style</li></ul><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/Chapter_16_images/Chapter_16_Box_Arrows.png" alt="Chapter_16_images/Chapter_16_Box_Arrows.png"></p><ul>
<li>Common Bullet Outlining</li></ul><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Game_Design_Chapter_images/Chapter_16_images/Chapter_16_common_bullet_outlining.png" alt="Chapter_16_images/Chapter_16_common_bullet_outlining.png"></p><h5 id="names"><a name="names" href="#names"></a>Names</h5><table>
<thead>
<tr>
<th style="text-align:left">To Name:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Items</td>
</tr>
<tr>
<td style="text-align:left">Towns</td>
</tr>
<tr>
<td style="text-align:left">Shops/buildings</td>
</tr>
<tr>
<td style="text-align:left">Paths/roads</td>
</tr>
<tr>
<td style="text-align:left">Forests/jungles/mountains/islands</td>
</tr>
<tr>
<td style="text-align:left">Characters</td>
</tr>
<tr>
<td style="text-align:left">Worlds</td>
</tr>
<tr>
<td style="text-align:left">Main Quests</td>
</tr>
<tr>
<td style="text-align:left">Optional quests</td>
</tr>
</tbody>
</table><h5 id="some-fictional-beings"><a name="some-fictional-beings" href="#some-fictional-beings"></a>Some Fictional Beings</h5><table>
<thead>
<tr>
<th style="text-align:left">Being</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Dwarves</td>
<td style="text-align:left">Short humanoid people. Usually, strong and good at crafting weapons of any kind.</td>
</tr>
<tr>
<td style="text-align:left">Elves</td>
<td style="text-align:left">A humanoid race with long ears. They live for 1000s of ears, are good archers, and are skilled with magic.</td>
</tr>
<tr>
<td style="text-align:left">Goblins</td>
<td style="text-align:left">Known as short greedy ugly creatures. Many countries have conflicting information about them. Some smart, dumb, magic, etc.</td>
</tr>
<tr>
<td style="text-align:left">Fairy</td>
<td style="text-align:left">Small humanoid creatures that use magic and are very smart.</td>
</tr>
<tr>
<td style="text-align:left">Vampire</td>
<td style="text-align:left">A humanoid that is immortal. They suck human blood and have super strength. Normally their heart needs to be damaged in order to kill them, but I think losing their head will work too.</td>
</tr>
<tr>
<td style="text-align:left">Dragon</td>
<td style="text-align:left">A giant lizard with wings. Normally it will breath fire, but there are different types of dragons. EX: Ice dragon and plant Dragons. One can shoot ice and the other acid.</td>
</tr>
<tr>
<td style="text-align:left">Demon</td>
<td style="text-align:left">A being of darkness that is known for corrupting and harming humans.</td>
</tr>
<tr>
<td style="text-align:left">Angel</td>
<td style="text-align:left">A being of light that is supposed to watch over and protect humans.</td>
</tr>
<tr>
<td style="text-align:left">Furries</td>
<td style="text-align:left">Any human cross bread with an animal. EX: A human with cat ears and a tail.</td>
</tr>
<tr>
<td style="text-align:left">Giants</td>
<td style="text-align:left">Super tall beings that can squish a human like a bug, but they are not all that tall. They are taller than the tallest human though. Some are elemental humanoids. Rock giant, ice giant, lava giant, ect.</td>
</tr>
<tr>
<td style="text-align:left">Werewolves</td>
<td style="text-align:left">Half man and wolf. Turns into a wolfman at a full moon, but some can change at will.</td>
</tr>
</tbody>
</table><h3 id="personality-list"><a name="personality-list" href="#personality-list"></a>Personality List</h3><h5 id="positive-traits"><a name="positive-traits" href="#positive-traits"></a>Positive Traits</h5><table>
<thead>
<tr>
<th style="text-align:left">Personality Traits:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Dramatic</td>
</tr>
<tr>
<td style="text-align:left">Steady</td>
</tr>
<tr>
<td style="text-align:left">Artful</td>
</tr>
<tr>
<td style="text-align:left">Dreamy</td>
</tr>
<tr>
<td style="text-align:left">Irreligious</td>
</tr>
<tr>
<td style="text-align:left">Unhurried</td>
</tr>
<tr>
<td style="text-align:left">Firm</td>
</tr>
<tr>
<td style="text-align:left">Proud</td>
</tr>
<tr>
<td style="text-align:left">Challenging</td>
</tr>
<tr>
<td style="text-align:left">Maternal</td>
</tr>
<tr>
<td style="text-align:left">Sharing</td>
</tr>
<tr>
<td style="text-align:left">Soft</td>
</tr>
<tr>
<td style="text-align:left">Confidential</td>
</tr>
<tr>
<td style="text-align:left">Impressive</td>
</tr>
<tr>
<td style="text-align:left">Benevolent</td>
</tr>
<tr>
<td style="text-align:left">Dynamic</td>
</tr>
<tr>
<td style="text-align:left">Dominating</td>
</tr>
<tr>
<td style="text-align:left">Mystical</td>
</tr>
<tr>
<td style="text-align:left">Capable</td>
</tr>
<tr>
<td style="text-align:left">Precise</td>
</tr>
<tr>
<td style="text-align:left">Ambitious</td>
</tr>
<tr>
<td style="text-align:left">Steadfast</td>
</tr>
<tr>
<td style="text-align:left">Modern</td>
</tr>
<tr>
<td style="text-align:left">Stoic</td>
</tr>
<tr>
<td style="text-align:left">Aspiring</td>
</tr>
<tr>
<td style="text-align:left">Cheerful</td>
</tr>
<tr>
<td style="text-align:left">Masculine</td>
</tr>
<tr>
<td style="text-align:left">Secure</td>
</tr>
<tr>
<td style="text-align:left">Huried</td>
</tr>
<tr>
<td style="text-align:left">Flexible</td>
</tr>
<tr>
<td style="text-align:left">Insightful</td>
</tr>
<tr>
<td style="text-align:left">Genuine</td>
</tr>
<tr>
<td style="text-align:left">Stable</td>
</tr>
<tr>
<td style="text-align:left">Discreet</td>
</tr>
<tr>
<td style="text-align:left">Optimistic</td>
</tr>
<tr>
<td style="text-align:left">Idealistic</td>
</tr>
<tr>
<td style="text-align:left">Scholarly</td>
</tr>
<tr>
<td style="text-align:left">Questioning</td>
</tr>
<tr>
<td style="text-align:left">Contradictory</td>
</tr>
<tr>
<td style="text-align:left">Decisive</td>
</tr>
<tr>
<td style="text-align:left">Competitive</td>
</tr>
<tr>
<td style="text-align:left">Businesslike</td>
</tr>
<tr>
<td style="text-align:left">Gentle</td>
</tr>
<tr>
<td style="text-align:left">Invisible</td>
</tr>
<tr>
<td style="text-align:left">Active</td>
</tr>
<tr>
<td style="text-align:left">Irreverent</td>
</tr>
<tr>
<td style="text-align:left">Experimental</td>
</tr>
<tr>
<td style="text-align:left">Extraordinary</td>
</tr>
<tr>
<td style="text-align:left">Unpatriotic</td>
</tr>
<tr>
<td style="text-align:left">Leaderly</td>
</tr>
<tr>
<td style="text-align:left">Teacherly</td>
</tr>
<tr>
<td style="text-align:left">Curious</td>
</tr>
<tr>
<td style="text-align:left">Sophisticated</td>
</tr>
<tr>
<td style="text-align:left">Organized</td>
</tr>
<tr>
<td style="text-align:left">Solid</td>
</tr>
<tr>
<td style="text-align:left">Busy</td>
</tr>
<tr>
<td style="text-align:left">Obedient</td>
</tr>
<tr>
<td style="text-align:left">Sporting</td>
</tr>
<tr>
<td style="text-align:left">Strong</td>
</tr>
<tr>
<td style="text-align:left">knowledgeable</td>
</tr>
<tr>
<td style="text-align:left">Warm</td>
</tr>
<tr>
<td style="text-align:left">Responsive</td>
</tr>
<tr>
<td style="text-align:left">SelfÂ­conscious</td>
</tr>
<tr>
<td style="text-align:left">Stubborn</td>
</tr>
<tr>
<td style="text-align:left">Patient</td>
</tr>
<tr>
<td style="text-align:left">ManyÂ­sided</td>
</tr>
<tr>
<td style="text-align:left">Sarcastic</td>
</tr>
<tr>
<td style="text-align:left">Impressionable</td>
</tr>
<tr>
<td style="text-align:left">Inoffensive</td>
</tr>
<tr>
<td style="text-align:left">Private</td>
</tr>
<tr>
<td style="text-align:left">Honest</td>
</tr>
<tr>
<td style="text-align:left">Planful</td>
</tr>
<tr>
<td style="text-align:left">Soiid</td>
</tr>
<tr>
<td style="text-align:left">BigÂ­thinking</td>
</tr>
<tr>
<td style="text-align:left">Empathetic</td>
</tr>
<tr>
<td style="text-align:left">Farsighted</td>
</tr>
<tr>
<td style="text-align:left">Friendly</td>
</tr>
<tr>
<td style="text-align:left">Reserved</td>
</tr>
<tr>
<td style="text-align:left">Unsentimental</td>
</tr>
<tr>
<td style="text-align:left">Religious</td>
</tr>
<tr>
<td style="text-align:left">Honorable</td>
</tr>
<tr>
<td style="text-align:left">Persuasive</td>
</tr>
<tr>
<td style="text-align:left">Subtle</td>
</tr>
<tr>
<td style="text-align:left">Predictable</td>
</tr>
<tr>
<td style="text-align:left">Complex</td>
</tr>
<tr>
<td style="text-align:left">Kind</td>
</tr>
<tr>
<td style="text-align:left">Preoccupied</td>
</tr>
<tr>
<td style="text-align:left">Folksy</td>
</tr>
<tr>
<td style="text-align:left">Studious</td>
</tr>
<tr>
<td style="text-align:left">Energetic</td>
</tr>
<tr>
<td style="text-align:left">Decent</td>
</tr>
<tr>
<td style="text-align:left">Witty</td>
</tr>
<tr>
<td style="text-align:left">Noncompetitive</td>
</tr>
<tr>
<td style="text-align:left">Tidy</td>
</tr>
<tr>
<td style="text-align:left">Imaginative</td>
</tr>
<tr>
<td style="text-align:left">Principled</td>
</tr>
<tr>
<td style="text-align:left">Intense</td>
</tr>
<tr>
<td style="text-align:left">Relaxed</td>
</tr>
<tr>
<td style="text-align:left">Balanced</td>
</tr>
<tr>
<td style="text-align:left">Tasteful</td>
</tr>
<tr>
<td style="text-align:left">Unchanging</td>
</tr>
<tr>
<td style="text-align:left">GoodÂ­natured</td>
</tr>
<tr>
<td style="text-align:left">Surprising</td>
</tr>
<tr>
<td style="text-align:left">Stern</td>
</tr>
<tr>
<td style="text-align:left">Sexy</td>
</tr>
<tr>
<td style="text-align:left">Sensual</td>
</tr>
<tr>
<td style="text-align:left">Playful</td>
</tr>
<tr>
<td style="text-align:left">Insouciant</td>
</tr>
<tr>
<td style="text-align:left">Deceptive</td>
</tr>
<tr>
<td style="text-align:left">WellÂ­rounded</td>
</tr>
<tr>
<td style="text-align:left">MultiÂ­leveled</td>
</tr>
<tr>
<td style="text-align:left">Sensitive</td>
</tr>
<tr>
<td style="text-align:left">Casual</td>
</tr>
<tr>
<td style="text-align:left">Considerate</td>
</tr>
<tr>
<td style="text-align:left">Incorruptible</td>
</tr>
<tr>
<td style="text-align:left">Sweet</td>
</tr>
<tr>
<td style="text-align:left">Chummy</td>
</tr>
<tr>
<td style="text-align:left">Sage</td>
</tr>
<tr>
<td style="text-align:left">Absentminded</td>
</tr>
<tr>
<td style="text-align:left">Patriotic</td>
</tr>
<tr>
<td style="text-align:left">Responsible</td>
</tr>
<tr>
<td style="text-align:left">Freethinking</td>
</tr>
<tr>
<td style="text-align:left">Skillful</td>
</tr>
<tr>
<td style="text-align:left">Sociable</td>
</tr>
<tr>
<td style="text-align:left">Logical</td>
</tr>
<tr>
<td style="text-align:left">Dutiful</td>
</tr>
<tr>
<td style="text-align:left">Breezy</td>
</tr>
<tr>
<td style="text-align:left">Fair</td>
</tr>
<tr>
<td style="text-align:left">Solitary</td>
</tr>
<tr>
<td style="text-align:left">Mellow</td>
</tr>
<tr>
<td style="text-align:left">Scrupulous</td>
</tr>
<tr>
<td style="text-align:left">Focused</td>
</tr>
<tr>
<td style="text-align:left">AccessibleÂ­</td>
</tr>
<tr>
<td style="text-align:left">Sober</td>
</tr>
<tr>
<td style="text-align:left">Daring</td>
</tr>
<tr>
<td style="text-align:left">Venturesome</td>
</tr>
<tr>
<td style="text-align:left">Constant</td>
</tr>
<tr>
<td style="text-align:left">SelfÂ­sufficent</td>
</tr>
<tr>
<td style="text-align:left">Tough</td>
</tr>
<tr>
<td style="text-align:left">Enthusiastic</td>
</tr>
<tr>
<td style="text-align:left">Passionate</td>
</tr>
<tr>
<td style="text-align:left">HighÂ­minded</td>
</tr>
<tr>
<td style="text-align:left">WellÂ­bred</td>
</tr>
<tr>
<td style="text-align:left">Deep</td>
</tr>
<tr>
<td style="text-align:left">Prudent</td>
</tr>
<tr>
<td style="text-align:left">Progressive</td>
</tr>
<tr>
<td style="text-align:left">Wise</td>
</tr>
<tr>
<td style="text-align:left">Pure</td>
</tr>
<tr>
<td style="text-align:left">Thorough</td>
</tr>
<tr>
<td style="text-align:left">Forgiving</td>
</tr>
<tr>
<td style="text-align:left">Elegant</td>
</tr>
<tr>
<td style="text-align:left">Cultured</td>
</tr>
<tr>
<td style="text-align:left">Sentimental</td>
</tr>
<tr>
<td style="text-align:left">Innovative</td>
</tr>
<tr>
<td style="text-align:left">Loyal</td>
</tr>
<tr>
<td style="text-align:left">Conservative</td>
</tr>
<tr>
<td style="text-align:left">Practical</td>
</tr>
<tr>
<td style="text-align:left">Adaptable</td>
</tr>
<tr>
<td style="text-align:left">Courageous</td>
</tr>
<tr>
<td style="text-align:left">Courteous</td>
</tr>
<tr>
<td style="text-align:left">Brilliant</td>
</tr>
<tr>
<td style="text-align:left">Shrewd</td>
</tr>
<tr>
<td style="text-align:left">Youthful</td>
</tr>
<tr>
<td style="text-align:left">Soft</td>
</tr>
<tr>
<td style="text-align:left">Outspoken</td>
</tr>
<tr>
<td style="text-align:left">Strict</td>
</tr>
<tr>
<td style="text-align:left">Independent</td>
</tr>
<tr>
<td style="text-align:left">Spontaneous</td>
</tr>
<tr>
<td style="text-align:left">Peaceful</td>
</tr>
<tr>
<td style="text-align:left">Open</td>
</tr>
<tr>
<td style="text-align:left">Protective</td>
</tr>
<tr>
<td style="text-align:left">Popular</td>
</tr>
<tr>
<td style="text-align:left">Hypnotic</td>
</tr>
<tr>
<td style="text-align:left">Respectful</td>
</tr>
<tr>
<td style="text-align:left">Selfless</td>
</tr>
<tr>
<td style="text-align:left">Reflective</td>
</tr>
<tr>
<td style="text-align:left">Objective</td>
</tr>
<tr>
<td style="text-align:left">Impersonal</td>
</tr>
<tr>
<td style="text-align:left">Quiet</td>
</tr>
<tr>
<td style="text-align:left">Mature</td>
</tr>
<tr>
<td style="text-align:left">Exciting</td>
</tr>
<tr>
<td style="text-align:left">OldÂ­fashined</td>
</tr>
<tr>
<td style="text-align:left">Charismatic</td>
</tr>
<tr>
<td style="text-align:left">Appreciative</td>
</tr>
<tr>
<td style="text-align:left">Modest</td>
</tr>
<tr>
<td style="text-align:left">Unpredicatable</td>
</tr>
<tr>
<td style="text-align:left">Intelligent</td>
</tr>
<tr>
<td style="text-align:left">Earthy</td>
</tr>
<tr>
<td style="text-align:left">Creative</td>
</tr>
<tr>
<td style="text-align:left">Formal</td>
</tr>
<tr>
<td style="text-align:left">Impassive</td>
</tr>
<tr>
<td style="text-align:left">Clever</td>
</tr>
<tr>
<td style="text-align:left">Agreeable</td>
</tr>
<tr>
<td style="text-align:left">Uncomplaining</td>
</tr>
<tr>
<td style="text-align:left">Admirable</td>
</tr>
<tr>
<td style="text-align:left">Unaggressive</td>
</tr>
<tr>
<td style="text-align:left">Understanding</td>
</tr>
<tr>
<td style="text-align:left">Glamorous</td>
</tr>
<tr>
<td style="text-align:left">Unreligious</td>
</tr>
<tr>
<td style="text-align:left">Faithful</td>
</tr>
<tr>
<td style="text-align:left">ClearÂ­headed</td>
</tr>
<tr>
<td style="text-align:left">Effeminate</td>
</tr>
<tr>
<td style="text-align:left">Calm</td>
</tr>
<tr>
<td style="text-align:left">Original</td>
</tr>
<tr>
<td style="text-align:left">Emotional</td>
</tr>
<tr>
<td style="text-align:left">Romantic</td>
</tr>
<tr>
<td style="text-align:left">Attractive</td>
</tr>
<tr>
<td style="text-align:left">Winning</td>
</tr>
<tr>
<td style="text-align:left">Punctual</td>
</tr>
<tr>
<td style="text-align:left">Cute</td>
</tr>
<tr>
<td style="text-align:left">Perceptive</td>
</tr>
<tr>
<td style="text-align:left">Political</td>
</tr>
<tr>
<td style="text-align:left">Ordinary</td>
</tr>
<tr>
<td style="text-align:left">Confident</td>
</tr>
<tr>
<td style="text-align:left">Dedicated</td>
</tr>
<tr>
<td style="text-align:left">Clean</td>
</tr>
<tr>
<td style="text-align:left">Neutral</td>
</tr>
<tr>
<td style="text-align:left">WellÂ­read</td>
</tr>
<tr>
<td style="text-align:left">Skeptical</td>
</tr>
<tr>
<td style="text-align:left">Healthy</td>
</tr>
<tr>
<td style="text-align:left">Lovable</td>
</tr>
<tr>
<td style="text-align:left">Alert</td>
</tr>
<tr>
<td style="text-align:left">Sympathetic</td>
</tr>
<tr>
<td style="text-align:left">Caring</td>
</tr>
<tr>
<td style="text-align:left">Driving</td>
</tr>
<tr>
<td style="text-align:left">Moralistic</td>
</tr>
<tr>
<td style="text-align:left">Rational</td>
</tr>
<tr>
<td style="text-align:left">Colorful</td>
</tr>
<tr>
<td style="text-align:left">Ascetic</td>
</tr>
<tr>
<td style="text-align:left">Pruposeful</td>
</tr>
<tr>
<td style="text-align:left">Trusting</td>
</tr>
<tr>
<td style="text-align:left">Enigmatic</td>
</tr>
<tr>
<td style="text-align:left">Amusing</td>
</tr>
<tr>
<td style="text-align:left">Compassionate</td>
</tr>
<tr>
<td style="text-align:left">Resourceful</td>
</tr>
<tr>
<td style="text-align:left">Smooth</td>
</tr>
<tr>
<td style="text-align:left">Sane</td>
</tr>
<tr>
<td style="text-align:left">Simple</td>
</tr>
<tr>
<td style="text-align:left">Adventurous</td>
</tr>
<tr>
<td style="text-align:left">Undemanding</td>
</tr>
<tr>
<td style="text-align:left">Humorous</td>
</tr>
<tr>
<td style="text-align:left">Hardworking</td>
</tr>
<tr>
<td style="text-align:left">Perfectionist</td>
</tr>
<tr>
<td style="text-align:left">Gracious</td>
</tr>
<tr>
<td style="text-align:left">Intuitive</td>
</tr>
<tr>
<td style="text-align:left">Serious</td>
</tr>
<tr>
<td style="text-align:left">Retiring</td>
</tr>
<tr>
<td style="text-align:left">Upright</td>
</tr>
<tr>
<td style="text-align:left">Restrained</td>
</tr>
<tr>
<td style="text-align:left">Generous</td>
</tr>
<tr>
<td style="text-align:left">Charming</td>
</tr>
<tr>
<td style="text-align:left">Unambitious</td>
</tr>
<tr>
<td style="text-align:left">Forecful</td>
</tr>
<tr>
<td style="text-align:left">FunÂ­loving</td>
</tr>
<tr>
<td style="text-align:left">Athletic</td>
</tr>
<tr>
<td style="text-align:left">Reliable</td>
</tr>
<tr>
<td style="text-align:left">Cooperative</td>
</tr>
<tr>
<td style="text-align:left">Humble</td>
</tr>
<tr>
<td style="text-align:left">Boyish</td>
</tr>
<tr>
<td style="text-align:left">Educated</td>
</tr>
<tr>
<td style="text-align:left">Efficient</td>
</tr>
<tr>
<td style="text-align:left">Uninhibited</td>
</tr>
<tr>
<td style="text-align:left">Crisp</td>
</tr>
<tr>
<td style="text-align:left">Determined</td>
</tr>
<tr>
<td style="text-align:left">Aggressive</td>
</tr>
<tr>
<td style="text-align:left">Stylish</td>
</tr>
<tr>
<td style="text-align:left">Physical</td>
</tr>
<tr>
<td style="text-align:left">Individualistic</td>
</tr>
<tr>
<td style="text-align:left">Disciplined</td>
</tr>
<tr>
<td style="text-align:left">Gallant</td>
</tr>
<tr>
<td style="text-align:left">Tolerant</td>
</tr>
<tr>
<td style="text-align:left">Observant</td>
</tr>
<tr>
<td style="text-align:left">Neat</td>
</tr>
<tr>
<td style="text-align:left">Realistic</td>
</tr>
<tr>
<td style="text-align:left">Dry</td>
</tr>
<tr>
<td style="text-align:left">Unceremonious</td>
</tr>
<tr>
<td style="text-align:left">HighÂ­spirited</td>
</tr>
<tr>
<td style="text-align:left">Helpful</td>
</tr>
</tbody>
</table><h5 id="negative-traits"><a name="negative-traits" href="#negative-traits"></a>Negative Traits</h5><table>
<thead>
<tr>
<th style="text-align:left">Negative Traits:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Thoughtless</td>
</tr>
<tr>
<td style="text-align:left">Hidebound</td>
</tr>
<tr>
<td style="text-align:left">Angry</td>
</tr>
<tr>
<td style="text-align:left">Imprudent</td>
</tr>
<tr>
<td style="text-align:left">Vulnerable</td>
</tr>
<tr>
<td style="text-align:left">Easily Discouraged</td>
</tr>
<tr>
<td style="text-align:left">Mechanical</td>
</tr>
<tr>
<td style="text-align:left">Obnoxious</td>
</tr>
<tr>
<td style="text-align:left">Gullible</td>
</tr>
<tr>
<td style="text-align:left">Tense</td>
</tr>
<tr>
<td style="text-align:left">Fraudulent</td>
</tr>
<tr>
<td style="text-align:left">Deceitful</td>
</tr>
<tr>
<td style="text-align:left">Blunt</td>
</tr>
<tr>
<td style="text-align:left">Cautious</td>
</tr>
<tr>
<td style="text-align:left">Insecure</td>
</tr>
<tr>
<td style="text-align:left">StrongÂ­willed</td>
</tr>
<tr>
<td style="text-align:left">Grim</td>
</tr>
<tr>
<td style="text-align:left">Crafty</td>
</tr>
<tr>
<td style="text-align:left">Scheming</td>
</tr>
<tr>
<td style="text-align:left">Greedy</td>
</tr>
<tr>
<td style="text-align:left">False</td>
</tr>
<tr>
<td style="text-align:left">Incurious</td>
</tr>
<tr>
<td style="text-align:left">Haughty</td>
</tr>
<tr>
<td style="text-align:left">Brutal</td>
</tr>
<tr>
<td style="text-align:left">Insincere</td>
</tr>
<tr>
<td style="text-align:left">Agonizing</td>
</tr>
<tr>
<td style="text-align:left">Brittle</td>
</tr>
<tr>
<td style="text-align:left">Forgetful</td>
</tr>
<tr>
<td style="text-align:left">Mealymouthed</td>
</tr>
<tr>
<td style="text-align:left">Unconvincing</td>
</tr>
<tr>
<td style="text-align:left">Resentful</td>
</tr>
<tr>
<td style="text-align:left">Repentant</td>
</tr>
<tr>
<td style="text-align:left">Extreme</td>
</tr>
<tr>
<td style="text-align:left">Erratic</td>
</tr>
<tr>
<td style="text-align:left">Irresponsible</td>
</tr>
<tr>
<td style="text-align:left">Confused</td>
</tr>
<tr>
<td style="text-align:left">HighÂ­handed</td>
</tr>
<tr>
<td style="text-align:left">Gloomy</td>
</tr>
<tr>
<td style="text-align:left">Delicate</td>
</tr>
<tr>
<td style="text-align:left">Dull</td>
</tr>
<tr>
<td style="text-align:left">Wishful</td>
</tr>
<tr>
<td style="text-align:left">Disturbing</td>
</tr>
<tr>
<td style="text-align:left">Suspicious</td>
</tr>
<tr>
<td style="text-align:left">Transparent</td>
</tr>
<tr>
<td style="text-align:left">Meddlesome</td>
</tr>
<tr>
<td style="text-align:left">Ridiculous</td>
</tr>
<tr>
<td style="text-align:left">Extravagant</td>
</tr>
<tr>
<td style="text-align:left">Hateful</td>
</tr>
<tr>
<td style="text-align:left">Inconsiderate</td>
</tr>
<tr>
<td style="text-align:left">Superstitious</td>
</tr>
<tr>
<td style="text-align:left">Uncreative</td>
</tr>
<tr>
<td style="text-align:left">Disloyal</td>
</tr>
<tr>
<td style="text-align:left">Foolish</td>
</tr>
<tr>
<td style="text-align:left">Paranoid</td>
</tr>
<tr>
<td style="text-align:left">Irrational</td>
</tr>
<tr>
<td style="text-align:left">Ignorant</td>
</tr>
<tr>
<td style="text-align:left">Troublesome</td>
</tr>
<tr>
<td style="text-align:left">Cowardly</td>
</tr>
<tr>
<td style="text-align:left">Uncaring</td>
</tr>
<tr>
<td style="text-align:left">Complaintive</td>
</tr>
<tr>
<td style="text-align:left">Inert</td>
</tr>
<tr>
<td style="text-align:left">Aimless</td>
</tr>
<tr>
<td style="text-align:left">Dependent</td>
</tr>
<tr>
<td style="text-align:left">Monstrous</td>
</tr>
<tr>
<td style="text-align:left">Argumentative</td>
</tr>
<tr>
<td style="text-align:left">Frightening</td>
</tr>
<tr>
<td style="text-align:left">Offhand</td>
</tr>
<tr>
<td style="text-align:left">Obvious</td>
</tr>
<tr>
<td style="text-align:left">Intolerant</td>
</tr>
<tr>
<td style="text-align:left">Indecisive</td>
</tr>
<tr>
<td style="text-align:left">Negativistic</td>
</tr>
<tr>
<td style="text-align:left">Calculating</td>
</tr>
<tr>
<td style="text-align:left">Clumsy</td>
</tr>
<tr>
<td style="text-align:left">Rowdy</td>
</tr>
<tr>
<td style="text-align:left">Opinionated</td>
</tr>
<tr>
<td style="text-align:left">Sordid</td>
</tr>
<tr>
<td style="text-align:left">Unhealthy</td>
</tr>
<tr>
<td style="text-align:left">Naive</td>
</tr>
<tr>
<td style="text-align:left">Unreflective</td>
</tr>
<tr>
<td style="text-align:left">Outrageous</td>
</tr>
<tr>
<td style="text-align:left">Repressed</td>
</tr>
<tr>
<td style="text-align:left">Weak</td>
</tr>
<tr>
<td style="text-align:left">Unprincipled</td>
</tr>
<tr>
<td style="text-align:left">Mannerless</td>
</tr>
<tr>
<td style="text-align:left">Cruel</td>
</tr>
<tr>
<td style="text-align:left">Expedient</td>
</tr>
<tr>
<td style="text-align:left">Cold</td>
</tr>
<tr>
<td style="text-align:left">Unrestrained</td>
</tr>
<tr>
<td style="text-align:left">Procrastinating</td>
</tr>
<tr>
<td style="text-align:left">Cynical</td>
</tr>
<tr>
<td style="text-align:left">Critical</td>
</tr>
<tr>
<td style="text-align:left">Dirty</td>
</tr>
<tr>
<td style="text-align:left">Softheaded</td>
</tr>
<tr>
<td style="text-align:left">Airy</td>
</tr>
<tr>
<td style="text-align:left">Willful</td>
</tr>
<tr>
<td style="text-align:left">Misguided</td>
</tr>
<tr>
<td style="text-align:left">Hesitant</td>
</tr>
<tr>
<td style="text-align:left">Criminal</td>
</tr>
<tr>
<td style="text-align:left">Impractical</td>
</tr>
<tr>
<td style="text-align:left">Narcissistic</td>
</tr>
<tr>
<td style="text-align:left">Destructive</td>
</tr>
<tr>
<td style="text-align:left">Ritualistic</td>
</tr>
<tr>
<td style="text-align:left">Obsessive</td>
</tr>
<tr>
<td style="text-align:left">Zany</td>
</tr>
<tr>
<td style="text-align:left">Crude</td>
</tr>
<tr>
<td style="text-align:left">Moody</td>
</tr>
<tr>
<td style="text-align:left">Prejudiced</td>
</tr>
<tr>
<td style="text-align:left">Fiery</td>
</tr>
<tr>
<td style="text-align:left">Thievish</td>
</tr>
<tr>
<td style="text-align:left">Fearful</td>
</tr>
<tr>
<td style="text-align:left">SmallÂ­thinking</td>
</tr>
<tr>
<td style="text-align:left">Overimaginative</td>
</tr>
<tr>
<td style="text-align:left">Demanding</td>
</tr>
<tr>
<td style="text-align:left">Lazy</td>
</tr>
<tr>
<td style="text-align:left">Insulting</td>
</tr>
<tr>
<td style="text-align:left">Devious</td>
</tr>
<tr>
<td style="text-align:left">Unimpressive</td>
</tr>
<tr>
<td style="text-align:left">Melancholic</td>
</tr>
<tr>
<td style="text-align:left">Distractible</td>
</tr>
<tr>
<td style="text-align:left">Ruined</td>
</tr>
<tr>
<td style="text-align:left">Disobedient</td>
</tr>
<tr>
<td style="text-align:left">Secretive</td>
</tr>
<tr>
<td style="text-align:left">Tactless</td>
</tr>
<tr>
<td style="text-align:left">Bizarre</td>
</tr>
<tr>
<td style="text-align:left">Uncharitable</td>
</tr>
<tr>
<td style="text-align:left">Escapist</td>
</tr>
<tr>
<td style="text-align:left">Submissive</td>
</tr>
<tr>
<td style="text-align:left">Sedentary</td>
</tr>
<tr>
<td style="text-align:left">Stupid</td>
</tr>
<tr>
<td style="text-align:left">Barbaric</td>
</tr>
<tr>
<td style="text-align:left">Bewildered</td>
</tr>
<tr>
<td style="text-align:left">Silly</td>
</tr>
<tr>
<td style="text-align:left">Excitable</td>
</tr>
<tr>
<td style="text-align:left">Faithless</td>
</tr>
<tr>
<td style="text-align:left">Envious</td>
</tr>
<tr>
<td style="text-align:left">Selfish</td>
</tr>
<tr>
<td style="text-align:left">Anxious</td>
</tr>
<tr>
<td style="text-align:left">Rigid</td>
</tr>
<tr>
<td style="text-align:left">Miserly</td>
</tr>
<tr>
<td style="text-align:left">Inhibited</td>
</tr>
<tr>
<td style="text-align:left">Abrupt</td>
</tr>
<tr>
<td style="text-align:left">Steely</td>
</tr>
<tr>
<td style="text-align:left">Difficult</td>
</tr>
<tr>
<td style="text-align:left">Colorless</td>
</tr>
<tr>
<td style="text-align:left">Sloppy</td>
</tr>
<tr>
<td style="text-align:left">Artificial</td>
</tr>
<tr>
<td style="text-align:left">Neglectful</td>
</tr>
<tr>
<td style="text-align:left">SingleÂ­minded</td>
</tr>
<tr>
<td style="text-align:left">Passive</td>
</tr>
<tr>
<td style="text-align:left">OneÂ­sided</td>
</tr>
<tr>
<td style="text-align:left">Possessive</td>
</tr>
<tr>
<td style="text-align:left">Treacherous</td>
</tr>
<tr>
<td style="text-align:left">Graceless</td>
</tr>
<tr>
<td style="text-align:left">Morbid</td>
</tr>
<tr>
<td style="text-align:left">Perverse</td>
</tr>
<tr>
<td style="text-align:left">Unimaginative</td>
</tr>
<tr>
<td style="text-align:left">Shy</td>
</tr>
<tr>
<td style="text-align:left">Mawkish</td>
</tr>
<tr>
<td style="text-align:left">Disorderly</td>
</tr>
<tr>
<td style="text-align:left">Predatory</td>
</tr>
<tr>
<td style="text-align:left">Tasteless</td>
</tr>
<tr>
<td style="text-align:left">Irritable</td>
</tr>
<tr>
<td style="text-align:left">Insensitive</td>
</tr>
<tr>
<td style="text-align:left">Disrespectful</td>
</tr>
<tr>
<td style="text-align:left">Ungrateful</td>
</tr>
<tr>
<td style="text-align:left">Uncooperative</td>
</tr>
<tr>
<td style="text-align:left">Messy</td>
</tr>
<tr>
<td style="text-align:left">MoneyÂ­minded</td>
</tr>
<tr>
<td style="text-align:left">Unstable</td>
</tr>
<tr>
<td style="text-align:left">Odd</td>
</tr>
<tr>
<td style="text-align:left">Unappreciative</td>
</tr>
<tr>
<td style="text-align:left">SelfÂ­indulgent</td>
</tr>
<tr>
<td style="text-align:left">Flamboyant</td>
</tr>
<tr>
<td style="text-align:left">Asocial</td>
</tr>
<tr>
<td style="text-align:left">Assertive</td>
</tr>
<tr>
<td style="text-align:left">Malicious</td>
</tr>
<tr>
<td style="text-align:left">Unpolished</td>
</tr>
<tr>
<td style="text-align:left">Shortsighted</td>
</tr>
<tr>
<td style="text-align:left">Slow</td>
</tr>
<tr>
<td style="text-align:left">Stiff</td>
</tr>
<tr>
<td style="text-align:left">Oppressed</td>
</tr>
<tr>
<td style="text-align:left">Scornful</td>
</tr>
<tr>
<td style="text-align:left">Grand</td>
</tr>
<tr>
<td style="text-align:left">UnselfÂ­critical</td>
</tr>
<tr>
<td style="text-align:left">Fickle</td>
</tr>
<tr>
<td style="text-align:left">Desperate</td>
</tr>
<tr>
<td style="text-align:left">Fixed</td>
</tr>
<tr>
<td style="text-align:left">WeakÂ­willed</td>
</tr>
<tr>
<td style="text-align:left">Dishonest</td>
</tr>
<tr>
<td style="text-align:left">Impatient</td>
</tr>
<tr>
<td style="text-align:left">Impulsive</td>
</tr>
<tr>
<td style="text-align:left">Sly</td>
</tr>
<tr>
<td style="text-align:left">Charmless</td>
</tr>
<tr>
<td style="text-align:left">Fawning</td>
</tr>
<tr>
<td style="text-align:left">Timid</td>
</tr>
<tr>
<td style="text-align:left">Disorganized</td>
</tr>
<tr>
<td style="text-align:left">Narrow</td>
</tr>
<tr>
<td style="text-align:left">Uncritical</td>
</tr>
<tr>
<td style="text-align:left">Sadistic</td>
</tr>
<tr>
<td style="text-align:left">Vague</td>
</tr>
<tr>
<td style="text-align:left">Undisciplined</td>
</tr>
<tr>
<td style="text-align:left">Unreliable</td>
</tr>
<tr>
<td style="text-align:left">Arrogantt</td>
</tr>
<tr>
<td style="text-align:left">Presumptuous</td>
</tr>
<tr>
<td style="text-align:left">Bland</td>
</tr>
<tr>
<td style="text-align:left">Mannered</td>
</tr>
<tr>
<td style="text-align:left">Mistaken</td>
</tr>
<tr>
<td style="text-align:left">Discouraging</td>
</tr>
<tr>
<td style="text-align:left">NarrowÂ­minded</td>
</tr>
<tr>
<td style="text-align:left">Careless</td>
</tr>
<tr>
<td style="text-align:left">Childish</td>
</tr>
<tr>
<td style="text-align:left">Indulgent</td>
</tr>
<tr>
<td style="text-align:left">Venomous</td>
</tr>
<tr>
<td style="text-align:left">PowerÂ­hungry</td>
</tr>
<tr>
<td style="text-align:left">Coarse</td>
</tr>
<tr>
<td style="text-align:left">Unfriendly</td>
</tr>
<tr>
<td style="text-align:left">Hostile</td>
</tr>
<tr>
<td style="text-align:left">Opportunistic</td>
</tr>
<tr>
<td style="text-align:left">Trendy</td>
</tr>
<tr>
<td style="text-align:left">Petty</td>
</tr>
<tr>
<td style="text-align:left">Unlovable</td>
</tr>
<tr>
<td style="text-align:left">Regretful</td>
</tr>
<tr>
<td style="text-align:left">Shallow</td>
</tr>
<tr>
<td style="text-align:left">Superficial</td>
</tr>
<tr>
<td style="text-align:left">Crazy</td>
</tr>
<tr>
<td style="text-align:left">OneÂ­dimensional</td>
</tr>
<tr>
<td style="text-align:left">Miserable</td>
</tr>
<tr>
<td style="text-align:left">Unrealistic</td>
</tr>
</tbody>
</table><h5 id="hobbies"><a name="hobbies" href="#hobbies"></a>Hobbies</h5><table>
<thead>
<tr>
<th style="text-align:left">Hobbies:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Scrapbooking</td>
</tr>
<tr>
<td style="text-align:left">Dance</td>
</tr>
<tr>
<td style="text-align:left">Sculpting</td>
</tr>
<tr>
<td style="text-align:left">Genealogy</td>
</tr>
<tr>
<td style="text-align:left">Jewelry making</td>
</tr>
<tr>
<td style="text-align:left">Foreign language learning</td>
</tr>
<tr>
<td style="text-align:left">Crocheting</td>
</tr>
<tr>
<td style="text-align:left">Playing Musical Instruments</td>
</tr>
<tr>
<td style="text-align:left">Gaming (tabletop games and roleÂ­playing games)</td>
</tr>
<tr>
<td style="text-align:left">Lapidary</td>
</tr>
<tr>
<td style="text-align:left">Embroidery</td>
</tr>
<tr>
<td style="text-align:left">Cleaning</td>
</tr>
<tr>
<td style="text-align:left">Cosplaying</td>
</tr>
<tr>
<td style="text-align:left">YoÂ­yoing</td>
</tr>
<tr>
<td style="text-align:left">Puzzles</td>
</tr>
<tr>
<td style="text-align:left">Knitting</td>
</tr>
<tr>
<td style="text-align:left">Magic</td>
</tr>
<tr>
<td style="text-align:left">Cryptography</td>
</tr>
<tr>
<td style="text-align:left">Computer programming</td>
</tr>
<tr>
<td style="text-align:left">Drama</td>
</tr>
<tr>
<td style="text-align:left">Yoga</td>
</tr>
<tr>
<td style="text-align:left">Watching Movies</td>
</tr>
<tr>
<td style="text-align:left">Ping Pong</td>
</tr>
<tr>
<td style="text-align:left">RC cars</td>
</tr>
<tr>
<td style="text-align:left">Amateur radio</td>
</tr>
<tr>
<td style="text-align:left">Digital arts</td>
</tr>
<tr>
<td style="text-align:left">Web surfing</td>
</tr>
<tr>
<td style="text-align:left">Baton twirling</td>
</tr>
<tr>
<td style="text-align:left">Lego Building</td>
</tr>
<tr>
<td style="text-align:left">Sports</td>
</tr>
<tr>
<td style="text-align:left">Creative writing</td>
</tr>
<tr>
<td style="text-align:left">Cooking</td>
</tr>
<tr>
<td style="text-align:left">Leather crafting</td>
</tr>
<tr>
<td style="text-align:left">Gambling</td>
</tr>
<tr>
<td style="text-align:left">Quilting</td>
</tr>
<tr>
<td style="text-align:left">Origami</td>
</tr>
<tr>
<td style="text-align:left">Video gaming</td>
</tr>
<tr>
<td style="text-align:left">Coloring</td>
</tr>
<tr>
<td style="text-align:left">Juggling</td>
</tr>
<tr>
<td style="text-align:left">Sewing</td>
</tr>
<tr>
<td style="text-align:left">Homebrewing</td>
</tr>
<tr>
<td style="text-align:left">Drawing</td>
</tr>
<tr>
<td style="text-align:left">Painting</td>
</tr>
<tr>
<td style="text-align:left">Drinking Coffee</td>
</tr>
<tr>
<td style="text-align:left">Taxidermy</td>
</tr>
<tr>
<td style="text-align:left">StandÂ­Up Comedy</td>
</tr>
<tr>
<td style="text-align:left">Woodworking</td>
</tr>
<tr>
<td style="text-align:left">Wood carving</td>
</tr>
<tr>
<td style="text-align:left">Worldbuilding</td>
</tr>
<tr>
<td style="text-align:left">Writing</td>
</tr>
<tr>
<td style="text-align:left">Soapmaking</td>
</tr>
<tr>
<td style="text-align:left">Singing</td>
</tr>
<tr>
<td style="text-align:left">Eating</td>
</tr>
<tr>
<td style="text-align:left">Lacemaking</td>
</tr>
<tr>
<td style="text-align:left">Reading</td>
</tr>
<tr>
<td style="text-align:left">Pottery</td>
</tr>
<tr>
<td style="text-align:left">Model Building</td>
</tr>
<tr>
<td style="text-align:left">Handball</td>
</tr>
<tr>
<td style="text-align:left">Kiteflying</td>
</tr>
<tr>
<td style="text-align:left">Dowsing</td>
</tr>
<tr>
<td style="text-align:left">Rock climbing</td>
</tr>
<tr>
<td style="text-align:left">Nordic skating</td>
</tr>
<tr>
<td style="text-align:left">Paint Ball</td>
</tr>
<tr>
<td style="text-align:left">Graffiti</td>
</tr>
<tr>
<td style="text-align:left">Polo</td>
</tr>
<tr>
<td style="text-align:left">Motor sports</td>
</tr>
<tr>
<td style="text-align:left">Skateboarding</td>
</tr>
<tr>
<td style="text-align:left">Bird watching</td>
</tr>
<tr>
<td style="text-align:left">Gardening</td>
</tr>
<tr>
<td style="text-align:left">Beekeeping</td>
</tr>
<tr>
<td style="text-align:left">Foraging</td>
</tr>
<tr>
<td style="text-align:left">Urban exploration</td>
</tr>
<tr>
<td style="text-align:left">Snowboarding</td>
</tr>
<tr>
<td style="text-align:left">Ghost Hunting</td>
</tr>
<tr>
<td style="text-align:left">Kiteboarding</td>
</tr>
<tr>
<td style="text-align:left">Skydiving</td>
</tr>
<tr>
<td style="text-align:left">Basketball</td>
</tr>
<tr>
<td style="text-align:left">Taekwondo</td>
</tr>
<tr>
<td style="text-align:left">Hooping</td>
</tr>
<tr>
<td style="text-align:left">Skiing</td>
</tr>
<tr>
<td style="text-align:left">Running</td>
</tr>
<tr>
<td style="text-align:left">Sailing</td>
</tr>
<tr>
<td style="text-align:left">Backpacking</td>
</tr>
<tr>
<td style="text-align:left">Shopping</td>
</tr>
<tr>
<td style="text-align:left">Baseball</td>
</tr>
<tr>
<td style="text-align:left">Surfing</td>
</tr>
<tr>
<td style="text-align:left">Mountain biking</td>
</tr>
<tr>
<td style="text-align:left">Sculling or Rowing</td>
</tr>
<tr>
<td style="text-align:left">Flying</td>
</tr>
<tr>
<td style="text-align:left">Sand castle building</td>
</tr>
<tr>
<td style="text-align:left">Net Ball</td>
</tr>
<tr>
<td style="text-align:left">Fishing</td>
</tr>
<tr>
<td style="text-align:left">Metal detecting</td>
</tr>
<tr>
<td style="text-align:left">Machining</td>
</tr>
<tr>
<td style="text-align:left">Driving</td>
</tr>
<tr>
<td style="text-align:left">Photography</td>
</tr>
<tr>
<td style="text-align:left">Roller skating</td>
</tr>
<tr>
<td style="text-align:left">Hunting</td>
</tr>
<tr>
<td style="text-align:left">Football</td>
</tr>
<tr>
<td style="text-align:left">Astronomy</td>
</tr>
<tr>
<td style="text-align:left">Mushroom Hunting or Mycology</td>
</tr>
<tr>
<td style="text-align:left">Parkour</td>
</tr>
<tr>
<td style="text-align:left">Tai Chi</td>
</tr>
<tr>
<td style="text-align:left">Cycling</td>
</tr>
<tr>
<td style="text-align:left">LARPing</td>
</tr>
<tr>
<td style="text-align:left">Board sports</td>
</tr>
<tr>
<td style="text-align:left">Swimming</td>
</tr>
<tr>
<td style="text-align:left">BASE jumping</td>
</tr>
<tr>
<td style="text-align:left">Air sports</td>
</tr>
<tr>
<td style="text-align:left">Archery</td>
</tr>
<tr>
<td style="text-align:left">Kayaking</td>
</tr>
<tr>
<td style="text-align:left">Scuba Diving</td>
</tr>
<tr>
<td style="text-align:left">Inline Skating</td>
</tr>
<tr>
<td style="text-align:left">Geocaching</td>
</tr>
<tr>
<td style="text-align:left">Slacklining</td>
</tr>
<tr>
<td style="text-align:left">Rugby</td>
</tr>
<tr>
<td style="text-align:left">Vehicle restoration</td>
</tr>
<tr>
<td style="text-align:left">Shooting</td>
</tr>
<tr>
<td style="text-align:left">Skating</td>
</tr>
<tr>
<td style="text-align:left">Water sports</td>
</tr>
<tr>
<td style="text-align:left">Hiking</td>
</tr>
<tr>
<td style="text-align:left">Jogging</td>
</tr>
<tr>
<td style="text-align:left">Tennis</td>
</tr>
<tr>
<td style="text-align:left">Go</td>
</tr>
<tr>
<td style="text-align:left">Insect collecting</td>
</tr>
<tr>
<td style="text-align:left">Coin collecting</td>
</tr>
<tr>
<td style="text-align:left">Skateboarding</td>
</tr>
<tr>
<td style="text-align:left">Element collecting</td>
</tr>
<tr>
<td style="text-align:left">Jukskei</td>
</tr>
<tr>
<td style="text-align:left">Leaf collecting and pressing</td>
</tr>
<tr>
<td style="text-align:left">Paintball</td>
</tr>
<tr>
<td style="text-align:left">Baton Twirling</td>
</tr>
<tr>
<td style="text-align:left">Lincoln Douglas Debate</td>
</tr>
<tr>
<td style="text-align:left">Billiards</td>
</tr>
<tr>
<td style="text-align:left">Judo</td>
</tr>
<tr>
<td style="text-align:left">Fishing</td>
</tr>
<tr>
<td style="text-align:left">Triathlon</td>
</tr>
<tr>
<td style="text-align:left">Field Hockey</td>
</tr>
<tr>
<td style="text-align:left">League of Legends</td>
</tr>
<tr>
<td style="text-align:left">Chess</td>
</tr>
<tr>
<td style="text-align:left">Auto racing</td>
</tr>
<tr>
<td style="text-align:left">Card collecting</td>
</tr>
<tr>
<td style="text-align:left">RadioÂ­controlled car racing (hobby grade)</td>
</tr>
<tr>
<td style="text-align:left">Audiophilia</td>
</tr>
<tr>
<td style="text-align:left">Debate</td>
</tr>
<tr>
<td style="text-align:left">Birdwatching</td>
</tr>
<tr>
<td style="text-align:left">Cricket</td>
</tr>
<tr>
<td style="text-align:left">Surfing</td>
</tr>
<tr>
<td style="text-align:left">Cricket (Indoor)</td>
</tr>
<tr>
<td style="text-align:left">Touch football</td>
</tr>
<tr>
<td style="text-align:left">Rugby league football</td>
</tr>
<tr>
<td style="text-align:left">Baseball</td>
</tr>
<tr>
<td style="text-align:left">Basketball</td>
</tr>
<tr>
<td style="text-align:left">Cheerleading</td>
</tr>
<tr>
<td style="text-align:left">Astrology</td>
</tr>
<tr>
<td style="text-align:left">Tour skating</td>
</tr>
<tr>
<td style="text-align:left">Roller Derby</td>
</tr>
<tr>
<td style="text-align:left">Shooting sport</td>
</tr>
<tr>
<td style="text-align:left">Marbles</td>
</tr>
<tr>
<td style="text-align:left">Swimming</td>
</tr>
<tr>
<td style="text-align:left">People watching</td>
</tr>
<tr>
<td style="text-align:left">Racquetball</td>
</tr>
<tr>
<td style="text-align:left">Microscopy</td>
</tr>
<tr>
<td style="text-align:left">Boxing</td>
</tr>
<tr>
<td style="text-align:left">Traveling</td>
</tr>
<tr>
<td style="text-align:left">Footbag</td>
</tr>
<tr>
<td style="text-align:left">Amateur geology</td>
</tr>
<tr>
<td style="text-align:left">Videophilia (Home theater)</td>
</tr>
<tr>
<td style="text-align:left">World of warcraft</td>
</tr>
<tr>
<td style="text-align:left">Model aircraft making and flying</td>
</tr>
<tr>
<td style="text-align:left">Amateur astronomy</td>
</tr>
<tr>
<td style="text-align:left">Gaming</td>
</tr>
<tr>
<td style="text-align:left">Slot car racing</td>
</tr>
<tr>
<td style="text-align:left">Disc golf</td>
</tr>
<tr>
<td style="text-align:left">Gongoozling</td>
</tr>
<tr>
<td style="text-align:left">Seashell collecting</td>
</tr>
<tr>
<td style="text-align:left">Trainspotting</td>
</tr>
<tr>
<td style="text-align:left">Bridge</td>
</tr>
<tr>
<td style="text-align:left">Color Guard</td>
</tr>
<tr>
<td style="text-align:left">Climbing</td>
</tr>
<tr>
<td style="text-align:left">Vintage Books</td>
</tr>
<tr>
<td style="text-align:left">Handball</td>
</tr>
<tr>
<td style="text-align:left">Bus spotting</td>
</tr>
<tr>
<td style="text-align:left">Cycling</td>
</tr>
<tr>
<td style="text-align:left">Table football</td>
</tr>
<tr>
<td style="text-align:left">Vintage cars</td>
</tr>
<tr>
<td style="text-align:left">Mineral collecting</td>
</tr>
<tr>
<td style="text-align:left">Golfing</td>
</tr>
<tr>
<td style="text-align:left">Aircraft spotting</td>
</tr>
<tr>
<td style="text-align:left">Stone collecting</td>
</tr>
<tr>
<td style="text-align:left">Badminton</td>
</tr>
<tr>
<td style="text-align:left">Jugger</td>
</tr>
<tr>
<td style="text-align:left">Football</td>
</tr>
<tr>
<td style="text-align:left">Cubing</td>
</tr>
<tr>
<td style="text-align:left">Shortwave listening</td>
</tr>
<tr>
<td style="text-align:left">College football</td>
</tr>
<tr>
<td style="text-align:left">Fossil hunting</td>
</tr>
<tr>
<td style="text-align:left">Exhibition Drill</td>
</tr>
<tr>
<td style="text-align:left">Reading</td>
</tr>
<tr>
<td style="text-align:left">Poker</td>
</tr>
<tr>
<td style="text-align:left">Rock stacking</td>
</tr>
<tr>
<td style="text-align:left">Pole dancing</td>
</tr>
<tr>
<td style="text-align:left">Weightlifting</td>
</tr>
<tr>
<td style="text-align:left">Curling</td>
</tr>
<tr>
<td style="text-align:left">Kart racing</td>
</tr>
<tr>
<td style="text-align:left">Gymnastics</td>
</tr>
<tr>
<td style="text-align:left">Volleyball</td>
</tr>
<tr>
<td style="text-align:left">Modelling</td>
</tr>
<tr>
<td style="text-align:left">Dancing</td>
</tr>
<tr>
<td style="text-align:left">Vintage clothing</td>
</tr>
<tr>
<td style="text-align:left">Ice hockey</td>
</tr>
<tr>
<td style="text-align:left">Animal showing</td>
</tr>
<tr>
<td style="text-align:left">Metal detecting</td>
</tr>
<tr>
<td style="text-align:left">Book collecting</td>
</tr>
<tr>
<td style="text-align:left">Auto Racing</td>
</tr>
<tr>
<td style="text-align:left">Antiquing</td>
</tr>
<tr>
<td style="text-align:left">Meteorology</td>
</tr>
<tr>
<td style="text-align:left">Record collecting</td>
</tr>
<tr>
<td style="text-align:left">Fencing</td>
</tr>
<tr>
<td style="text-align:left">Pigeon racing</td>
</tr>
<tr>
<td style="text-align:left">Equestrianism</td>
</tr>
<tr>
<td style="text-align:left">Figure skating</td>
</tr>
<tr>
<td style="text-align:left">Table tennis</td>
</tr>
<tr>
<td style="text-align:left">Dog sport</td>
</tr>
<tr>
<td style="text-align:left">Target shooting</td>
</tr>
<tr>
<td style="text-align:left">Art collecting</td>
</tr>
<tr>
<td style="text-align:left">Dota 2</td>
</tr>
<tr>
<td style="text-align:left">Herping</td>
</tr>
<tr>
<td style="text-align:left">Archery</td>
</tr>
<tr>
<td style="text-align:left">Association football (Soccer)</td>
</tr>
<tr>
<td style="text-align:left">Bowling</td>
</tr>
<tr>
<td style="text-align:left">Speed skating</td>
</tr>
<tr>
<td style="text-align:left">Squash</td>
</tr>
<tr>
<td style="text-align:left">Boxing</td>
</tr>
<tr>
<td style="text-align:left">Martial arts</td>
</tr>
<tr>
<td style="text-align:left">American football</td>
</tr>
<tr>
<td style="text-align:left">Australian Football League</td>
</tr>
<tr>
<td style="text-align:left">Volleyball</td>
</tr>
<tr>
<td style="text-align:left">Movie collecting</td>
</tr>
<tr>
<td style="text-align:left">Antiquities</td>
</tr>
<tr>
<td style="text-align:left">Geocaching</td>
</tr>
<tr>
<td style="text-align:left">Deltiology (Postcard collecting)</td>
</tr>
<tr>
<td style="text-align:left">Auto audiophilia</td>
</tr>
<tr>
<td style="text-align:left">Programming</td>
</tr>
<tr>
<td style="text-align:left">Flower collecting and pressing</td>
</tr>
<tr>
<td style="text-align:left">Airsoft</td>
</tr>
<tr>
<td style="text-align:left">Darts</td>
</tr>
<tr>
<td style="text-align:left">Seaglass collecting</td>
</tr>
<tr>
<td style="text-align:left">Stamp collecting</td>
</tr>
</tbody>
</table><h5 id="habits"><a name="habits" href="#habits"></a>Habits</h5><table>
<thead>
<tr>
<th style="text-align:left">Habits:</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">High pitch/low raspy voice depending on mood</td>
</tr>
<tr>
<td style="text-align:left">Smacking gum</td>
</tr>
<tr>
<td style="text-align:left">Toying with objects before them</td>
</tr>
<tr>
<td style="text-align:left">Tapping foot</td>
</tr>
<tr>
<td style="text-align:left">Putting their feet on a desk or table</td>
</tr>
<tr>
<td style="text-align:left">Rubbing eyes/chin</td>
</tr>
<tr>
<td style="text-align:left">Speech patterns</td>
</tr>
<tr>
<td style="text-align:left">Squinting</td>
</tr>
<tr>
<td style="text-align:left">Glancing at watch</td>
</tr>
<tr>
<td style="text-align:left">Clicking or tapping teeth with a nail</td>
</tr>
<tr>
<td style="text-align:left">Talking with a full mouth</td>
</tr>
<tr>
<td style="text-align:left">Shrugging</td>
</tr>
<tr>
<td style="text-align:left">Playing with their glasses (spectacles) either pushing them up their nose or taking them off and twirling then by one of the arms.</td>
</tr>
<tr>
<td style="text-align:left">Chewing on their pencil</td>
</tr>
<tr>
<td style="text-align:left">Chewing bottom lip</td>
</tr>
<tr>
<td style="text-align:left">Humming</td>
</tr>
<tr>
<td style="text-align:left">Gesturing a lot when speaking</td>
</tr>
<tr>
<td style="text-align:left">Picking at nail polish</td>
</tr>
<tr>
<td style="text-align:left">Stuttering</td>
</tr>
<tr>
<td style="text-align:left">Applying Chap Stick to lips</td>
</tr>
<tr>
<td style="text-align:left">Potty mouth</td>
</tr>
<tr>
<td style="text-align:left">Twirling a ring around finger</td>
</tr>
<tr>
<td style="text-align:left">Cross/uncross legs</td>
</tr>
<tr>
<td style="text-align:left">Jiggling leg up and down</td>
</tr>
<tr>
<td style="text-align:left">Shifts in their seat when nervous</td>
</tr>
<tr>
<td style="text-align:left">Sniffing</td>
</tr>
<tr>
<td style="text-align:left">Slurping</td>
</tr>
<tr>
<td style="text-align:left">Raising eyebrows as they speak</td>
</tr>
<tr>
<td style="text-align:left">Pointing</td>
</tr>
<tr>
<td style="text-align:left">Slouching</td>
</tr>
<tr>
<td style="text-align:left">Cracking knuckles (cliche)</td>
</tr>
<tr>
<td style="text-align:left">Jaw clenching/jaw muscle jerking (mainly a male attribute)</td>
</tr>
<tr>
<td style="text-align:left">Twirling hair</td>
</tr>
<tr>
<td style="text-align:left">Pulling at bottom lip</td>
</tr>
<tr>
<td style="text-align:left">Snapping fingers</td>
</tr>
<tr>
<td style="text-align:left">Picking at teeth</td>
</tr>
<tr>
<td style="text-align:left">Rubbing hands together</td>
</tr>
<tr>
<td style="text-align:left">Yawning</td>
</tr>
<tr>
<td style="text-align:left">Winking</td>
</tr>
<tr>
<td style="text-align:left">Running fingers through hair</td>
</tr>
<tr>
<td style="text-align:left">Excessive eye blinking</td>
</tr>
<tr>
<td style="text-align:left">Pinching skin</td>
</tr>
<tr>
<td style="text-align:left">Picking at facial hairâ€”eyebrows/eye lashes/moustache</td>
</tr>
<tr>
<td style="text-align:left">Licking lips</td>
</tr>
<tr>
<td style="text-align:left">Whistling</td>
</tr>
<tr>
<td style="text-align:left">Constantly apologizing</td>
</tr>
<tr>
<td style="text-align:left">Constantly checking cell phone for messages (text or voice)</td>
</tr>
<tr>
<td style="text-align:left">Eye-rolling</td>
</tr>
<tr>
<td style="text-align:left">Saluting</td>
</tr>
<tr>
<td style="text-align:left">Biting fingernails</td>
</tr>
<tr>
<td style="text-align:left">Slapping people on the back</td>
</tr>
<tr>
<td style="text-align:left">Constantly touching up makeup using a compact mirror</td>
</tr>
<tr>
<td style="text-align:left">Sliding the tip of oneâ€™s index fingernail up and down along the side of the thumb beside it</td>
</tr>
<tr>
<td style="text-align:left">Nervous cough</td>
</tr>
<tr>
<td style="text-align:left">Burping</td>
</tr>
</tbody>
</table><h3 id="main-fantasy-character-classes"><a name="main-fantasy-character-classes" href="#main-fantasy-character-classes"></a>Main Fantasy Character Classes</h3><h5 id="fighter-class"><a name="fighter-class" href="#fighter-class"></a>Fighter Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Fighter Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">The Fighter Classes</td>
<td style="text-align:left">The fighter is basically, the strong person with heavy armor, a large melee weapon, and possibly a shield or second melee weapon.</td>
</tr>
<tr>
<td style="text-align:center">The Barbarian:</td>
<td style="text-align:left">(Also known as a Berserker) focused more on damage than defense. They have higher defense than other warriors.</td>
</tr>
<tr>
<td style="text-align:center">The Knight:</td>
<td style="text-align:left">An experienced fighter with better armor and a lot of times he is on an armored horse.</td>
</tr>
<tr>
<td style="text-align:center">The Swashbuckler:</td>
<td style="text-align:left">A fighter that is lightweight and sometimes has little or no armor. They have great agility, cunning, and technical skills.</td>
</tr>
<tr>
<td style="text-align:center">The Paladin:</td>
<td style="text-align:left">(Also known as a Crusader, Templar, and Inquisitor) Light based knight with Healer abilities most of the time. Uses White Magic to gain higher defense.</td>
</tr>
<tr>
<td style="text-align:center">The Dark Knight:</td>
<td style="text-align:left">(Antipaladin and Death Knight.) Is the opposite of a Paladin. Their dark magic deal high amounts of damage and can lower stats of the foe.</td>
</tr>
<tr>
<td style="text-align:center">The Dragon Knight:</td>
<td style="text-align:left">(Also known as a Dragoon (Dragon rider)) Their armor is normally in a dragon style. They rarely fly, but commonly jump high and have fire breath. They can deal greater damage to dragons and most of the time have a dragon as a pet.</td>
</tr>
<tr>
<td style="text-align:center">The Samurai:</td>
<td style="text-align:left">Normally have less defense. They have Ki attacks, speed, great damage, and mobility. They are experts with swords and are known to be able to deflect bullets with their blade. It has been proven that they were able to.</td>
</tr>
<tr>
<td style="text-align:center">Warlord:</td>
<td style="text-align:left">(Also known as a General, Marshal, Commander, and Tactician) Tactical master. He can hold his own in frontline combat and gives allies around him bonuses for their stats.</td>
</tr>
<tr>
<td style="text-align:center">Hero:</td>
<td style="text-align:left">(Also known as a Lord or Protagonist) Good all around. They gain magic and unique skills. They always use a sword and a shield. It is possible that they will have no magic or shield, but that makes a really boring hero.</td>
</tr>
</tbody>
</table><h5 id="magician-class"><a name="magician-class" href="#magician-class"></a>Magician Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Magician Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">The Magician Classes:</td>
<td style="text-align:left">(Also known as a Mage, Sorcerer, Wizard, Warlock, Witch, Magus, Magician, Sage, and Magi.) The magician uses magic against foes. There is a massive variety of different magic and one can make up an infinite number of magic users, but here are the basic magicians.</td>
</tr>
<tr>
<td style="text-align:center">The Inherent Gift Magician:</td>
<td style="text-align:left">(Known as a Sorcerer) Born with magic and do not need to study it. They normally do not know many spells unless they study.</td>
</tr>
<tr>
<td style="text-align:center">The Theurgist Magician:</td>
<td style="text-align:left">(Known as a Warlock) The magician gains magic by making a contract with a spirit.</td>
</tr>
<tr>
<td style="text-align:center">The Summoner Magician:</td>
<td style="text-align:left">(known as a Conjurer) A high level Theurgist magician. They can summon beings to do their bidding</td>
</tr>
<tr>
<td style="text-align:center">The Vancian Magician:</td>
<td style="text-align:left">(Know as a Wizard) These magicians study hard and learn magic.</td>
</tr>
<tr>
<td style="text-align:center">The Red Mage:</td>
<td style="text-align:left">They are open minded and study a variety of magic.</td>
</tr>
<tr>
<td style="text-align:center">The Blue Mage:</td>
<td style="text-align:left">(known as Mime or Mimic) They learn magic by fighting and can absorb magic or learn it by seeing their enemies use magic abilities.</td>
</tr>
<tr>
<td style="text-align:center">The Necromantic Magician:</td>
<td style="text-align:left">They use the power of the dead, blood, and death energy. They are normally bad, but not all dark users are evil.</td>
</tr>
<tr>
<td style="text-align:center">The Illusionist Magician:</td>
<td style="text-align:left">They are only able to cast illusions.</td>
</tr>
<tr>
<td style="text-align:center">The Nature Magician:</td>
<td style="text-align:left">Have power over nature. Ex: Controlling vines, fire, water, throwing rocks, and creatures.</td>
</tr>
<tr>
<td style="text-align:center">The Elemental Magician:</td>
<td style="text-align:left">They can only control the elements. Fire, water, wind, etc.</td>
</tr>
<tr>
<td style="text-align:center">The Druid Magician:</td>
<td style="text-align:left">The can do anything related to nature. Turn into animals, trees, use fire with help of spirits, etc.</td>
</tr>
<tr>
<td style="text-align:center">The Shamanic Magician:</td>
<td style="text-align:left">Summons and makes deals with spirits.</td>
</tr>
<tr>
<td style="text-align:center">The Elemental Magician:</td>
<td style="text-align:left">They can control the elements. Plants, water, ice, fire, etc. Can be born with their power or a pack with a spirit or demon.</td>
</tr>
</tbody>
</table><h5 id="rogue-class"><a name="rogue-class" href="#rogue-class"></a>Rogue Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Rogue Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">The Rogue Classes:</td>
<td style="text-align:left">(Also known as a thief, ninja, assassin, shadow, pirate, scout, and gambler.). Rogues are normally thieves or treasure hunters. They are good at lockpicking, traps, disarming, sneak attacks, and attacking from the behind.</td>
</tr>
<tr>
<td style="text-align:center">The Thief:</td>
<td style="text-align:left">Ability to steal items from enemies or others. Normally the thief can steal rare items.</td>
</tr>
<tr>
<td style="text-align:center">The Assassin:</td>
<td style="text-align:left">Very stealthy and has many fighting abilities. The assassin normally poisons the enemy to easily take them down.</td>
</tr>
<tr>
<td style="text-align:center">The Gambler:</td>
<td style="text-align:left">Has some magic that relies on chance. They fight with cards or other gambling game items.</td>
</tr>
<tr>
<td style="text-align:center">The Ninja:</td>
<td style="text-align:left">Have a large range of skills. Vanishing with smoke and has most rogue like class skills. They normally hide their face in the ninja outfit, throw items like shurikens (Normally good with any weapon), and are crazy fast. The sometimes can use special powers with chakra.</td>
</tr>
<tr>
<td style="text-align:center">The Shadow:</td>
<td style="text-align:left">Ninja like rogues that hide in shadows or can hide in a shadow dimension they create.</td>
</tr>
<tr>
<td style="text-align:center">The Pirate:</td>
<td style="text-align:left">A rogue that can switch from sword and pistol. They are not normally strong, but captains normally are very good at sword play, stealing, and tricks or riddles. For example, hiding their treasure, making traps, and anything to protect their belongings. They are not always at sea, but normally have some kind of transportation. Sky pirates, water pirates, sand boat pirates, etc.</td>
</tr>
<tr>
<td style="text-align:center">The Scout:</td>
<td style="text-align:left">They move from place to place quickly with superior sensory and information gathering skills. They are normally not noticed and if they are then they are killed. Not many scouts are good at combat.</td>
</tr>
</tbody>
</table><h5 id="cleric-class"><a name="cleric-class" href="#cleric-class"></a>Cleric Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Cleric Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">The Cleric Classes:</td>
<td style="text-align:left">(Also known as a medic or healer.)  Unlike magicians their power comes from worshiping some kind of god.</td>
<td>classes, the Clerics usually draw their powers from Faith (god). They normally need to follow and practice their belief to use their power or it has a chance of backfiring on them.</td>
</tr>
<tr>
<td style="text-align:center">The Priest:</td>
<td style="text-align:left">(Known as Healer and White Mage) They are able to fight off certain types of enemies like demons or undead beings. They normally have healing powers as well.</td>
</tr>
<tr>
<td style="text-align:center">The Battle Priest:</td>
<td style="text-align:left">They carry blessed weapons that can cause great damage to enemies. They normally fight in close combat.</td>
</tr>
<tr>
<td style="text-align:center">The Witch Doctor:</td>
<td style="text-align:left">Their power comes from nature culture worshiping.</td>
</tr>
<tr>
<td style="text-align:center">The Templar:</td>
<td style="text-align:left">They are a jack of all trades, but weaker than most classes and normally handle the church dirty work. Covering things up.</td>
</tr>
<tr>
<td style="text-align:center">The Caster:</td>
<td style="text-align:left">This character is usually female and the heroine. They will be in the party because no one else can use magic. They are normally weak all around, but progress overtime. </td>
</tr>
</tbody>
</table><h5 id="ranger-class"><a name="ranger-class" href="#ranger-class"></a>Ranger Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Ranger Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">The Ranger Classes:</td>
<td style="text-align:left">(Also known as a ranger, woodsmen, and hunter.) Rangers are good at archery, but can use a sword if they have to. They have skills to survive in the wilderness and can sometimes use nature magic.</td>
</tr>
<tr>
<td style="text-align:center">The Sniper Ranger:</td>
<td style="text-align:left">This type of ranger is only an archer, but does higher damage with projectiles for this reason. Their projectiles may cause status changes to their enemy. EX: Slow them down, poison them, lower their defense, etc. They are in the back of the troops because they are horrible at close combat.</td>
</tr>
<tr>
<td style="text-align:center">The Bow and Blade Ranger:</td>
<td style="text-align:left">This type of ranger uses weapons with a blade. They are good at close combat and are okay with a bow.</td>
</tr>
<tr>
<td style="text-align:center">The Beastmaster Ranger:</td>
<td style="text-align:left">This ranger can permanently take control of animals and have them destroy the enemy while they heal their allies and support with long range weapons.</td>
</tr>
<tr>
<td style="text-align:center">The Dual Wielding Ranger:</td>
<td style="text-align:left">Uses two melee weapons.</td>
</tr>
<tr>
<td style="text-align:center">The Trapper Ranger:</td>
<td style="text-align:left">Good at laying various traps and making it so the enemies can easily be ambushed.</td>
</tr>
<tr>
<td style="text-align:center">The Magical Ranger:</td>
<td style="text-align:left">Uses enchanted arrows. They can freeze the enemy, slow them down, or trap them in a net. Almost any kind of element.</td>
</tr>
</tbody>
</table><h5 id="rarer-class"><a name="rarer-class" href="#rarer-class"></a>Rarer Class</h5><table>
<thead>
<tr>
<th style="text-align:center">Rarer Class</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Rarer Class Archetypes:</td>
<td style="text-align:left">This class depends on the world. These classes have a science fiction or medieval setting thrown around in them.</td>
</tr>
<tr>
<td style="text-align:center">Magic Knight:</td>
<td style="text-align:left">Other Names: (Known as Hexblade, Spellblade, Rune Knight, Eldritch Knight.) The Magic Knight is a hybrid combat magician. Normally weaker at magic than a mage and not as good in combat as a fighter.</td>
</tr>
<tr>
<td style="text-align:center">The Bard:</td>
<td style="text-align:left">They use songs for strengthening allies, weakening enemies, status effects, and cause damage. Bards are good at diplomacy compared to most classes.</td>
</tr>
<tr>
<td style="text-align:center">The Dancer:</td>
<td style="text-align:left">A variation of the Bard, but dances instead. Using dance styles to cut up the enemy and other effects.</td>
</tr>
<tr>
<td style="text-align:center">The Monk:</td>
<td style="text-align:left">(Known as Black Belt and Martial Artist) The Monk uses their bare fists to fight or use only martial art weapons like nunchucks and staffs. They often use Ki Attacks and charge up attacks.</td>
</tr>
<tr>
<td style="text-align:center">The Engineer:</td>
<td style="text-align:left">(known as Tinker, Machinist, and Gadgeteer.) Engineers rely on technology. They are seen in most genre related to science fiction. For example, steampunk, cyberpunk, and clockpunk. They have guns and bombs as weapons. They sometimes employ stationary and mobile machines on the battlefield.</td>
</tr>
<tr>
<td style="text-align:center">The Alchemist:</td>
<td style="text-align:left">Chemist. An Alchemist combines items, magic, and science to make bombs, potions, and sometimes changing the structure of objects or creature around them. They often they use their own body in experiments.</td>
</tr>
<tr>
<td style="text-align:center">The Psychic:</td>
<td style="text-align:left">(Known ad Psion and Mentalist) Psychics use telepathy and psychokinesis to attack the enemies mind or to deal damage to his body. It differs from magic because it is done with the mind or brain. Magic just comes out of no where. Poof! Magic.</td>
</tr>
<tr>
<td style="text-align:center">The Gunslinger:</td>
<td style="text-align:left">They use a variety of guns most of the time. They normally just involve guns to be honest. Most of the time very skilled at them compared to engineers.</td>
</tr>
</tbody>
</table><h2 id="chapter-18:-upgrading,-export-project,-and-making-libraries"><a name="chapter-18:-upgrading,-export-project,-and-making-libraries" href="#chapter-18:-upgrading,-export-project,-and-making-libraries"></a>Chapter 18: Upgrading, Export Project, and Making Libraries</h2><p>You can get the sample <code>Chapter_18_export_sample.zip</code> in the lesson directory.</p><h5 id="upgrading:"><a name="upgrading:" href="#upgrading:"></a>Upgrading:</h5><p>One must follow the Solarus <a href="http://wiki.solarus-games.org/doku.php?id=migration_guide">migration guide</a> to learn how to upgrade to a new version of Solarus. This book is for Solarus 1.5.x. It is possible that this book will be forked for 1.6+</p><h5 id="export-project:"><a name="export-project:" href="#export-project:"></a>Export Project:</h5><p>Remember to make a backup of your game before exporting.</p><p>You need to copy the Solarus Engine into a folder of your choosing, copy your quest <code>data</code> folder into that folder, and delete files you do not need.</p><p><strong>Deleting Files</strong></p><p>Not all the  <code>.dll</code> files are needed when exporting your game. You can delete the Solarus editor files because some of them are quite large, but you might need them for the quest launcher or if possible memory leaks happen.</p><table>
<thead>
<tr>
<th style="text-align:left">Delete Files &amp; Folders</th>
<th style="text-align:left">File Size</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Folder assets</td>
<td style="text-align:left">50+ MB</td>
</tr>
<tr>
<td style="text-align:left">Folder platforms</td>
<td style="text-align:left">1.3 MB</td>
</tr>
<tr>
<td style="text-align:left">icudt52.dll</td>
<td style="text-align:left">23.5 MB</td>
</tr>
<tr>
<td style="text-align:left">icuin52.dll</td>
<td style="text-align:left">3.3 MB</td>
</tr>
<tr>
<td style="text-align:left">icuuc52.dll</td>
<td style="text-align:left">2.0 MB</td>
</tr>
<tr>
<td style="text-align:left">Qt5Core.dll</td>
<td style="text-align:left">4.8 MB</td>
</tr>
<tr>
<td style="text-align:left">Qt5Gui.dll</td>
<td style="text-align:left">4.6 MB</td>
</tr>
<tr>
<td style="text-align:left">Qt5Widgets.dll</td>
<td style="text-align:left">5.9 MB</td>
</tr>
<tr>
<td style="text-align:left">solarus_editor_fr.qm</td>
<td style="text-align:left">100+ KB</td>
</tr>
<tr>
<td style="text-align:left">solarus-quest-editor.exe</td>
<td style="text-align:left">4.3 MB</td>
</tr>
<tr>
<td style="text-align:left">solarus.exe</td>
<td style="text-align:left">450 + KB</td>
</tr>
</tbody>
</table><table>
<thead>
<tr>
<th style="text-align:left">Files Needed</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">libsolarus-gui.dll   </td>
</tr>
<tr>
<td style="text-align:left">SDL2_image.dll</td>
</tr>
<tr>
<td style="text-align:left">libfreetype-6.dll   </td>
</tr>
<tr>
<td style="text-align:left">libstdc++-6.dll      </td>
</tr>
<tr>
<td style="text-align:left">SDL2_ttf.dll</td>
</tr>
<tr>
<td style="text-align:left">libgcc_s_dw2-1.dll  </td>
</tr>
<tr>
<td style="text-align:left">libvorbis.dll        </td>
</tr>
<tr>
<td style="text-align:left">libmodplug-1.dll    </td>
</tr>
<tr>
<td style="text-align:left">libvorbisfile.dll    </td>
</tr>
<tr>
<td style="text-align:left">solarus_fr.qm</td>
</tr>
<tr>
<td style="text-align:left">libogg.dll          </td>
</tr>
<tr>
<td style="text-align:left">libwinpthread-1.dll  </td>
</tr>
<tr>
<td style="text-align:left">solarus-run.exe</td>
</tr>
<tr>
<td style="text-align:left">libphysfs.dll       </td>
</tr>
<tr>
<td style="text-align:left">lua51.dll            </td>
</tr>
<tr>
<td style="text-align:left">wrap_oal.dll</td>
</tr>
<tr>
<td style="text-align:left">libpng16-16.dll     </td>
</tr>
<tr>
<td style="text-align:left">OpenAL32.dll         </td>
</tr>
<tr>
<td style="text-align:left">zlib1.dll</td>
</tr>
<tr>
<td style="text-align:left">libsolarus.dll      </td>
</tr>
<tr>
<td style="text-align:left">SDL2.dll</td>
</tr>
</tbody>
</table><p><strong>Setting up Data</strong></p><p>The inside of your folder should look like this now.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/Export_setup_basic_1.png" alt="Chapter_18_images/Export_setup_basic_1.png"></p><p>You can leave your <code>data</code> folder out like that or you can zip it <code>data.zip</code>. Do not encrypt it because it will not work when activating the <code>solarus-run.exe</code>. You can rename the zip to <code>data.solarus</code>.</p><p>If you use a Linux operating system, then there might be an issue when zipping the file. The game will not play and you will get an error.txt. </p><p>The reason is that Linux creates certain attributes to files when they are created. I even tried using Microsoft Windows programs (7Zip) with Wine and it did not work.</p><p>I zipped it and renamed it in Windows 7 and everything worked fine. It even worked in Linux using Wine!</p><p><strong>Packaging or Distributing</strong></p><p>You can zip the folder you made or use <a href="http://www.jrsoftware.org/isinfo.php">Inno Setup</a>. You must provide a link to the <a href="https://github.com/solarus-games/solarus">Solarus Engine Source code</a> and your game code because any code made with GPL code becomes GPL. One might want to link to the <a href="http://www.solarus-games.org/">Solarus Website</a> as well.</p><p><strong>Inno Setup</strong></p><p><strong>Step 1:</strong></p><p>Select create a new script and press OK.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_1.png" alt="Chapter_18_images/inno_setup_1.png"></p><p><strong>Step 2:</strong></p><p>Press next.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_2.png" alt="Chapter_18_images/inno_setup_2.png"></p><p><strong>Step 3:</strong></p><table>
<thead>
<tr>
<th style="text-align:left">Application Information</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Application name</td>
<td style="text-align:left">Name of your program.</td>
</tr>
<tr>
<td style="text-align:left">Application version</td>
<td style="text-align:left">Current version of your project.</td>
</tr>
<tr>
<td style="text-align:left">Application publisher</td>
<td style="text-align:left">Your company or business name.</td>
</tr>
<tr>
<td style="text-align:left">Application website</td>
<td style="text-align:left">www.YourWebsite.com</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_3.png" alt="Chapter_18_images/inno_setup_3.png"></p><p><strong>Step 4:</strong></p><p>Add the folder destination and name of your folder.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_4.png" alt="Chapter_18_images/inno_setup_4.png"></p><p><strong>Step 5:</strong></p><p>Main executable is <code>Solarus_run.exe</code>.</p><p>Other files are the <code>.dll</code> and <code>data</code> folder.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_5.png" alt="Chapter_18_images/inno_setup_5.png"></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_6.png" alt="Chapter_18_images/inno_setup_6.png"></p><p><strong>Step 6:</strong></p><p>Add the name of your application start folder.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_7.png" alt="Chapter_18_images/inno_setup_7.png"></p><p><strong>Step 7:</strong></p><p>Add your text information. </p><ul>
<li>License</li><li>Information before install</li><li>Information after install</li></ul><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_8.png" alt="Chapter_18_images/inno_setup_8.png"></p><p><strong>Step 8:</strong></p><p>Select the languages you want.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_9.png" alt="Chapter_18_images/inno_setup_9.png"></p><p><strong>Step 9:</strong></p><table>
<thead>
<tr>
<th style="text-align:left">Compiler Settings</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Filename output</td>
<td style="text-align:left">The name of your installer file.</td>
</tr>
<tr>
<td style="text-align:left">Custom Icon</td>
<td style="text-align:left">Custom icon image for your installer.</td>
</tr>
<tr>
<td style="text-align:left">Setup Password</td>
<td style="text-align:left">Password for your installer.</td>
</tr>
</tbody>
</table><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_10.png" alt="Chapter_18_images/inno_setup_10.png"></p><p><strong>Step 10:</strong></p><p>Next</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_11.png" alt="Chapter_18_images/inno_setup_11.png"></p><p><strong>Step 11:</strong></p><p>Next</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_12.png" alt="Chapter_18_images/inno_setup_12.png"></p><p><strong>Step 12:</strong></p><p>Yes or no for compiling your script. Remember to <code>File &gt; save</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_13.png" alt="Chapter_18_images/inno_setup_13.png"></p><p><strong>Step 13:</strong></p><p>Edit the script if you want.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_14.png" alt="Chapter_18_images/inno_setup_14.png"></p><p><strong>Step 14:</strong></p><p>You can always compile your script from <code>Build &gt; Compile</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_15.png" alt="Chapter_18_images/inno_setup_15.png"></p><p><strong>Step 15:</strong></p><p>Your installer will show up in a folder called <code>output</code>.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/inno_setup_16.png" alt="Chapter_18_images/inno_setup_16.png"></p><h3 id="making-libraries"><a name="making-libraries" href="#making-libraries"></a>Making Libraries</h3><p>The main purpose of a library is to make functions to achieve a task and/or to shorten code.</p><h5 id="sample"><a name="sample" href="#sample"></a>Sample</h5><p>You can grab the sample in <code>Lessons &gt; Chapter_18_library_sample.zip</code>. All the files you need are in it.</p><h5 id="documentation"><a name="documentation" href="#documentation"></a>Documentation</h5><p>Documentation can help people understand what the functions in your library do and how to use them. Markdown is a format that is becoming very popular and it can help you make documentation. I recommend a markdown reader/writer like <a href="http://pad.haroopress.com/user.html#download">Haroopad</a>.</p><p>You can get the entity lib sample documentation in the data folder of the sample <code>Chapter_18_library_sample &gt; data &gt; entity_lib_documentation.md</code>.</p><h5 id="basic-markdown-formatting"><a name="basic-markdown-formatting" href="#basic-markdown-formatting"></a>Basic Markdown Formatting</h5><p>You can manually type the format or you can insert it with Haroopadâ€™s insert menu.</p><p><strong>Images:</strong></p><pre><code data-origin="<pre><code>![text to show if image is no longer exists online](URL or link to the image)

EX:
![Fairyolica World Progress](http://s33.postimg.org/5vwatpy6n/Fairyolica_World_tiles.png)
</code></pre>">![text to show if image is no longer exists online](URL or link to the image)

EX:
![Fairyolica World Progress](http://s33.postimg.org/5vwatpy6n/Fairyolica_World_tiles.png)
</code></pre><p><strong>Bold:</strong></p><pre><code data-origin="<pre><code>You put a double Asterisk** around the text.

EX:
**License:**
</code></pre>">You put a double Asterisk** around the text.

EX:
**License:**
</code></pre><p><strong>Headers:</strong></p><pre><code data-origin="<pre><code>Large Title Header text:
You put the Octothorp(#) or more commonly know as a hashtag(#) before the text.

EX:
#Outside/Exterior

You can have different sized headers too. Just got to add more hashtags. 

EX:
###Outside/Exterior
</code></pre>">Large Title Header text:
You put the Octothorp(#) or more commonly know as a hashtag(#) before the text.

EX:
#Outside/Exterior

You can have different sized headers too. Just got to add more hashtags. 

EX:
###Outside/Exterior
</code></pre><p><strong>Table of Contents:</strong></p><pre><code data-origin="<pre><code>
You can just insert with haroopad. Insert &amp;gt; bottom of the list &amp;gt; table of contents
</code></pre>">
You can just insert with haroopad. Insert &gt; bottom of the list &gt; table of contents
</code></pre><p><strong>Embed Links:</strong></p><pre><code data-origin="<pre><code>[Go to Google](https://www.google.com)
</code></pre>">[Go to Google](https://www.google.com)
</code></pre><p><strong>Bullets:</strong></p><pre><code data-origin="<pre><code>Dash + space

-[space here][text]

EX:
- This is a bullet
</code></pre>">Dash + space

-[space here][text]

EX:
- This is a bullet
</code></pre><p><strong>Table &amp; Nextline:</strong></p><pre><code data-origin="<pre><code>You can make a table with the vertical line &quot;|&quot; character. It is located by the brackets. Press shift when pressing the slash key.

1.The first part of making a table it to set a title or category.

|Category|

2. The second part is the spacing. This requires some colons and minus signs / dashes.

Centered
|:---:|

Left
|:---|

Right
|---:|

3. The last set is to add a section.

|Section|

4.  Next line in a table. It can make a messy situation look nice. Use &amp;lt;br&amp;gt; for a next line.

Line_1: &amp;lt;br&amp;gt; Line_2: &amp;lt;br&amp;gt; Line_3:

EX:

|Category_1|Category_2|
|:---:|:---|
|Section| Line_1: &amp;lt;br&amp;gt; Line_2: &amp;lt;br&amp;gt; Line_3:
</code></pre>">You can make a table with the vertical line "|" character. It is located by the brackets. Press shift when pressing the slash key.

1.The first part of making a table it to set a title or category.

|Category|

2. The second part is the spacing. This requires some colons and minus signs / dashes.

Centered
|:---:|

Left
|:---|

Right
|---:|

3. The last set is to add a section.

|Section|

4.  Next line in a table. It can make a messy situation look nice. Use &lt;br&gt; for a next line.

Line_1: &lt;br&gt; Line_2: &lt;br&gt; Line_3:

EX:

|Category_1|Category_2|
|:---:|:---|
|Section| Line_1: &lt;br&gt; Line_2: &lt;br&gt; Line_3:
</code></pre><p><strong>Task List:</strong></p><p>dash + brackets + item</p><p>An â€œxâ€ in the brackets will check the item.</p><pre><code data-origin="<pre><code>- [ ] Mercury
- [x] Venus
- [x] Earth
- [x] Mars
- [ ] Jupiter
- [ ] Saturn
- [ ] Uranus
- [ ] Neptune
</code></pre>">- [ ] Mercury
- [x] Venus
- [x] Earth
- [x] Mars
- [ ] Jupiter
- [ ] Saturn
- [ ] Uranus
- [ ] Neptune
</code></pre><h4 id="types-of-libraries"><a name="types-of-libraries" href="#types-of-libraries"></a>Types of Libraries</h4><p>Solarus has certain name types for different parts. You could mix different name types in a single Lua file.</p><p>Names of Solarus userdata Lua types. These are used with the function:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>sol.main.get_metatable(&quot;type_name&quot;)
</code></pre>">sol.main.get_metatable(<span class="hljs-string">"type_name"</span>)
</code></pre><table>
<thead>
<tr>
<th style="text-align:left">type_name (string)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">â€œgameâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œmapâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œitemâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsurfaceâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œtext_surfaceâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œspriteâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œtimerâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œmovementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œstraight_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œtarget_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œrandom_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpath_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œrandom_path_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpath_finding_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcircle_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œjump_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpixel_movementâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œheroâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œdynamic_tileâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œteletransporterâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œdestinationâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œpickableâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œdestructibleâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcarried_objectâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œchestâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œshop_treasureâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œenemyâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œnpcâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œblockâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œjumperâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œswitchâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œsensorâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œseparatorâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œwallâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcrystalâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcrystal_blockâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œstreamâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œdoorâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œstairsâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œbombâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œexplosionâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œfireâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œarrowâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œhookshotâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œboomerangâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcameraâ€</td>
</tr>
<tr>
<td style="text-align:left">â€œcustom_entityâ€</td>
</tr>
</tbody>
</table><p><strong>Example:</strong></p><p>In a Lua file, declare the userdata type. I will use <code>custom_entity</code> in this example.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local metatable_entity = sol.main.get_metatable(&quot;custom_entity&quot;)
</code></pre>"><span class="hljs-keyword">local</span> metatable_entity = sol.main.get_metatable(<span class="hljs-string">"custom_entity"</span>)
</code></pre><p>Make a function in that file and require this Lua file in <code>main.lua</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function metatable_entity:right()
--code here
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>
<span class="hljs-comment">--code here</span>
<span class="hljs-keyword">end</span>
</code></pre><p>You can declare this function in a custom entity script like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>entity:right()
</code></pre>">entity:right()
</code></pre><p>I will go over this in more detail in the entity library section.</p><h5 id="entity-library-sample"><a name="entity-library-sample" href="#entity-library-sample"></a>Entity Library Sample</h5><p>The entity lib sample has movements related to custom entities. Adding the lib is quite simple. All one has to do is put the following line at the top of <code>main.lua</code> and place it in the script directory in a folder called lib to be organized.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/lib/entity_lib.lua&quot;)
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/lib/entity_lib.lua"</span>)
</code></pre><p>Here is the sample that I will explain.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--This is a library for custom entity shortcuts

local metatable_entity = sol.main.get_metatable(&quot;custom_entity&quot;)

------------------
--Straight Method
------------------
local move_straight = sol.movement.create(&quot;straight&quot;)

--Right
function metatable_entity:right()
  move_straight:set_angle(0)
  move_straight:start(self)
  self:set_direction(0)
  self:get_sprite():set_animation(&quot;walking&quot;)
end

--Up
function metatable_entity:up()
  move_straight:set_angle(math.pi / 2)
  move_straight:start(self)
  self:set_direction(1)
  self:get_sprite():set_animation(&quot;walking&quot;)
end

--Left
function metatable_entity:left()
  move_straight:set_angle(math.pi)
  move_straight:start(self)
  self:set_direction(2)
  self:get_sprite():set_animation(&quot;walking&quot;)
end

--Down
function metatable_entity:down()
  move_straight:set_angle(3 * math.pi / 2)
  move_straight:start(self)
  self:set_direction(3)
  self:get_sprite():set_animation(&quot;walking&quot;)
end

--Stop
function metatable_entity:stop()
  move_straight:stop()
  self:get_sprite():set_animation(&quot;stopped&quot;)
end

--Speed
function metatable_entity:speed(value)
  move_straight:set_speed(value)
end
</code></pre>"><span class="hljs-comment">--This is a library for custom entity shortcuts</span>

<span class="hljs-keyword">local</span> metatable_entity = sol.main.get_metatable(<span class="hljs-string">"custom_entity"</span>)

<span class="hljs-comment">------------------</span>
<span class="hljs-comment">--Straight Method</span>
<span class="hljs-comment">------------------</span>
<span class="hljs-keyword">local</span> move_straight = sol.movement.create(<span class="hljs-string">"straight"</span>)

<span class="hljs-comment">--Right</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>
  move_straight:set_angle(<span class="hljs-number">0</span>)
  move_straight:start(self)
  self:set_direction(<span class="hljs-number">0</span>)
  self:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Up</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:up</span><span class="hljs-params">()</span></span>
  move_straight:set_angle(<span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
  move_straight:start(self)
  self:set_direction(<span class="hljs-number">1</span>)
  self:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Left</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:left</span><span class="hljs-params">()</span></span>
  move_straight:set_angle(<span class="hljs-built_in">math</span>.pi)
  move_straight:start(self)
  self:set_direction(<span class="hljs-number">2</span>)
  self:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Down</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:down</span><span class="hljs-params">()</span></span>
  move_straight:set_angle(<span class="hljs-number">3</span> * <span class="hljs-built_in">math</span>.pi / <span class="hljs-number">2</span>)
  move_straight:start(self)
  self:set_direction(<span class="hljs-number">3</span>)
  self:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Stop</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:stop</span><span class="hljs-params">()</span></span>
  move_straight:stop()
  self:get_sprite():set_animation(<span class="hljs-string">"stopped"</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Speed</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:speed</span><span class="hljs-params">(value)</span></span>
  move_straight:set_speed(value)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="library-setup"><a name="library-setup" href="#library-setup"></a>Library Setup</h5><p>This library is related to the custom entity, so the metatable variable is assigned to it. This variable will be added to functions that are used in the library.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local metatable_entity = sol.main.get_metatable(&quot;custom_entity&quot;)
</code></pre>"><span class="hljs-keyword">local</span> metatable_entity = sol.main.get_metatable(<span class="hljs-string">"custom_entity"</span>)
</code></pre><p>Adding the metatable to a function called <code>right()</code> will look like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Right
function metatable_entity:right()
end
</code></pre>"><span class="hljs-comment">--Right</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>
<span class="hljs-keyword">end</span>
</code></pre><p>Calling the function is very easy after requiring it from <code>main.lua</code>.</p><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>require(&quot;scripts/lib/entity_lib.lua&quot;)
</code></pre>"><span class="hljs-built_in">require</span>(<span class="hljs-string">"scripts/lib/entity_lib.lua"</span>)
</code></pre><h5 id="self-function"><a name="self-function" href="#self-function"></a>Self Function</h5><p>A common function that is used when making libraries is <code>self</code> or at least I use it a lot. This refers to the entity itself.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local move_straight = sol.movement.create(&quot;straight&quot;)

--Right
function metatable_entity:right()
  move_straight:set_angle(0)
  move_straight:start(self)
  self:set_direction(0)
  self:get_sprite():set_animation(&quot;walking&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> move_straight = sol.movement.create(<span class="hljs-string">"straight"</span>)

<span class="hljs-comment">--Right</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>
  move_straight:set_angle(<span class="hljs-number">0</span>)
  move_straight:start(self)
  self:set_direction(<span class="hljs-number">0</span>)
  self:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>The fucntion <code>entity:right()</code> would normally be called with another function or a timer in the custom entity script. For example,</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function entity:on_created()
  entity:right()
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  entity:right()
<span class="hljs-keyword">end</span>
</code></pre><p>or</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function sol.main:on_key_pressed(key)
  if key == &quot;l&quot; and menu == false then
    entity:right()
  end
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"l"</span> <span class="hljs-keyword">and</span> menu == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    entity:right()
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><h5 id="special-entity"><a name="special-entity" href="#special-entity"></a>Special Entity</h5><p>Other times one might want to refer to a certain or special entity name instead of <code>self</code>. One simply needs to get the entity from the map like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local player2 = map:get_entity(&quot;player2&quot;)
</code></pre>"><span class="hljs-keyword">local</span> player2 = map:get_entity(<span class="hljs-string">"player2"</span>)
</code></pre><p><strong>Example:</strong></p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local move_straight = sol.movement.create(&quot;straight&quot;)

function metatable_entity:right()

local map = self:get_map()
local player2 = map:get_entity(&quot;player2&quot;)

  move_straight:set_angle(0)
  move_straight:start(player2)
  player2:set_direction(0)
  player2:get_sprite():set_animation(&quot;walking&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> move_straight = sol.movement.create(<span class="hljs-string">"straight"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>

<span class="hljs-keyword">local</span> map = self:get_map()
<span class="hljs-keyword">local</span> player2 = map:get_entity(<span class="hljs-string">"player2"</span>)

  move_straight:set_angle(<span class="hljs-number">0</span>)
  move_straight:start(player2)
  player2:set_direction(<span class="hljs-number">0</span>)
  player2:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>
</code></pre><h5 id="function-arguments"><a name="function-arguments" href="#function-arguments"></a>Function Arguments</h5><p>One can have arguments in the function too. In the example below the argument <code>value</code> is put in the function parenthesis or parameter.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>--Speed
function metatable_entity:speed(value)
  move_straight:set_speed(value)
end
</code></pre>"><span class="hljs-comment">--Speed</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:speed</span><span class="hljs-params">(value)</span></span>
  move_straight:set_speed(value)
<span class="hljs-keyword">end</span>
</code></pre><p>It would be called like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function entity:on_created()
  entity:speed(80)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  entity:speed(<span class="hljs-number">80</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>Remember the arguments do not only have to be a number value. They can be a string, table, boolean(true/false), etc.</p><h5 id="function-tables"><a name="function-tables" href="#function-tables"></a>Function Tables</h5><p>If your function has a lot of options or you just want to make things clearer, then the use of tables for your functions might be a better setup for your library. You can change the order of the items in the table and use a name to assign them. Also, you can leave off items if you do not want to use them. Thank llamazing on the Solarus forum for this example.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function test(info)
    if info.a == 5 then
        print(&quot;Letter A is&quot;,info.a)
    end

    if info.b == &quot;hey&quot; then
      print (&quot;Solarus welcomes you.&quot;)
    end

    if info.c == true then
      local test = 50
      print(test + 10)
    end
end

test{b=&quot;hey&quot;, a=5, c=true}
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span><span class="hljs-params">(info)</span></span>
    <span class="hljs-keyword">if</span> info.a == <span class="hljs-number">5</span> <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Letter A is"</span>,info.a)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> info.b == <span class="hljs-string">"hey"</span> <span class="hljs-keyword">then</span>
      <span class="hljs-built_in">print</span> (<span class="hljs-string">"Solarus welcomes you."</span>)
    <span class="hljs-keyword">end</span>

    <span class="hljs-keyword">if</span> info.c == <span class="hljs-keyword">true</span> <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">local</span> test = <span class="hljs-number">50</span>
      <span class="hljs-built_in">print</span>(test + <span class="hljs-number">10</span>)
    <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

test{b=<span class="hljs-string">"hey"</span>, a=<span class="hljs-number">5</span>, c=<span class="hljs-keyword">true</span>}
</code></pre><h5 id="player-2-movement"><a name="player-2-movement" href="#player-2-movement"></a>Player 2 Movement</h5><p>This script uses the keys i, l, j, &amp; k to make an entity walk around. It is a very simple script using the functions in the library sample. The script is in an entity model called player 2 and the entity name is player2. </p><p>If have forgotten how to setup custom entities, then I have added instructions after the script below.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local entity = ...
local game = entity:get_game()
local map = entity:get_map()
local hero = map:get_hero()
local sprite
menu = false

local camera = map:get_camera()
camera:start_tracking(entity)

---Create sprite
function entity:on_created()
  sprite = entity:create_sprite(&quot;hero/tunic1&quot;):set_animation(&quot;stopped&quot;)
  entity:set_can_traverse(&quot;hero&quot;, false)
  entity:speed(80)
end

--Key press function
function sol.main:on_key_pressed(key)

--right
  if key == &quot;l&quot; and menu == false then
    entity:right()
  end

--up
  if key == &quot;i&quot; and menu == false then
    entity:up()
  end

--left
  if key == &quot;j&quot; and menu == false then
    entity:left()
  end

--down
  if key == &quot;k&quot; and menu == false then
    entity:down()
  end
end

function sol.main:on_key_released(key)
   --right
   if key == &quot;l&quot; then
       entity:stop()
   end

   --up
   if key == &quot;i&quot; then
       entity:stop()
   end

   --left
   if key == &quot;j&quot; then
       entity:stop()
   end

   --down
   if key == &quot;k&quot; then
       entity:stop()
   end
end
</code></pre>"><span class="hljs-keyword">local</span> entity = ...
<span class="hljs-keyword">local</span> game = entity:get_game()
<span class="hljs-keyword">local</span> map = entity:get_map()
<span class="hljs-keyword">local</span> hero = map:get_hero()
<span class="hljs-keyword">local</span> sprite
menu = <span class="hljs-keyword">false</span>

<span class="hljs-keyword">local</span> camera = map:get_camera()
camera:start_tracking(entity)

<span class="hljs-comment">---Create sprite</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">entity:on_created</span><span class="hljs-params">()</span></span>
  sprite = entity:create_sprite(<span class="hljs-string">"hero/tunic1"</span>):set_animation(<span class="hljs-string">"stopped"</span>)
  entity:set_can_traverse(<span class="hljs-string">"hero"</span>, <span class="hljs-keyword">false</span>)
  entity:speed(<span class="hljs-number">80</span>)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">--Key press function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_pressed</span><span class="hljs-params">(key)</span></span>

<span class="hljs-comment">--right</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"l"</span> <span class="hljs-keyword">and</span> menu == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    entity:right()
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--up</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"i"</span> <span class="hljs-keyword">and</span> menu == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    entity:up()
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--left</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"j"</span> <span class="hljs-keyword">and</span> menu == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    entity:left()
  <span class="hljs-keyword">end</span>

<span class="hljs-comment">--down</span>
  <span class="hljs-keyword">if</span> key == <span class="hljs-string">"k"</span> <span class="hljs-keyword">and</span> menu == <span class="hljs-keyword">false</span> <span class="hljs-keyword">then</span>
    entity:down()
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sol.main:on_key_released</span><span class="hljs-params">(key)</span></span>
   <span class="hljs-comment">--right</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"l"</span> <span class="hljs-keyword">then</span>
       entity:stop()
   <span class="hljs-keyword">end</span>

   <span class="hljs-comment">--up</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"i"</span> <span class="hljs-keyword">then</span>
       entity:stop()
   <span class="hljs-keyword">end</span>

   <span class="hljs-comment">--left</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"j"</span> <span class="hljs-keyword">then</span>
       entity:stop()
   <span class="hljs-keyword">end</span>

   <span class="hljs-comment">--down</span>
   <span class="hljs-keyword">if</span> key == <span class="hljs-string">"k"</span> <span class="hljs-keyword">then</span>
       entity:stop()
   <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span>
</code></pre><p><strong>Add entity:</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/0_add_custom_entity.png" alt="Chapter_18_images/0_add_custom_entity.png"></p><p><strong>Create entity Model:</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/1_create_custom_entity.png" alt="Chapter_18_images/1_create_custom_entity.png"></p><p><strong>Name Model:</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/2_name_entity_model.png" alt="Chapter_18_images/2_name_entity_model.png"></p><p><strong>Add entity script and name entity:</strong></p><p>The entity name must be <code>player2</code> because of the example in the library sample.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/3_model%20and%20name.png" alt="Chapter_18_images/3_model%20and%20name.png"></p><p><strong>Open Script</strong></p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/4_open_entity_script.png" alt="4_open_entity_script.png"></p><p><strong>Paste player 2 script:</strong></p><p>There is no real reason to break down this script because it is very simple.</p><p><img src="https://github.com/Zefk/Solarus-ARPG-Game-Development-Book_2/raw/master/Lesson_images/Chapter_18_images/5_paste_script.png" alt="Chapter_18_images/5_paste_script.png"></p><h3 id="debugging"><a name="debugging" href="#debugging"></a>Debugging</h3><p>Lua has functions for debugging. Solarus takes care of error reports. Solarus will let you know where and what the problem is, but it does not allow you to make your own reports or warnings.</p><p>The following function uses the debug library in Lua.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>local metatable_entity = sol.main.get_metatable(&quot;custom_entity&quot;)

function Error()
    local level_1 = debug.getinfo(1) --Error() is level 1
    local level_2 = debug.getinfo(2) --Name of function being called from is level 2
    local level_3 = debug.getinfo(3) -- Return from where ever the function was declared is level 3
    print (&quot;-----------------------------------------------------------------------------------------------------------&quot;)
    print(level_3.short_src..&quot; =&amp;gt; &quot;..level_1.name.. &quot; was called by function [&quot;.. level_2.name.. &quot;] at line &quot; .. level_3.currentline)
    print (&quot;-----------------------------------------------------------------------------------------------------------&quot;)
end
</code></pre>"><span class="hljs-keyword">local</span> metatable_entity = sol.main.get_metatable(<span class="hljs-string">"custom_entity"</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Error</span><span class="hljs-params">()</span></span>
    <span class="hljs-keyword">local</span> level_1 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">1</span>) <span class="hljs-comment">--Error() is level 1</span>
    <span class="hljs-keyword">local</span> level_2 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">2</span>) <span class="hljs-comment">--Name of function being called from is level 2</span>
    <span class="hljs-keyword">local</span> level_3 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">3</span>) <span class="hljs-comment">-- Return from where ever the function was declared is level 3</span>
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"-----------------------------------------------------------------------------------------------------------"</span>)
    <span class="hljs-built_in">print</span>(level_3.short_src..<span class="hljs-string">" =&gt; "</span>..level_1.name.. <span class="hljs-string">" was called by function ["</span>.. level_2.name.. <span class="hljs-string">"] at line "</span> .. level_3.currentline)
    <span class="hljs-built_in">print</span> (<span class="hljs-string">"-----------------------------------------------------------------------------------------------------------"</span>)
<span class="hljs-keyword">end</span>
</code></pre><p>It can be declared where you want the error warning to occure like this:</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function metatable_entity:example()
  Error()
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:example</span><span class="hljs-params">()</span></span>
  Error()
<span class="hljs-keyword">end</span>
</code></pre><p>Let us say you declare this function in an entity script called <code>follower.lua</code> at line 1.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>entity:example()
</code></pre>">entity:example()
</code></pre><p>The output would be:</p><pre><code data-origin="<pre><code>-----------------------------------------------------------------------------------------------------------
[string &quot;entities/follower.lua&quot;] =&amp;gt; Error was called by function [example] at line 1
-----------------------------------------------------------------------------------------------------------
</code></pre>">-----------------------------------------------------------------------------------------------------------
[string "entities/follower.lua"] =&gt; Error was called by function [example] at line 1
-----------------------------------------------------------------------------------------------------------
</code></pre><p>I will explain this in more detail in the sections below.</p><h5 id="debug-levels"><a name="debug-levels" href="#debug-levels"></a>Debug Levels</h5><p>There are different function levels that <code>debug.getinfo</code> can detect. One should have at least 3 levels for debugging for libraries.</p><p><strong>Level 1:</strong></p><p><code>Debug.getinfo(1)</code> is the the fucntion that the debug script is in. In this case it is in a function called <code>Error()</code>. </p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    local level_1 = debug.getinfo(1) --Error() is level 1
</code></pre>">    <span class="hljs-keyword">local</span> level_1 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">1</span>) <span class="hljs-comment">--Error() is level 1</span>
</code></pre><p><strong>Level 2:</strong></p><p><code>debug.getinfo(2)</code> is the function that <code>Error()</code> is declared in. It was called in a function named <code>example()</code> or <code>function metatable_entity:example()</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    local level_2 = debug.getinfo(2) --Name of function being called from is level 2
</code></pre>">    <span class="hljs-keyword">local</span> level_2 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">2</span>) <span class="hljs-comment">--Name of function being called from is level 2</span>
</code></pre><p><strong>Level 3:</strong></p><p><code>debug.getinfo(3)</code> is where the <code>example()</code> function was declared at. In this case it was in <code>follower.lua</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    local level_3 = debug.getinfo(3) -- Return from where ever the function was
</code></pre>">    <span class="hljs-keyword">local</span> level_3 = <span class="hljs-built_in">debug</span>.getinfo(<span class="hljs-number">3</span>) <span class="hljs-comment">-- Return from where ever the function was</span>
</code></pre><h5 id="lua-debug-library-function"><a name="lua-debug-library-function" href="#lua-debug-library-function"></a>Lua Debug Library function</h5><p>I will not go over all the debug library functions, but will go over the ones I use. You can check this <a href="http://www.lua.org/pil/23.1.html">link</a> for a list of all the functions.</p><table>
<thead>
<tr>
<th style="text-align:left">Debug Fucntions</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">short_src</td>
<td style="text-align:left">A short version of source for up to 60 characters, it can be useful for error messages.</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">A name for the function.</td>
</tr>
<tr>
<td style="text-align:left">currentline</td>
<td style="text-align:left">The line where the function was declared at.</td>
</tr>
</tbody>
</table><p>I mentioned the levels above, so let me explain how to use the debug function with the levels.</p><p><code>level_3.short_src</code> will give you <code>[string "entities/follower.lua"]</code>. The location where the function was declared. </p><p><code>level_1.name</code> will give you the name of the function where the debug code is in and that is <code>Error()</code>. â€œ<code>Error</code> was called byâ€¦â€¦â€.</p><p><code>level_2.name</code> will be the function name <code>example()</code>, â€œwas called by function [<code>example</code>] atâ€.</p><p>level_3.currentline is the line number where the function example was declared at.  In this case it was declared at <code>line 1</code>.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>    print(level_3.short_src..&quot; =&amp;gt; &quot;..level_1.name.. &quot; was called by function [&quot;.. level_2.name.. &quot;] at line &quot; .. level_3.currentline)
</code></pre>">    <span class="hljs-built_in">print</span>(level_3.short_src..<span class="hljs-string">" =&gt; "</span>..level_1.name.. <span class="hljs-string">" was called by function ["</span>.. level_2.name.. <span class="hljs-string">"] at line "</span> .. level_3.currentline)
</code></pre><pre><code data-origin="<pre><code>[string &quot;entities/follower.lua&quot;] =&amp;gt; Error was called by function [example] at line 1
</code></pre>">[string "entities/follower.lua"] =&gt; Error was called by function [example] at line 1
</code></pre><h5 id="debug-traceback"><a name="debug-traceback" href="#debug-traceback"></a>Debug Traceback</h5><p>The function <code>debug.traceback()</code> returns a string of information.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function metatable_entity:right()
print(debug.traceback())

local map = self:get_map()
local player2 = map:get_entity(&quot;player2&quot;)
  move_straight:set_angle(0)
  move_straight:start(player2)
  player2:set_direction(0)
  player2:get_sprite():set_animation(&quot;walking&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">metatable_entity:right</span><span class="hljs-params">()</span></span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">debug</span>.traceback())

<span class="hljs-keyword">local</span> map = self:get_map()
<span class="hljs-keyword">local</span> player2 = map:get_entity(<span class="hljs-string">"player2"</span>)
  move_straight:set_angle(<span class="hljs-number">0</span>)
  move_straight:start(player2)
  player2:set_direction(<span class="hljs-number">0</span>)
  player2:get_sprite():set_animation(<span class="hljs-string">"walking"</span>)
<span class="hljs-keyword">end</span>
</code></pre><pre><code data-origin="<pre><code>stack traceback:
[string &quot;scripts/lib/entity_lib.lua&quot;]:18: in function 'right'
[string &quot;entities/player2.lua&quot;]:35: in function &amp;lt;[string &quot;entities/player2.lua&quot;]:31&amp;gt;
</code></pre>">stack traceback:
[string "scripts/lib/entity_lib.lua"]:18: in function 'right'
[string "entities/player2.lua"]:35: in function &lt;[string "entities/player2.lua"]:31&gt;
</code></pre><h5 id="pcall"><a name="pcall" href="#pcall"></a>Pcall</h5><p>The pcall function gives you an error if the function fails.</p><pre class="lua hljs"><code class="lua" data-origin="<pre><code class=&quot;lua&quot;>function testfunction()
   t = t/nil
end

if pcall(testfunction) then
   print(&quot;Success&quot;)
else
   print(&quot;Fail&quot;)
end
</code></pre>"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">testfunction</span><span class="hljs-params">()</span></span>
   t = t/<span class="hljs-keyword">nil</span>
<span class="hljs-keyword">end</span>

<span class="hljs-keyword">if</span> <span class="hljs-built_in">pcall</span>(testfunction) <span class="hljs-keyword">then</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"Success"</span>)
<span class="hljs-keyword">else</span>
   <span class="hljs-built_in">print</span>(<span class="hljs-string">"Fail"</span>)
<span class="hljs-keyword">end</span>
</code></pre><pre><code data-origin="<pre><code>Fail
</code></pre>">Fail
</code></pre><p>There is another function call xpcall that I will not cover and you can get information about it at <a href="https://www.tutorialspoint.com/lua/lua_error_handling.htm">tutorial point</a>.</p><h2 id="chapter-19:-credits"><a name="chapter-19:-credits" href="#chapter-19:-credits"></a>Chapter 19: Credits</h2><p>Credits so farâ€¦</p><h5 id="graphics"><a name="graphics" href="#graphics"></a>Graphics</h5><ul>
<li>Diarandor (Most of his art is the sample quest) You can find a license in the sample quest. Most or all of his work is under CC-BY-SA 4.0</li><li>Zane Kukta (My work seperate from the forest and dessert tileset is CC0) See sample quest license or refer to this <a href="https://github.com/solarus-games/solarus-sample-quest/issues/11">issue</a> if the license file has not been updated yet.</li><li>Christopho - His work in the sample quest and adapted work.</li><li>Neovyse - The Solarus logo.</li><li>Vlag - His adapted work on the hud.</li><li>Andrew Tyler - The minecraftia font.</li><li>Bertram - for his adapted work.</li><li>Yusuke Kamiyamane - For the Solarus editor icons. Yusuke Kamiyamane: <a href="http://p.yusukekamiyamane.com/">http://p.yusukekamiyamane.com/</a></li><li>gwes - The key, heart, and skull shield.</li><li>Reemax (Tuomo Untinen) - His skeleton scale to 32x32 and walking animation of Artisticdudeâ€™s sprite.</li><li>Artisticdude - His skeleton sprite</li><li>interdimensional_ <a href="http://interdimensional.space/">http://interdimensional.space/</a> - His beast sprite for the orc.</li><li>titi_son - For the mountain background image</li><li>Maxs - Animated Solarus logo</li><li>Blarumyrran - 32x32 treasure chests</li><li>Daniel Cook - Chest by Daniel Cook (Lostgarden.com)</li><li>Benjamin Pickhardt - Daniel Cook chest modification of Benjamin Pickhardt (hackcraft.de)</li><li>Hyptosis</li><li>Zabin </li><li>arikel </li><li>Viktor Hahn (Viktor.Hahn@web.de)</li><li>AlexCons</li><li>Calciumtrice - Farming Tool Icons by Calciumtrice</li><li>Stephen Challener (Redshrike) - Stephen Challener (Redshrike). Commissioned by OpenGameArt.org (<a href="http://opengameart.org">http://opengameart.org</a>)</li><li>Casper Nilsson</li><li>Daniel Eddeland </li><li>Johann CHARLOT</li><li>Skyler Robert Colladay</li><li>Lanea Zimmerman (AKA Sharm)</li><li>Stephen Challener (AKA Redshrike)</li><li>Charles Sanchez (AKA CharlesGabriel)</li><li>Manuel Riecke (AKA MrBeast)</li><li>Daniel Armstrong (AKA HughSpectrum)</li></ul><h5 id="audio"><a name="audio" href="#audio"></a>Audio</h5><ul>
<li>Diarandor (Most of the sounds and music in the sample quest.) CC-BY-SA 4.0</li><li>Zane Kukta (Any sound I added is CC0 like the timer sounds or the license I stated in the sound directory)</li><li>Eduardo DueÃ±as for his music pieces musics/village.ogg and sounds/secret.ogg</li><li>Eric Matyas, his music from soundimage was very useful in the creation of the chain quest.<br>â€œClosing In On the Loot_Loopingâ€<br>â€œHypnotic Orient_Loopingâ€<br>â€œMagical Getaway_Loopingâ€<br>â€œPride_v002â€<br>â€œThe 8 Bit Diggerâ€<br>â€œYoung Heroesâ€<br>by Eric Matyas<br>www.soundimage.org</li></ul><h5 id="scripting-credits"><a name="scripting-credits" href="#scripting-credits"></a>Scripting Credits</h5><ul>
<li>Christopho (All of his scripts, sample quest, and making the Solarus Game Engine) GPLv3</li><li>Zane Kukta (Most sample scripts)</li><li>Diarandor (Some script snippets from his assistance on the forum and sample quest)</li><li>llamazing (Some script snippets from his assistance on the forum)</li><li>Max (Some script snippets from his assistance on the forum)</li></ul><h5 id="writing-credits"><a name="writing-credits" href="#writing-credits"></a>Writing Credits</h5><ul>
<li>Christopho (Solarus documentation edited snippets)</li><li>Zefk (Zane Kukta) CC-BY-SA 3.0</li><li>Loren J. Miller <a href="https://www.rpglibrary.org/articles/storytelling/36plots.php">The 36 Plots</a> CC-BY-SA 3.0</li><li>Logan M: <a href="http://anime.stackexchange.com/questions/4926/what-are-the-differences-between-visual-novel-eroge-gal-game-and-a-dating-sim">Differences-between-visual-novel-eroge-gal-game-and-a-dating-sim</a> (CC-BY-SA 3.0)</li><li>Wikipedia <a href="https://en.wikipedia.org/wiki/List_of_genres">List_of_genres,</a> <a href="https://en.wikipedia.org/wiki/Quest_(video_gaming">video_gaming,</a>) <a href="https://en.wikipedia.org/wiki/Puzzle">Puzzle</a><a href="https://en.wikipedia.org/wiki/Glossary_of_video_game_terms#Retrogaming">Retrogaming</a>, <a href="https://en.wikipedia.org/wiki/Mode_7">Mode_7</a>, <a href="https://en.wikipedia.org/wiki/Sprite_%28computer_graphics%29">Sprite</a>,<br><a href="https://en.wikipedia.org/wiki/Pixel">Pixel</a>, <a href="https://en.wikipedia.org/wiki/Artificial_intelligence_(video_games">Artificial_intelligence</a>), <a href="https://en.wikipedia.org/wiki/Beat_%27em_up">Beat_em_up</a>, <a href="https://en.wikipedia.org/wiki/Central_processing_unit">CPU</a>, <a href="https://en.wikipedia.org/wiki/Spawning_%28video_gaming%29">Spawning</a>, CC-BY-SA 3.0</li></ul><h5 id="solarus-team"><a name="solarus-team" href="#solarus-team"></a>Solarus Team</h5><ul>
<li>Christopho</li><li>Neovyse</li><li>Diarandor</li><li>Maxs</li><li>Newlink</li><li>Renku</li><li>std::gregwar</li><li>Binbin</li></ul><h5 id="special-thanks"><a name="special-thanks" href="#special-thanks"></a>Special Thanks</h5><ul>
<li>wrightmat, I learned a lot from your scripts.</li><li>MetalZelda, your coding suggestions were very helpful.</li><li>llamazing, your assistance on the forum really helped make this book.</li><li>Max, thanks your help on the fourm.</li><li>Claire Moore (nate-devv), thanks for the Linux version of Solarus!</li></ul><h3 id="fairyolica-world-credits"><a name="fairyolica-world-credits" href="#fairyolica-world-credits"></a>Fairyolica World Credits</h3><p>I used the Fariryolica world tileset image as a preview. It is under CC-BY-SA 3.0.</p><h5 id="about:"><a name="about:" href="#about:"></a>About:</h5><p>1.The bullet â€œâ€¢â€ means it is a person and the way they want to be credited. </p><p>2.This is organized by license type. CC0, CC-BY 3.0, CC-BY-SA 3.0. </p><p>3.CC0 is not required for crediting, but I added them anyway. </p><p>4.Go into the original graphics for more detailed credits for each folder with related links. </p><p>5.Yes, all these licenses are compatible with each other, but the end result is CC-BY-SA 3.0 </p><p>and you must credit everyone if you use the Fariyolica.png. That means the CC0 people too.</p><p>6.I refined this list a little. 11-14-16 [November 14th, 2016]</p><h3 id="credit"><a name="credit" href="#credit"></a>Credit</h3><p>Copyright/Attribution Notice: </p><h5 id="[cc0-public-domain]"><a name="[cc0-public-domain]" href="#[cc0-public-domain]"></a>[CC0 Public Domain]</h5><ul>
<li><p>Jetrel <a href="http://www.frogatto.com/">http://www.frogatto.com/</a></p>
</li><li><p>Guido Bos</p>
</li><li><p>Ogrebane</p>
</li><li><p>Buch (Michele Bucelli) <a href="http://opengameart.org/users/buch">http://opengameart.org/users/buch</a></p>
</li><li><p>â€˜Hyptosisâ€™ <www.lorestrome.com> [Maybe a free copy fo your game]</www.lorestrome.com></p>
</li><li><p>artwork by Matthew Weekes (<a href="https://www.facebook.com/matwekpixel/">https://www.facebook.com/matwekpixel/</a>, <a href="https://twitter.com/matwekpixel">https://twitter.com/matwekpixel</a>), but copyright (abetusk).</p>
</li><li><p>CDmir</p>
</li><li><p>rubberduck</p>
</li><li><p>â€œRusspuppy <a href="http://russpuppy.com">http://russpuppy.com</a>â€œ [would love to hear about your game]</p>
</li></ul><h5 id="[cc-by-3.0-credit-by-their-terms]"><a name="[cc-by-3.0-credit-by-their-terms]" href="#[cc-by-3.0-credit-by-their-terms]"></a>[CC-BY 3.0 Credit by their terms]</h5><ul>
<li><p>Stephen Challener and the Open Surge team ( <a href="http://opensnc.sourceforge.net">http://opensnc.sourceforge.net</a>), hosted by OpenGameArt.org</p>
</li><li><p>Stephen Challener (Redshrike), hosted/commissioned by OpenGameArt.org</p>
</li><li><p>Leonard Pabin</p>
</li><li><p>Lionx_Dagger</p>
</li><li><p>Copyright 2008 Jordan Trudgett | <a href="http://jordan.trudgett.com/">http://jordan.trudgett.com/</a></p>
</li><li><p>knunery</p>
</li><li><p>Albert Manhattan - A redrawing of Surtâ€™s Classical Ruin Tiles (<a href="http://opengameart.org/content/classical-ruin-tiles">http://opengameart.org/content/classical-ruin-tiles</a>) at higher resolution.</p>
</li><li><p>Ivan Voirol</p>
</li><li><p>credit me as Buch (Michele Bucelli) and link back to my OGA profile page. <a href="http://opengameart.org/users/buch">http://opengameart.org/users/buch</a></p>
</li><li><p>Stephen Challener and the Open Surge team ( <a href="http://opensnc.sourceforge.net">http://opensnc.sourceforge.net</a>), hosted by OpenGameArt.org</p>
</li><li><p>Credit Buch for the original version of this set and link to his profile page. The portcullis are based on the iron bars in <a href="http://opengameart.org/content/lpc-dungeon-elements">http://opengameart.org/content/lpc-dungeon-elements</a>, by Sharm as contributed by William.Thompsonj.</p>
</li><li><p>Animated Castle Doors by Tuomo Untinen</p>
</li></ul><h5 id="[cc-by-sa-3.0-credit-by-their-terms-and-share-artwork-under-the-same-terms]"><a name="[cc-by-sa-3.0-credit-by-their-terms-and-share-artwork-under-the-same-terms]" href="#[cc-by-sa-3.0-credit-by-their-terms-and-share-artwork-under-the-same-terms]"></a>[CC-BY-SA 3.0 Credit by their terms and share artwork under the same terms]</h5><ul>
<li><p>interdimensional_ <a href="http://interdimensional.space/">http://interdimensional.space/</a></p>
</li><li><p>attribute this to Jerom. I just added some colors. Put Eiyeron or @Eiyeron.</p>
</li><li><p>DawnBringer (<a href="http://www.pixeljoint.com/forum/forum_posts.asp?TID=12795">http://www.pixeljoint.com/forum/forum_posts.asp?TID=12795</a>)</p>
</li><li><p>(PriorBlue [Marcus Ihde])</p>
</li><li><p>â€œ420 pixel art iconsâ€ from 7Souls (<a href="http://7soul1.deviantart.com/?rnrd=74632">http://7soul1.deviantart.com/?rnrd=74632</a>),</p>
</li><li><p>â€œ32x32 Fantasy Tilesetâ€ from Jerom (<a href="http://opengameart.org/content/32x32-fantasy-tileset">http://opengameart.org/content/32x32-fantasy-tileset</a>).</p>
</li><li><p>â€œCrawl Tilesâ€ from Dungeon Crawl Stone Soup (<a href="https://code.google.com/p/crawl-tiles/">https://code.google.com/p/crawl-tiles/</a>)</p>
</li><li><p>Zefk (Zane Kukta) <a href="http://zelzec-entertainment.weebly.com/">http://zelzec-entertainment.weebly.com/</a></p>
</li><li><p>Lanea Zimmerman (AKA Sharm)</p>
</li></ul>

<footer style="position:fixed; font-size:.8em; text-align:right; bottom:0px; margin-left:-25px; height:20px; width:100%;">generated by <a href="http://pad.haroopress.com" target="_blank">haroopad</a></footer>
</body>
</html>
